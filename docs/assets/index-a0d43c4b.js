(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(l){if(l.ep)return;l.ep=!0;const u=i(l);fetch(l.href,u)}})();function ar(){}const mb=t=>t;function Bp(t,e){for(const i in e)t[i]=e[i];return t}function Fw(t){return t()}function f0(){return Object.create(null)}function yA(t){t.forEach(Fw)}function hn(t){return typeof t=="function"}function Lr(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ih;function Xh(t,e){return ih||(ih=document.createElement("a")),ih.href=e,t===ih.href}function _b(t){return Object.keys(t).length===0}function Uw(t,...e){if(t==null)return ar;const i=t.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function ct(t,e,i){t.$$.on_destroy.push(Uw(e,i))}function qr(t,e,i,n){if(t){const l=Qw(t,e,i,n);return t[0](l)}}function Qw(t,e,i,n){return t[1]&&n?Bp(i.ctx.slice(),t[1](n(e))):i.ctx}function jr(t,e,i,n){if(t[2]&&n){const l=t[2](n(i));if(e.dirty===void 0)return l;if(typeof l=="object"){const u=[],f=Math.max(e.dirty.length,l.length);for(let a=0;a<f;a+=1)u[a]=e.dirty[a]|l[a];return u}return e.dirty|l}return e.dirty}function Jr(t,e,i,n,l,u){if(l){const f=Qw(e,i,n,u);t.p(f,l)}}function Yr(t){if(t.ctx.length>32){const e=[],i=t.ctx.length/32;for(let n=0;n<i;n++)e[n]=-1;return e}return-1}function Qr(t,e,i){return t.set(i),e}const Iw=typeof window<"u";let yb=Iw?()=>window.performance.now():()=>Date.now(),Tw=Iw?t=>requestAnimationFrame(t):ar;const dl=new Set;function Sw(t){dl.forEach(e=>{e.c(t)||(dl.delete(e),e.f())}),dl.size!==0&&Tw(Sw)}function wb(t){let e;return dl.size===0&&Tw(Sw),{promise:new Promise(i=>{dl.add(e={c:t,f:i})}),abort(){dl.delete(e)}}}function $e(t,e){t.appendChild(e)}function Fe(t,e,i){t.insertBefore(e,i||null)}function Ee(t){t.parentNode&&t.parentNode.removeChild(t)}function $i(t,e){for(let i=0;i<t.length;i+=1)t[i]&&t[i].d(e)}function it(t){return document.createElement(t)}function Dr(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function yr(t){return document.createTextNode(t)}function dt(){return yr(" ")}function hi(){return yr("")}function ki(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function ue(t,e,i){i==null?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function nh(t,e,i){e in t?t[e]=typeof t[e]=="boolean"&&i===""?!0:i:ue(t,e,i)}function vb(t){return Array.from(t.childNodes)}function Xi(t,e){e=""+e,t.data!==e&&(t.data=e)}function bt(t,e,i,n){i===null?t.style.removeProperty(e):t.style.setProperty(e,i,n?"important":"")}function Zh(t,e,i){for(let n=0;n<t.options.length;n+=1){const l=t.options[n];if(l.__value===e){l.selected=!0;return}}(!i||e!==void 0)&&(t.selectedIndex=-1)}function d0(t){const e=t.querySelector(":checked");return e&&e.__value}let sh;function Bb(){if(sh===void 0){sh=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{sh=!0}}return sh}function kw(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const n=it("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const l=Bb();let u;return l?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",u=ki(window,"message",f=>{f.source===n.contentWindow&&e()})):(n.src="about:blank",n.onload=()=>{u=ki(n.contentWindow,"resize",e),e()}),$e(t,n),()=>{(l||u&&n.contentWindow)&&u(),Ee(n)}}function Sr(t,e,i){t.classList[i?"add":"remove"](e)}function xb(t,e,{bubbles:i=!1,cancelable:n=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(t,i,n,e),l}let zc;function Sc(t){zc=t}function Xc(){if(!zc)throw new Error("Function called outside component initialization");return zc}function _a(t){Xc().$$.on_mount.push(t)}function wf(t){Xc().$$.on_destroy.push(t)}function Zc(){const t=Xc();return(e,i,{cancelable:n=!1}={})=>{const l=t.$$.callbacks[e];if(l){const u=xb(e,i,{cancelable:n});return l.slice().forEach(f=>{f.call(t,u)}),!u.defaultPrevented}return!0}}function _l(t,e){return Xc().$$.context.set(t,e),e}function Gi(t){return Xc().$$.context.get(t)}function yl(t,e){const i=t.$$.callbacks[e.type];i&&i.slice().forEach(n=>n.call(this,e))}const Al=[],zi=[];let pl=[];const xp=[],bb=Promise.resolve();let bp=!1;function Cb(){bp||(bp=!0,bb.then(Ve))}function Co(t){pl.push(t)}function Eo(t){xp.push(t)}const Ld=new Set;let Za=0;function Ve(){if(Za!==0)return;const t=zc;do{try{for(;Za<Al.length;){const e=Al[Za];Za++,Sc(e),Eb(e.$$)}}catch(e){throw Al.length=0,Za=0,e}for(Sc(null),Al.length=0,Za=0;zi.length;)zi.pop()();for(let e=0;e<pl.length;e+=1){const i=pl[e];Ld.has(i)||(Ld.add(i),i())}pl.length=0}while(Al.length);for(;xp.length;)xp.pop()();bp=!1,Ld.clear(),Sc(t)}function Eb(t){if(t.fragment!==null){t.update(),yA(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Co)}}function Fb(t){const e=[],i=[];pl.forEach(n=>t.indexOf(n)===-1?e.push(n):i.push(n)),i.forEach(n=>n()),pl=e}const Rh=new Set;let oa;function Rr(){oa={r:0,c:[],p:oa}}function Or(){oa.r||yA(oa.c),oa=oa.p}function Ce(t,e){t&&t.i&&(Rh.delete(t),t.i(e))}function De(t,e,i,n){if(t&&t.o){if(Rh.has(t))return;Rh.add(t),oa.c.push(()=>{Rh.delete(t),n&&(i&&t.d(1),n())}),t.o(e)}else n&&n()}const Mw=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Fo(t,e,i){const n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=i,i(t.$$.ctx[n]))}function Rt(t){t&&t.c()}function Ht(t,e,i,n){const{fragment:l,after_update:u}=t.$$;l&&l.m(e,i),n||Co(()=>{const f=t.$$.on_mount.map(Fw).filter(hn);t.$$.on_destroy?t.$$.on_destroy.push(...f):yA(f),t.$$.on_mount=[]}),u.forEach(Co)}function Pt(t,e){const i=t.$$;i.fragment!==null&&(Fb(i.after_update),yA(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function Ub(t,e){t.$$.dirty[0]===-1&&(Al.push(t),Cb(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Kr(t,e,i,n,l,u,f,a=[-1]){const w=zc;Sc(t);const C=t.$$={fragment:null,ctx:[],props:u,update:ar,not_equal:l,bound:f0(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(w?w.$$.context:[])),callbacks:f0(),dirty:a,skip_bound:!1,root:e.target||w.$$.root};f&&f(C.root);let F=!1;if(C.ctx=i?i(t,e.props||{},(E,U,...H)=>{const P=H.length?H[0]:U;return C.ctx&&l(C.ctx[E],C.ctx[E]=P)&&(!C.skip_bound&&C.bound[E]&&C.bound[E](P),F&&Ub(t,E)),U}):[],C.update(),F=!0,yA(C.before_update),C.fragment=n?n(C.ctx):!1,e.target){if(e.hydrate){const E=vb(e.target);C.fragment&&C.fragment.l(E),E.forEach(Ee)}else C.fragment&&C.fragment.c();e.intro&&Ce(t.$$.fragment),Ht(t,e.target,e.anchor,e.customElement),Ve()}Sc(w)}class Nr{$destroy(){Pt(this,1),this.$destroy=ar}$on(e,i){if(!hn(i))return ar;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(i),()=>{const l=n.indexOf(i);l!==-1&&n.splice(l,1)}}$set(e){this.$$set&&!_b(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var p0={},Hd={},Pd=34,cc=10,zd=13;function Dw(t){return new Function("d","return {"+t.map(function(e,i){return JSON.stringify(e)+": d["+i+'] || ""'}).join(",")+"}")}function Qb(t,e){var i=Dw(t);return function(n,l){return e(i(n),l,t)}}function g0(t){var e=Object.create(null),i=[];return t.forEach(function(n){for(var l in n)l in e||i.push(e[l]=l)}),i}function $n(t,e){var i=t+"",n=i.length;return n<e?new Array(e-n+1).join(0)+i:i}function Ib(t){return t<0?"-"+$n(-t,6):t>9999?"+"+$n(t,6):$n(t,4)}function Tb(t){var e=t.getUTCHours(),i=t.getUTCMinutes(),n=t.getUTCSeconds(),l=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Ib(t.getUTCFullYear())+"-"+$n(t.getUTCMonth()+1,2)+"-"+$n(t.getUTCDate(),2)+(l?"T"+$n(e,2)+":"+$n(i,2)+":"+$n(n,2)+"."+$n(l,3)+"Z":n?"T"+$n(e,2)+":"+$n(i,2)+":"+$n(n,2)+"Z":i||e?"T"+$n(e,2)+":"+$n(i,2)+"Z":"")}function Sb(t){var e=new RegExp('["'+t+`
\r]`),i=t.charCodeAt(0);function n(E,U){var H,P,V=l(E,function(j,Y){if(H)return H(j,Y-1);P=j,H=U?Qb(j,U):Dw(j)});return V.columns=P||[],V}function l(E,U){var H=[],P=E.length,V=0,j=0,Y,ee=P<=0,ce=!1;E.charCodeAt(P-1)===cc&&--P,E.charCodeAt(P-1)===zd&&--P;function Qe(){if(ee)return Hd;if(ce)return ce=!1,p0;var re,we=V,Ae;if(E.charCodeAt(we)===Pd){for(;V++<P&&E.charCodeAt(V)!==Pd||E.charCodeAt(++V)===Pd;);return(re=V)>=P?ee=!0:(Ae=E.charCodeAt(V++))===cc?ce=!0:Ae===zd&&(ce=!0,E.charCodeAt(V)===cc&&++V),E.slice(we+1,re-1).replace(/""/g,'"')}for(;V<P;){if((Ae=E.charCodeAt(re=V++))===cc)ce=!0;else if(Ae===zd)ce=!0,E.charCodeAt(V)===cc&&++V;else if(Ae!==i)continue;return E.slice(we,re)}return ee=!0,E.slice(we,P)}for(;(Y=Qe())!==Hd;){for(var le=[];Y!==p0&&Y!==Hd;)le.push(Y),Y=Qe();U&&(le=U(le,j++))==null||H.push(le)}return H}function u(E,U){return E.map(function(H){return U.map(function(P){return F(H[P])}).join(t)})}function f(E,U){return U==null&&(U=g0(E)),[U.map(F).join(t)].concat(u(E,U)).join(`
`)}function a(E,U){return U==null&&(U=g0(E)),u(E,U).join(`
`)}function w(E){return E.map(C).join(`
`)}function C(E){return E.map(F).join(t)}function F(E){return E==null?"":E instanceof Date?Tb(E):e.test(E+="")?'"'+E.replace(/"/g,'""')+'"':E}return{parse:n,parseRows:l,format:f,formatBody:a,formatRows:w,formatRow:C,formatValue:F}}var kb=Sb(","),Mb=kb.parse;function Db(t){for(var e in t){var i=t[e].trim(),n,l;if(!i)i=null;else if(i==="true")i=!0;else if(i==="false")i=!1;else if(i==="NaN")i=NaN;else if(!isNaN(n=+i))i=n;else if(l=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Lb&&l[4]&&!l[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i);else continue;t[e]=i}return t}const Lb=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Hb(t){return t}function Pb(t){if(t==null)return Hb;var e,i,n=t.scale[0],l=t.scale[1],u=t.translate[0],f=t.translate[1];return function(a,w){w||(e=i=0);var C=2,F=a.length,E=new Array(F);for(E[0]=(e+=a[0])*n+u,E[1]=(i+=a[1])*l+f;C<F;)E[C]=a[C],++C;return E}}function zb(t,e){for(var i,n=t.length,l=n-e;l<--n;)i=t[l],t[l++]=t[n],t[n]=i}function Rb(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(i){return m0(t,i)})}:m0(t,e)}function m0(t,e){var i=e.id,n=e.bbox,l=e.properties==null?{}:e.properties,u=Ob(t,e);return i==null&&n==null?{type:"Feature",properties:l,geometry:u}:n==null?{type:"Feature",id:i,properties:l,geometry:u}:{type:"Feature",id:i,bbox:n,properties:l,geometry:u}}function Ob(t,e){var i=Pb(t.transform),n=t.arcs;function l(F,E){E.length&&E.pop();for(var U=n[F<0?~F:F],H=0,P=U.length;H<P;++H)E.push(i(U[H],H));F<0&&zb(E,P)}function u(F){return i(F)}function f(F){for(var E=[],U=0,H=F.length;U<H;++U)l(F[U],E);return E.length<2&&E.push(E[0]),E}function a(F){for(var E=f(F);E.length<4;)E.push(E[0]);return E}function w(F){return F.map(a)}function C(F){var E=F.type,U;switch(E){case"GeometryCollection":return{type:E,geometries:F.geometries.map(C)};case"Point":U=u(F.coordinates);break;case"MultiPoint":U=F.coordinates.map(u);break;case"LineString":U=f(F.arcs);break;case"MultiLineString":U=F.arcs.map(f);break;case"Polygon":U=w(F.arcs);break;case"MultiPolygon":U=F.arcs.map(w);break;default:return null}return{type:E,coordinates:U}}return C(e)}function Kb(t,e){for(let i in t[e])document.documentElement.style.setProperty("--"+i,t[e][i])}function Nb(){let t=window.matchMedia("(prefers-reduced-motion: reduce)");return!(!t||t.matches)}async function Vb(t){let i=await(await fetch(t)).text();return await Mb(i,Db)}async function Gb(t,e){let n=await(await fetch(t)).json();return await Rb(n,e)}function Xb(t,e,i){let n,l=!1,u=1;for(;l==!1;)t<=e[u]?(n=i[u-1],l=!0):u++;return n||"lightgrey"}function Zb(t){let e=t.length;return[t[0],t[Math.floor(e*.2)],t[Math.floor(e*.4)],t[Math.floor(e*.6)],t[Math.floor(e*.8)],t[e-1]]}const xr={light:{text:"#222",muted:"#777",pale:"#f0f0f0",background:"#fff"},dark:{text:"#fff",muted:"#bbb",pale:"#333",background:"#222"},lightblue:{text:"#206095",muted:"#707070",pale:"#f0f0f0",background:"rgb(188, 207, 222)"}},aa={seq:["rgb(234, 236, 177)","rgb(169, 216, 145)","rgb(0, 167, 186)","rgb(0, 78, 166)","rgb(0, 13, 84)"],cat:["#206095","#A8BD3A","#003C57","#27A0CC","#118C7B","#F66068","#746CB1","#22D0B6","lightgrey"]},_0={density:"sq.km",age_med:"years"};function Wb(t){let e,i;return{c(){e=it("footer"),i=it("div"),i.innerHTML=`<div class="license svelte-1g3ohfl">All content is available under the
			<a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" class="external-link svelte-1g3ohfl" target="_blank" rel="noopener">Open Government Licence v3.0</a>, 
			except where otherwise stated</div>`,ue(i,"class","col-wide"),ue(i,"data-analytics","footer"),bt(e,"--text",xr[t[0]].text),bt(e,"--muted",xr[t[0]].muted),bt(e,"--pale",xr[t[0]].pale),ue(e,"class","svelte-1g3ohfl")},m(n,l){Fe(n,e,l),$e(e,i)},p(n,[l]){l&1&&bt(e,"--text",xr[n[0]].text),l&1&&bt(e,"--muted",xr[n[0]].muted),l&1&&bt(e,"--pale",xr[n[0]].pale)},i:ar,o:ar,d(n){n&&Ee(e)}}}function qb(t,e,i){let{theme:n=Gi("theme")}=e;return t.$$set=l=>{"theme"in l&&i(0,n=l.theme)},[n]}class jb extends Nr{constructor(e){super(),Kr(this,e,qb,Wb,Lr,{theme:0})}}function Jb(t){let e,i,n,l,u;const f=t[8].default,a=qr(f,t,t[7],null);return{c(){e=it("header"),i=it("div"),n=it("div"),a&&a.c(),Sr(n,"center",t[2]),ue(i,"class","v-padded col-wide middle svelte-19u0sv3"),bt(i,"position","relative"),Sr(i,"short",t[3]),Sr(i,"height-full",!t[3]),ue(e,"style",l="color: "+xr[t[0]].text+"; background-color: "+(t[1]?t[1]:xr[t[0]].background)+"; "+t[4]),ue(e,"class","svelte-19u0sv3"),Sr(e,"short",t[3])},m(w,C){Fe(w,e,C),$e(e,i),$e(i,n),a&&a.m(n,null),u=!0},p(w,[C]){a&&a.p&&(!u||C&128)&&Jr(a,f,w,w[7],u?jr(f,w[7],C,null):Yr(w[7]),null),(!u||C&4)&&Sr(n,"center",w[2]),(!u||C&8)&&Sr(i,"short",w[3]),(!u||C&8)&&Sr(i,"height-full",!w[3]),(!u||C&19&&l!==(l="color: "+xr[w[0]].text+"; background-color: "+(w[1]?w[1]:xr[w[0]].background)+"; "+w[4]))&&ue(e,"style",l),(!u||C&8)&&Sr(e,"short",w[3])},i(w){u||(Ce(a,w),u=!0)},o(w){De(a,w),u=!1},d(w){w&&Ee(e),a&&a.d(w)}}}function Yb(t,e,i){let{$$slots:n={},$$scope:l}=e,{theme:u=Gi("theme")}=e,{bgimage:f=null}=e,{bgcolor:a=null}=e,{bgfixed:w=!1}=e,{center:C=!0}=e,{short:F=!1}=e,E="";return f?E+=`background-image: url(${f});`:E+="background-image: none;",w&&(E+=" background-attachment: fixed;"),t.$$set=U=>{"theme"in U&&i(0,u=U.theme),"bgimage"in U&&i(5,f=U.bgimage),"bgcolor"in U&&i(1,a=U.bgcolor),"bgfixed"in U&&i(6,w=U.bgfixed),"center"in U&&i(2,C=U.center),"short"in U&&i(3,F=U.short),"$$scope"in U&&i(7,l=U.$$scope)},[u,a,C,F,E,f,w,l,n]}class $b extends Nr{constructor(e){super(),Kr(this,e,Yb,Jb,Lr,{theme:0,bgimage:5,bgcolor:1,bgfixed:6,center:2,short:3})}}function e2(t){let e,i,n;const l=t[2].default,u=qr(l,t,t[1],null);return{c(){e=it("section"),i=it("div"),u&&u.c(),ue(i,"class","col-medium"),bt(e,"color",xr[t[0]].text),bt(e,"background-color",xr[t[0]].background)},m(f,a){Fe(f,e,a),$e(e,i),u&&u.m(i,null),n=!0},p(f,[a]){u&&u.p&&(!n||a&2)&&Jr(u,l,f,f[1],n?jr(l,f[1],a,null):Yr(f[1]),null),(!n||a&1)&&bt(e,"color",xr[f[0]].text),(!n||a&1)&&bt(e,"background-color",xr[f[0]].background)},i(f){n||(Ce(u,f),n=!0)},o(f){De(u,f),n=!1},d(f){f&&Ee(e),u&&u.d(f)}}}function t2(t,e,i){let{$$slots:n={},$$scope:l}=e,{theme:u=Gi("theme")}=e;return t.$$set=f=>{"theme"in f&&i(0,u=f.theme),"$$scope"in f&&i(1,l=f.$$scope)},[u,l,n]}class PA extends Nr{constructor(e){super(),Kr(this,e,t2,e2,Lr,{theme:0})}}var r2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cp(t,e,i){var n,l,u,f,a;e==null&&(e=100);function w(){var F=Date.now()-f;F<e&&F>=0?n=setTimeout(w,e-F):(n=null,i||(a=t.apply(u,l),u=l=null))}var C=function(){u=this,l=arguments,f=Date.now();var F=i&&!n;return n||(n=setTimeout(w,e)),F&&(a=t.apply(u,l),u=l=null),a};return C.clear=function(){n&&(clearTimeout(n),n=null)},C.flush=function(){n&&(a=t.apply(u,l),u=l=null,clearTimeout(n),n=null)},C}Cp.debounce=Cp;var i2=Cp;function n2(t){let e,i,n,l,u;const f=t[13].default,a=qr(f,t,t[12],null);return{c(){e=it("figure"),i=it("div"),n=it("div"),a&&a.c(),ue(n,"class","grid"+t[5]+" svelte-15qq8ff"),bt(n,"grid-gap",t[8]),bt(n,"min-height",t[7]),ue(i,"class",l="col-"+t[1]+" svelte-15qq8ff"),bt(e,"color",xr[t[0]].text),bt(e,"background-color",xr[t[0]].background)},m(w,C){Fe(w,e,C),$e(e,i),$e(i,n),a&&a.m(n,null),u=!0},p(w,C){a&&a.p&&(!u||C&4096)&&Jr(a,f,w,w[12],u?jr(f,w[12],C,null):Yr(w[12]),null),(!u||C&2&&l!==(l="col-"+w[1]+" svelte-15qq8ff"))&&ue(i,"class",l),(!u||C&1)&&bt(e,"color",xr[w[0]].text),(!u||C&1)&&bt(e,"background-color",xr[w[0]].background)},i(w){u||(Ce(a,w),u=!0)},o(w){De(a,w),u=!1},d(w){w&&Ee(e),a&&a.d(w)}}}function s2(t){let e,i,n,l,u,f;const a=t[13].default,w=qr(a,t,t[12],null);return{c(){e=it("figure"),i=it("div"),n=it("div"),w&&w.c(),ue(n,"class","grid-ms svelte-15qq8ff"),Co(()=>t[15].call(n)),ue(i,"class",u="col-"+t[1]+" svelte-15qq8ff"),bt(e,"color",xr[t[0]].text),bt(e,"background-color",xr[t[0]].background)},m(C,F){Fe(C,e,F),$e(e,i),$e(i,n),w&&w.m(n,null),t[14](n),l=kw(n,t[15].bind(n)),f=!0},p(C,F){w&&w.p&&(!f||F&4096)&&Jr(w,a,C,C[12],f?jr(a,C[12],F,null):Yr(C[12]),null),(!f||F&2&&u!==(u="col-"+C[1]+" svelte-15qq8ff"))&&ue(i,"class",u),(!f||F&1)&&bt(e,"color",xr[C[0]].text),(!f||F&1)&&bt(e,"background-color",xr[C[0]].background)},i(C){f||(Ce(w,C),f=!0)},o(C){De(w,C),f=!1},d(C){C&&Ee(e),w&&w.d(C),t[14](null),l()}}}function y0(t){let e,i,n;return{c(){e=it("caption"),i=it("div"),n=it("div"),ue(n,"class","caption"),ue(i,"class","col-medium"),bt(e,"color",xr[t[0]].text),bt(e,"background-color",xr[t[0]].background)},m(l,u){Fe(l,e,u),$e(e,i),$e(i,n),n.innerHTML=t[2]},p(l,u){u&4&&(n.innerHTML=l[2]),u&1&&bt(e,"color",xr[l[0]].text),u&1&&bt(e,"background-color",xr[l[0]].background)},d(l){l&&Ee(e)}}}function A2(t){let e,i,n,l,u;const f=[s2,n2],a=[];function w(F,E){return F[6]?0:1}e=w(t),i=a[e]=f[e](t);let C=t[2]&&y0(t);return{c(){i.c(),n=dt(),C&&C.c(),l=hi()},m(F,E){a[e].m(F,E),Fe(F,n,E),C&&C.m(F,E),Fe(F,l,E),u=!0},p(F,[E]){i.p(F,E),F[2]?C?C.p(F,E):(C=y0(F),C.c(),C.m(l.parentNode,l)):C&&(C.d(1),C=null)},i(F){u||(Ce(i),u=!0)},o(F){De(i),u=!1},d(F){a[e].d(F),F&&Ee(n),C&&C.d(F),F&&Ee(l)}}}function o2(t,e,i){let{$$slots:n={},$$scope:l}=e;const u={narrow:200,medium:300,wide:500};let{theme:f=Gi("theme")}=e,{col:a="medium"}=e,{grid:w=null}=e,{caption:C=null}=e,{height:F=200}=e,{gap:E=12}=e,U=w?` grid-${w}`:"",H=!("grid-gap"in document.body.style),P=Number.isNaN(F)?F:F+"px",V=Number.isNaN(E)?E:E+"px";const j=w&&u[w]?u[w]:null;let Y,ee,ce,Qe,le;H&&_a(()=>{we()});const re=i2.debounce(we,200);function we(){if(ce&&!Qe){let se=[];ce.childNodes.forEach(Re=>{Re.nodeName=="DIV"&&se.push(Re)}),Qe=se}le=Qe.length,ee=!j||Y<=j?1:Math.floor(Y/j),Ae()}function Ae(){let se=Math.ceil(le/ee)>1?`-ms-grid-rows: 1fr (${E}px 1fr)[${Math.ceil(le/ee)-1}]; grid-template-rows: 1fr repeat(${Math.ceil(le/ee)-1}, ${E}px 1fr);`:"-ms-grid-rows: 1fr; grid-template-rows: 1fr;",Be=ee>1?`-ms-grid-columns: 1fr (${E}px 1fr)[${ee-1}]; grid-template-columns: 1fr repeat(${ee-1}, ${E}px 1fr);`:"";i(4,ce.style.cssText=se+Be,ce),Qe.forEach((Re,ht)=>{let _t=ht%ee*2+1,Me=Math.floor(ht/ee)*2+1;Re.style.cssText=`-ms-grid-column: ${_t}; -ms-grid-row: ${Me}; grid-column: ${_t}; grid-row: ${Me}; min-height: ${P};`})}function R(se){zi[se?"unshift":"push"](()=>{ce=se,i(4,ce)})}function ie(){Y=this.clientWidth,i(3,Y)}return t.$$set=se=>{"theme"in se&&i(0,f=se.theme),"col"in se&&i(1,a=se.col),"grid"in se&&i(9,w=se.grid),"caption"in se&&i(2,C=se.caption),"height"in se&&i(10,F=se.height),"gap"in se&&i(11,E=se.gap),"$$scope"in se&&i(12,l=se.$$scope)},t.$$.update=()=>{t.$$.dirty&8&&H&&(j||Y)&&re()},[f,a,C,Y,ce,U,H,P,V,w,F,E,l,n,R,ie]}class og extends Nr{constructor(e){super(),Kr(this,e,o2,A2,Lr,{theme:0,col:1,grid:9,caption:2,height:10,gap:11})}}const{window:Lw}=Mw,a2=t=>({}),w0=t=>({}),l2=t=>({}),v0=t=>({});function c2(t){let e,i,n,l,u,f,a,w;Co(t[19]);const C=t[18].background,F=qr(C,t,t[17],v0),E=t[18].foreground,U=qr(E,t,t[17],w0);return{c(){e=it("svelte-scroller-outer"),i=it("svelte-scroller-background-container"),n=it("svelte-scroller-background"),F&&F.c(),l=dt(),u=it("svelte-scroller-foreground"),U&&U.c(),nh(n,"class","svelte-1wwrq8q"),nh(i,"class","background-container svelte-1wwrq8q"),nh(u,"class","svelte-1wwrq8q"),nh(e,"class","svelte-1wwrq8q"),Sr(e,"splitscreen",t[0])},m(H,P){Fe(H,e,P),$e(e,i),$e(i,n),F&&F.m(n,null),t[20](n),t[21](i),$e(e,l),$e(e,u),U&&U.m(u,null),t[22](u),t[23](e),f=!0,a||(w=ki(Lw,"resize",t[19]),a=!0)},p(H,P){F&&F.p&&(!f||P[0]&131072)&&Jr(F,C,H,H[17],f?jr(C,H[17],P,l2):Yr(H[17]),v0),U&&U.p&&(!f||P[0]&131072)&&Jr(U,E,H,H[17],f?jr(E,H[17],P,a2):Yr(H[17]),w0),(!f||P[0]&1)&&Sr(e,"splitscreen",H[0])},i(H){f||(Ce(F,H),Ce(U,H),f=!0)},o(H){De(F,H),De(U,H),f=!1},d(H){H&&Ee(e),F&&F.d(H),t[20](null),t[21](null),U&&U.d(H),t[22](null),t[23](null),a=!1,w()}}}const pA=[];let Wh;if(typeof window<"u"){const t=()=>pA.forEach(e=>e());window.addEventListener("scroll",t),window.addEventListener("resize",t)}if(typeof IntersectionObserver<"u"){const t=new Map,e=new IntersectionObserver((i,n)=>{i.forEach(l=>{const u=t.get(l.target),f=pA.indexOf(u);l.isIntersecting?f===-1&&pA.push(u):(u(),f!==-1&&pA.splice(f,1))})},{rootMargin:"400px 0px"});Wh={add:({outer:i,update:n})=>{const{top:l,bottom:u}=i.getBoundingClientRect();l<window.innerHeight&&u>0&&pA.push(n),t.set(i,n),e.observe(i)},remove:({outer:i,update:n})=>{const l=pA.indexOf(n);l!==-1&&pA.splice(l,1),t.delete(i),e.unobserve(i)}}}else Wh={add:({update:t})=>{pA.push(t)},remove:({update:t})=>{const e=pA.indexOf(t);e!==-1&&pA.splice(e,1)}};function u2(t,e,i){let n,l,u,{$$slots:f={},$$scope:a}=e,{top:w=0}=e,{bottom:C=1}=e,{threshold:F=.5}=e,{query:E="section"}=e,{parallax:U=!1}=e,{index:H=0}=e,{count:P=0}=e,{offset:V=0}=e,{progress:j=0}=e,{visible:Y=!1}=e,{splitscreen:ee=!1}=e,{id:ce=null}=e,Qe,le,re,we,Ae,R=0,ie,se,Be=1;_a(()=>{Ae=re.querySelectorAll(E),i(7,P=Ae.length),ht();const He={outer:Qe,update:ht};return Wh.add(He),()=>Wh.remove(He)});function Re(){if(le){let He=`position: ${ie?"fixed":"absolute"}; top: 0; transform: translate(0, ${se}px); width: ${Be}px; z-index: 1;`;i(3,le.style.cssText=He,le)}}function ht(){if(!re)return;const He=Qe.getBoundingClientRect();He.left,Be=He.right-He.left;const tt=re.getBoundingClientRect(),Je=we.getBoundingClientRect();i(10,Y=tt.top<R&&tt.bottom>0);const ut=tt.bottom-tt.top,At=Je.bottom-Je.top,Et=l-n;for(i(9,j=(n-tt.top)/(ut-Et)),j<=0?(se=0,ie&&(ie=!1,Re())):j>=1?(se=U?ut-At:ut-Et,ie&&(ie=!1,Re())):(se=U?Math.round(n-j*(At-Et)):n,ie||(ie=!0,Re())),i(6,H=0);H<Ae.length;i(6,H+=1)){const qt=Ae[H],{top:Tt}=qt.getBoundingClientRect(),tr=Ae[H+1],ve=tr?tr.getBoundingClientRect().top:tt.bottom;if(i(8,V=(u-Tt)/(ve-Tt)),i(11,ce=qt.dataset.id?qt.dataset.id:null),ve>=u)break}}function _t(){i(1,R=Lw.innerHeight)}function Me(He){zi[He?"unshift":"push"](()=>{we=He,i(5,we)})}function at(He){zi[He?"unshift":"push"](()=>{le=He,i(3,le)})}function wt(He){zi[He?"unshift":"push"](()=>{re=He,i(4,re)})}function nt(He){zi[He?"unshift":"push"](()=>{Qe=He,i(2,Qe)})}return t.$$set=He=>{"top"in He&&i(12,w=He.top),"bottom"in He&&i(13,C=He.bottom),"threshold"in He&&i(14,F=He.threshold),"query"in He&&i(15,E=He.query),"parallax"in He&&i(16,U=He.parallax),"index"in He&&i(6,H=He.index),"count"in He&&i(7,P=He.count),"offset"in He&&i(8,V=He.offset),"progress"in He&&i(9,j=He.progress),"visible"in He&&i(10,Y=He.visible),"splitscreen"in He&&i(0,ee=He.splitscreen),"id"in He&&i(11,ce=He.id),"$$scope"in He&&i(17,a=He.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&4098&&(n=Math.round(w*R)),t.$$.dirty[0]&8194&&(l=Math.round(C*R)),t.$$.dirty[0]&16386&&(u=Math.round(F*R)),t.$$.dirty[0]&94208&&ht()},[ee,R,Qe,le,re,we,H,P,V,j,Y,ce,w,C,F,E,U,a,f,_t,Me,at,wt,nt]}class Hw extends Nr{constructor(e){super(),Kr(this,e,u2,c2,Lr,{top:12,bottom:13,threshold:14,query:15,parallax:16,index:6,count:7,offset:8,progress:9,visible:10,splitscreen:0,id:11},null,[-1,-1])}}function h2(t){let e,i,n;const l=t[5].default,u=qr(l,t,t[4],null);return{c(){e=it("section"),i=it("div"),u&&u.c(),ue(i,"class","middle svelte-1odf9sx"),Sr(i,"center",t[1]),Sr(i,"col-medium",!t[2]),Sr(i,"col-wide",t[2]),Sr(i,"height-full",!t[3]),Sr(i,"short",t[3]),bt(e,"color",xr[t[0]].text),bt(e,"background-color",xr[t[0]].background),ue(e,"class","svelte-1odf9sx")},m(f,a){Fe(f,e,a),$e(e,i),u&&u.m(i,null),n=!0},p(f,[a]){u&&u.p&&(!n||a&16)&&Jr(u,l,f,f[4],n?jr(l,f[4],a,null):Yr(f[4]),null),(!n||a&2)&&Sr(i,"center",f[1]),(!n||a&4)&&Sr(i,"col-medium",!f[2]),(!n||a&4)&&Sr(i,"col-wide",f[2]),(!n||a&8)&&Sr(i,"height-full",!f[3]),(!n||a&8)&&Sr(i,"short",f[3]),(!n||a&1)&&bt(e,"color",xr[f[0]].text),(!n||a&1)&&bt(e,"background-color",xr[f[0]].background)},i(f){n||(Ce(u,f),n=!0)},o(f){De(u,f),n=!1},d(f){f&&Ee(e),u&&u.d(f)}}}function f2(t,e,i){let{$$slots:n={},$$scope:l}=e,{theme:u=Gi("theme")}=e,{center:f=!0}=e,{wide:a=!1}=e,{short:w=!1}=e;return t.$$set=C=>{"theme"in C&&i(0,u=C.theme),"center"in C&&i(1,f=C.center),"wide"in C&&i(2,a=C.wide),"short"in C&&i(3,w=C.short),"$$scope"in C&&i(4,l=C.$$scope)},[u,f,a,w,l,n]}class d2 extends Nr{constructor(e){super(),Kr(this,e,f2,h2,Lr,{theme:0,center:1,wide:2,short:3})}}function p2(t){let e;return{c(){e=it("hr"),bt(e,"color",xr[t[0]].muted),bt(e,"border","none"),ue(e,"class","svelte-1l2to1w")},m(i,n){Fe(i,e,n)},p(i,n){n&1&&bt(e,"color",xr[i[0]].muted)},d(i){i&&Ee(e)}}}function g2(t){let e;return{c(){e=it("hr"),bt(e,"color",xr[t[0]].muted),ue(e,"class","svelte-1l2to1w")},m(i,n){Fe(i,e,n)},p(i,n){n&1&&bt(e,"color",xr[i[0]].muted)},d(i){i&&Ee(e)}}}function m2(t){let e,i;function n(f,a){return f[1]?g2:p2}let l=n(t),u=l(t);return{c(){e=it("section"),i=it("div"),u.c(),ue(i,"class","col-medium"),bt(e,"color",xr[t[0]].text),bt(e,"background-color",xr[t[0]].background)},m(f,a){Fe(f,e,a),$e(e,i),u.m(i,null)},p(f,[a]){l===(l=n(f))&&u?u.p(f,a):(u.d(1),u=l(f),u&&(u.c(),u.m(i,null))),a&1&&bt(e,"color",xr[f[0]].text),a&1&&bt(e,"background-color",xr[f[0]].background)},i:ar,o:ar,d(f){f&&Ee(e),u.d()}}}function _2(t,e,i){let{theme:n=Gi("theme")}=e,{hr:l=!0}=e;return t.$$set=u=>{"theme"in u&&i(0,n=u.theme),"hr"in u&&i(1,l=u.hr)},[n,l]}class Wa extends Nr{constructor(e){super(),Kr(this,e,_2,m2,Lr,{theme:0,hr:1})}}function y2(t){let e,i,n,l,u,f,a;return{c(){e=it("div"),i=it("input"),n=dt(),l=it("label"),u=yr(t[2]),ue(i,"id",t[1]),ue(i,"type","checkbox"),ue(i,"class","switch-input svelte-1cv1tgq"),ue(i,"tabindex","0"),ue(l,"for",t[1]),ue(l,"class","switch-label svelte-1cv1tgq"),Sr(l,"mono",t[3]),ue(e,"class","switch svelte-1cv1tgq")},m(w,C){Fe(w,e,C),$e(e,i),i.checked=t[0],$e(e,n),$e(e,l),$e(l,u),f||(a=ki(i,"change",t[4]),f=!0)},p(w,[C]){C&2&&ue(i,"id",w[1]),C&1&&(i.checked=w[0]),C&4&&Xi(u,w[2]),C&2&&ue(l,"for",w[1]),C&8&&Sr(l,"mono",w[3])},i:ar,o:ar,d(w){w&&Ee(e),f=!1,a()}}}function w2(t,e,i){let{id:n="switch"}=e,{label:l="Label"}=e,{mono:u=!1}=e,{checked:f}=e;function a(){f=this.checked,i(0,f)}return t.$$set=w=>{"id"in w&&i(1,n=w.id),"label"in w&&i(2,l=w.label),"mono"in w&&i(3,u=w.mono),"checked"in w&&i(0,f=w.checked)},[f,n,l,u,a]}class v2 extends Nr{constructor(e){super(),Kr(this,e,w2,y2,Lr,{id:1,label:2,mono:3,checked:0})}}function B2(t){let e,i,n;const l=t[4].default,u=qr(l,t,t[3],null);return{c(){e=it("img"),u&&u.c(),Xh(e.src,i="./img/scroll-down-"+t[0]+".svg")||ue(e,"src",i),ue(e,"class","arrow left svelte-yg8vyd"),ue(e,"alt",""),ue(e,"aria-hidden","true"),Sr(e,"bounce",t[1])},m(f,a){Fe(f,e,a),u&&u.m(f,a),n=!0},p(f,a){(!n||a&1&&!Xh(e.src,i="./img/scroll-down-"+f[0]+".svg"))&&ue(e,"src",i),(!n||a&2)&&Sr(e,"bounce",f[1]),u&&u.p&&(!n||a&8)&&Jr(u,l,f,f[3],n?jr(l,f[3],a,null):Yr(f[3]),null)},i(f){n||(Ce(u,f),n=!0)},o(f){De(u,f),n=!1},d(f){f&&Ee(e),u&&u.d(f)}}}function x2(t){let e,i,n,l,u;const f=t[4].default,a=qr(f,t,t[3],null);return{c(){a&&a.c(),e=it("br"),i=dt(),n=it("img"),Xh(n.src,l="./img/scroll-down-"+t[0]+".svg")||ue(n,"src",l),ue(n,"class","arrow svelte-yg8vyd"),ue(n,"alt",""),ue(n,"aria-hidden","true"),Sr(n,"bounce",t[1])},m(w,C){a&&a.m(w,C),Fe(w,e,C),Fe(w,i,C),Fe(w,n,C),u=!0},p(w,C){a&&a.p&&(!u||C&8)&&Jr(a,f,w,w[3],u?jr(f,w[3],C,null):Yr(w[3]),null),(!u||C&1&&!Xh(n.src,l="./img/scroll-down-"+w[0]+".svg"))&&ue(n,"src",l),(!u||C&2)&&Sr(n,"bounce",w[1])},i(w){u||(Ce(a,w),u=!0)},o(w){De(a,w),u=!1},d(w){a&&a.d(w),w&&Ee(e),w&&Ee(i),w&&Ee(n)}}}function b2(t){let e,i,n,l;const u=[x2,B2],f=[];function a(w,C){return w[2]?0:1}return e=a(t),i=f[e]=u[e](t),{c(){i.c(),n=hi()},m(w,C){f[e].m(w,C),Fe(w,n,C),l=!0},p(w,[C]){let F=e;e=a(w),e===F?f[e].p(w,C):(Rr(),De(f[F],1,1,()=>{f[F]=null}),Or(),i=f[e],i?i.p(w,C):(i=f[e]=u[e](w),i.c()),Ce(i,1),i.m(n.parentNode,n))},i(w){l||(Ce(i),l=!0)},o(w){De(i),l=!1},d(w){f[e].d(w),w&&Ee(n)}}}function C2(t,e,i){let{$$slots:n={},$$scope:l}=e,{color:u="black"}=e,{animation:f=!0}=e,{center:a=!0}=e;return u=["black","white"].includes(u)?u:"black",t.$$set=C=>{"color"in C&&i(0,u=C.color),"animation"in C&&i(1,f=C.animation),"center"in C&&i(2,a=C.center),"$$scope"in C&&i(3,l=C.$$scope)},[u,f,a,l,n]}class E2 extends Nr{constructor(e){super(),Kr(this,e,C2,b2,Lr,{color:0,animation:1,center:2})}}var F2={rgb2hsl:Wc,rgb2hsv:vf,rgb2hwb:qc,rgb2cmyk:jc,rgb2keyword:Jc,rgb2xyz:ag,rgb2lab:lg,rgb2lch:U2,hsl2rgb:Bf,hsl2hsv:Q2,hsl2hwb:I2,hsl2cmyk:T2,hsl2keyword:S2,hsv2rgb:xf,hsv2hsl:k2,hsv2hwb:M2,hsv2cmyk:D2,hsv2keyword:L2,hwb2rgb:Yc,hwb2hsl:H2,hwb2hsv:P2,hwb2cmyk:z2,hwb2keyword:R2,cmyk2rgb:$c,cmyk2hsl:O2,cmyk2hsv:K2,cmyk2hwb:N2,cmyk2keyword:V2,keyword2rgb:ya,keyword2hsl:W2,keyword2hsv:q2,keyword2hwb:j2,keyword2cmyk:J2,keyword2lab:Y2,keyword2xyz:$2,xyz2rgb:Pw,xyz2lab:zw,xyz2lch:G2,lab2xyz:cg,lab2rgb:Rw,lab2lch:ug,lch2lab:hg,lch2xyz:X2,lch2rgb:Z2};function Wc(t){var e=t[0]/255,i=t[1]/255,n=t[2]/255,l=Math.min(e,i,n),u=Math.max(e,i,n),f=u-l,a,w,C;return u==l?a=0:e==u?a=(i-n)/f:i==u?a=2+(n-e)/f:n==u&&(a=4+(e-i)/f),a=Math.min(a*60,360),a<0&&(a+=360),C=(l+u)/2,u==l?w=0:C<=.5?w=f/(u+l):w=f/(2-u-l),[a,w*100,C*100]}function vf(t){var e=t[0],i=t[1],n=t[2],l=Math.min(e,i,n),u=Math.max(e,i,n),f=u-l,a,w,C;return u==0?w=0:w=f/u*1e3/10,u==l?a=0:e==u?a=(i-n)/f:i==u?a=2+(n-e)/f:n==u&&(a=4+(e-i)/f),a=Math.min(a*60,360),a<0&&(a+=360),C=u/255*1e3/10,[a,w,C]}function qc(t){var e=t[0],i=t[1],u=t[2],n=Wc(t)[0],l=1/255*Math.min(e,Math.min(i,u)),u=1-1/255*Math.max(e,Math.max(i,u));return[n,l*100,u*100]}function jc(t){var e=t[0]/255,i=t[1]/255,n=t[2]/255,l,u,f,a;return a=Math.min(1-e,1-i,1-n),l=(1-e-a)/(1-a)||0,u=(1-i-a)/(1-a)||0,f=(1-n-a)/(1-a)||0,[l*100,u*100,f*100,a*100]}function Jc(t){return Ow[JSON.stringify(t)]}function ag(t){var e=t[0]/255,i=t[1]/255,n=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var l=e*.4124+i*.3576+n*.1805,u=e*.2126+i*.7152+n*.0722,f=e*.0193+i*.1192+n*.9505;return[l*100,u*100,f*100]}function lg(t){var e=ag(t),i=e[0],n=e[1],l=e[2],u,f,a;return i/=95.047,n/=100,l/=108.883,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,l=l>.008856?Math.pow(l,1/3):7.787*l+16/116,u=116*n-16,f=500*(i-n),a=200*(n-l),[u,f,a]}function U2(t){return ug(lg(t))}function Bf(t){var e=t[0]/360,i=t[1]/100,n=t[2]/100,l,u,f,a,w;if(i==0)return w=n*255,[w,w,w];n<.5?u=n*(1+i):u=n+i-n*i,l=2*n-u,a=[0,0,0];for(var C=0;C<3;C++)f=e+1/3*-(C-1),f<0&&f++,f>1&&f--,6*f<1?w=l+(u-l)*6*f:2*f<1?w=u:3*f<2?w=l+(u-l)*(2/3-f)*6:w=l,a[C]=w*255;return a}function Q2(t){var e=t[0],i=t[1]/100,n=t[2]/100,l,u;return n===0?[0,0,0]:(n*=2,i*=n<=1?n:2-n,u=(n+i)/2,l=2*i/(n+i),[e,l*100,u*100])}function I2(t){return qc(Bf(t))}function T2(t){return jc(Bf(t))}function S2(t){return Jc(Bf(t))}function xf(t){var e=t[0]/60,i=t[1]/100,w=t[2]/100,n=Math.floor(e)%6,l=e-Math.floor(e),u=255*w*(1-i),f=255*w*(1-i*l),a=255*w*(1-i*(1-l)),w=255*w;switch(n){case 0:return[w,a,u];case 1:return[f,w,u];case 2:return[u,w,a];case 3:return[u,f,w];case 4:return[a,u,w];case 5:return[w,u,f]}}function k2(t){var e=t[0],i=t[1]/100,n=t[2]/100,l,u;return u=(2-i)*n,l=i*n,l/=u<=1?u:2-u,l=l||0,u/=2,[e,l*100,u*100]}function M2(t){return qc(xf(t))}function D2(t){return jc(xf(t))}function L2(t){return Jc(xf(t))}function Yc(t){var e=t[0]/360,i=t[1]/100,n=t[2]/100,l=i+n,u,f,a,w;switch(l>1&&(i/=l,n/=l),u=Math.floor(6*e),f=1-n,a=6*e-u,u&1&&(a=1-a),w=i+a*(f-i),u){default:case 6:case 0:r=f,g=w,b=i;break;case 1:r=w,g=f,b=i;break;case 2:r=i,g=f,b=w;break;case 3:r=i,g=w,b=f;break;case 4:r=w,g=i,b=f;break;case 5:r=f,g=i,b=w;break}return[r*255,g*255,b*255]}function H2(t){return Wc(Yc(t))}function P2(t){return vf(Yc(t))}function z2(t){return jc(Yc(t))}function R2(t){return Jc(Yc(t))}function $c(t){var e=t[0]/100,i=t[1]/100,n=t[2]/100,l=t[3]/100,u,f,a;return u=1-Math.min(1,e*(1-l)+l),f=1-Math.min(1,i*(1-l)+l),a=1-Math.min(1,n*(1-l)+l),[u*255,f*255,a*255]}function O2(t){return Wc($c(t))}function K2(t){return vf($c(t))}function N2(t){return qc($c(t))}function V2(t){return Jc($c(t))}function Pw(t){var e=t[0]/100,i=t[1]/100,n=t[2]/100,l,u,f;return l=e*3.2406+i*-1.5372+n*-.4986,u=e*-.9689+i*1.8758+n*.0415,f=e*.0557+i*-.204+n*1.057,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l=l*12.92,u=u>.0031308?1.055*Math.pow(u,1/2.4)-.055:u=u*12.92,f=f>.0031308?1.055*Math.pow(f,1/2.4)-.055:f=f*12.92,l=Math.min(Math.max(0,l),1),u=Math.min(Math.max(0,u),1),f=Math.min(Math.max(0,f),1),[l*255,u*255,f*255]}function zw(t){var e=t[0],i=t[1],n=t[2],l,u,f;return e/=95.047,i/=100,n/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,l=116*i-16,u=500*(e-i),f=200*(i-n),[l,u,f]}function G2(t){return ug(zw(t))}function cg(t){var e=t[0],i=t[1],n=t[2],l,u,f,a;return e<=8?(u=e*100/903.3,a=7.787*(u/100)+16/116):(u=100*Math.pow((e+16)/116,3),a=Math.pow(u/100,1/3)),l=l/95.047<=.008856?l=95.047*(i/500+a-16/116)/7.787:95.047*Math.pow(i/500+a,3),f=f/108.883<=.008859?f=108.883*(a-n/200-16/116)/7.787:108.883*Math.pow(a-n/200,3),[l,u,f]}function ug(t){var e=t[0],i=t[1],n=t[2],l,u,f;return l=Math.atan2(n,i),u=l*360/2/Math.PI,u<0&&(u+=360),f=Math.sqrt(i*i+n*n),[e,f,u]}function Rw(t){return Pw(cg(t))}function hg(t){var e=t[0],i=t[1],n=t[2],l,u,f;return f=n/360*2*Math.PI,l=i*Math.cos(f),u=i*Math.sin(f),[e,l,u]}function X2(t){return cg(hg(t))}function Z2(t){return Rw(hg(t))}function ya(t){return Ep[t]}function W2(t){return Wc(ya(t))}function q2(t){return vf(ya(t))}function j2(t){return qc(ya(t))}function J2(t){return jc(ya(t))}function Y2(t){return lg(ya(t))}function $2(t){return ag(ya(t))}var Ep={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ow={};for(var B0 in Ep)Ow[JSON.stringify(Ep[B0])]=B0;var Rd=F2,sa=function(){return new eu};for(var uc in Rd){sa[uc+"Raw"]=function(t){return function(e){return typeof e=="number"&&(e=Array.prototype.slice.call(arguments)),Rd[t](e)}}(uc);var x0=/(\w+)2(\w+)/.exec(uc),Od=x0[1],eC=x0[2];sa[Od]=sa[Od]||{},sa[Od][eC]=sa[uc]=function(t){return function(e){typeof e=="number"&&(e=Array.prototype.slice.call(arguments));var i=Rd[t](e);if(typeof i=="string"||i===void 0)return i;for(var n=0;n<i.length;n++)i[n]=Math.round(i[n]);return i}}(uc)}var eu=function(){this.convs={}};eu.prototype.routeSpace=function(t,e){var i=e[0];return i===void 0?this.getValues(t):(typeof i=="number"&&(i=Array.prototype.slice.call(e)),this.setValues(t,i))};eu.prototype.setValues=function(t,e){return this.space=t,this.convs={},this.convs[t]=e,this};eu.prototype.getValues=function(t){var e=this.convs[t];if(!e){var i=this.space,n=this.convs[i];e=sa[i][t](n),this.convs[t]=e}return e};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(t){eu.prototype[t]=function(e){return this.routeSpace(t,arguments)}});var tC=sa,Kd=tC,rC=function(t){var e,i,n,l;if(e=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(t)){var u=e[1],f=u.replace(/a$/,""),a=f==="cmyk"?4:3;i=Kd[f],n=e[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(C,F){return/%$/.test(C)&&F===a?parseFloat(C)/100:(/%$/.test(C),parseFloat(C))}),u===f&&n.push(1),l=n[a]===void 0?1:n[a],n=n.slice(0,a),i[f]=function(){return n}}else if(/^#[A-Fa-f0-9]+$/.test(t)){var f=t.replace(/^#/,""),a=f.length;i=Kd.rgb,n=f.split(a===3?/(.)/:/(..)/),n=n.filter(Boolean).map(function(E){return parseInt(a===3?E+E:E,16)}),l=1,i.rgb=function(){return n},n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0)}else i=Kd.keyword,i.keyword=function(){return t},n=t,l=1;var w={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{w.rgb=i.rgb(n)}catch{}try{w.hsl=i.hsl(n)}catch{}try{w.hsv=i.hsv(n)}catch{}try{w.cmyk=i.cmyk(n)}catch{}try{w.keyword=i.keyword(n)}catch{}return w.rgb&&(w.hex="#"+w.rgb.map(function(C){var F=C.toString(16);return F.length===1?"0"+F:F}).join("")),w.rgb&&(w.rgba=w.rgb.concat(l)),w.hsl&&(w.hsla=w.hsl.concat(l)),w.hsv&&(w.hsva=w.hsv.concat(l)),w.cmyk&&(w.cmyka=w.cmyk.concat(l)),w};function iC(t){let e,i;const n=t[5].default,l=qr(n,t,t[4],null);return{c(){e=it("span"),l&&l.c(),ue(e,"class","em svelte-1pbjjhk"),bt(e,"background-color",t[0]),bt(e,"color",t[2]),ue(e,"role","presentation"),Sr(e,"nowrap",t[1])},m(u,f){Fe(u,e,f),l&&l.m(e,null),i=!0},p(u,[f]){l&&l.p&&(!i||f&16)&&Jr(l,n,u,u[4],i?jr(n,u[4],f,null):Yr(u[4]),null),(!i||f&1)&&bt(e,"background-color",u[0]),(!i||f&4)&&bt(e,"color",u[2]),(!i||f&2)&&Sr(e,"nowrap",u[1])},i(u){i||(Ce(l,u),i=!0)},o(u){De(l,u),i=!1},d(u){u&&Ee(e),l&&l.d(u)}}}function nC(t,e,i){let n,{$$slots:l={},$$scope:u}=e,{color:f="lightgrey"}=e,{nowrap:a=!0}=e;function w(F){return(F[0]*299+F[1]*587+F[2]*114)/1e3>125?"black":"white"}let C="black";return t.$$set=F=>{"color"in F&&i(0,f=F.color),"nowrap"in F&&i(1,a=F.nowrap),"$$scope"in F&&i(4,u=F.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&i(3,n=rC(f).rgb),t.$$.dirty&8&&n&&i(2,C=w(n))},[f,a,C,n,u,l]}class Bc extends Nr{constructor(e){super(),Kr(this,e,nC,iC,Lr,{color:0,nowrap:1})}}function Kw(t,e,i){if(t!==null)for(var n,l,u,f,a,w,C,F=0,E=0,U,H=t.type,P=H==="FeatureCollection",V=H==="Feature",j=P?t.features.length:1,Y=0;Y<j;Y++){C=P?t.features[Y].geometry:V?t.geometry:t,U=C?C.type==="GeometryCollection":!1,a=U?C.geometries.length:1;for(var ee=0;ee<a;ee++){var ce=0,Qe=0;if(f=U?C.geometries[ee]:C,f!==null){w=f.coordinates;var le=f.type;switch(F=i&&(le==="Polygon"||le==="MultiPolygon")?1:0,le){case null:break;case"Point":if(e(w,E,Y,ce,Qe)===!1)return!1;E++,ce++;break;case"LineString":case"MultiPoint":for(n=0;n<w.length;n++){if(e(w[n],E,Y,ce,Qe)===!1)return!1;E++,le==="MultiPoint"&&ce++}le==="LineString"&&ce++;break;case"Polygon":case"MultiLineString":for(n=0;n<w.length;n++){for(l=0;l<w[n].length-F;l++){if(e(w[n][l],E,Y,ce,Qe)===!1)return!1;E++}le==="MultiLineString"&&ce++,le==="Polygon"&&Qe++}le==="Polygon"&&ce++;break;case"MultiPolygon":for(n=0;n<w.length;n++){for(Qe=0,l=0;l<w[n].length;l++){for(u=0;u<w[n][l].length-F;u++){if(e(w[n][l][u],E,Y,ce,Qe)===!1)return!1;E++}Qe++}ce++}break;case"GeometryCollection":for(n=0;n<f.geometries.length;n++)if(Kw(f.geometries[n],e,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Fp(t){var e=[1/0,1/0,-1/0,-1/0];return Kw(t,function(i){e[0]>i[0]&&(e[0]=i[0]),e[1]>i[1]&&(e[1]=i[1]),e[2]<i[0]&&(e[2]=i[0]),e[3]<i[1]&&(e[3]=i[1])}),e}Fp.default=Fp;const qa=[];function sC(t,e){return{subscribe:_r(t,e).subscribe}}function _r(t,e=ar){let i;const n=new Set;function l(a){if(Lr(t,a)&&(t=a,i)){const w=!qa.length;for(const C of n)C[1](),qa.push(C,t);if(w){for(let C=0;C<qa.length;C+=2)qa[C][0](qa[C+1]);qa.length=0}}}function u(a){l(a(t))}function f(a,w=ar){const C=[a,w];return n.add(C),n.size===1&&(i=e(l)||ar),a(t),()=>{n.delete(C),n.size===0&&i&&(i(),i=null)}}return{set:l,update:u,subscribe:f}}function Di(t,e,i){const n=!Array.isArray(t),l=n?[t]:t,u=e.length<2;return sC(i,f=>{let a=!1;const w=[];let C=0,F=ar;const E=()=>{if(C)return;F();const H=e(n?w[0]:w,f);u?f(H):F=hn(H)?H:ar},U=l.map((H,P)=>Uw(H,V=>{w[P]=V,C&=~(1<<P),a&&E()},()=>{C|=1<<P}));return a=!0,E(),function(){yA(U),F(),a=!1}})}function AC(t){return t===0?!0:t}function go(t){return AC(t)?Array.isArray(t)?e=>t.map(i=>typeof i!="function"?e[i]:i(e)):typeof t!="function"?e=>e[t]:t:null}function oC(t){const e={};for(const i of t){if(Object(i)!==i)throw new TypeError("iterable for fromEntries should yield objects");const{"0":n,"1":l}=i;Object.defineProperty(e,n,{configurable:!0,enumerable:!0,writable:!0,value:l})}return e}function Nd(t,e={}){return oC(Object.entries(t).filter(([i,n])=>n!==void 0&&e[i]===void 0))}function aC(t,e=300){let i;return(...n)=>{clearTimeout(i),i=setTimeout(()=>{t.apply(this,n)},e)}}function lC(t,e,{sort:i=!1}={}){if(!Array.isArray(t))throw new TypeError(`The first argument of calcUniques() must be an array. You passed in a ${typeof t}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(e)||e===void 0||e===null)throw new TypeError("The second argument of calcUniques() must be an object with field names as keys as accessor functions as values.");const n={},l=Object.keys(e),u=l.length;let f,a,w,C,F,E,U;const H=t.length;for(f=0;f<u;f+=1){for(U=new Set,C=l[f],F=e[C],a=0;a<H;a+=1)if(E=F(t[a]),Array.isArray(E)){const V=E.length;for(w=0;w<V;w+=1)U.add(E[w])}else U.add(E);const P=Array.from(U);n[C]=i===!0?P.sort():P}return n}function cC(t,e){if(!Array.isArray(t))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof t}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(e)||e===void 0||e===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const i={},n=Object.keys(e),l=n.length;let u,f,a,w,C,F,E,U;const H=t.length;for(u=0;u<l;u+=1){for(w=n[u],E=e[w],C=null,F=null,f=0;f<H;f+=1)if(U=E(t[f]),Array.isArray(U)){const P=U.length;for(a=0;a<P;a+=1)U[a]!==!1&&U[a]!==void 0&&U[a]!==null&&Number.isNaN(U[a])===!1&&((C===null||U[a]<C)&&(C=U[a]),(F===null||U[a]>F)&&(F=U[a]))}else U!==!1&&U!==void 0&&U!==null&&Number.isNaN(U)===!1&&((C===null||U<C)&&(C=U),(F===null||U>F)&&(F=U));i[w]=[C,F]}return i}function xc(t,e){return t.length!==e.length?!1:t.every(i=>e.includes(i))}function Nw(t){return!!(typeof t.bandwidth=="function"||xc(Object.keys(t),["domain","range","unknown","copy"]))}function uC(t,e,i){const n=Object.keys(i).reduce((u,f)=>{const a=Nw(i[f])===!0?"ordinal":"other";return u[a]||(u[a]={}),u[a][f]=e[f],u},{ordinal:!1,other:!1});let l={};return n.ordinal&&(l=lC(t,n.ordinal)),n.other&&(l={...l,...cC(t,n.other)}),l}function hC(t=[],e){return Array.isArray(e)===!0?e.map((i,n)=>i===null?t[n]:i):t}function Ah(t){return function([i,n]){return typeof n=="function"&&(n=n(i[t])),i?hC(i[t],n):n}}function Oh(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function fC(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function fg(t){let e,i,n;t.length!==2?(e=Oh,i=(a,w)=>Oh(t(a),w),n=(a,w)=>t(a)-w):(e=t===Oh||t===fC?t:dC,i=t,n=t);function l(a,w,C=0,F=a.length){if(C<F){if(e(w,w)!==0)return F;do{const E=C+F>>>1;i(a[E],w)<0?C=E+1:F=E}while(C<F)}return C}function u(a,w,C=0,F=a.length){if(C<F){if(e(w,w)!==0)return F;do{const E=C+F>>>1;i(a[E],w)<=0?C=E+1:F=E}while(C<F)}return C}function f(a,w,C=0,F=a.length){const E=l(a,w,C,F-1);return E>C&&n(a[E-1],w)>-n(a[E],w)?E-1:E}return{left:l,center:f,right:u}}function dC(){return 0}function pC(t){return t===null?NaN:+t}const gC=fg(Oh),mC=gC.right;fg(pC).center;const _C=mC;class b0 extends Map{constructor(e,i=vC){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),e!=null)for(const[n,l]of e)this.set(n,l)}get(e){return super.get(C0(this,e))}has(e){return super.has(C0(this,e))}set(e,i){return super.set(yC(this,e),i)}delete(e){return super.delete(wC(this,e))}}function C0({_intern:t,_key:e},i){const n=e(i);return t.has(n)?t.get(n):i}function yC({_intern:t,_key:e},i){const n=e(i);return t.has(n)?t.get(n):(t.set(n,i),i)}function wC({_intern:t,_key:e},i){const n=e(i);return t.has(n)&&(i=t.get(n),t.delete(n)),i}function vC(t){return t!==null&&typeof t=="object"?t.valueOf():t}const BC=Math.sqrt(50),xC=Math.sqrt(10),bC=Math.sqrt(2);function qh(t,e,i){const n=(e-t)/Math.max(0,i),l=Math.floor(Math.log10(n)),u=n/Math.pow(10,l),f=u>=BC?10:u>=xC?5:u>=bC?2:1;let a,w,C;return l<0?(C=Math.pow(10,-l)/f,a=Math.round(t*C),w=Math.round(e*C),a/C<t&&++a,w/C>e&&--w,C=-C):(C=Math.pow(10,l)*f,a=Math.round(t/C),w=Math.round(e/C),a*C<t&&++a,w*C>e&&--w),w<a&&.5<=i&&i<2?qh(t,e,i*2):[a,w,C]}function CC(t,e,i){if(e=+e,t=+t,i=+i,!(i>0))return[];if(t===e)return[t];const n=e<t,[l,u,f]=n?qh(e,t,i):qh(t,e,i);if(!(u>=l))return[];const a=u-l+1,w=new Array(a);if(n)if(f<0)for(let C=0;C<a;++C)w[C]=(u-C)/-f;else for(let C=0;C<a;++C)w[C]=(u-C)*f;else if(f<0)for(let C=0;C<a;++C)w[C]=(l+C)/-f;else for(let C=0;C<a;++C)w[C]=(l+C)*f;return w}function Up(t,e,i){return e=+e,t=+t,i=+i,qh(t,e,i)[2]}function Qp(t,e,i){e=+e,t=+t,i=+i;const n=e<t,l=n?Up(e,t,i):Up(t,e,i);return(n?-1:1)*(l<0?1/-l:l)}function EC(t,e,i){t=+t,e=+e,i=(l=arguments.length)<2?(e=t,t=0,1):l<3?1:+i;for(var n=-1,l=Math.max(0,Math.ceil((e-t)/i))|0,u=new Array(l);++n<l;)u[n]=t+n*i;return u}function bl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const E0=Symbol("implicit");function tu(){var t=new b0,e=[],i=[],n=E0;function l(u){let f=t.get(u);if(f===void 0){if(n!==E0)return n;t.set(u,f=e.push(u)-1)}return i[f%i.length]}return l.domain=function(u){if(!arguments.length)return e.slice();e=[],t=new b0;for(const f of u)t.has(f)||t.set(f,e.push(f)-1);return l},l.range=function(u){return arguments.length?(i=Array.from(u),l):i.slice()},l.unknown=function(u){return arguments.length?(n=u,l):n},l.copy=function(){return tu(e,i).unknown(n)},bl.apply(l,arguments),l}function Ip(){var t=tu().unknown(void 0),e=t.domain,i=t.range,n=0,l=1,u,f,a=!1,w=0,C=0,F=.5;delete t.unknown;function E(){var U=e().length,H=l<n,P=H?l:n,V=H?n:l;u=(V-P)/Math.max(1,U-w+C*2),a&&(u=Math.floor(u)),P+=(V-P-u*(U-w))*F,f=u*(1-w),a&&(P=Math.round(P),f=Math.round(f));var j=EC(U).map(function(Y){return P+u*Y});return i(H?j.reverse():j)}return t.domain=function(U){return arguments.length?(e(U),E()):e()},t.range=function(U){return arguments.length?([n,l]=U,n=+n,l=+l,E()):[n,l]},t.rangeRound=function(U){return[n,l]=U,n=+n,l=+l,a=!0,E()},t.bandwidth=function(){return f},t.step=function(){return u},t.round=function(U){return arguments.length?(a=!!U,E()):a},t.padding=function(U){return arguments.length?(w=Math.min(1,C=+U),E()):w},t.paddingInner=function(U){return arguments.length?(w=Math.min(1,U),E()):w},t.paddingOuter=function(U){return arguments.length?(C=+U,E()):C},t.align=function(U){return arguments.length?(F=Math.max(0,Math.min(1,U)),E()):F},t.copy=function(){return Ip(e(),[n,l]).round(a).paddingInner(w).paddingOuter(C).align(F)},bl.apply(E(),arguments)}function dg(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function Vw(t,e){var i=Object.create(t.prototype);for(var n in e)i[n]=e[n];return i}function ru(){}var Rc=.7,jh=1/Rc,gl="\\s*([+-]?\\d+)\\s*",Oc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_A="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",FC=/^#([0-9a-f]{3,8})$/,UC=new RegExp(`^rgb\\(${gl},${gl},${gl}\\)$`),QC=new RegExp(`^rgb\\(${_A},${_A},${_A}\\)$`),IC=new RegExp(`^rgba\\(${gl},${gl},${gl},${Oc}\\)$`),TC=new RegExp(`^rgba\\(${_A},${_A},${_A},${Oc}\\)$`),SC=new RegExp(`^hsl\\(${Oc},${_A},${_A}\\)$`),kC=new RegExp(`^hsla\\(${Oc},${_A},${_A},${Oc}\\)$`),F0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dg(ru,Kc,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:U0,formatHex:U0,formatHex8:MC,formatHsl:DC,formatRgb:Q0,toString:Q0});function U0(){return this.rgb().formatHex()}function MC(){return this.rgb().formatHex8()}function DC(){return Gw(this).formatHsl()}function Q0(){return this.rgb().formatRgb()}function Kc(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=FC.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?I0(e):i===3?new ts(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?oh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?oh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=UC.exec(t))?new ts(e[1],e[2],e[3],1):(e=QC.exec(t))?new ts(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=IC.exec(t))?oh(e[1],e[2],e[3],e[4]):(e=TC.exec(t))?oh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=SC.exec(t))?k0(e[1],e[2]/100,e[3]/100,1):(e=kC.exec(t))?k0(e[1],e[2]/100,e[3]/100,e[4]):F0.hasOwnProperty(t)?I0(F0[t]):t==="transparent"?new ts(NaN,NaN,NaN,0):null}function I0(t){return new ts(t>>16&255,t>>8&255,t&255,1)}function oh(t,e,i,n){return n<=0&&(t=e=i=NaN),new ts(t,e,i,n)}function LC(t){return t instanceof ru||(t=Kc(t)),t?(t=t.rgb(),new ts(t.r,t.g,t.b,t.opacity)):new ts}function Jh(t,e,i,n){return arguments.length===1?LC(t):new ts(t,e,i,n??1)}function ts(t,e,i,n){this.r=+t,this.g=+e,this.b=+i,this.opacity=+n}dg(ts,Jh,Vw(ru,{brighter(t){return t=t==null?jh:Math.pow(jh,t),new ts(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Rc:Math.pow(Rc,t),new ts(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ts(fa(this.r),fa(this.g),fa(this.b),Yh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T0,formatHex:T0,formatHex8:HC,formatRgb:S0,toString:S0}));function T0(){return`#${la(this.r)}${la(this.g)}${la(this.b)}`}function HC(){return`#${la(this.r)}${la(this.g)}${la(this.b)}${la((isNaN(this.opacity)?1:this.opacity)*255)}`}function S0(){const t=Yh(this.opacity);return`${t===1?"rgb(":"rgba("}${fa(this.r)}, ${fa(this.g)}, ${fa(this.b)}${t===1?")":`, ${t})`}`}function Yh(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function fa(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function la(t){return t=fa(t),(t<16?"0":"")+t.toString(16)}function k0(t,e,i,n){return n<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new qs(t,e,i,n)}function Gw(t){if(t instanceof qs)return new qs(t.h,t.s,t.l,t.opacity);if(t instanceof ru||(t=Kc(t)),!t)return new qs;if(t instanceof qs)return t;t=t.rgb();var e=t.r/255,i=t.g/255,n=t.b/255,l=Math.min(e,i,n),u=Math.max(e,i,n),f=NaN,a=u-l,w=(u+l)/2;return a?(e===u?f=(i-n)/a+(i<n)*6:i===u?f=(n-e)/a+2:f=(e-i)/a+4,a/=w<.5?u+l:2-u-l,f*=60):a=w>0&&w<1?0:f,new qs(f,a,w,t.opacity)}function PC(t,e,i,n){return arguments.length===1?Gw(t):new qs(t,e,i,n??1)}function qs(t,e,i,n){this.h=+t,this.s=+e,this.l=+i,this.opacity=+n}dg(qs,PC,Vw(ru,{brighter(t){return t=t==null?jh:Math.pow(jh,t),new qs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Rc:Math.pow(Rc,t),new qs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*e,l=2*i-n;return new ts(Vd(t>=240?t-240:t+120,l,n),Vd(t,l,n),Vd(t<120?t+240:t-120,l,n),this.opacity)},clamp(){return new qs(M0(this.h),ah(this.s),ah(this.l),Yh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Yh(this.opacity);return`${t===1?"hsl(":"hsla("}${M0(this.h)}, ${ah(this.s)*100}%, ${ah(this.l)*100}%${t===1?")":`, ${t})`}`}}));function M0(t){return t=(t||0)%360,t<0?t+360:t}function ah(t){return Math.max(0,Math.min(1,t||0))}function Vd(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}const pg=t=>()=>t;function zC(t,e){return function(i){return t+i*e}}function RC(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(n){return Math.pow(t+n*e,i)}}function OC(t){return(t=+t)==1?Xw:function(e,i){return i-e?RC(e,i,t):pg(isNaN(e)?i:e)}}function Xw(t,e){var i=e-t;return i?zC(t,i):pg(isNaN(t)?e:t)}const D0=function t(e){var i=OC(e);function n(l,u){var f=i((l=Jh(l)).r,(u=Jh(u)).r),a=i(l.g,u.g),w=i(l.b,u.b),C=Xw(l.opacity,u.opacity);return function(F){return l.r=f(F),l.g=a(F),l.b=w(F),l.opacity=C(F),l+""}}return n.gamma=t,n}(1);function KC(t,e){e||(e=[]);var i=t?Math.min(e.length,t.length):0,n=e.slice(),l;return function(u){for(l=0;l<i;++l)n[l]=t[l]*(1-u)+e[l]*u;return n}}function NC(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function VC(t,e){var i=e?e.length:0,n=t?Math.min(i,t.length):0,l=new Array(n),u=new Array(i),f;for(f=0;f<n;++f)l[f]=gg(t[f],e[f]);for(;f<i;++f)u[f]=e[f];return function(a){for(f=0;f<n;++f)u[f]=l[f](a);return u}}function GC(t,e){var i=new Date;return t=+t,e=+e,function(n){return i.setTime(t*(1-n)+e*n),i}}function $h(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function XC(t,e){var i={},n={},l;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(l in e)l in t?i[l]=gg(t[l],e[l]):n[l]=e[l];return function(u){for(l in i)n[l]=i[l](u);return n}}var Tp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gd=new RegExp(Tp.source,"g");function ZC(t){return function(){return t}}function WC(t){return function(e){return t(e)+""}}function qC(t,e){var i=Tp.lastIndex=Gd.lastIndex=0,n,l,u,f=-1,a=[],w=[];for(t=t+"",e=e+"";(n=Tp.exec(t))&&(l=Gd.exec(e));)(u=l.index)>i&&(u=e.slice(i,u),a[f]?a[f]+=u:a[++f]=u),(n=n[0])===(l=l[0])?a[f]?a[f]+=l:a[++f]=l:(a[++f]=null,w.push({i:f,x:$h(n,l)})),i=Gd.lastIndex;return i<e.length&&(u=e.slice(i),a[f]?a[f]+=u:a[++f]=u),a.length<2?w[0]?WC(w[0].x):ZC(e):(e=w.length,function(C){for(var F=0,E;F<e;++F)a[(E=w[F]).i]=E.x(C);return a.join("")})}function gg(t,e){var i=typeof e,n;return e==null||i==="boolean"?pg(e):(i==="number"?$h:i==="string"?(n=Kc(e))?(e=n,D0):qC:e instanceof Kc?D0:e instanceof Date?GC:NC(e)?KC:Array.isArray(e)?VC:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?XC:$h)(t,e)}function jC(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}function JC(t){return function(){return t}}function YC(t){return+t}var L0=[0,1];function mA(t){return t}function Sp(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:JC(isNaN(e)?NaN:.5)}function $C(t,e){var i;return t>e&&(i=t,t=e,e=i),function(n){return Math.max(t,Math.min(e,n))}}function eE(t,e,i){var n=t[0],l=t[1],u=e[0],f=e[1];return l<n?(n=Sp(l,n),u=i(f,u)):(n=Sp(n,l),u=i(u,f)),function(a){return u(n(a))}}function tE(t,e,i){var n=Math.min(t.length,e.length)-1,l=new Array(n),u=new Array(n),f=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++f<n;)l[f]=Sp(t[f],t[f+1]),u[f]=i(e[f],e[f+1]);return function(a){var w=_C(t,a,1,n)-1;return u[w](l[w](a))}}function bf(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function mg(){var t=L0,e=L0,i=gg,n,l,u,f=mA,a,w,C;function F(){var U=Math.min(t.length,e.length);return f!==mA&&(f=$C(t[0],t[U-1])),a=U>2?tE:eE,w=C=null,E}function E(U){return U==null||isNaN(U=+U)?u:(w||(w=a(t.map(n),e,i)))(n(f(U)))}return E.invert=function(U){return f(l((C||(C=a(e,t.map(n),$h)))(U)))},E.domain=function(U){return arguments.length?(t=Array.from(U,YC),F()):t.slice()},E.range=function(U){return arguments.length?(e=Array.from(U),F()):e.slice()},E.rangeRound=function(U){return e=Array.from(U),i=jC,F()},E.clamp=function(U){return arguments.length?(f=U?!0:mA,F()):f!==mA},E.interpolate=function(U){return arguments.length?(i=U,F()):i},E.unknown=function(U){return arguments.length?(u=U,E):u},function(U,H){return n=U,l=H,F()}}function Zw(){return mg()(mA,mA)}function rE(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ef(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,n=t.slice(0,i);return[n.length>1?n[0]+n.slice(2):n,+t.slice(i+1)]}function wl(t){return t=ef(Math.abs(t)),t?t[1]:NaN}function iE(t,e){return function(i,n){for(var l=i.length,u=[],f=0,a=t[0],w=0;l>0&&a>0&&(w+a+1>n&&(a=Math.max(1,n-w)),u.push(i.substring(l-=a,l+a)),!((w+=a+1)>n));)a=t[f=(f+1)%t.length];return u.reverse().join(e)}}function nE(t){return function(e){return e.replace(/[0-9]/g,function(i){return t[+i]})}}var sE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tf(t){if(!(e=sE.exec(t)))throw new Error("invalid format: "+t);var e;return new _g({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}tf.prototype=_g.prototype;function _g(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}_g.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function AE(t){e:for(var e=t.length,i=1,n=-1,l;i<e;++i)switch(t[i]){case".":n=l=i;break;case"0":n===0&&(n=i),l=i;break;default:if(!+t[i])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(l+1):t}var Ww;function oE(t,e){var i=ef(t,e);if(!i)return t+"";var n=i[0],l=i[1],u=l-(Ww=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,f=n.length;return u===f?n:u>f?n+new Array(u-f+1).join("0"):u>0?n.slice(0,u)+"."+n.slice(u):"0."+new Array(1-u).join("0")+ef(t,Math.max(0,e+u-1))[0]}function H0(t,e){var i=ef(t,e);if(!i)return t+"";var n=i[0],l=i[1];return l<0?"0."+new Array(-l).join("0")+n:n.length>l+1?n.slice(0,l+1)+"."+n.slice(l+1):n+new Array(l-n.length+2).join("0")}const P0={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:rE,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>H0(t*100,e),r:H0,s:oE,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function z0(t){return t}var R0=Array.prototype.map,O0=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function aE(t){var e=t.grouping===void 0||t.thousands===void 0?z0:iE(R0.call(t.grouping,Number),t.thousands+""),i=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",l=t.decimal===void 0?".":t.decimal+"",u=t.numerals===void 0?z0:nE(R0.call(t.numerals,String)),f=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",w=t.nan===void 0?"NaN":t.nan+"";function C(E){E=tf(E);var U=E.fill,H=E.align,P=E.sign,V=E.symbol,j=E.zero,Y=E.width,ee=E.comma,ce=E.precision,Qe=E.trim,le=E.type;le==="n"?(ee=!0,le="g"):P0[le]||(ce===void 0&&(ce=12),Qe=!0,le="g"),(j||U==="0"&&H==="=")&&(j=!0,U="0",H="=");var re=V==="$"?i:V==="#"&&/[boxX]/.test(le)?"0"+le.toLowerCase():"",we=V==="$"?n:/[%p]/.test(le)?f:"",Ae=P0[le],R=/[defgprs%]/.test(le);ce=ce===void 0?6:/[gprs]/.test(le)?Math.max(1,Math.min(21,ce)):Math.max(0,Math.min(20,ce));function ie(se){var Be=re,Re=we,ht,_t,Me;if(le==="c")Re=Ae(se)+Re,se="";else{se=+se;var at=se<0||1/se<0;if(se=isNaN(se)?w:Ae(Math.abs(se),ce),Qe&&(se=AE(se)),at&&+se==0&&P!=="+"&&(at=!1),Be=(at?P==="("?P:a:P==="-"||P==="("?"":P)+Be,Re=(le==="s"?O0[8+Ww/3]:"")+Re+(at&&P==="("?")":""),R){for(ht=-1,_t=se.length;++ht<_t;)if(Me=se.charCodeAt(ht),48>Me||Me>57){Re=(Me===46?l+se.slice(ht+1):se.slice(ht))+Re,se=se.slice(0,ht);break}}}ee&&!j&&(se=e(se,1/0));var wt=Be.length+se.length+Re.length,nt=wt<Y?new Array(Y-wt+1).join(U):"";switch(ee&&j&&(se=e(nt+se,nt.length?Y-Re.length:1/0),nt=""),H){case"<":se=Be+se+Re+nt;break;case"=":se=Be+nt+se+Re;break;case"^":se=nt.slice(0,wt=nt.length>>1)+Be+se+Re+nt.slice(wt);break;default:se=nt+Be+se+Re;break}return u(se)}return ie.toString=function(){return E+""},ie}function F(E,U){var H=C((E=tf(E),E.type="f",E)),P=Math.max(-8,Math.min(8,Math.floor(wl(U)/3)))*3,V=Math.pow(10,-P),j=O0[8+P/3];return function(Y){return H(V*Y)+j}}return{format:C,formatPrefix:F}}var lh,qw,jw;lE({thousands:",",grouping:[3],currency:["$",""]});function lE(t){return lh=aE(t),qw=lh.format,jw=lh.formatPrefix,lh}function cE(t){return Math.max(0,-wl(Math.abs(t)))}function uE(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(wl(e)/3)))*3-wl(Math.abs(t)))}function hE(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,wl(e)-wl(t))+1}function fE(t,e,i,n){var l=Qp(t,e,i),u;switch(n=tf(n??",f"),n.type){case"s":{var f=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(u=uE(l,f))&&(n.precision=u),jw(n,f)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(u=hE(l,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=u-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(u=cE(l))&&(n.precision=u-(n.type==="%")*2);break}}return qw(n)}function yg(t){var e=t.domain;return t.ticks=function(i){var n=e();return CC(n[0],n[n.length-1],i??10)},t.tickFormat=function(i,n){var l=e();return fE(l[0],l[l.length-1],i??10,n)},t.nice=function(i){i==null&&(i=10);var n=e(),l=0,u=n.length-1,f=n[l],a=n[u],w,C,F=10;for(a<f&&(C=f,f=a,a=C,C=l,l=u,u=C);F-- >0;){if(C=Up(f,a,i),C===w)return n[l]=f,n[u]=a,e(n);if(C>0)f=Math.floor(f/C)*C,a=Math.ceil(a/C)*C;else if(C<0)f=Math.ceil(f*C)/C,a=Math.floor(a*C)/C;else break;w=C}return t},t}function rs(){var t=Zw();return t.copy=function(){return bf(t,rs())},bl.apply(t,arguments),yg(t)}function dE(t,e){t=t.slice();var i=0,n=t.length-1,l=t[i],u=t[n],f;return u<l&&(f=i,i=n,n=f,f=l,l=u,u=f),t[i]=e.floor(l),t[n]=e.ceil(u),t}function K0(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function N0(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function pE(t){var e=1,i=t(K0(e),N0(e));return i.constant=function(n){return arguments.length?t(K0(e=+n),N0(e)):e},yg(i)}function KA(){var t=pE(mg());return t.copy=function(){return bf(t,KA()).constant(t.constant())},bl.apply(t,arguments)}function V0(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function gE(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function mE(t){return t<0?-t*t:t*t}function _E(t){var e=t(mA,mA),i=1;function n(){return i===1?t(mA,mA):i===.5?t(gE,mE):t(V0(i),V0(1/i))}return e.exponent=function(l){return arguments.length?(i=+l,n()):i},yg(e)}function Jw(){var t=_E(mg());return t.copy=function(){return bf(t,Jw()).exponent(t.exponent())},bl.apply(t,arguments),t}function yE(){return Jw.apply(null,arguments).exponent(.5)}const Xd=new Date,Zd=new Date;function An(t,e,i,n){function l(u){return t(u=arguments.length===0?new Date:new Date(+u)),u}return l.floor=u=>(t(u=new Date(+u)),u),l.ceil=u=>(t(u=new Date(u-1)),e(u,1),t(u),u),l.round=u=>{const f=l(u),a=l.ceil(u);return u-f<a-u?f:a},l.offset=(u,f)=>(e(u=new Date(+u),f==null?1:Math.floor(f)),u),l.range=(u,f,a)=>{const w=[];if(u=l.ceil(u),a=a==null?1:Math.floor(a),!(u<f)||!(a>0))return w;let C;do w.push(C=new Date(+u)),e(u,a),t(u);while(C<u&&u<f);return w},l.filter=u=>An(f=>{if(f>=f)for(;t(f),!u(f);)f.setTime(f-1)},(f,a)=>{if(f>=f)if(a<0)for(;++a<=0;)for(;e(f,-1),!u(f););else for(;--a>=0;)for(;e(f,1),!u(f););}),i&&(l.count=(u,f)=>(Xd.setTime(+u),Zd.setTime(+f),t(Xd),t(Zd),Math.floor(i(Xd,Zd))),l.every=u=>(u=Math.floor(u),!isFinite(u)||!(u>0)?null:u>1?l.filter(n?f=>n(f)%u===0:f=>l.count(0,f)%u===0):l)),l}const rf=An(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);rf.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?An(e=>{e.setTime(Math.floor(e/t)*t)},(e,i)=>{e.setTime(+e+i*t)},(e,i)=>(i-e)/t):rf);rf.range;const NA=1e3,Cs=NA*60,VA=Cs*60,ZA=VA*24,wg=ZA*7,G0=ZA*30,Wd=ZA*365,cl=An(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*NA)},(t,e)=>(e-t)/NA,t=>t.getUTCSeconds());cl.range;const vg=An(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*NA)},(t,e)=>{t.setTime(+t+e*Cs)},(t,e)=>(e-t)/Cs,t=>t.getMinutes());vg.range;const wE=An(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Cs)},(t,e)=>(e-t)/Cs,t=>t.getUTCMinutes());wE.range;const Bg=An(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*NA-t.getMinutes()*Cs)},(t,e)=>{t.setTime(+t+e*VA)},(t,e)=>(e-t)/VA,t=>t.getHours());Bg.range;const vE=An(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*VA)},(t,e)=>(e-t)/VA,t=>t.getUTCHours());vE.range;const iu=An(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Cs)/ZA,t=>t.getDate()-1);iu.range;const xg=An(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ZA,t=>t.getUTCDate()-1);xg.range;const BE=An(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ZA,t=>Math.floor(t/ZA));BE.range;function wa(t){return An(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,i)=>{e.setDate(e.getDate()+i*7)},(e,i)=>(i-e-(i.getTimezoneOffset()-e.getTimezoneOffset())*Cs)/wg)}const Cf=wa(0),nf=wa(1),xE=wa(2),bE=wa(3),vl=wa(4),CE=wa(5),EE=wa(6);Cf.range;nf.range;xE.range;bE.range;vl.range;CE.range;EE.range;function va(t){return An(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCDate(e.getUTCDate()+i*7)},(e,i)=>(i-e)/wg)}const Yw=va(0),sf=va(1),FE=va(2),UE=va(3),Bl=va(4),QE=va(5),IE=va(6);Yw.range;sf.range;FE.range;UE.range;Bl.range;QE.range;IE.range;const bg=An(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());bg.range;const TE=An(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());TE.range;const WA=An(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());WA.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:An(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,i)=>{e.setFullYear(e.getFullYear()+i*t)});WA.range;const ma=An(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ma.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:An(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCFullYear(e.getUTCFullYear()+i*t)});ma.range;function SE(t,e,i,n,l,u){const f=[[cl,1,NA],[cl,5,5*NA],[cl,15,15*NA],[cl,30,30*NA],[u,1,Cs],[u,5,5*Cs],[u,15,15*Cs],[u,30,30*Cs],[l,1,VA],[l,3,3*VA],[l,6,6*VA],[l,12,12*VA],[n,1,ZA],[n,2,2*ZA],[i,1,wg],[e,1,G0],[e,3,3*G0],[t,1,Wd]];function a(C,F,E){const U=F<C;U&&([C,F]=[F,C]);const H=E&&typeof E.range=="function"?E:w(C,F,E),P=H?H.range(C,+F+1):[];return U?P.reverse():P}function w(C,F,E){const U=Math.abs(F-C)/E,H=fg(([,,j])=>j).right(f,U);if(H===f.length)return t.every(Qp(C/Wd,F/Wd,E));if(H===0)return rf.every(Math.max(Qp(C,F,E),1));const[P,V]=f[U/f[H-1][2]<f[H][2]/U?H-1:H];return P.every(V)}return[a,w]}const[kE,ME]=SE(WA,bg,Cf,iu,Bg,vg);function qd(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function jd(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function hc(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}function DE(t){var e=t.dateTime,i=t.date,n=t.time,l=t.periods,u=t.days,f=t.shortDays,a=t.months,w=t.shortMonths,C=fc(l),F=dc(l),E=fc(u),U=dc(u),H=fc(f),P=dc(f),V=fc(a),j=dc(a),Y=fc(w),ee=dc(w),ce={a:at,A:wt,b:nt,B:He,c:null,d:J0,e:J0,f:nF,g:dF,G:gF,H:tF,I:rF,j:iF,L:$w,m:sF,M:AF,p:tt,q:Je,Q:e_,s:t_,S:oF,u:aF,U:lF,V:cF,w:uF,W:hF,x:null,X:null,y:fF,Y:pF,Z:mF,"%":$0},Qe={a:ut,A:At,b:Et,B:qt,c:null,d:Y0,e:Y0,f:vF,g:TF,G:kF,H:_F,I:yF,j:wF,L:tv,m:BF,M:xF,p:Tt,q:tr,Q:e_,s:t_,S:bF,u:CF,U:EF,V:FF,w:UF,W:QF,x:null,X:null,y:IF,Y:SF,Z:MF,"%":$0},le={a:ie,A:se,b:Be,B:Re,c:ht,d:q0,e:q0,f:JE,g:W0,G:Z0,H:j0,I:j0,j:ZE,L:jE,m:XE,M:WE,p:R,q:GE,Q:$E,s:eF,S:qE,u:RE,U:OE,V:KE,w:zE,W:NE,x:_t,X:Me,y:W0,Y:Z0,Z:VE,"%":YE};ce.x=re(i,ce),ce.X=re(n,ce),ce.c=re(e,ce),Qe.x=re(i,Qe),Qe.X=re(n,Qe),Qe.c=re(e,Qe);function re(ve,ft){return function(Ft){var qe=[],Gt=-1,xe=0,Ge=ve.length,nr,mr,ti;for(Ft instanceof Date||(Ft=new Date(+Ft));++Gt<Ge;)ve.charCodeAt(Gt)===37&&(qe.push(ve.slice(xe,Gt)),(mr=X0[nr=ve.charAt(++Gt)])!=null?nr=ve.charAt(++Gt):mr=nr==="e"?" ":"0",(ti=ft[nr])&&(nr=ti(Ft,mr)),qe.push(nr),xe=Gt+1);return qe.push(ve.slice(xe,Gt)),qe.join("")}}function we(ve,ft){return function(Ft){var qe=hc(1900,void 0,1),Gt=Ae(qe,ve,Ft+="",0),xe,Ge;if(Gt!=Ft.length)return null;if("Q"in qe)return new Date(qe.Q);if("s"in qe)return new Date(qe.s*1e3+("L"in qe?qe.L:0));if(ft&&!("Z"in qe)&&(qe.Z=0),"p"in qe&&(qe.H=qe.H%12+qe.p*12),qe.m===void 0&&(qe.m="q"in qe?qe.q:0),"V"in qe){if(qe.V<1||qe.V>53)return null;"w"in qe||(qe.w=1),"Z"in qe?(xe=jd(hc(qe.y,0,1)),Ge=xe.getUTCDay(),xe=Ge>4||Ge===0?sf.ceil(xe):sf(xe),xe=xg.offset(xe,(qe.V-1)*7),qe.y=xe.getUTCFullYear(),qe.m=xe.getUTCMonth(),qe.d=xe.getUTCDate()+(qe.w+6)%7):(xe=qd(hc(qe.y,0,1)),Ge=xe.getDay(),xe=Ge>4||Ge===0?nf.ceil(xe):nf(xe),xe=iu.offset(xe,(qe.V-1)*7),qe.y=xe.getFullYear(),qe.m=xe.getMonth(),qe.d=xe.getDate()+(qe.w+6)%7)}else("W"in qe||"U"in qe)&&("w"in qe||(qe.w="u"in qe?qe.u%7:"W"in qe?1:0),Ge="Z"in qe?jd(hc(qe.y,0,1)).getUTCDay():qd(hc(qe.y,0,1)).getDay(),qe.m=0,qe.d="W"in qe?(qe.w+6)%7+qe.W*7-(Ge+5)%7:qe.w+qe.U*7-(Ge+6)%7);return"Z"in qe?(qe.H+=qe.Z/100|0,qe.M+=qe.Z%100,jd(qe)):qd(qe)}}function Ae(ve,ft,Ft,qe){for(var Gt=0,xe=ft.length,Ge=Ft.length,nr,mr;Gt<xe;){if(qe>=Ge)return-1;if(nr=ft.charCodeAt(Gt++),nr===37){if(nr=ft.charAt(Gt++),mr=le[nr in X0?ft.charAt(Gt++):nr],!mr||(qe=mr(ve,Ft,qe))<0)return-1}else if(nr!=Ft.charCodeAt(qe++))return-1}return qe}function R(ve,ft,Ft){var qe=C.exec(ft.slice(Ft));return qe?(ve.p=F.get(qe[0].toLowerCase()),Ft+qe[0].length):-1}function ie(ve,ft,Ft){var qe=H.exec(ft.slice(Ft));return qe?(ve.w=P.get(qe[0].toLowerCase()),Ft+qe[0].length):-1}function se(ve,ft,Ft){var qe=E.exec(ft.slice(Ft));return qe?(ve.w=U.get(qe[0].toLowerCase()),Ft+qe[0].length):-1}function Be(ve,ft,Ft){var qe=Y.exec(ft.slice(Ft));return qe?(ve.m=ee.get(qe[0].toLowerCase()),Ft+qe[0].length):-1}function Re(ve,ft,Ft){var qe=V.exec(ft.slice(Ft));return qe?(ve.m=j.get(qe[0].toLowerCase()),Ft+qe[0].length):-1}function ht(ve,ft,Ft){return Ae(ve,e,ft,Ft)}function _t(ve,ft,Ft){return Ae(ve,i,ft,Ft)}function Me(ve,ft,Ft){return Ae(ve,n,ft,Ft)}function at(ve){return f[ve.getDay()]}function wt(ve){return u[ve.getDay()]}function nt(ve){return w[ve.getMonth()]}function He(ve){return a[ve.getMonth()]}function tt(ve){return l[+(ve.getHours()>=12)]}function Je(ve){return 1+~~(ve.getMonth()/3)}function ut(ve){return f[ve.getUTCDay()]}function At(ve){return u[ve.getUTCDay()]}function Et(ve){return w[ve.getUTCMonth()]}function qt(ve){return a[ve.getUTCMonth()]}function Tt(ve){return l[+(ve.getUTCHours()>=12)]}function tr(ve){return 1+~~(ve.getUTCMonth()/3)}return{format:function(ve){var ft=re(ve+="",ce);return ft.toString=function(){return ve},ft},parse:function(ve){var ft=we(ve+="",!1);return ft.toString=function(){return ve},ft},utcFormat:function(ve){var ft=re(ve+="",Qe);return ft.toString=function(){return ve},ft},utcParse:function(ve){var ft=we(ve+="",!0);return ft.toString=function(){return ve},ft}}}var X0={"-":"",_:" ",0:"0"},fn=/^\s*\d+/,LE=/^%/,HE=/[\\^$*+?|[\]().{}]/g;function ei(t,e,i){var n=t<0?"-":"",l=(n?-t:t)+"",u=l.length;return n+(u<i?new Array(i-u+1).join(e)+l:l)}function PE(t){return t.replace(HE,"\\$&")}function fc(t){return new RegExp("^(?:"+t.map(PE).join("|")+")","i")}function dc(t){return new Map(t.map((e,i)=>[e.toLowerCase(),i]))}function zE(t,e,i){var n=fn.exec(e.slice(i,i+1));return n?(t.w=+n[0],i+n[0].length):-1}function RE(t,e,i){var n=fn.exec(e.slice(i,i+1));return n?(t.u=+n[0],i+n[0].length):-1}function OE(t,e,i){var n=fn.exec(e.slice(i,i+2));return n?(t.U=+n[0],i+n[0].length):-1}function KE(t,e,i){var n=fn.exec(e.slice(i,i+2));return n?(t.V=+n[0],i+n[0].length):-1}function NE(t,e,i){var n=fn.exec(e.slice(i,i+2));return n?(t.W=+n[0],i+n[0].length):-1}function Z0(t,e,i){var n=fn.exec(e.slice(i,i+4));return n?(t.y=+n[0],i+n[0].length):-1}function W0(t,e,i){var n=fn.exec(e.slice(i,i+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function VE(t,e,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function GE(t,e,i){var n=fn.exec(e.slice(i,i+1));return n?(t.q=n[0]*3-3,i+n[0].length):-1}function XE(t,e,i){var n=fn.exec(e.slice(i,i+2));return n?(t.m=n[0]-1,i+n[0].length):-1}function q0(t,e,i){var n=fn.exec(e.slice(i,i+2));return n?(t.d=+n[0],i+n[0].length):-1}function ZE(t,e,i){var n=fn.exec(e.slice(i,i+3));return n?(t.m=0,t.d=+n[0],i+n[0].length):-1}function j0(t,e,i){var n=fn.exec(e.slice(i,i+2));return n?(t.H=+n[0],i+n[0].length):-1}function WE(t,e,i){var n=fn.exec(e.slice(i,i+2));return n?(t.M=+n[0],i+n[0].length):-1}function qE(t,e,i){var n=fn.exec(e.slice(i,i+2));return n?(t.S=+n[0],i+n[0].length):-1}function jE(t,e,i){var n=fn.exec(e.slice(i,i+3));return n?(t.L=+n[0],i+n[0].length):-1}function JE(t,e,i){var n=fn.exec(e.slice(i,i+6));return n?(t.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function YE(t,e,i){var n=LE.exec(e.slice(i,i+1));return n?i+n[0].length:-1}function $E(t,e,i){var n=fn.exec(e.slice(i));return n?(t.Q=+n[0],i+n[0].length):-1}function eF(t,e,i){var n=fn.exec(e.slice(i));return n?(t.s=+n[0],i+n[0].length):-1}function J0(t,e){return ei(t.getDate(),e,2)}function tF(t,e){return ei(t.getHours(),e,2)}function rF(t,e){return ei(t.getHours()%12||12,e,2)}function iF(t,e){return ei(1+iu.count(WA(t),t),e,3)}function $w(t,e){return ei(t.getMilliseconds(),e,3)}function nF(t,e){return $w(t,e)+"000"}function sF(t,e){return ei(t.getMonth()+1,e,2)}function AF(t,e){return ei(t.getMinutes(),e,2)}function oF(t,e){return ei(t.getSeconds(),e,2)}function aF(t){var e=t.getDay();return e===0?7:e}function lF(t,e){return ei(Cf.count(WA(t)-1,t),e,2)}function ev(t){var e=t.getDay();return e>=4||e===0?vl(t):vl.ceil(t)}function cF(t,e){return t=ev(t),ei(vl.count(WA(t),t)+(WA(t).getDay()===4),e,2)}function uF(t){return t.getDay()}function hF(t,e){return ei(nf.count(WA(t)-1,t),e,2)}function fF(t,e){return ei(t.getFullYear()%100,e,2)}function dF(t,e){return t=ev(t),ei(t.getFullYear()%100,e,2)}function pF(t,e){return ei(t.getFullYear()%1e4,e,4)}function gF(t,e){var i=t.getDay();return t=i>=4||i===0?vl(t):vl.ceil(t),ei(t.getFullYear()%1e4,e,4)}function mF(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ei(e/60|0,"0",2)+ei(e%60,"0",2)}function Y0(t,e){return ei(t.getUTCDate(),e,2)}function _F(t,e){return ei(t.getUTCHours(),e,2)}function yF(t,e){return ei(t.getUTCHours()%12||12,e,2)}function wF(t,e){return ei(1+xg.count(ma(t),t),e,3)}function tv(t,e){return ei(t.getUTCMilliseconds(),e,3)}function vF(t,e){return tv(t,e)+"000"}function BF(t,e){return ei(t.getUTCMonth()+1,e,2)}function xF(t,e){return ei(t.getUTCMinutes(),e,2)}function bF(t,e){return ei(t.getUTCSeconds(),e,2)}function CF(t){var e=t.getUTCDay();return e===0?7:e}function EF(t,e){return ei(Yw.count(ma(t)-1,t),e,2)}function rv(t){var e=t.getUTCDay();return e>=4||e===0?Bl(t):Bl.ceil(t)}function FF(t,e){return t=rv(t),ei(Bl.count(ma(t),t)+(ma(t).getUTCDay()===4),e,2)}function UF(t){return t.getUTCDay()}function QF(t,e){return ei(sf.count(ma(t)-1,t),e,2)}function IF(t,e){return ei(t.getUTCFullYear()%100,e,2)}function TF(t,e){return t=rv(t),ei(t.getUTCFullYear()%100,e,2)}function SF(t,e){return ei(t.getUTCFullYear()%1e4,e,4)}function kF(t,e){var i=t.getUTCDay();return t=i>=4||i===0?Bl(t):Bl.ceil(t),ei(t.getUTCFullYear()%1e4,e,4)}function MF(){return"+0000"}function $0(){return"%"}function e_(t){return+t}function t_(t){return Math.floor(+t/1e3)}var ja,iv;DF({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function DF(t){return ja=DE(t),iv=ja.format,ja.parse,ja.utcFormat,ja.utcParse,ja}function LF(t){return new Date(t)}function HF(t){return t instanceof Date?+t:+new Date(+t)}function nv(t,e,i,n,l,u,f,a,w,C){var F=Zw(),E=F.invert,U=F.domain,H=C(".%L"),P=C(":%S"),V=C("%I:%M"),j=C("%I %p"),Y=C("%a %d"),ee=C("%b %d"),ce=C("%B"),Qe=C("%Y");function le(re){return(w(re)<re?H:a(re)<re?P:f(re)<re?V:u(re)<re?j:n(re)<re?l(re)<re?Y:ee:i(re)<re?ce:Qe)(re)}return F.invert=function(re){return new Date(E(re))},F.domain=function(re){return arguments.length?U(Array.from(re,HF)):U().map(LF)},F.ticks=function(re){var we=U();return t(we[0],we[we.length-1],re??10)},F.tickFormat=function(re,we){return we==null?le:C(we)},F.nice=function(re){var we=U();return(!re||typeof re.range!="function")&&(re=e(we[0],we[we.length-1],re??10)),re?U(dE(we,re)):F},F.copy=function(){return bf(F,nv(t,e,i,n,l,u,f,a,w,C))},F}function r_(){return bl.apply(nv(kE,ME,WA,bg,Cf,iu,Bg,vg,cl,iv).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}const bc={x:rs,y:rs,z:rs,r:yE};function PF(t){return t.constant?"symlog":t.base?"log":t.exponent?t.exponent()===.5?"sqrt":"pow":"other"}function i_(t){return t}function zF(t){return e=>Math.log(t*e)}function RF(t){return e=>t*Math.exp(e)}function OF(t){return e=>Math.sign(e)*Math.log1p(Math.abs(e/t))}function KF(t){return e=>Math.sign(e)*Math.expm1(Math.abs(e))*t}function ch(t){return function(i){return i<0?-Math.pow(-i,t):Math.pow(i,t)}}function NF(t){const e=PF(t);if(e==="log"){const i=Math.sign(t.domain()[0]);return{lift:zF(i),ground:RF(i),scaleType:e}}return e==="pow"?{lift:ch(1),ground:ch(1/1),scaleType:e}:e==="sqrt"?{lift:ch(.5),ground:ch(1/.5),scaleType:e}:e==="symlog"?{lift:OF(1),ground:KF(1),scaleType:e}:{lift:i_,ground:i_,scaleType:e}}function Af(t){return t.replace(/^\w/,e=>e.toUpperCase())}function On(t,e=""){return`scale${Af(e)}${Af(t)}`}function sv(t){if(typeof t.bandwidth=="function")return typeof t.paddingInner=="function"?On("band"):On("point");if(xc(Object.keys(t),["domain","range","unknown","copy"]))return On("ordinal");let e="";if(t.interpolator&&(t.domain().length===3?e="diverging":e="sequential"),t.quantiles)return On("quantile",e);if(t.thresholds)return On("quantize",e);if(t.constant)return On("symlog",e);if(t.base)return On("log",e);if(t.exponent)return t.exponent()===.5?On("sqrt",e):On("pow",e);if(xc(Object.keys(t),["domain","range","invertExtent","unknown","copy"]))return On("threshold");if(xc(Object.keys(t),["invert","range","domain","unknown","copy","ticks","tickFormat","nice"]))return On("identity");if(xc(Object.keys(t),["invert","domain","range","rangeRound","round","clamp","unknown","copy","ticks","tickFormat","nice"]))return On("radial");if(e)return On(e);if(t.domain()[0]instanceof Date){const i=new Date;let n;return i.getDay=()=>n="time",i.getUTCDay=()=>n="utc",t.tickFormat(0,"%a")(i),On(n)}return On("linear")}const VF=["scaleThreshold","scaleQuantile","scaleQuantize","scaleSequentialQuantile"];function GF(t,e){if(typeof t.range!="function")throw console.log(t),new Error("Scale method `range` must be a function");if(typeof t.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(e)||VF.includes(sv(t))||Nw(t)===!0)return t.domain();const{lift:i,ground:n}=NF(t),l=t.domain()[0],u=Object.prototype.toString.call(l)==="[object Date]",[f,a]=t.domain().map(H=>i(u?H.getTime():H)),[w,C]=t.range(),F=e[0]||0,E=e[1]||0,U=(a-f)/(Math.abs(C-w)-F-E);return[f-F*U,E*U+a].map(H=>n(u?new Date(H):H))}function XF(t,e,i,n,l){let u,f;return l===!0?(u=0,f=100):(u=t==="r"?1:0,f=t==="y"?i:t==="r"?25:e),n===!0?[f,u]:[u,f]}function ZF(t,e,i,n,l,u){return l?typeof l=="function"?l({width:e,height:i}):l:XF(t,e,i,n,u)}function uh(t){return function([i,n,l,u,f,a,w,C,F,E]){if(n===null)return null;const U=ZF(t,w,C,a,F,E),H=i===bc[t]?i():i.copy();return H.domain(l),(!H.interpolator||typeof H.interpolator=="function"&&H.interpolator().name.startsWith("identity"))&&H.range(U),u&&H.domain(GF(H,u)),(f===!0||typeof f=="number")&&(typeof H.nice=="function"?H.nice(typeof f=="number"?f:void 0):console.error(`[Layer Cake] You set \`${t}Nice: true\` but the ${t}Scale does not have a \`.nice\` method. Ignoring...`)),H}}function hh([t,e]){return i=>{const n=t(i);return Array.isArray(n)?n.map(l=>e(l)):e(n)}}function fh([t]){if(typeof t=="function"){if(typeof t.range=="function")return t.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const gA="    ";function WF(t){const{r:e,g:i,b:n,opacity:l}=Jh(t);return[e,i,n].every(u=>u>=0&&u<=255)?{r:e,g:i,b:n,o:l}:!1}function qF({r:t,g:e,b:i}){return(.2126*t+.7152*e+.0722*i)/255>.6?"black":"white"}function jF(t){console.log("/********* LayerCake Debug ************/"),console.log("Bounding box:"),JF(t.boundingBox),console.log(`Scales:
`),Object.keys(t.activeGetters).forEach(e=>{YF(e,t[`${e}Scale`],t[e])}),console.log(`/************ End LayerCake Debug ***************/
`)}function JF(t){Object.entries(t).forEach(([e,i])=>{console.log(`${gA}${e}:`,i)})}function YF(t,e,i){const n=sv(e);console.log(`${gA}${t}:`),console.log(`${gA}${gA}Accessor: "${i.toString()}"`),console.log(`${gA}${gA}Type: ${n}`),n_(e,"domain"),n_(e,"range"," ")}function n_(t,e,i=""){const n=t[e](),l=eU(n);l?$F(l,e,n):console.log(`${gA}${gA}${Af(e)}:${i}`,n)}function $F(t,e,i){console.log(`${gA}${gA}${Af(e)}:    %cArray%c(${i.length}) `+t[0]+"%c ]","color: #1377e4","color: #737373","color: #1478e4",...t[1],"color: #1478e4")}function eU(t){const e=[],i=t.map((n,l)=>{const u=WF(n);if(u!==!1){e.push(u);const f=l===t.length-1?" ":"";return`%c ${n}${f}`}return n});return e.length?[`%c[ ${i.join(", ")}`,e.map(n=>`background-color: rgba(${n.r}, ${n.g}, ${n.b}, ${n.o}); color:${qF(n)};`)]:null}const tU=t=>({element:t[0]&4,width:t[0]&256,height:t[0]&512,aspectRatio:t[0]&1024,containerWidth:t[0]&128,containerHeight:t[0]&64}),s_=t=>({element:t[2],width:t[8],height:t[9],aspectRatio:t[10],containerWidth:t[7],containerHeight:t[6]});function A_(t){let e,i,n;const l=t[103].default,u=qr(l,t,t[102],s_);return{c(){e=it("div"),u&&u.c(),ue(e,"class","layercake-container svelte-vhzpsp"),Co(()=>t[105].call(e)),bt(e,"position",t[5]),bt(e,"top",t[5]==="absolute"?"0":null),bt(e,"right",t[5]==="absolute"?"0":null),bt(e,"bottom",t[5]==="absolute"?"0":null),bt(e,"left",t[5]==="absolute"?"0":null),bt(e,"pointer-events",t[4]===!1?"none":null)},m(f,a){Fe(f,e,a),u&&u.m(e,null),t[104](e),i=kw(e,t[105].bind(e)),n=!0},p(f,a){u&&u.p&&(!n||a[0]&1988|a[3]&512)&&Jr(u,l,f,f[102],n?jr(l,f[102],a,tU):Yr(f[102]),s_),a[0]&32&&bt(e,"position",f[5]),a[0]&32&&bt(e,"top",f[5]==="absolute"?"0":null),a[0]&32&&bt(e,"right",f[5]==="absolute"?"0":null),a[0]&32&&bt(e,"bottom",f[5]==="absolute"?"0":null),a[0]&32&&bt(e,"left",f[5]==="absolute"?"0":null),a[0]&16&&bt(e,"pointer-events",f[4]===!1?"none":null)},i(f){n||(Ce(u,f),n=!0)},o(f){De(u,f),n=!1},d(f){f&&Ee(e),u&&u.d(f),t[104](null),i()}}}function rU(t){let e,i,n=(t[3]===!0||typeof window<"u")&&A_(t);return{c(){n&&n.c(),e=hi()},m(l,u){n&&n.m(l,u),Fe(l,e,u),i=!0},p(l,u){l[3]===!0||typeof window<"u"?n?(n.p(l,u),u[0]&8&&Ce(n,1)):(n=A_(l),n.c(),Ce(n,1),n.m(e.parentNode,e)):n&&(Rr(),De(n,1,1,()=>{n=null}),Or())},i(l){i||(Ce(n),i=!0)},o(l){De(n),i=!1},d(l){n&&n.d(l),l&&Ee(e)}}}function iU(t,e,i){let n,l,u,f,a,w,C,F,E,U,H,P,V,j,Y,ee,ce,Qe,le,re,we,Ae,R,ie,se,Be,Re,ht,_t,Me,at,wt,nt,He,tt,Je,ut,At,Et,qt,Tt,tr,ve,ft,Ft,qe,Gt,{$$slots:xe={},$$scope:Ge}=e;const nr=aC(jF,200);let{ssr:mr=!1}=e,{pointerEvents:ti=!0}=e,{position:er="relative"}=e,{percentRange:Vr=!1}=e,{width:bi=void 0}=e,{height:Ai=void 0}=e,{containerWidth:mi=bi||100}=e,{containerHeight:oi=Ai||100}=e,{element:ai=void 0}=e,{x:fi=void 0}=e,{y:li=void 0}=e,{z:Ze=void 0}=e,{r:mt=void 0}=e,{data:_i=[]}=e,{xDomain:ci=void 0}=e,{yDomain:Ar=void 0}=e,{zDomain:yi=void 0}=e,{rDomain:Xe=void 0}=e,{xNice:Hr=!1}=e,{yNice:Gr=!1}=e,{zNice:me=!1}=e,{rNice:Ot=!1}=e,{xPadding:Kt=void 0}=e,{yPadding:Ir=void 0}=e,{zPadding:wr=void 0}=e,{rPadding:rr=void 0}=e,{xScale:Oe=bc.x}=e,{yScale:kr=bc.y}=e,{zScale:en=bc.z}=e,{rScale:ri=bc.r}=e,{xRange:Pr=void 0}=e,{yRange:vr=void 0}=e,{zRange:Tn=void 0}=e,{rRange:tn=void 0}=e,{xReverse:Gn=!1}=e,{yReverse:Xn=typeof kr.bandwidth!="function"}=e,{zReverse:is=!1}=e,{rReverse:Zn=!1}=e,{padding:te={}}=e,{extents:L={}}=e,{flatData:N=void 0}=e,{custom:J={}}=e,{debug:$=!1}=e,ge=!1;_a(()=>{ge=!0});const _e={},ye=_r(Vr);ct(t,ye,Ie=>i(141,ft=Ie));const de=_r(mi);ct(t,de,Ie=>i(7,ve=Ie));const Ue=_r(oi);ct(t,Ue,Ie=>i(6,tr=Ie));const je=_r(Nd(L));ct(t,je,Ie=>i(140,Tt=Ie));const lt=_r(_i);ct(t,lt,Ie=>i(139,qt=Ie));const We=_r(N||_i);ct(t,We,Ie=>i(138,Et=Ie));const Dt=_r(te);ct(t,Dt,Ie=>i(137,At=Ie));const Lt=_r(go(fi));ct(t,Lt,Ie=>i(136,ut=Ie));const vt=_r(go(li));ct(t,vt,Ie=>i(135,Je=Ie));const jt=_r(go(Ze));ct(t,jt,Ie=>i(134,tt=Ie));const $t=_r(go(mt));ct(t,$t,Ie=>i(133,He=Ie));const hr=_r(ci);ct(t,hr,Ie=>i(132,nt=Ie));const sr=_r(Ar);ct(t,sr,Ie=>i(131,wt=Ie));const or=_r(yi);ct(t,or,Ie=>i(130,at=Ie));const fr=_r(Xe);ct(t,fr,Ie=>i(129,Me=Ie));const Cr=_r(Hr);ct(t,Cr,Ie=>i(128,_t=Ie));const Ci=_r(Gr);ct(t,Ci,Ie=>i(127,ht=Ie));const Xr=_r(me);ct(t,Xr,Ie=>i(126,Re=Ie));const Ui=_r(Ot);ct(t,Ui,Ie=>i(125,Be=Ie));const Wn=_r(Gn);ct(t,Wn,Ie=>i(124,se=Ie));const ns=_r(Xn);ct(t,ns,Ie=>i(123,ie=Ie));const Er=_r(is);ct(t,Er,Ie=>i(122,R=Ie));const Us=_r(Zn);ct(t,Us,Ie=>i(121,Ae=Ie));const Qs=_r(Kt);ct(t,Qs,Ie=>i(120,we=Ie));const Js=_r(Ir);ct(t,Js,Ie=>i(119,re=Ie));const Ys=_r(wr);ct(t,Ys,Ie=>i(118,le=Ie));const Is=_r(rr);ct(t,Is,Ie=>i(117,Qe=Ie));const jA=_r(Pr);ct(t,jA,Ie=>i(116,ce=Ie));const Ts=_r(vr);ct(t,Ts,Ie=>i(115,ee=Ie));const $s=_r(Tn);ct(t,$s,Ie=>i(114,Y=Ie));const BA=_r(tn);ct(t,BA,Ie=>i(113,j=Ie));const eA=_r(Oe);ct(t,eA,Ie=>i(112,V=Ie));const tA=_r(kr);ct(t,tA,Ie=>i(111,P=Ie));const Sn=_r(en);ct(t,Sn,Ie=>i(110,H=Ie));const ss=_r(ri);ct(t,ss,Ie=>i(109,U=Ie));const As=_r(_e);ct(t,As,Ie=>i(107,F=Ie));const Ss=_r(J);ct(t,Ss,Ie=>i(108,E=Ie));const ks=Di([Lt,vt,jt,$t],([Ie,Bn,pn,Qi])=>{const os={};return Ie&&(os.x=Ie),Bn&&(os.y=Bn),pn&&(os.z=pn),Qi&&(os.r=Qi),os});ct(t,ks,Ie=>i(100,w=Ie));const Ms=Di([Dt,de,Ue],([Ie])=>Object.assign({top:0,right:0,bottom:0,left:0},Ie)),rA=Di([de,Ue,Ms],([Ie,Bn,pn])=>{const Qi={};return Qi.top=pn.top,Qi.right=Ie-pn.right,Qi.bottom=Bn-pn.bottom,Qi.left=pn.left,Qi.width=Qi.right-Qi.left,Qi.height=Qi.bottom-Qi.top,Qi.width<=0&&ge===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),Qi.height<=0&&ge===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),Qi});ct(t,rA,Ie=>i(101,C=Ie));const kn=Di([rA],([Ie])=>Ie.width);ct(t,kn,Ie=>i(8,Ft=Ie));const vn=Di([rA],([Ie])=>Ie.height);ct(t,vn,Ie=>i(9,qe=Ie));const Fr=Di([We,ks,je,eA,tA,ss,Sn],([Ie,Bn,pn,Qi,os,YA,ko])=>{const Mo={x:Qi,y:os,r:YA,z:ko},nA=Nd(Bn,pn),Ca=Object.fromEntries(Object.keys(nA).map($A=>[$A,Mo[$A]]));return Object.keys(nA).length>0?{...uC(Ie,nA,Ca),...pn}:{}}),iA=Di([Fr,hr],Ah("x")),Qo=Di([Fr,sr],Ah("y")),Io=Di([Fr,or],Ah("z")),JA=Di([Fr,fr],Ah("r")),gs=Di([eA,Fr,iA,Qs,Cr,Wn,kn,vn,jA,ye],uh("x"));ct(t,gs,Ie=>i(99,a=Ie));const Ba=Di([Lt,gs],hh),xA=Di([tA,Fr,Qo,Js,Ci,ns,kn,vn,Ts,ye],uh("y"));ct(t,xA,Ie=>i(98,f=Ie));const El=Di([vt,xA],hh),Ds=Di([Sn,Fr,Io,Ys,Xr,Er,kn,vn,$s,ye],uh("z"));ct(t,Ds,Ie=>i(97,u=Ie));const To=Di([jt,Ds],hh),Ls=Di([ss,Fr,JA,Is,Ui,Us,kn,vn,BA,ye],uh("r"));ct(t,Ls,Ie=>i(96,l=Ie));const So=Di([$t,Ls],hh),Ur=Di([gs],fh),xa=Di([xA],fh),Fl=Di([Ds],fh),bA=Di([Ls],fh),Hs=Di([kn,vn],([Ie,Bn])=>Ie/Bn);ct(t,Hs,Ie=>i(10,Gt=Ie));function ba(Ie){zi[Ie?"unshift":"push"](()=>{ai=Ie,i(2,ai)})}function dn(){mi=this.clientWidth,oi=this.clientHeight,i(0,mi),i(1,oi)}return t.$$set=Ie=>{"ssr"in Ie&&i(3,mr=Ie.ssr),"pointerEvents"in Ie&&i(4,ti=Ie.pointerEvents),"position"in Ie&&i(5,er=Ie.position),"percentRange"in Ie&&i(57,Vr=Ie.percentRange),"width"in Ie&&i(58,bi=Ie.width),"height"in Ie&&i(59,Ai=Ie.height),"containerWidth"in Ie&&i(0,mi=Ie.containerWidth),"containerHeight"in Ie&&i(1,oi=Ie.containerHeight),"element"in Ie&&i(2,ai=Ie.element),"x"in Ie&&i(60,fi=Ie.x),"y"in Ie&&i(61,li=Ie.y),"z"in Ie&&i(62,Ze=Ie.z),"r"in Ie&&i(63,mt=Ie.r),"data"in Ie&&i(64,_i=Ie.data),"xDomain"in Ie&&i(65,ci=Ie.xDomain),"yDomain"in Ie&&i(66,Ar=Ie.yDomain),"zDomain"in Ie&&i(67,yi=Ie.zDomain),"rDomain"in Ie&&i(68,Xe=Ie.rDomain),"xNice"in Ie&&i(69,Hr=Ie.xNice),"yNice"in Ie&&i(70,Gr=Ie.yNice),"zNice"in Ie&&i(71,me=Ie.zNice),"rNice"in Ie&&i(72,Ot=Ie.rNice),"xPadding"in Ie&&i(73,Kt=Ie.xPadding),"yPadding"in Ie&&i(74,Ir=Ie.yPadding),"zPadding"in Ie&&i(75,wr=Ie.zPadding),"rPadding"in Ie&&i(76,rr=Ie.rPadding),"xScale"in Ie&&i(77,Oe=Ie.xScale),"yScale"in Ie&&i(78,kr=Ie.yScale),"zScale"in Ie&&i(79,en=Ie.zScale),"rScale"in Ie&&i(80,ri=Ie.rScale),"xRange"in Ie&&i(81,Pr=Ie.xRange),"yRange"in Ie&&i(82,vr=Ie.yRange),"zRange"in Ie&&i(83,Tn=Ie.zRange),"rRange"in Ie&&i(84,tn=Ie.rRange),"xReverse"in Ie&&i(85,Gn=Ie.xReverse),"yReverse"in Ie&&i(86,Xn=Ie.yReverse),"zReverse"in Ie&&i(87,is=Ie.zReverse),"rReverse"in Ie&&i(88,Zn=Ie.rReverse),"padding"in Ie&&i(89,te=Ie.padding),"extents"in Ie&&i(90,L=Ie.extents),"flatData"in Ie&&i(91,N=Ie.flatData),"custom"in Ie&&i(92,J=Ie.custom),"debug"in Ie&&i(93,$=Ie.debug),"$$scope"in Ie&&i(102,Ge=Ie.$$scope)},t.$$.update=()=>{t.$$.dirty[1]&536870912&&fi&&i(94,_e.x=fi,_e),t.$$.dirty[1]&1073741824&&li&&i(94,_e.y=li,_e),t.$$.dirty[2]&1&&Ze&&i(94,_e.z=Ze,_e),t.$$.dirty[2]&2&&mt&&i(94,_e.r=mt,_e),t.$$.dirty[2]&8&&ci&&i(94,_e.xDomain=ci,_e),t.$$.dirty[2]&16&&Ar&&i(94,_e.yDomain=Ar,_e),t.$$.dirty[2]&32&&yi&&i(94,_e.zDomain=yi,_e),t.$$.dirty[2]&64&&Xe&&i(94,_e.rDomain=Xe,_e),t.$$.dirty[2]&524288&&Pr&&i(94,_e.xRange=Pr,_e),t.$$.dirty[2]&1048576&&vr&&i(94,_e.yRange=vr,_e),t.$$.dirty[2]&2097152&&Tn&&i(94,_e.zRange=Tn,_e),t.$$.dirty[2]&4194304&&tn&&i(94,_e.rRange=tn,_e),t.$$.dirty[1]&67108864&&Qr(ye,ft=Vr,ft),t.$$.dirty[0]&1&&Qr(de,ve=mi,ve),t.$$.dirty[0]&2&&Qr(Ue,tr=oi,tr),t.$$.dirty[2]&268435456&&Qr(je,Tt=Nd(L),Tt),t.$$.dirty[2]&4&&Qr(lt,qt=_i,qt),t.$$.dirty[2]&536870916&&Qr(We,Et=N||_i,Et),t.$$.dirty[2]&134217728&&Qr(Dt,At=te,At),t.$$.dirty[1]&536870912&&Qr(Lt,ut=go(fi),ut),t.$$.dirty[1]&1073741824&&Qr(vt,Je=go(li),Je),t.$$.dirty[2]&1&&Qr(jt,tt=go(Ze),tt),t.$$.dirty[2]&2&&Qr($t,He=go(mt),He),t.$$.dirty[2]&8&&Qr(hr,nt=ci,nt),t.$$.dirty[2]&16&&Qr(sr,wt=Ar,wt),t.$$.dirty[2]&32&&Qr(or,at=yi,at),t.$$.dirty[2]&64&&Qr(fr,Me=Xe,Me),t.$$.dirty[2]&128&&Qr(Cr,_t=Hr,_t),t.$$.dirty[2]&256&&Qr(Ci,ht=Gr,ht),t.$$.dirty[2]&512&&Qr(Xr,Re=me,Re),t.$$.dirty[2]&1024&&Qr(Ui,Be=Ot,Be),t.$$.dirty[2]&8388608&&Qr(Wn,se=Gn,se),t.$$.dirty[2]&16777216&&Qr(ns,ie=Xn,ie),t.$$.dirty[2]&33554432&&Qr(Er,R=is,R),t.$$.dirty[2]&67108864&&Qr(Us,Ae=Zn,Ae),t.$$.dirty[2]&2048&&Qr(Qs,we=Kt,we),t.$$.dirty[2]&4096&&Qr(Js,re=Ir,re),t.$$.dirty[2]&8192&&Qr(Ys,le=wr,le),t.$$.dirty[2]&16384&&Qr(Is,Qe=rr,Qe),t.$$.dirty[2]&524288&&Qr(jA,ce=Pr,ce),t.$$.dirty[2]&1048576&&Qr(Ts,ee=vr,ee),t.$$.dirty[2]&2097152&&Qr($s,Y=Tn,Y),t.$$.dirty[2]&4194304&&Qr(BA,j=tn,j),t.$$.dirty[2]&32768&&Qr(eA,V=Oe,V),t.$$.dirty[2]&65536&&Qr(tA,P=kr,P),t.$$.dirty[2]&131072&&Qr(Sn,H=en,H),t.$$.dirty[2]&262144&&Qr(ss,U=ri,U),t.$$.dirty[2]&1073741824&&Qr(Ss,E=J,E),t.$$.dirty[3]&2&&Qr(As,F=_e,F),t.$$.dirty[3]&4&&_l("LayerCake",n),t.$$.dirty[0]&8|t.$$.dirty[3]&507&&C&&$===!0&&(mr===!0||typeof window<"u")&&nr({boundingBox:C,activeGetters:w,x:_e.x,y:_e.y,z:_e.z,r:_e.r,xScale:a,yScale:f,zScale:u,rScale:l})},i(95,n={activeGetters:ks,width:kn,height:vn,percentRange:ye,aspectRatio:Hs,containerWidth:de,containerHeight:Ue,x:Lt,y:vt,z:jt,r:$t,custom:Ss,data:lt,xNice:Cr,yNice:Ci,zNice:Xr,rNice:Ui,xReverse:Wn,yReverse:ns,zReverse:Er,rReverse:Us,xPadding:Qs,yPadding:Js,zPadding:Ys,rPadding:Is,padding:Ms,flatData:We,extents:Fr,xDomain:iA,yDomain:Qo,zDomain:Io,rDomain:JA,xRange:Ur,yRange:xa,zRange:Fl,rRange:bA,config:As,xScale:gs,xGet:Ba,yScale:xA,yGet:El,zScale:Ds,zGet:To,rScale:Ls,rGet:So}),[mi,oi,ai,mr,ti,er,tr,ve,Ft,qe,Gt,ye,de,Ue,je,lt,We,Dt,Lt,vt,jt,$t,hr,sr,or,fr,Cr,Ci,Xr,Ui,Wn,ns,Er,Us,Qs,Js,Ys,Is,jA,Ts,$s,BA,eA,tA,Sn,ss,As,Ss,ks,rA,kn,vn,gs,xA,Ds,Ls,Hs,Vr,bi,Ai,fi,li,Ze,mt,_i,ci,Ar,yi,Xe,Hr,Gr,me,Ot,Kt,Ir,wr,rr,Oe,kr,en,ri,Pr,vr,Tn,tn,Gn,Xn,is,Zn,te,L,N,J,$,_e,n,l,u,f,a,w,C,Ge,xe,ba,dn]}class Cg extends Nr{constructor(e){super(),Kr(this,e,iU,rU,Lr,{ssr:3,pointerEvents:4,position:5,percentRange:57,width:58,height:59,containerWidth:0,containerHeight:1,element:2,x:60,y:61,z:62,r:63,data:64,xDomain:65,yDomain:66,zDomain:67,rDomain:68,xNice:69,yNice:70,zNice:71,rNice:72,xPadding:73,yPadding:74,zPadding:75,rPadding:76,xScale:77,yScale:78,zScale:79,rScale:80,xRange:81,yRange:82,zRange:83,rRange:84,xReverse:85,yReverse:86,zReverse:87,rReverse:88,padding:89,extents:90,flatData:91,custom:92,debug:93},null,[-1,-1,-1,-1,-1,-1])}}const nU=t=>({element:t&1}),o_=t=>({element:t[0]}),sU=t=>({element:t&1}),a_=t=>({element:t[0]});function AU(t){let e,i,n,l,u;const f=t[12].defs,a=qr(f,t,t[11],a_),w=t[12].default,C=qr(w,t,t[11],o_);return{c(){e=Dr("svg"),i=Dr("defs"),a&&a.c(),n=Dr("g"),C&&C.c(),ue(n,"class","layercake-layout-svg_g"),ue(n,"transform",l="translate("+t[7].left+", "+t[7].top+")"),ue(e,"class","layercake-layout-svg svelte-u84d8d"),ue(e,"viewBox",t[4]),ue(e,"width",t[5]),ue(e,"height",t[6]),bt(e,"z-index",t[2]),bt(e,"pointer-events",t[3]===!1?"none":null)},m(F,E){Fe(F,e,E),$e(e,i),a&&a.m(i,null),$e(e,n),C&&C.m(n,null),t[13](n),t[14](e),u=!0},p(F,[E]){a&&a.p&&(!u||E&2049)&&Jr(a,f,F,F[11],u?jr(f,F[11],E,sU):Yr(F[11]),a_),C&&C.p&&(!u||E&2049)&&Jr(C,w,F,F[11],u?jr(w,F[11],E,nU):Yr(F[11]),o_),(!u||E&128&&l!==(l="translate("+F[7].left+", "+F[7].top+")"))&&ue(n,"transform",l),(!u||E&16)&&ue(e,"viewBox",F[4]),(!u||E&32)&&ue(e,"width",F[5]),(!u||E&64)&&ue(e,"height",F[6]),E&4&&bt(e,"z-index",F[2]),E&8&&bt(e,"pointer-events",F[3]===!1?"none":null)},i(F){u||(Ce(a,F),Ce(C,F),u=!0)},o(F){De(a,F),De(C,F),u=!1},d(F){F&&Ee(e),a&&a.d(F),C&&C.d(F),t[13](null),t[14](null)}}}function oU(t,e,i){let n,l,u,{$$slots:f={},$$scope:a}=e,{element:w=void 0}=e,{innerElement:C=void 0}=e,{zIndex:F=void 0}=e,{pointerEvents:E=void 0}=e,{viewBox:U=void 0}=e;const{containerWidth:H,containerHeight:P,padding:V}=Gi("LayerCake");ct(t,H,ee=>i(5,n=ee)),ct(t,P,ee=>i(6,l=ee)),ct(t,V,ee=>i(7,u=ee));function j(ee){zi[ee?"unshift":"push"](()=>{C=ee,i(1,C)})}function Y(ee){zi[ee?"unshift":"push"](()=>{w=ee,i(0,w)})}return t.$$set=ee=>{"element"in ee&&i(0,w=ee.element),"innerElement"in ee&&i(1,C=ee.innerElement),"zIndex"in ee&&i(2,F=ee.zIndex),"pointerEvents"in ee&&i(3,E=ee.pointerEvents),"viewBox"in ee&&i(4,U=ee.viewBox),"$$scope"in ee&&i(11,a=ee.$$scope)},[w,C,F,E,U,n,l,u,H,P,V,a,f,j,Y]}class Eg extends Nr{constructor(e){super(),Kr(this,e,oU,AU,Lr,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function Fg(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function l_(t){return Object.prototype.toString.call(t)==="[object Date]"}function kp(t,e){if(t===e||t!==t)return()=>t;const i=typeof t;if(i!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map((l,u)=>kp(t[u],l));return l=>n.map(u=>u(l))}if(i==="object"){if(!t||!e)throw new Error("Object cannot be null");if(l_(t)&&l_(e)){t=t.getTime(),e=e.getTime();const u=e-t;return f=>new Date(t+f*u)}const n=Object.keys(e),l={};return n.forEach(u=>{l[u]=kp(t[u],e[u])}),u=>{const f={};return n.forEach(a=>{f[a]=l[a](u)}),f}}if(i==="number"){const n=e-t;return l=>t+l*n}throw new Error(`Cannot interpolate ${i} values`)}function da(t,e={}){const i=_r(t);let n,l=t;function u(f,a){if(t==null)return i.set(t=f),Promise.resolve();l=f;let w=n,C=!1,{delay:F=0,duration:E=400,easing:U=mb,interpolate:H=kp}=Bp(Bp({},e),a);if(E===0)return w&&(w.abort(),w=null),i.set(t=l),Promise.resolve();const P=yb()+F;let V;return n=wb(j=>{if(j<P)return!0;C||(V=H(t,f),typeof E=="function"&&(E=E(t,f)),C=!0),w&&(w.abort(),w=null);const Y=j-P;return Y>E?(i.set(t=f),!1):(i.set(t=V(U(Y/E))),!0)}),n.promise}return{set:u,update:(f,a)=>u(f(l,t),a),subscribe:i.subscribe}}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Mp=function(t,e){return Mp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(i[l]=n[l])},Mp(t,e)};function js(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Mp(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var Dp=function(){return Dp=Object.assign||function(e){for(var i,n=1,l=arguments.length;n<l;n++){i=arguments[n];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(e[u]=i[u])}return e},Dp.apply(this,arguments)};function Nn(t,e,i,n){function l(u){return u instanceof i?u:new i(function(f){f(u)})}return new(i||(i=Promise))(function(u,f){function a(F){try{C(n.next(F))}catch(E){f(E)}}function w(F){try{C(n.throw(F))}catch(E){f(E)}}function C(F){F.done?u(F.value):l(F.value).then(a,w)}C((n=n.apply(t,e||[])).next())})}function Qn(t,e){var i={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},n,l,u,f;return f={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function a(C){return function(F){return w([C,F])}}function w(C){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,l&&(u=C[0]&2?l.return:C[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,C[1])).done)return u;switch(l=0,u&&(C=[C[0]&2,u.value]),C[0]){case 0:case 1:u=C;break;case 4:return i.label++,{value:C[1],done:!1};case 5:i.label++,l=C[1],C=[0];continue;case 7:C=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(C[0]===6||C[0]===2)){i=0;continue}if(C[0]===3&&(!u||C[1]>u[0]&&C[1]<u[3])){i.label=C[1];break}if(C[0]===6&&i.label<u[1]){i.label=u[1],u=C;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(C);break}u[2]&&i.ops.pop(),i.trys.pop();continue}C=e.call(t,i)}catch(F){C=[6,F],l=0}finally{n=u=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}}function dh(t,e,i){if(i||arguments.length===2)for(var n=0,l=e.length,u;n<l;n++)(u||!(n in e))&&(u||(u=Array.prototype.slice.call(e,0,n)),u[n]=e[n]);return t.concat(u||e)}var qA=function(){function t(e,i,n,l){this.left=e,this.top=i,this.width=n,this.height=l}return t.prototype.add=function(e,i,n,l){return new t(this.left+e,this.top+i,this.width+n,this.height+l)},t.fromClientRect=function(e,i){return new t(i.left+e.windowBounds.left,i.top+e.windowBounds.top,i.width,i.height)},t.fromDOMRectList=function(e,i){var n=Array.from(i).find(function(l){return l.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Ef=function(t,e){return qA.fromClientRect(t,e.getBoundingClientRect())},aU=function(t){var e=t.body,i=t.documentElement;if(!e||!i)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,i.scrollWidth),Math.max(e.offsetWidth,i.offsetWidth),Math.max(e.clientWidth,i.clientWidth)),l=Math.max(Math.max(e.scrollHeight,i.scrollHeight),Math.max(e.offsetHeight,i.offsetHeight),Math.max(e.clientHeight,i.clientHeight));return new qA(0,0,n,l)},Ff=function(t){for(var e=[],i=0,n=t.length;i<n;){var l=t.charCodeAt(i++);if(l>=55296&&l<=56319&&i<n){var u=t.charCodeAt(i++);(u&64512)===56320?e.push(((l&1023)<<10)+(u&1023)+65536):(e.push(l),i--)}else e.push(l)}return e},Vi=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var i=t.length;if(!i)return"";for(var n=[],l=-1,u="";++l<i;){var f=t[l];f<=65535?n.push(f):(f-=65536,n.push((f>>10)+55296,f%1024+56320)),(l+1===i||n.length>16384)&&(u+=String.fromCharCode.apply(String,n),n.length=0)}return u},c_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lU=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ph=0;ph<c_.length;ph++)lU[c_.charCodeAt(ph)]=ph;var u_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var gh=0;gh<u_.length;gh++)Cc[u_.charCodeAt(gh)]=gh;var cU=function(t){var e=t.length*.75,i=t.length,n,l=0,u,f,a,w;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var C=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),F=Array.isArray(C)?C:new Uint8Array(C);for(n=0;n<i;n+=4)u=Cc[t.charCodeAt(n)],f=Cc[t.charCodeAt(n+1)],a=Cc[t.charCodeAt(n+2)],w=Cc[t.charCodeAt(n+3)],F[l++]=u<<2|f>>4,F[l++]=(f&15)<<4|a>>2,F[l++]=(a&3)<<6|w&63;return C},uU=function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i.push(t[n+1]<<8|t[n]);return i},hU=function(t){for(var e=t.length,i=[],n=0;n<e;n+=4)i.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return i},pa=5,Ug=6+5,Jd=2,fU=Ug-pa,Av=65536>>pa,dU=1<<pa,Yd=dU-1,pU=1024>>pa,gU=Av+pU,mU=gU,_U=32,yU=mU+_U,wU=65536>>Ug,vU=1<<fU,BU=vU-1,h_=function(t,e,i){return t.slice?t.slice(e,i):new Uint16Array(Array.prototype.slice.call(t,e,i))},xU=function(t,e,i){return t.slice?t.slice(e,i):new Uint32Array(Array.prototype.slice.call(t,e,i))},bU=function(t,e){var i=cU(t),n=Array.isArray(i)?hU(i):new Uint32Array(i),l=Array.isArray(i)?uU(i):new Uint16Array(i),u=24,f=h_(l,u/2,n[4]/2),a=n[5]===2?h_(l,(u+n[4])/2):xU(n,Math.ceil((u+n[4])/4));return new CU(n[0],n[1],n[2],n[3],f,a)},CU=function(){function t(e,i,n,l,u,f){this.initialValue=e,this.errorValue=i,this.highStart=n,this.highValueIndex=l,this.index=u,this.data=f}return t.prototype.get=function(e){var i;if(e>=0){if(e<55296||e>56319&&e<=65535)return i=this.index[e>>pa],i=(i<<Jd)+(e&Yd),this.data[i];if(e<=65535)return i=this.index[Av+(e-55296>>pa)],i=(i<<Jd)+(e&Yd),this.data[i];if(e<this.highStart)return i=yU-wU+(e>>Ug),i=this.index[i],i+=e>>pa&BU,i=this.index[i],i=(i<<Jd)+(e&Yd),this.data[i];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),f_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",EU=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var mh=0;mh<f_.length;mh++)EU[f_.charCodeAt(mh)]=mh;var FU="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",d_=50,UU=1,ov=2,av=3,QU=4,IU=5,p_=7,lv=8,g_=9,wo=10,Lp=11,m_=12,Hp=13,TU=14,Ec=15,Pp=16,_h=17,pc=18,SU=19,__=20,zp=21,gc=22,$d=23,Ja=24,ds=25,Fc=26,Uc=27,Ya=28,kU=29,Aa=30,MU=31,yh=32,wh=33,Rp=34,Op=35,Kp=36,Nc=37,Np=38,Kh=39,Nh=40,ep=41,cv=42,DU=43,LU=[9001,65288],uv="!",Tr="",vh="",Vp=bU(FU),zA=[Aa,Kp],Gp=[UU,ov,av,IU],hv=[wo,lv],y_=[Uc,Fc],HU=Gp.concat(hv),w_=[Np,Kh,Nh,Rp,Op],PU=[Ec,Hp],zU=function(t,e){e===void 0&&(e="strict");var i=[],n=[],l=[];return t.forEach(function(u,f){var a=Vp.get(u);if(a>d_?(l.push(!0),a-=d_):l.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(u)!==-1)return n.push(f),i.push(Pp);if(a===QU||a===Lp){if(f===0)return n.push(f),i.push(Aa);var w=i[f-1];return HU.indexOf(w)===-1?(n.push(n[f-1]),i.push(w)):(n.push(f),i.push(Aa))}if(n.push(f),a===MU)return i.push(e==="strict"?zp:Nc);if(a===cv||a===kU)return i.push(Aa);if(a===DU)return u>=131072&&u<=196605||u>=196608&&u<=262141?i.push(Nc):i.push(Aa);i.push(a)}),[n,i,l]},tp=function(t,e,i,n){var l=n[i];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var u=i;u<=n.length;){u++;var f=n[u];if(f===e)return!0;if(f!==wo)break}if(l===wo)for(var u=i;u>0;){u--;var a=n[u];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var w=i;w<=n.length;){w++;var f=n[w];if(f===e)return!0;if(f!==wo)break}if(a!==wo)break}return!1},v_=function(t,e){for(var i=t;i>=0;){var n=e[i];if(n===wo)i--;else return n}return 0},RU=function(t,e,i,n,l){if(i[n]===0)return Tr;var u=n-1;if(Array.isArray(l)&&l[u]===!0)return Tr;var f=u-1,a=u+1,w=e[u],C=f>=0?e[f]:0,F=e[a];if(w===ov&&F===av)return Tr;if(Gp.indexOf(w)!==-1)return uv;if(Gp.indexOf(F)!==-1||hv.indexOf(F)!==-1)return Tr;if(v_(u,e)===lv)return vh;if(Vp.get(t[u])===Lp||(w===yh||w===wh)&&Vp.get(t[a])===Lp||w===p_||F===p_||w===g_||[wo,Hp,Ec].indexOf(w)===-1&&F===g_||[_h,pc,SU,Ja,Ya].indexOf(F)!==-1||v_(u,e)===gc||tp($d,gc,u,e)||tp([_h,pc],zp,u,e)||tp(m_,m_,u,e))return Tr;if(w===wo)return vh;if(w===$d||F===$d)return Tr;if(F===Pp||w===Pp)return vh;if([Hp,Ec,zp].indexOf(F)!==-1||w===TU||C===Kp&&PU.indexOf(w)!==-1||w===Ya&&F===Kp||F===__||zA.indexOf(F)!==-1&&w===ds||zA.indexOf(w)!==-1&&F===ds||w===Uc&&[Nc,yh,wh].indexOf(F)!==-1||[Nc,yh,wh].indexOf(w)!==-1&&F===Fc||zA.indexOf(w)!==-1&&y_.indexOf(F)!==-1||y_.indexOf(w)!==-1&&zA.indexOf(F)!==-1||[Uc,Fc].indexOf(w)!==-1&&(F===ds||[gc,Ec].indexOf(F)!==-1&&e[a+1]===ds)||[gc,Ec].indexOf(w)!==-1&&F===ds||w===ds&&[ds,Ya,Ja].indexOf(F)!==-1)return Tr;if([ds,Ya,Ja,_h,pc].indexOf(F)!==-1)for(var E=u;E>=0;){var U=e[E];if(U===ds)return Tr;if([Ya,Ja].indexOf(U)!==-1)E--;else break}if([Uc,Fc].indexOf(F)!==-1)for(var E=[_h,pc].indexOf(w)!==-1?f:u;E>=0;){var U=e[E];if(U===ds)return Tr;if([Ya,Ja].indexOf(U)!==-1)E--;else break}if(Np===w&&[Np,Kh,Rp,Op].indexOf(F)!==-1||[Kh,Rp].indexOf(w)!==-1&&[Kh,Nh].indexOf(F)!==-1||[Nh,Op].indexOf(w)!==-1&&F===Nh||w_.indexOf(w)!==-1&&[__,Fc].indexOf(F)!==-1||w_.indexOf(F)!==-1&&w===Uc||zA.indexOf(w)!==-1&&zA.indexOf(F)!==-1||w===Ja&&zA.indexOf(F)!==-1||zA.concat(ds).indexOf(w)!==-1&&F===gc&&LU.indexOf(t[a])===-1||zA.concat(ds).indexOf(F)!==-1&&w===pc)return Tr;if(w===ep&&F===ep){for(var H=i[u],P=1;H>0&&(H--,e[H]===ep);)P++;if(P%2!==0)return Tr}return w===yh&&F===wh?Tr:vh},OU=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var i=zU(t,e.lineBreak),n=i[0],l=i[1],u=i[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(l=l.map(function(a){return[ds,Aa,cv].indexOf(a)!==-1?Nc:a}));var f=e.wordBreak==="keep-all"?u.map(function(a,w){return a&&t[w]>=19968&&t[w]<=40959}):void 0;return[n,l,f]},KU=function(){function t(e,i,n,l){this.codePoints=e,this.required=i===uv,this.start=n,this.end=l}return t.prototype.slice=function(){return Vi.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),NU=function(t,e){var i=Ff(t),n=OU(i,e),l=n[0],u=n[1],f=n[2],a=i.length,w=0,C=0;return{next:function(){if(C>=a)return{done:!0,value:null};for(var F=Tr;C<a&&(F=RU(i,u,l,++C,f))===Tr;);if(F!==Tr||C===a){var E=new KU(i,F,w,C);return w=C,{value:E,done:!1}}return{done:!0,value:null}}}},VU=1<<0,GU=1<<1,nu=1<<2,B_=1<<3,of=10,x_=47,kc=92,XU=9,ZU=32,Bh=34,mc=61,WU=35,qU=36,jU=37,xh=39,bh=40,_c=41,JU=95,es=45,YU=33,$U=60,eQ=62,tQ=64,rQ=91,iQ=93,nQ=61,sQ=123,Ch=63,AQ=125,b_=124,oQ=126,aQ=128,C_=65533,rp=42,ca=43,lQ=44,cQ=58,uQ=59,Vc=46,hQ=0,fQ=8,dQ=11,pQ=14,gQ=31,mQ=127,dA=-1,fv=48,dv=97,pv=101,_Q=102,yQ=117,wQ=122,gv=65,mv=69,_v=70,vQ=85,BQ=90,In=function(t){return t>=fv&&t<=57},xQ=function(t){return t>=55296&&t<=57343},$a=function(t){return In(t)||t>=gv&&t<=_v||t>=dv&&t<=_Q},bQ=function(t){return t>=dv&&t<=wQ},CQ=function(t){return t>=gv&&t<=BQ},EQ=function(t){return bQ(t)||CQ(t)},FQ=function(t){return t>=aQ},Eh=function(t){return t===of||t===XU||t===ZU},af=function(t){return EQ(t)||FQ(t)||t===JU},E_=function(t){return af(t)||In(t)||t===es},UQ=function(t){return t>=hQ&&t<=fQ||t===dQ||t>=pQ&&t<=gQ||t===mQ},yo=function(t,e){return t!==kc?!1:e!==of},Fh=function(t,e,i){return t===es?af(e)||yo(e,i):af(t)?!0:!!(t===kc&&yo(t,e))},ip=function(t,e,i){return t===ca||t===es?In(e)?!0:e===Vc&&In(i):In(t===Vc?e:t)},QQ=function(t){var e=0,i=1;(t[e]===ca||t[e]===es)&&(t[e]===es&&(i=-1),e++);for(var n=[];In(t[e]);)n.push(t[e++]);var l=n.length?parseInt(Vi.apply(void 0,n),10):0;t[e]===Vc&&e++;for(var u=[];In(t[e]);)u.push(t[e++]);var f=u.length,a=f?parseInt(Vi.apply(void 0,u),10):0;(t[e]===mv||t[e]===pv)&&e++;var w=1;(t[e]===ca||t[e]===es)&&(t[e]===es&&(w=-1),e++);for(var C=[];In(t[e]);)C.push(t[e++]);var F=C.length?parseInt(Vi.apply(void 0,C),10):0;return i*(l+a*Math.pow(10,-f))*Math.pow(10,w*F)},IQ={type:2},TQ={type:3},SQ={type:4},kQ={type:13},MQ={type:8},DQ={type:21},LQ={type:9},HQ={type:10},PQ={type:11},zQ={type:12},RQ={type:14},Uh={type:23},OQ={type:1},KQ={type:25},NQ={type:24},VQ={type:26},GQ={type:27},XQ={type:28},ZQ={type:29},WQ={type:31},Xp={type:32},yv=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Ff(e))},t.prototype.read=function(){for(var e=[],i=this.consumeToken();i!==Xp;)e.push(i),i=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Bh:return this.consumeStringToken(Bh);case WU:var i=this.peekCodePoint(0),n=this.peekCodePoint(1),l=this.peekCodePoint(2);if(E_(i)||yo(n,l)){var u=Fh(i,n,l)?GU:VU,f=this.consumeName();return{type:5,value:f,flags:u}}break;case qU:if(this.peekCodePoint(0)===mc)return this.consumeCodePoint(),kQ;break;case xh:return this.consumeStringToken(xh);case bh:return IQ;case _c:return TQ;case rp:if(this.peekCodePoint(0)===mc)return this.consumeCodePoint(),RQ;break;case ca:if(ip(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case lQ:return SQ;case es:var a=e,w=this.peekCodePoint(0),C=this.peekCodePoint(1);if(ip(a,w,C))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Fh(a,w,C))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(w===es&&C===eQ)return this.consumeCodePoint(),this.consumeCodePoint(),NQ;break;case Vc:if(ip(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case x_:if(this.peekCodePoint(0)===rp)for(this.consumeCodePoint();;){var F=this.consumeCodePoint();if(F===rp&&(F=this.consumeCodePoint(),F===x_))return this.consumeToken();if(F===dA)return this.consumeToken()}break;case cQ:return VQ;case uQ:return GQ;case $U:if(this.peekCodePoint(0)===YU&&this.peekCodePoint(1)===es&&this.peekCodePoint(2)===es)return this.consumeCodePoint(),this.consumeCodePoint(),KQ;break;case tQ:var E=this.peekCodePoint(0),U=this.peekCodePoint(1),H=this.peekCodePoint(2);if(Fh(E,U,H)){var f=this.consumeName();return{type:7,value:f}}break;case rQ:return XQ;case kc:if(yo(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case iQ:return ZQ;case nQ:if(this.peekCodePoint(0)===mc)return this.consumeCodePoint(),MQ;break;case sQ:return PQ;case AQ:return zQ;case yQ:case vQ:var P=this.peekCodePoint(0),V=this.peekCodePoint(1);return P===ca&&($a(V)||V===Ch)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case b_:if(this.peekCodePoint(0)===mc)return this.consumeCodePoint(),LQ;if(this.peekCodePoint(0)===b_)return this.consumeCodePoint(),DQ;break;case oQ:if(this.peekCodePoint(0)===mc)return this.consumeCodePoint(),HQ;break;case dA:return Xp}return Eh(e)?(this.consumeWhiteSpace(),WQ):In(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):af(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Vi(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],i=this.consumeCodePoint();$a(i)&&e.length<6;)e.push(i),i=this.consumeCodePoint();for(var n=!1;i===Ch&&e.length<6;)e.push(i),i=this.consumeCodePoint(),n=!0;if(n){var l=parseInt(Vi.apply(void 0,e.map(function(w){return w===Ch?fv:w})),16),u=parseInt(Vi.apply(void 0,e.map(function(w){return w===Ch?_v:w})),16);return{type:30,start:l,end:u}}var f=parseInt(Vi.apply(void 0,e),16);if(this.peekCodePoint(0)===es&&$a(this.peekCodePoint(1))){this.consumeCodePoint(),i=this.consumeCodePoint();for(var a=[];$a(i)&&a.length<6;)a.push(i),i=this.consumeCodePoint();var u=parseInt(Vi.apply(void 0,a),16);return{type:30,start:f,end:u}}else return{type:30,start:f,end:f}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===bh?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===bh?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===dA)return{type:22,value:""};var i=this.peekCodePoint(0);if(i===xh||i===Bh){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===dA||this.peekCodePoint(0)===_c)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),Uh)}for(;;){var l=this.consumeCodePoint();if(l===dA||l===_c)return{type:22,value:Vi.apply(void 0,e)};if(Eh(l))return this.consumeWhiteSpace(),this.peekCodePoint(0)===dA||this.peekCodePoint(0)===_c?(this.consumeCodePoint(),{type:22,value:Vi.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Uh);if(l===Bh||l===xh||l===bh||UQ(l))return this.consumeBadUrlRemnants(),Uh;if(l===kc)if(yo(l,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Uh;else e.push(l)}},t.prototype.consumeWhiteSpace=function(){for(;Eh(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===_c||e===dA)return;yo(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var i=5e4,n="";e>0;){var l=Math.min(i,e);n+=Vi.apply(void 0,this._value.splice(0,l)),e-=l}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var i="",n=0;do{var l=this._value[n];if(l===dA||l===void 0||l===e)return i+=this.consumeStringSlice(n),{type:0,value:i};if(l===of)return this._value.splice(0,n),OQ;if(l===kc){var u=this._value[n+1];u!==dA&&u!==void 0&&(u===of?(i+=this.consumeStringSlice(n),n=-1,this._value.shift()):yo(l,u)&&(i+=this.consumeStringSlice(n),i+=Vi(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],i=nu,n=this.peekCodePoint(0);for((n===ca||n===es)&&e.push(this.consumeCodePoint());In(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var l=this.peekCodePoint(1);if(n===Vc&&In(l))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),i=B_;In(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),l=this.peekCodePoint(1);var u=this.peekCodePoint(2);if((n===mv||n===pv)&&((l===ca||l===es)&&In(u)||In(l)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),i=B_;In(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[QQ(e),i]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),i=e[0],n=e[1],l=this.peekCodePoint(0),u=this.peekCodePoint(1),f=this.peekCodePoint(2);if(Fh(l,u,f)){var a=this.consumeName();return{type:15,number:i,flags:n,unit:a}}return l===jU?(this.consumeCodePoint(),{type:16,number:i,flags:n}):{type:17,number:i,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if($a(e)){for(var i=Vi(e);$a(this.peekCodePoint(0))&&i.length<6;)i+=Vi(this.consumeCodePoint());Eh(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(i,16);return n===0||xQ(n)||n>1114111?C_:n}return e===dA?C_:e},t.prototype.consumeName=function(){for(var e="";;){var i=this.consumeCodePoint();if(E_(i))e+=Vi(i);else if(yo(i,this.peekCodePoint(0)))e+=Vi(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(i),e}},t}(),wv=function(){function t(e){this._tokens=e}return t.create=function(e){var i=new yv;return i.write(e),new t(i.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var i=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return i;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var i=this.consumeComponentValue();if(i.type===32)return e;e.push(i),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var i={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||jQ(n,e))return i;this.reconsumeToken(n),i.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var i={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return i;this.reconsumeToken(n),i.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Xp:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),su=function(t){return t.type===15},Cl=function(t){return t.type===17},gi=function(t){return t.type===20},qQ=function(t){return t.type===0},Zp=function(t,e){return gi(t)&&t.value===e},vv=function(t){return t.type!==31},xl=function(t){return t.type!==31&&t.type!==4},wA=function(t){var e=[],i=[];return t.forEach(function(n){if(n.type===4){if(i.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(i),i=[];return}n.type!==31&&i.push(n)}),i.length&&e.push(i),e},jQ=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Uo=function(t){return t.type===17||t.type===15},Yi=function(t){return t.type===16||Uo(t)},Bv=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},wn={type:17,number:0,flags:nu},Qg={type:16,number:50,flags:nu},vo={type:16,number:100,flags:nu},Qc=function(t,e,i){var n=t[0],l=t[1];return[Fi(n,e),Fi(typeof l<"u"?l:n,i)]},Fi=function(t,e){if(t.type===16)return t.number/100*e;if(su(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},xv="deg",bv="grad",Cv="rad",Ev="turn",Uf={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case xv:return Math.PI*e.number/180;case bv:return Math.PI/200*e.number;case Cv:return e.number;case Ev:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Fv=function(t){return t.type===15&&(t.unit===xv||t.unit===bv||t.unit===Cv||t.unit===Ev)},Uv=function(t){var e=t.filter(gi).map(function(i){return i.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[wn,wn];case"to top":case"bottom":return Es(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[wn,vo];case"to right":case"left":return Es(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[vo,vo];case"to bottom":case"top":return Es(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[vo,wn];case"to left":case"right":return Es(270)}return 0},Es=function(t){return Math.PI*t/180},xo={name:"color",parse:function(t,e){if(e.type===18){var i=JQ[e.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return i(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),l=e.value.substring(1,2),u=e.value.substring(2,3);return Bo(parseInt(n+n,16),parseInt(l+l,16),parseInt(u+u,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),l=e.value.substring(1,2),u=e.value.substring(2,3),f=e.value.substring(3,4);return Bo(parseInt(n+n,16),parseInt(l+l,16),parseInt(u+u,16),parseInt(f+f,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),l=e.value.substring(2,4),u=e.value.substring(4,6);return Bo(parseInt(n,16),parseInt(l,16),parseInt(u,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),l=e.value.substring(2,4),u=e.value.substring(4,6),f=e.value.substring(6,8);return Bo(parseInt(n,16),parseInt(l,16),parseInt(u,16),parseInt(f,16)/255)}}if(e.type===20){var a=GA[e.value.toUpperCase()];if(typeof a<"u")return a}return GA.TRANSPARENT}},bo=function(t){return(255&t)===0},un=function(t){var e=255&t,i=255&t>>8,n=255&t>>16,l=255&t>>24;return e<255?"rgba("+l+","+n+","+i+","+e/255+")":"rgb("+l+","+n+","+i+")"},Bo=function(t,e,i,n){return(t<<24|e<<16|i<<8|Math.round(n*255)<<0)>>>0},F_=function(t,e){if(t.type===17)return t.number;if(t.type===16){var i=e===3?1:255;return e===3?t.number/100*i:Math.round(t.number/100*i)}return 0},U_=function(t,e){var i=e.filter(xl);if(i.length===3){var n=i.map(F_),l=n[0],u=n[1],f=n[2];return Bo(l,u,f,1)}if(i.length===4){var a=i.map(F_),l=a[0],u=a[1],f=a[2],w=a[3];return Bo(l,u,f,w)}return 0};function np(t,e,i){return i<0&&(i+=1),i>=1&&(i-=1),i<1/6?(e-t)*i*6+t:i<1/2?e:i<2/3?(e-t)*6*(2/3-i)+t:t}var Q_=function(t,e){var i=e.filter(xl),n=i[0],l=i[1],u=i[2],f=i[3],a=(n.type===17?Es(n.number):Uf.parse(t,n))/(Math.PI*2),w=Yi(l)?l.number/100:0,C=Yi(u)?u.number/100:0,F=typeof f<"u"&&Yi(f)?Fi(f,1):1;if(w===0)return Bo(C*255,C*255,C*255,1);var E=C<=.5?C*(w+1):C+w-C*w,U=C*2-E,H=np(U,E,a+1/3),P=np(U,E,a),V=np(U,E,a-1/3);return Bo(H*255,P*255,V*255,F)},JQ={hsl:Q_,hsla:Q_,rgb:U_,rgba:U_},Mc=function(t,e){return xo.parse(t,wv.create(e).parseComponentValue())},GA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},YQ={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(i){if(gi(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},$Q={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Qf=function(t,e){var i=xo.parse(t,e[0]),n=e[1];return n&&Yi(n)?{color:i,stop:n}:{color:i,stop:null}},I_=function(t,e){var i=t[0],n=t[t.length-1];i.stop===null&&(i.stop=wn),n.stop===null&&(n.stop=vo);for(var l=[],u=0,f=0;f<t.length;f++){var a=t[f].stop;if(a!==null){var w=Fi(a,e);w>u?l.push(w):l.push(u),u=w}else l.push(null)}for(var C=null,f=0;f<l.length;f++){var F=l[f];if(F===null)C===null&&(C=f);else if(C!==null){for(var E=f-C,U=l[C-1],H=(F-U)/(E+1),P=1;P<=E;P++)l[C+P-1]=H*P;C=null}}return t.map(function(V,j){var Y=V.color;return{color:Y,stop:Math.max(Math.min(1,l[j]/e),0)}})},eI=function(t,e,i){var n=e/2,l=i/2,u=Fi(t[0],e)-n,f=l-Fi(t[1],i);return(Math.atan2(f,u)+Math.PI*2)%(Math.PI*2)},tI=function(t,e,i){var n=typeof t=="number"?t:eI(t,e,i),l=Math.abs(e*Math.sin(n))+Math.abs(i*Math.cos(n)),u=e/2,f=i/2,a=l/2,w=Math.sin(n-Math.PI/2)*a,C=Math.cos(n-Math.PI/2)*a;return[l,u-C,u+C,f-w,f+w]},Zs=function(t,e){return Math.sqrt(t*t+e*e)},T_=function(t,e,i,n,l){var u=[[0,0],[0,e],[t,0],[t,e]];return u.reduce(function(f,a){var w=a[0],C=a[1],F=Zs(i-w,n-C);return(l?F<f.optimumDistance:F>f.optimumDistance)?{optimumCorner:a,optimumDistance:F}:f},{optimumDistance:l?1/0:-1/0,optimumCorner:null}).optimumCorner},rI=function(t,e,i,n,l){var u=0,f=0;switch(t.size){case 0:t.shape===0?u=f=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(i),Math.abs(i-l)):t.shape===1&&(u=Math.min(Math.abs(e),Math.abs(e-n)),f=Math.min(Math.abs(i),Math.abs(i-l)));break;case 2:if(t.shape===0)u=f=Math.min(Zs(e,i),Zs(e,i-l),Zs(e-n,i),Zs(e-n,i-l));else if(t.shape===1){var a=Math.min(Math.abs(i),Math.abs(i-l))/Math.min(Math.abs(e),Math.abs(e-n)),w=T_(n,l,e,i,!0),C=w[0],F=w[1];u=Zs(C-e,(F-i)/a),f=a*u}break;case 1:t.shape===0?u=f=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(i),Math.abs(i-l)):t.shape===1&&(u=Math.max(Math.abs(e),Math.abs(e-n)),f=Math.max(Math.abs(i),Math.abs(i-l)));break;case 3:if(t.shape===0)u=f=Math.max(Zs(e,i),Zs(e,i-l),Zs(e-n,i),Zs(e-n,i-l));else if(t.shape===1){var a=Math.max(Math.abs(i),Math.abs(i-l))/Math.max(Math.abs(e),Math.abs(e-n)),E=T_(n,l,e,i,!1),C=E[0],F=E[1];u=Zs(C-e,(F-i)/a),f=a*u}break}return Array.isArray(t.size)&&(u=Fi(t.size[0],n),f=t.size.length===2?Fi(t.size[1],l):u),[u,f]},iI=function(t,e){var i=Es(180),n=[];return wA(e).forEach(function(l,u){if(u===0){var f=l[0];if(f.type===20&&f.value==="to"){i=Uv(l);return}else if(Fv(f)){i=Uf.parse(t,f);return}}var a=Qf(t,l);n.push(a)}),{angle:i,stops:n,type:1}},Qh=function(t,e){var i=Es(180),n=[];return wA(e).forEach(function(l,u){if(u===0){var f=l[0];if(f.type===20&&["top","left","right","bottom"].indexOf(f.value)!==-1){i=Uv(l);return}else if(Fv(f)){i=(Uf.parse(t,f)+Es(270))%Es(360);return}}var a=Qf(t,l);n.push(a)}),{angle:i,stops:n,type:1}},nI=function(t,e){var i=Es(180),n=[],l=1,u=0,f=3,a=[];return wA(e).forEach(function(w,C){var F=w[0];if(C===0){if(gi(F)&&F.value==="linear"){l=1;return}else if(gi(F)&&F.value==="radial"){l=2;return}}if(F.type===18){if(F.name==="from"){var E=xo.parse(t,F.values[0]);n.push({stop:wn,color:E})}else if(F.name==="to"){var E=xo.parse(t,F.values[0]);n.push({stop:vo,color:E})}else if(F.name==="color-stop"){var U=F.values.filter(xl);if(U.length===2){var E=xo.parse(t,U[1]),H=U[0];Cl(H)&&n.push({stop:{type:16,number:H.number*100,flags:H.flags},color:E})}}}}),l===1?{angle:(i+Es(180))%Es(360),stops:n,type:l}:{size:f,shape:u,stops:n,position:a,type:l}},Qv="closest-side",Iv="farthest-side",Tv="closest-corner",Sv="farthest-corner",kv="circle",Mv="ellipse",Dv="cover",Lv="contain",sI=function(t,e){var i=0,n=3,l=[],u=[];return wA(e).forEach(function(f,a){var w=!0;if(a===0){var C=!1;w=f.reduce(function(E,U){if(C)if(gi(U))switch(U.value){case"center":return u.push(Qg),E;case"top":case"left":return u.push(wn),E;case"right":case"bottom":return u.push(vo),E}else(Yi(U)||Uo(U))&&u.push(U);else if(gi(U))switch(U.value){case kv:return i=0,!1;case Mv:return i=1,!1;case"at":return C=!0,!1;case Qv:return n=0,!1;case Dv:case Iv:return n=1,!1;case Lv:case Tv:return n=2,!1;case Sv:return n=3,!1}else if(Uo(U)||Yi(U))return Array.isArray(n)||(n=[]),n.push(U),!1;return E},w)}if(w){var F=Qf(t,f);l.push(F)}}),{size:n,shape:i,stops:l,position:u,type:2}},Ih=function(t,e){var i=0,n=3,l=[],u=[];return wA(e).forEach(function(f,a){var w=!0;if(a===0?w=f.reduce(function(F,E){if(gi(E))switch(E.value){case"center":return u.push(Qg),!1;case"top":case"left":return u.push(wn),!1;case"right":case"bottom":return u.push(vo),!1}else if(Yi(E)||Uo(E))return u.push(E),!1;return F},w):a===1&&(w=f.reduce(function(F,E){if(gi(E))switch(E.value){case kv:return i=0,!1;case Mv:return i=1,!1;case Lv:case Qv:return n=0,!1;case Iv:return n=1,!1;case Tv:return n=2,!1;case Dv:case Sv:return n=3,!1}else if(Uo(E)||Yi(E))return Array.isArray(n)||(n=[]),n.push(E),!1;return F},w)),w){var C=Qf(t,f);l.push(C)}}),{size:n,shape:i,stops:l,position:u,type:2}},AI=function(t){return t.type===1},oI=function(t){return t.type===2},Ig={name:"image",parse:function(t,e){if(e.type===22){var i={url:e.value,type:0};return t.cache.addImage(e.value),i}if(e.type===18){var n=Hv[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function aI(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!Hv[t.name])}var Hv={"linear-gradient":iI,"-moz-linear-gradient":Qh,"-ms-linear-gradient":Qh,"-o-linear-gradient":Qh,"-webkit-linear-gradient":Qh,"radial-gradient":sI,"-moz-radial-gradient":Ih,"-ms-radial-gradient":Ih,"-o-radial-gradient":Ih,"-webkit-radial-gradient":Ih,"-webkit-gradient":nI},lI={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var i=e[0];return i.type===20&&i.value==="none"?[]:e.filter(function(n){return xl(n)&&aI(n)}).map(function(n){return Ig.parse(t,n)})}},cI={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(i){if(gi(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},uI={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return wA(e).map(function(i){return i.filter(Yi)}).map(Bv)}},hI={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return wA(e).map(function(i){return i.filter(gi).map(function(n){return n.value}).join(" ")}).map(fI)}},fI=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ml;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(ml||(ml={}));var dI={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return wA(e).map(function(i){return i.filter(pI)})}},pI=function(t){return gi(t)||Yi(t)},If=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},gI=If("top"),mI=If("right"),_I=If("bottom"),yI=If("left"),Tf=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,i){return Bv(i.filter(Yi))}}},wI=Tf("top-left"),vI=Tf("top-right"),BI=Tf("bottom-right"),xI=Tf("bottom-left"),Sf=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,i){switch(i){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},bI=Sf("top"),CI=Sf("right"),EI=Sf("bottom"),FI=Sf("left"),kf=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,i){return su(i)?i.number:0}}},UI=kf("top"),QI=kf("right"),II=kf("bottom"),TI=kf("left"),SI={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},kI={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},MI={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(gi).reduce(function(i,n){return i|DI(n.value)},0)}},DI=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},LI={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},HI={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},lf;(function(t){t.NORMAL="normal",t.STRICT="strict"})(lf||(lf={}));var PI={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return lf.STRICT;case"normal":default:return lf.NORMAL}}},zI={name:"line-height",initialValue:"normal",prefix:!1,type:4},S_=function(t,e){return gi(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Yi(t)?Fi(t,e):e},RI={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:Ig.parse(t,e)}},OI={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Wp={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Mf=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},KI=Mf("top"),NI=Mf("right"),VI=Mf("bottom"),GI=Mf("left"),XI={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(gi).map(function(i){switch(i.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},ZI={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Df=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},WI=Df("top"),qI=Df("right"),jI=Df("bottom"),JI=Df("left"),YI={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},$I={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},e4={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Zp(e[0],"none")?[]:wA(e).map(function(i){for(var n={color:GA.TRANSPARENT,offsetX:wn,offsetY:wn,blur:wn},l=0,u=0;u<i.length;u++){var f=i[u];Uo(f)?(l===0?n.offsetX=f:l===1?n.offsetY=f:n.blur=f,l++):n.color=xo.parse(t,f)}return n})}},t4={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},r4={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var i=s4[e.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return i(e.values)}return null}},i4=function(t){var e=t.filter(function(i){return i.type===17}).map(function(i){return i.number});return e.length===6?e:null},n4=function(t){var e=t.filter(function(w){return w.type===17}).map(function(w){return w.number}),i=e[0],n=e[1];e[2],e[3];var l=e[4],u=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var f=e[12],a=e[13];return e[14],e[15],e.length===16?[i,n,l,u,f,a]:null},s4={matrix:i4,matrix3d:n4},k_={type:16,number:50,flags:nu},A4=[k_,k_],o4={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var i=e.filter(Yi);return i.length!==2?A4:[i[0],i[1]]}},a4={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Dc;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Dc||(Dc={}));var l4={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Dc.BREAK_ALL;case"keep-all":return Dc.KEEP_ALL;case"normal":default:return Dc.NORMAL}}},c4={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Cl(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Pv={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},u4={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Cl(e)?e.number:1}},h4={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},f4={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(gi).map(function(i){switch(i.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(i){return i!==0})}},d4={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var i=[],n=[];return e.forEach(function(l){switch(l.type){case 20:case 0:i.push(l.value);break;case 17:i.push(l.number.toString());break;case 4:n.push(i.join(" ")),i.length=0;break}}),i.length&&n.push(i.join(" ")),n.map(function(l){return l.indexOf(" ")===-1?l:"'"+l+"'"})}},p4={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},g4={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Cl(e))return e.number;if(gi(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},m4={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(gi).map(function(i){return i.value})}},_4={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},sn=function(t,e){return(t&e)!==0},y4={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var i=e[0];return i.type===20&&i.value==="none"?[]:e}},w4={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var i=e[0];if(i.type===20&&i.value==="none")return null;for(var n=[],l=e.filter(vv),u=0;u<l.length;u++){var f=l[u],a=l[u+1];if(f.type===20){var w=a&&Cl(a)?a.number:1;n.push({counter:f.value,increment:w})}}return n}},v4={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var i=[],n=e.filter(vv),l=0;l<n.length;l++){var u=n[l],f=n[l+1];if(gi(u)&&u.value!=="none"){var a=f&&Cl(f)?f.number:0;i.push({counter:u.value,reset:a})}}return i}},B4={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(su).map(function(i){return Pv.parse(t,i)})}},x4={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var i=e[0];if(i.type===20&&i.value==="none")return null;var n=[],l=e.filter(qQ);if(l.length%2!==0)return null;for(var u=0;u<l.length;u+=2){var f=l[u].value,a=l[u+1].value;n.push({open:f,close:a})}return n}},M_=function(t,e,i){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?i?n.open:n.close:""},b4={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Zp(e[0],"none")?[]:wA(e).map(function(i){for(var n={color:255,offsetX:wn,offsetY:wn,blur:wn,spread:wn,inset:!1},l=0,u=0;u<i.length;u++){var f=i[u];Zp(f,"inset")?n.inset=!0:Uo(f)?(l===0?n.offsetX=f:l===1?n.offsetY=f:l===2?n.blur=f:n.spread=f,l++):n.color=xo.parse(t,f)}return n})}},C4={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var i=[0,1,2],n=[];return e.filter(gi).forEach(function(l){switch(l.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),i.forEach(function(l){n.indexOf(l)===-1&&n.push(l)}),n}},E4={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},F4={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return su(e)?e.number:0}},U4=function(){function t(e,i){var n,l;this.animationDuration=Zt(e,B4,i.animationDuration),this.backgroundClip=Zt(e,YQ,i.backgroundClip),this.backgroundColor=Zt(e,$Q,i.backgroundColor),this.backgroundImage=Zt(e,lI,i.backgroundImage),this.backgroundOrigin=Zt(e,cI,i.backgroundOrigin),this.backgroundPosition=Zt(e,uI,i.backgroundPosition),this.backgroundRepeat=Zt(e,hI,i.backgroundRepeat),this.backgroundSize=Zt(e,dI,i.backgroundSize),this.borderTopColor=Zt(e,gI,i.borderTopColor),this.borderRightColor=Zt(e,mI,i.borderRightColor),this.borderBottomColor=Zt(e,_I,i.borderBottomColor),this.borderLeftColor=Zt(e,yI,i.borderLeftColor),this.borderTopLeftRadius=Zt(e,wI,i.borderTopLeftRadius),this.borderTopRightRadius=Zt(e,vI,i.borderTopRightRadius),this.borderBottomRightRadius=Zt(e,BI,i.borderBottomRightRadius),this.borderBottomLeftRadius=Zt(e,xI,i.borderBottomLeftRadius),this.borderTopStyle=Zt(e,bI,i.borderTopStyle),this.borderRightStyle=Zt(e,CI,i.borderRightStyle),this.borderBottomStyle=Zt(e,EI,i.borderBottomStyle),this.borderLeftStyle=Zt(e,FI,i.borderLeftStyle),this.borderTopWidth=Zt(e,UI,i.borderTopWidth),this.borderRightWidth=Zt(e,QI,i.borderRightWidth),this.borderBottomWidth=Zt(e,II,i.borderBottomWidth),this.borderLeftWidth=Zt(e,TI,i.borderLeftWidth),this.boxShadow=Zt(e,b4,i.boxShadow),this.color=Zt(e,SI,i.color),this.direction=Zt(e,kI,i.direction),this.display=Zt(e,MI,i.display),this.float=Zt(e,LI,i.cssFloat),this.fontFamily=Zt(e,d4,i.fontFamily),this.fontSize=Zt(e,p4,i.fontSize),this.fontStyle=Zt(e,_4,i.fontStyle),this.fontVariant=Zt(e,m4,i.fontVariant),this.fontWeight=Zt(e,g4,i.fontWeight),this.letterSpacing=Zt(e,HI,i.letterSpacing),this.lineBreak=Zt(e,PI,i.lineBreak),this.lineHeight=Zt(e,zI,i.lineHeight),this.listStyleImage=Zt(e,RI,i.listStyleImage),this.listStylePosition=Zt(e,OI,i.listStylePosition),this.listStyleType=Zt(e,Wp,i.listStyleType),this.marginTop=Zt(e,KI,i.marginTop),this.marginRight=Zt(e,NI,i.marginRight),this.marginBottom=Zt(e,VI,i.marginBottom),this.marginLeft=Zt(e,GI,i.marginLeft),this.opacity=Zt(e,u4,i.opacity);var u=Zt(e,XI,i.overflow);this.overflowX=u[0],this.overflowY=u[u.length>1?1:0],this.overflowWrap=Zt(e,ZI,i.overflowWrap),this.paddingTop=Zt(e,WI,i.paddingTop),this.paddingRight=Zt(e,qI,i.paddingRight),this.paddingBottom=Zt(e,jI,i.paddingBottom),this.paddingLeft=Zt(e,JI,i.paddingLeft),this.paintOrder=Zt(e,C4,i.paintOrder),this.position=Zt(e,$I,i.position),this.textAlign=Zt(e,YI,i.textAlign),this.textDecorationColor=Zt(e,h4,(n=i.textDecorationColor)!==null&&n!==void 0?n:i.color),this.textDecorationLine=Zt(e,f4,(l=i.textDecorationLine)!==null&&l!==void 0?l:i.textDecoration),this.textShadow=Zt(e,e4,i.textShadow),this.textTransform=Zt(e,t4,i.textTransform),this.transform=Zt(e,r4,i.transform),this.transformOrigin=Zt(e,o4,i.transformOrigin),this.visibility=Zt(e,a4,i.visibility),this.webkitTextStrokeColor=Zt(e,E4,i.webkitTextStrokeColor),this.webkitTextStrokeWidth=Zt(e,F4,i.webkitTextStrokeWidth),this.wordBreak=Zt(e,l4,i.wordBreak),this.zIndex=Zt(e,c4,i.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return bo(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return sn(this.display,4)||sn(this.display,33554432)||sn(this.display,268435456)||sn(this.display,536870912)||sn(this.display,67108864)||sn(this.display,134217728)},t}(),Q4=function(){function t(e,i){this.content=Zt(e,y4,i.content),this.quotes=Zt(e,x4,i.quotes)}return t}(),D_=function(){function t(e,i){this.counterIncrement=Zt(e,w4,i.counterIncrement),this.counterReset=Zt(e,v4,i.counterReset)}return t}(),Zt=function(t,e,i){var n=new yv,l=i!==null&&typeof i<"u"?i.toString():e.initialValue;n.write(l);var u=new wv(n.read());switch(e.type){case 2:var f=u.parseComponentValue();return e.parse(t,gi(f)?f.value:e.initialValue);case 0:return e.parse(t,u.parseComponentValue());case 1:return e.parse(t,u.parseComponentValues());case 4:return u.parseComponentValue();case 3:switch(e.format){case"angle":return Uf.parse(t,u.parseComponentValue());case"color":return xo.parse(t,u.parseComponentValue());case"image":return Ig.parse(t,u.parseComponentValue());case"length":var a=u.parseComponentValue();return Uo(a)?a:wn;case"length-percentage":var w=u.parseComponentValue();return Yi(w)?w:wn;case"time":return Pv.parse(t,u.parseComponentValue())}break}},I4="data-html2canvas-debug",T4=function(t){var e=t.getAttribute(I4);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},qp=function(t,e){var i=T4(t);return i===1||e===i},vA=function(){function t(e,i){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,qp(i,3))debugger;this.styles=new U4(e,window.getComputedStyle(i,null)),Yp(i)&&(this.styles.animationDuration.some(function(n){return n>0})&&(i.style.animationDuration="0s"),this.styles.transform!==null&&(i.style.transform="none")),this.bounds=Ef(this.context,i),qp(i,4)&&(this.flags|=16)}return t}(),S4="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",L_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ic=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Th=0;Th<L_.length;Th++)Ic[L_.charCodeAt(Th)]=Th;var k4=function(t){var e=t.length*.75,i=t.length,n,l=0,u,f,a,w;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var C=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),F=Array.isArray(C)?C:new Uint8Array(C);for(n=0;n<i;n+=4)u=Ic[t.charCodeAt(n)],f=Ic[t.charCodeAt(n+1)],a=Ic[t.charCodeAt(n+2)],w=Ic[t.charCodeAt(n+3)],F[l++]=u<<2|f>>4,F[l++]=(f&15)<<4|a>>2,F[l++]=(a&3)<<6|w&63;return C},M4=function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i.push(t[n+1]<<8|t[n]);return i},D4=function(t){for(var e=t.length,i=[],n=0;n<e;n+=4)i.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return i},ga=5,Tg=6+5,sp=2,L4=Tg-ga,zv=65536>>ga,H4=1<<ga,Ap=H4-1,P4=1024>>ga,z4=zv+P4,R4=z4,O4=32,K4=R4+O4,N4=65536>>Tg,V4=1<<L4,G4=V4-1,H_=function(t,e,i){return t.slice?t.slice(e,i):new Uint16Array(Array.prototype.slice.call(t,e,i))},X4=function(t,e,i){return t.slice?t.slice(e,i):new Uint32Array(Array.prototype.slice.call(t,e,i))},Z4=function(t,e){var i=k4(t),n=Array.isArray(i)?D4(i):new Uint32Array(i),l=Array.isArray(i)?M4(i):new Uint16Array(i),u=24,f=H_(l,u/2,n[4]/2),a=n[5]===2?H_(l,(u+n[4])/2):X4(n,Math.ceil((u+n[4])/4));return new W4(n[0],n[1],n[2],n[3],f,a)},W4=function(){function t(e,i,n,l,u,f){this.initialValue=e,this.errorValue=i,this.highStart=n,this.highValueIndex=l,this.index=u,this.data=f}return t.prototype.get=function(e){var i;if(e>=0){if(e<55296||e>56319&&e<=65535)return i=this.index[e>>ga],i=(i<<sp)+(e&Ap),this.data[i];if(e<=65535)return i=this.index[zv+(e-55296>>ga)],i=(i<<sp)+(e&Ap),this.data[i];if(e<this.highStart)return i=K4-N4+(e>>Tg),i=this.index[i],i+=e>>ga&G4,i=this.index[i],i=(i<<sp)+(e&Ap),this.data[i];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),P_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",q4=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Sh=0;Sh<P_.length;Sh++)q4[P_.charCodeAt(Sh)]=Sh;var j4=1,op=2,ap=3,z_=4,R_=5,J4=7,O_=8,lp=9,cp=10,K_=11,N_=12,V_=13,G_=14,up=15,Y4=function(t){for(var e=[],i=0,n=t.length;i<n;){var l=t.charCodeAt(i++);if(l>=55296&&l<=56319&&i<n){var u=t.charCodeAt(i++);(u&64512)===56320?e.push(((l&1023)<<10)+(u&1023)+65536):(e.push(l),i--)}else e.push(l)}return e},$4=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var i=t.length;if(!i)return"";for(var n=[],l=-1,u="";++l<i;){var f=t[l];f<=65535?n.push(f):(f-=65536,n.push((f>>10)+55296,f%1024+56320)),(l+1===i||n.length>16384)&&(u+=String.fromCharCode.apply(String,n),n.length=0)}return u},eT=Z4(S4),xs="",hp="",tT=function(t){return eT.get(t)},rT=function(t,e,i){var n=i-2,l=e[n],u=e[i-1],f=e[i];if(u===op&&f===ap)return xs;if(u===op||u===ap||u===z_||f===op||f===ap||f===z_)return hp;if(u===O_&&[O_,lp,K_,N_].indexOf(f)!==-1||(u===K_||u===lp)&&(f===lp||f===cp)||(u===N_||u===cp)&&f===cp||f===V_||f===R_||f===J4||u===j4)return xs;if(u===V_&&f===G_){for(;l===R_;)l=e[--n];if(l===G_)return xs}if(u===up&&f===up){for(var a=0;l===up;)a++,l=e[--n];if(a%2===0)return xs}return hp},iT=function(t){var e=Y4(t),i=e.length,n=0,l=0,u=e.map(tT);return{next:function(){if(n>=i)return{done:!0,value:null};for(var f=xs;n<i&&(f=rT(e,u,++n))===xs;);if(f!==xs||n===i){var a=$4.apply(null,e.slice(l,n));return l=n,{value:a,done:!1}}return{done:!0,value:null}}}},nT=function(t){for(var e=iT(t),i=[],n;!(n=e.next()).done;)n.value&&i.push(n.value.slice());return i},sT=function(t){var e=123;if(t.createRange){var i=t.createRange();if(i.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),i.selectNode(n);var l=i.getBoundingClientRect(),u=Math.round(l.height);if(t.body.removeChild(n),u===e)return!0}}return!1},AT=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var i=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,l=Ff(n.data).map(function(w){return Vi(w)}),u=0,f={},a=l.every(function(w,C){i.setStart(n,u),i.setEnd(n,u+w.length);var F=i.getBoundingClientRect();u+=w.length;var E=F.x>f.x||F.y>f.y;return f=F,C===0?!0:E});return t.body.removeChild(e),a},oT=function(){return typeof new Image().crossOrigin<"u"},aT=function(){return typeof new XMLHttpRequest().responseType=="string"},lT=function(t){var e=new Image,i=t.createElement("canvas"),n=i.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),i.toDataURL()}catch{return!1}return!0},X_=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},cT=function(t){var e=t.createElement("canvas"),i=100;e.width=i,e.height=i;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,i,i);var l=new Image,u=e.toDataURL();l.src=u;var f=jp(i,i,0,0,l);return n.fillStyle="red",n.fillRect(0,0,i,i),Z_(f).then(function(a){n.drawImage(a,0,0);var w=n.getImageData(0,0,i,i).data;n.fillStyle="red",n.fillRect(0,0,i,i);var C=t.createElement("div");return C.style.backgroundImage="url("+u+")",C.style.height=i+"px",X_(w)?Z_(jp(i,i,0,0,C)):Promise.reject(!1)}).then(function(a){return n.drawImage(a,0,0),X_(n.getImageData(0,0,i,i).data)}).catch(function(){return!1})},jp=function(t,e,i,n,l){var u="http://www.w3.org/2000/svg",f=document.createElementNS(u,"svg"),a=document.createElementNS(u,"foreignObject");return f.setAttributeNS(null,"width",t.toString()),f.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",i.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),f.appendChild(a),a.appendChild(l),f},Z_=function(t){return new Promise(function(e,i){var n=new Image;n.onload=function(){return e(n)},n.onerror=i,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},yn={get SUPPORT_RANGE_BOUNDS(){var t=sT(document);return Object.defineProperty(yn,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=yn.SUPPORT_RANGE_BOUNDS&&AT(document);return Object.defineProperty(yn,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=lT(document);return Object.defineProperty(yn,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?cT(document):Promise.resolve(!1);return Object.defineProperty(yn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=oT();return Object.defineProperty(yn,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=aT();return Object.defineProperty(yn,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(yn,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(yn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Lc=function(){function t(e,i){this.text=e,this.bounds=i}return t}(),uT=function(t,e,i,n){var l=dT(e,i),u=[],f=0;return l.forEach(function(a){if(i.textDecorationLine.length||a.trim().length>0)if(yn.SUPPORT_RANGE_BOUNDS){var w=W_(n,f,a.length).getClientRects();if(w.length>1){var C=Sg(a),F=0;C.forEach(function(U){u.push(new Lc(U,qA.fromDOMRectList(t,W_(n,F+f,U.length).getClientRects()))),F+=U.length})}else u.push(new Lc(a,qA.fromDOMRectList(t,w)))}else{var E=n.splitText(a.length);u.push(new Lc(a,hT(t,n))),n=E}else yn.SUPPORT_RANGE_BOUNDS||(n=n.splitText(a.length));f+=a.length}),u},hT=function(t,e){var i=e.ownerDocument;if(i){var n=i.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var l=e.parentNode;if(l){l.replaceChild(n,e);var u=Ef(t,n);return n.firstChild&&l.replaceChild(n.firstChild,n),u}}return qA.EMPTY},W_=function(t,e,i){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var l=n.createRange();return l.setStart(t,e),l.setEnd(t,e+i),l},Sg=function(t){if(yn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(i){return i.segment})}return nT(t)},fT=function(t,e){if(yn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var i=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(i.segment(t)).map(function(n){return n.segment})}return gT(t,e)},dT=function(t,e){return e.letterSpacing!==0?Sg(t):fT(t,e)},pT=[32,160,4961,65792,65793,4153,4241],gT=function(t,e){for(var i=NU(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],l,u=function(){if(l.value){var f=l.value.slice(),a=Ff(f),w="";a.forEach(function(C){pT.indexOf(C)===-1?w+=Vi(C):(w.length&&n.push(w),n.push(Vi(C)),w="")}),w.length&&n.push(w)}};!(l=i.next()).done;)u();return n},mT=function(){function t(e,i,n){this.text=_T(i.data,n.textTransform),this.textBounds=uT(e,this.text,n,i)}return t}(),_T=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(yT,wT);case 2:return t.toUpperCase();default:return t}},yT=/(^|\s|:|-|\(|\))([a-z])/g,wT=function(t,e,i){return t.length>0?e+i.toUpperCase():t},Rv=function(t){js(e,t);function e(i,n){var l=t.call(this,i,n)||this;return l.src=n.currentSrc||n.src,l.intrinsicWidth=n.naturalWidth,l.intrinsicHeight=n.naturalHeight,l.context.cache.addImage(l.src),l}return e}(vA),Ov=function(t){js(e,t);function e(i,n){var l=t.call(this,i,n)||this;return l.canvas=n,l.intrinsicWidth=n.width,l.intrinsicHeight=n.height,l}return e}(vA),Kv=function(t){js(e,t);function e(i,n){var l=t.call(this,i,n)||this,u=new XMLSerializer,f=Ef(i,n);return n.setAttribute("width",f.width+"px"),n.setAttribute("height",f.height+"px"),l.svg="data:image/svg+xml,"+encodeURIComponent(u.serializeToString(n)),l.intrinsicWidth=n.width.baseVal.value,l.intrinsicHeight=n.height.baseVal.value,l.context.cache.addImage(l.svg),l}return e}(vA),Nv=function(t){js(e,t);function e(i,n){var l=t.call(this,i,n)||this;return l.value=n.value,l}return e}(vA),Jp=function(t){js(e,t);function e(i,n){var l=t.call(this,i,n)||this;return l.start=n.start,l.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,l}return e}(vA),vT=[{type:15,flags:0,unit:"px",number:3}],BT=[{type:16,flags:0,number:50}],xT=function(t){return t.width>t.height?new qA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new qA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},bT=function(t){var e=t.type===CT?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},cf="checkbox",uf="radio",CT="password",q_=707406591,kg=function(t){js(e,t);function e(i,n){var l=t.call(this,i,n)||this;switch(l.type=n.type.toLowerCase(),l.checked=n.checked,l.value=bT(n),(l.type===cf||l.type===uf)&&(l.styles.backgroundColor=3739148031,l.styles.borderTopColor=l.styles.borderRightColor=l.styles.borderBottomColor=l.styles.borderLeftColor=2779096575,l.styles.borderTopWidth=l.styles.borderRightWidth=l.styles.borderBottomWidth=l.styles.borderLeftWidth=1,l.styles.borderTopStyle=l.styles.borderRightStyle=l.styles.borderBottomStyle=l.styles.borderLeftStyle=1,l.styles.backgroundClip=[0],l.styles.backgroundOrigin=[0],l.bounds=xT(l.bounds)),l.type){case cf:l.styles.borderTopRightRadius=l.styles.borderTopLeftRadius=l.styles.borderBottomRightRadius=l.styles.borderBottomLeftRadius=vT;break;case uf:l.styles.borderTopRightRadius=l.styles.borderTopLeftRadius=l.styles.borderBottomRightRadius=l.styles.borderBottomLeftRadius=BT;break}return l}return e}(vA),Vv=function(t){js(e,t);function e(i,n){var l=t.call(this,i,n)||this,u=n.options[n.selectedIndex||0];return l.value=u&&u.text||"",l}return e}(vA),Gv=function(t){js(e,t);function e(i,n){var l=t.call(this,i,n)||this;return l.value=n.value,l}return e}(vA),Xv=function(t){js(e,t);function e(i,n){var l=t.call(this,i,n)||this;l.src=n.src,l.width=parseInt(n.width,10)||0,l.height=parseInt(n.height,10)||0,l.backgroundColor=l.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){l.tree=Wv(i,n.contentWindow.document.documentElement);var u=n.contentWindow.document.documentElement?Mc(i,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):GA.TRANSPARENT,f=n.contentWindow.document.body?Mc(i,getComputedStyle(n.contentWindow.document.body).backgroundColor):GA.TRANSPARENT;l.backgroundColor=bo(u)?bo(f)?l.styles.backgroundColor:f:u}}catch{}return l}return e}(vA),ET=["OL","UL","MENU"],Vh=function(t,e,i,n){for(var l=e.firstChild,u=void 0;l;l=u)if(u=l.nextSibling,qv(l)&&l.data.trim().length>0)i.textNodes.push(new mT(t,l,i.styles));else if(ul(l))if($v(l)&&l.assignedNodes)l.assignedNodes().forEach(function(a){return Vh(t,a,i,n)});else{var f=Zv(t,l);f.styles.isVisible()&&(FT(l,f,n)?f.flags|=4:UT(f.styles)&&(f.flags|=2),ET.indexOf(l.tagName)!==-1&&(f.flags|=8),i.elements.push(f),l.slot,l.shadowRoot?Vh(t,l.shadowRoot,f,n):!hf(l)&&!jv(l)&&!ff(l)&&Vh(t,l,f,n))}},Zv=function(t,e){return $p(e)?new Rv(t,e):Jv(e)?new Ov(t,e):jv(e)?new Kv(t,e):QT(e)?new Nv(t,e):IT(e)?new Jp(t,e):TT(e)?new kg(t,e):ff(e)?new Vv(t,e):hf(e)?new Gv(t,e):Yv(e)?new Xv(t,e):new vA(t,e)},Wv=function(t,e){var i=Zv(t,e);return i.flags|=4,Vh(t,e,i,i),i},FT=function(t,e,i){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Mg(t)&&i.styles.isTransparent()},UT=function(t){return t.isPositioned()||t.isFloating()},qv=function(t){return t.nodeType===Node.TEXT_NODE},ul=function(t){return t.nodeType===Node.ELEMENT_NODE},Yp=function(t){return ul(t)&&typeof t.style<"u"&&!Gh(t)},Gh=function(t){return typeof t.className=="object"},QT=function(t){return t.tagName==="LI"},IT=function(t){return t.tagName==="OL"},TT=function(t){return t.tagName==="INPUT"},ST=function(t){return t.tagName==="HTML"},jv=function(t){return t.tagName==="svg"},Mg=function(t){return t.tagName==="BODY"},Jv=function(t){return t.tagName==="CANVAS"},j_=function(t){return t.tagName==="VIDEO"},$p=function(t){return t.tagName==="IMG"},Yv=function(t){return t.tagName==="IFRAME"},J_=function(t){return t.tagName==="STYLE"},kT=function(t){return t.tagName==="SCRIPT"},hf=function(t){return t.tagName==="TEXTAREA"},ff=function(t){return t.tagName==="SELECT"},$v=function(t){return t.tagName==="SLOT"},Y_=function(t){return t.tagName.indexOf("-")>0},MT=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var i=this.counters[e];return i&&i.length?i[i.length-1]:1},t.prototype.getCounterValues=function(e){var i=this.counters[e];return i||[]},t.prototype.pop=function(e){var i=this;e.forEach(function(n){return i.counters[n].pop()})},t.prototype.parse=function(e){var i=this,n=e.counterIncrement,l=e.counterReset,u=!0;n!==null&&n.forEach(function(a){var w=i.counters[a.counter];w&&a.increment!==0&&(u=!1,w.length||w.push(1),w[Math.max(0,w.length-1)]+=a.increment)});var f=[];return u&&l.forEach(function(a){var w=i.counters[a.counter];f.push(a.counter),w||(w=i.counters[a.counter]=[]),w.push(a.reset)}),f},t}(),$_={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ey={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},DT={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},LT={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},el=function(t,e,i,n,l,u){return t<e||t>i?Gc(t,l,u.length>0):n.integers.reduce(function(f,a,w){for(;t>=a;)t-=a,f+=n.values[w];return f},"")+u},eB=function(t,e,i,n){var l="";do i||t--,l=n(t)+l,t/=e;while(t*e>=e);return l},Ni=function(t,e,i,n,l){var u=i-e+1;return(t<0?"-":"")+(eB(Math.abs(t),u,n,function(f){return Vi(Math.floor(f%u)+e)})+l)},na=function(t,e,i){i===void 0&&(i=". ");var n=e.length;return eB(Math.abs(t),n,!1,function(l){return e[Math.floor(l%n)]})+i},ol=1<<0,mo=1<<1,_o=1<<2,Tc=1<<3,RA=function(t,e,i,n,l,u){if(t<-9999||t>9999)return Gc(t,4,l.length>0);var f=Math.abs(t),a=l;if(f===0)return e[0]+a;for(var w=0;f>0&&w<=4;w++){var C=f%10;C===0&&sn(u,ol)&&a!==""?a=e[C]+a:C>1||C===1&&w===0||C===1&&w===1&&sn(u,mo)||C===1&&w===1&&sn(u,_o)&&t>100||C===1&&w>1&&sn(u,Tc)?a=e[C]+(w>0?i[w-1]:"")+a:C===1&&w>0&&(a=i[w-1]+a),f=Math.floor(f/10)}return(t<0?n:"")+a},ty="",ry="",iy="",fp="",Gc=function(t,e,i){var n=i?". ":"",l=i?"":"",u=i?", ":"",f=i?" ":"";switch(e){case 0:return""+f;case 1:return""+f;case 2:return""+f;case 5:var a=Ni(t,48,57,!0,n);return a.length<4?"0"+a:a;case 4:return na(t,"",l);case 6:return el(t,1,3999,$_,3,n).toLowerCase();case 7:return el(t,1,3999,$_,3,n);case 8:return Ni(t,945,969,!1,n);case 9:return Ni(t,97,122,!1,n);case 10:return Ni(t,65,90,!1,n);case 11:return Ni(t,1632,1641,!0,n);case 12:case 49:return el(t,1,9999,ey,3,n);case 35:return el(t,1,9999,ey,3,n).toLowerCase();case 13:return Ni(t,2534,2543,!0,n);case 14:case 30:return Ni(t,6112,6121,!0,n);case 15:return na(t,"",l);case 16:return na(t,"",l);case 17:case 48:return RA(t,"",ty,"",l,mo|_o|Tc);case 47:return RA(t,"",ry,"",l,ol|mo|_o|Tc);case 42:return RA(t,"",ty,"",l,mo|_o|Tc);case 41:return RA(t,"",ry,"",l,ol|mo|_o|Tc);case 26:return RA(t,"","",iy,l,0);case 25:return RA(t,"","",iy,l,ol|mo|_o);case 31:return RA(t,"","",fp,u,ol|mo|_o);case 33:return RA(t,"","",fp,u,0);case 32:return RA(t,"","",fp,u,ol|mo|_o);case 18:return Ni(t,2406,2415,!0,n);case 20:return el(t,1,19999,LT,3,n);case 21:return Ni(t,2790,2799,!0,n);case 22:return Ni(t,2662,2671,!0,n);case 22:return el(t,1,10999,DT,3,n);case 23:return na(t,"");case 24:return na(t,"");case 27:return Ni(t,3302,3311,!0,n);case 28:return na(t,"",l);case 29:return na(t,"",l);case 34:return Ni(t,3792,3801,!0,n);case 37:return Ni(t,6160,6169,!0,n);case 38:return Ni(t,4160,4169,!0,n);case 39:return Ni(t,2918,2927,!0,n);case 40:return Ni(t,1776,1785,!0,n);case 43:return Ni(t,3046,3055,!0,n);case 44:return Ni(t,3174,3183,!0,n);case 45:return Ni(t,3664,3673,!0,n);case 46:return Ni(t,3872,3881,!0,n);case 3:default:return Ni(t,48,57,!0,n)}},tB="data-html2canvas-ignore",ny=function(){function t(e,i,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=i,this.counters=new MT,this.quoteDepth=0,!i.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(i.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,i){var n=this,l=HT(e,i);if(!l.contentWindow)return Promise.reject("Unable to find iframe window");var u=e.defaultView.pageXOffset,f=e.defaultView.pageYOffset,a=l.contentWindow,w=a.document,C=RT(l).then(function(){return Nn(n,void 0,void 0,function(){var F,E;return Qn(this,function(U){switch(U.label){case 0:return this.scrolledElements.forEach(VT),a&&(a.scrollTo(i.left,i.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==i.top||a.scrollX!==i.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-i.left,a.scrollY-i.top,0,0))),F=this.options.onclone,E=this.clonedReferenceElement,typeof E>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:w.fonts&&w.fonts.ready?[4,w.fonts.ready]:[3,2];case 1:U.sent(),U.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,zT(w)]:[3,4];case 3:U.sent(),U.label=4;case 4:return typeof F=="function"?[2,Promise.resolve().then(function(){return F(w,E)}).then(function(){return l})]:[2,l]}})})});return w.open(),w.write(KT(document.doctype)+"<html></html>"),NT(this.referenceElement.ownerDocument,u,f),w.replaceChild(w.adoptNode(this.documentElement),w.documentElement),w.close(),C},t.prototype.createElementClone=function(e){if(qp(e,2))debugger;if(Jv(e))return this.createCanvasClone(e);if(j_(e))return this.createVideoClone(e);if(J_(e))return this.createStyleClone(e);var i=e.cloneNode(!1);return $p(i)&&($p(e)&&e.currentSrc&&e.currentSrc!==e.src&&(i.src=e.currentSrc,i.srcset=""),i.loading==="lazy"&&(i.loading="eager")),Y_(i)?this.createCustomElementClone(i):i},t.prototype.createCustomElementClone=function(e){var i=document.createElement("html2canvascustomelement");return dp(e.style,i),i},t.prototype.createStyleClone=function(e){try{var i=e.sheet;if(i&&i.cssRules){var n=[].slice.call(i.cssRules,0).reduce(function(u,f){return f&&typeof f.cssText=="string"?u+f.cssText:u},""),l=e.cloneNode(!1);return l.textContent=n,l}}catch(u){if(this.context.logger.error("Unable to access cssRules property",u),u.name!=="SecurityError")throw u}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var i;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var l=e.cloneNode(!1);try{l.width=e.width,l.height=e.height;var u=e.getContext("2d"),f=l.getContext("2d");if(f)if(!this.options.allowTaint&&u)f.putImageData(u.getImageData(0,0,e.width,e.height),0,0);else{var a=(i=e.getContext("webgl2"))!==null&&i!==void 0?i:e.getContext("webgl");if(a){var w=a.getContextAttributes();(w==null?void 0:w.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}f.drawImage(e,0,0)}return l}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return l},t.prototype.createVideoClone=function(e){var i=e.ownerDocument.createElement("canvas");i.width=e.offsetWidth,i.height=e.offsetHeight;var n=i.getContext("2d");try{return n&&(n.drawImage(e,0,0,i.width,i.height),this.options.allowTaint||n.getImageData(0,0,i.width,i.height)),i}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var l=e.ownerDocument.createElement("canvas");return l.width=e.offsetWidth,l.height=e.offsetHeight,l},t.prototype.appendChildNode=function(e,i,n){(!ul(i)||!kT(i)&&!i.hasAttribute(tB)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(i)))&&(!this.options.copyStyles||!ul(i)||!J_(i))&&e.appendChild(this.cloneNode(i,n))},t.prototype.cloneChildNodes=function(e,i,n){for(var l=this,u=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;u;u=u.nextSibling)if(ul(u)&&$v(u)&&typeof u.assignedNodes=="function"){var f=u.assignedNodes();f.length&&f.forEach(function(a){return l.appendChildNode(i,a,n)})}else this.appendChildNode(i,u,n)},t.prototype.cloneNode=function(e,i){if(qv(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&ul(e)&&(Yp(e)||Gh(e))){var l=this.createElementClone(e);l.style.transitionProperty="none";var u=n.getComputedStyle(e),f=n.getComputedStyle(e,":before"),a=n.getComputedStyle(e,":after");this.referenceElement===e&&Yp(l)&&(this.clonedReferenceElement=l),Mg(l)&&ZT(l);var w=this.counters.parse(new D_(this.context,u)),C=this.resolvePseudoContent(e,l,f,Hc.BEFORE);Y_(e)&&(i=!0),j_(e)||this.cloneChildNodes(e,l,i),C&&l.insertBefore(C,l.firstChild);var F=this.resolvePseudoContent(e,l,a,Hc.AFTER);return F&&l.appendChild(F),this.counters.pop(w),(u&&(this.options.copyStyles||Gh(e))&&!Yv(e)||i)&&dp(u,l),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([l,e.scrollLeft,e.scrollTop]),(hf(e)||ff(e))&&(hf(l)||ff(l))&&(l.value=e.value),l}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,i,n,l){var u=this;if(n){var f=n.content,a=i.ownerDocument;if(!(!a||!f||f==="none"||f==="-moz-alt-content"||n.display==="none")){this.counters.parse(new D_(this.context,n));var w=new Q4(this.context,n),C=a.createElement("html2canvaspseudoelement");dp(n,C),w.content.forEach(function(E){if(E.type===0)C.appendChild(a.createTextNode(E.value));else if(E.type===22){var U=a.createElement("img");U.src=E.value,U.style.opacity="1",C.appendChild(U)}else if(E.type===18){if(E.name==="attr"){var H=E.values.filter(gi);H.length&&C.appendChild(a.createTextNode(e.getAttribute(H[0].value)||""))}else if(E.name==="counter"){var P=E.values.filter(xl),V=P[0],j=P[1];if(V&&gi(V)){var Y=u.counters.getCounterValue(V.value),ee=j&&gi(j)?Wp.parse(u.context,j.value):3;C.appendChild(a.createTextNode(Gc(Y,ee,!1)))}}else if(E.name==="counters"){var ce=E.values.filter(xl),V=ce[0],Qe=ce[1],j=ce[2];if(V&&gi(V)){var le=u.counters.getCounterValues(V.value),re=j&&gi(j)?Wp.parse(u.context,j.value):3,we=Qe&&Qe.type===0?Qe.value:"",Ae=le.map(function(se){return Gc(se,re,!1)}).join(we);C.appendChild(a.createTextNode(Ae))}}}else if(E.type===20)switch(E.value){case"open-quote":C.appendChild(a.createTextNode(M_(w.quotes,u.quoteDepth++,!0)));break;case"close-quote":C.appendChild(a.createTextNode(M_(w.quotes,--u.quoteDepth,!1)));break;default:C.appendChild(a.createTextNode(E.value))}}),C.className=eg+" "+tg;var F=l===Hc.BEFORE?" "+eg:" "+tg;return Gh(i)?i.className.baseValue+=F:i.className+=F,C}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Hc;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Hc||(Hc={}));var HT=function(t,e){var i=t.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=e.width.toString(),i.height=e.height.toString(),i.scrolling="no",i.setAttribute(tB,"true"),t.body.appendChild(i),i},PT=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},zT=function(t){return Promise.all([].slice.call(t.images,0).map(PT))},RT=function(t){return new Promise(function(e,i){var n=t.contentWindow;if(!n)return i("No window assigned for iframe");var l=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var u=setInterval(function(){l.body.childNodes.length>0&&l.readyState==="complete"&&(clearInterval(u),e(t))},50)}})},OT=["all","d","content"],dp=function(t,e){for(var i=t.length-1;i>=0;i--){var n=t.item(i);OT.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},KT=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},NT=function(t,e,i){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||i!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,i)},VT=function(t){var e=t[0],i=t[1],n=t[2];e.scrollLeft=i,e.scrollTop=n},GT=":before",XT=":after",eg="___html2canvas___pseudoelement_before",tg="___html2canvas___pseudoelement_after",sy=`{
    content: "" !important;
    display: none !important;
}`,ZT=function(t){WT(t,"."+eg+GT+sy+`
         .`+tg+XT+sy)},WT=function(t,e){var i=t.ownerDocument;if(i){var n=i.createElement("style");n.textContent=e,t.appendChild(n)}},rB=function(){function t(){}return t.getOrigin=function(e){var i=t._link;return i?(i.href=e,i.href=i.href,i.protocol+i.hostname+i.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),qT=function(){function t(e,i){this.context=e,this._options=i,this._cache={}}return t.prototype.addImage=function(e){var i=Promise.resolve();return this.has(e)||(gp(e)||$T(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),i},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Nn(this,void 0,void 0,function(){var i,n,l,u,f=this;return Qn(this,function(a){switch(a.label){case 0:return i=rB.isSameOrigin(e),n=!pp(e)&&this._options.useCORS===!0&&yn.SUPPORT_CORS_IMAGES&&!i,l=!pp(e)&&!i&&!gp(e)&&typeof this._options.proxy=="string"&&yn.SUPPORT_CORS_XHR&&!n,!i&&this._options.allowTaint===!1&&!pp(e)&&!gp(e)&&!l&&!n?[2]:(u=e,l?[4,this.proxy(u)]:[3,2]);case 1:u=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(w,C){var F=new Image;F.onload=function(){return w(F)},F.onerror=C,(eS(u)||n)&&(F.crossOrigin="anonymous"),F.src=u,F.complete===!0&&setTimeout(function(){return w(F)},500),f._options.imageTimeout>0&&setTimeout(function(){return C("Timed out ("+f._options.imageTimeout+"ms) loading image")},f._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var i=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var l=e.substring(0,256);return new Promise(function(u,f){var a=yn.SUPPORT_RESPONSE_TYPE?"blob":"text",w=new XMLHttpRequest;w.onload=function(){if(w.status===200)if(a==="text")u(w.response);else{var E=new FileReader;E.addEventListener("load",function(){return u(E.result)},!1),E.addEventListener("error",function(U){return f(U)},!1),E.readAsDataURL(w.response)}else f("Failed to proxy resource "+l+" with status code "+w.status)},w.onerror=f;var C=n.indexOf("?")>-1?"&":"?";if(w.open("GET",""+n+C+"url="+encodeURIComponent(e)+"&responseType="+a),a!=="text"&&w instanceof XMLHttpRequest&&(w.responseType=a),i._options.imageTimeout){var F=i._options.imageTimeout;w.timeout=F,w.ontimeout=function(){return f("Timed out ("+F+"ms) proxying "+l)}}w.send()})},t}(),jT=/^data:image\/svg\+xml/i,JT=/^data:image\/.*;base64,/i,YT=/^data:image\/.*/i,$T=function(t){return yn.SUPPORT_SVG_DRAWING||!tS(t)},pp=function(t){return YT.test(t)},eS=function(t){return JT.test(t)},gp=function(t){return t.substr(0,4)==="blob"},tS=function(t){return t.substr(-3).toLowerCase()==="svg"||jT.test(t)},Vt=function(){function t(e,i){this.type=0,this.x=e,this.y=i}return t.prototype.add=function(e,i){return new t(this.x+e,this.y+i)},t}(),tl=function(t,e,i){return new Vt(t.x+(e.x-t.x)*i,t.y+(e.y-t.y)*i)},kh=function(){function t(e,i,n,l){this.type=1,this.start=e,this.startControl=i,this.endControl=n,this.end=l}return t.prototype.subdivide=function(e,i){var n=tl(this.start,this.startControl,e),l=tl(this.startControl,this.endControl,e),u=tl(this.endControl,this.end,e),f=tl(n,l,e),a=tl(l,u,e),w=tl(f,a,e);return i?new t(this.start,n,f,w):new t(w,a,u,this.end)},t.prototype.add=function(e,i){return new t(this.start.add(e,i),this.startControl.add(e,i),this.endControl.add(e,i),this.end.add(e,i))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),bs=function(t){return t.type===1},rS=function(){function t(e){var i=e.styles,n=e.bounds,l=Qc(i.borderTopLeftRadius,n.width,n.height),u=l[0],f=l[1],a=Qc(i.borderTopRightRadius,n.width,n.height),w=a[0],C=a[1],F=Qc(i.borderBottomRightRadius,n.width,n.height),E=F[0],U=F[1],H=Qc(i.borderBottomLeftRadius,n.width,n.height),P=H[0],V=H[1],j=[];j.push((u+w)/n.width),j.push((P+E)/n.width),j.push((f+V)/n.height),j.push((C+U)/n.height);var Y=Math.max.apply(Math,j);Y>1&&(u/=Y,f/=Y,w/=Y,C/=Y,E/=Y,U/=Y,P/=Y,V/=Y);var ee=n.width-w,ce=n.height-U,Qe=n.width-E,le=n.height-V,re=i.borderTopWidth,we=i.borderRightWidth,Ae=i.borderBottomWidth,R=i.borderLeftWidth,ie=Fi(i.paddingTop,e.bounds.width),se=Fi(i.paddingRight,e.bounds.width),Be=Fi(i.paddingBottom,e.bounds.width),Re=Fi(i.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=u>0||f>0?Si(n.left+R/3,n.top+re/3,u-R/3,f-re/3,si.TOP_LEFT):new Vt(n.left+R/3,n.top+re/3),this.topRightBorderDoubleOuterBox=u>0||f>0?Si(n.left+ee,n.top+re/3,w-we/3,C-re/3,si.TOP_RIGHT):new Vt(n.left+n.width-we/3,n.top+re/3),this.bottomRightBorderDoubleOuterBox=E>0||U>0?Si(n.left+Qe,n.top+ce,E-we/3,U-Ae/3,si.BOTTOM_RIGHT):new Vt(n.left+n.width-we/3,n.top+n.height-Ae/3),this.bottomLeftBorderDoubleOuterBox=P>0||V>0?Si(n.left+R/3,n.top+le,P-R/3,V-Ae/3,si.BOTTOM_LEFT):new Vt(n.left+R/3,n.top+n.height-Ae/3),this.topLeftBorderDoubleInnerBox=u>0||f>0?Si(n.left+R*2/3,n.top+re*2/3,u-R*2/3,f-re*2/3,si.TOP_LEFT):new Vt(n.left+R*2/3,n.top+re*2/3),this.topRightBorderDoubleInnerBox=u>0||f>0?Si(n.left+ee,n.top+re*2/3,w-we*2/3,C-re*2/3,si.TOP_RIGHT):new Vt(n.left+n.width-we*2/3,n.top+re*2/3),this.bottomRightBorderDoubleInnerBox=E>0||U>0?Si(n.left+Qe,n.top+ce,E-we*2/3,U-Ae*2/3,si.BOTTOM_RIGHT):new Vt(n.left+n.width-we*2/3,n.top+n.height-Ae*2/3),this.bottomLeftBorderDoubleInnerBox=P>0||V>0?Si(n.left+R*2/3,n.top+le,P-R*2/3,V-Ae*2/3,si.BOTTOM_LEFT):new Vt(n.left+R*2/3,n.top+n.height-Ae*2/3),this.topLeftBorderStroke=u>0||f>0?Si(n.left+R/2,n.top+re/2,u-R/2,f-re/2,si.TOP_LEFT):new Vt(n.left+R/2,n.top+re/2),this.topRightBorderStroke=u>0||f>0?Si(n.left+ee,n.top+re/2,w-we/2,C-re/2,si.TOP_RIGHT):new Vt(n.left+n.width-we/2,n.top+re/2),this.bottomRightBorderStroke=E>0||U>0?Si(n.left+Qe,n.top+ce,E-we/2,U-Ae/2,si.BOTTOM_RIGHT):new Vt(n.left+n.width-we/2,n.top+n.height-Ae/2),this.bottomLeftBorderStroke=P>0||V>0?Si(n.left+R/2,n.top+le,P-R/2,V-Ae/2,si.BOTTOM_LEFT):new Vt(n.left+R/2,n.top+n.height-Ae/2),this.topLeftBorderBox=u>0||f>0?Si(n.left,n.top,u,f,si.TOP_LEFT):new Vt(n.left,n.top),this.topRightBorderBox=w>0||C>0?Si(n.left+ee,n.top,w,C,si.TOP_RIGHT):new Vt(n.left+n.width,n.top),this.bottomRightBorderBox=E>0||U>0?Si(n.left+Qe,n.top+ce,E,U,si.BOTTOM_RIGHT):new Vt(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=P>0||V>0?Si(n.left,n.top+le,P,V,si.BOTTOM_LEFT):new Vt(n.left,n.top+n.height),this.topLeftPaddingBox=u>0||f>0?Si(n.left+R,n.top+re,Math.max(0,u-R),Math.max(0,f-re),si.TOP_LEFT):new Vt(n.left+R,n.top+re),this.topRightPaddingBox=w>0||C>0?Si(n.left+Math.min(ee,n.width-we),n.top+re,ee>n.width+we?0:Math.max(0,w-we),Math.max(0,C-re),si.TOP_RIGHT):new Vt(n.left+n.width-we,n.top+re),this.bottomRightPaddingBox=E>0||U>0?Si(n.left+Math.min(Qe,n.width-R),n.top+Math.min(ce,n.height-Ae),Math.max(0,E-we),Math.max(0,U-Ae),si.BOTTOM_RIGHT):new Vt(n.left+n.width-we,n.top+n.height-Ae),this.bottomLeftPaddingBox=P>0||V>0?Si(n.left+R,n.top+Math.min(le,n.height-Ae),Math.max(0,P-R),Math.max(0,V-Ae),si.BOTTOM_LEFT):new Vt(n.left+R,n.top+n.height-Ae),this.topLeftContentBox=u>0||f>0?Si(n.left+R+Re,n.top+re+ie,Math.max(0,u-(R+Re)),Math.max(0,f-(re+ie)),si.TOP_LEFT):new Vt(n.left+R+Re,n.top+re+ie),this.topRightContentBox=w>0||C>0?Si(n.left+Math.min(ee,n.width+R+Re),n.top+re+ie,ee>n.width+R+Re?0:w-R+Re,C-(re+ie),si.TOP_RIGHT):new Vt(n.left+n.width-(we+se),n.top+re+ie),this.bottomRightContentBox=E>0||U>0?Si(n.left+Math.min(Qe,n.width-(R+Re)),n.top+Math.min(ce,n.height+re+ie),Math.max(0,E-(we+se)),U-(Ae+Be),si.BOTTOM_RIGHT):new Vt(n.left+n.width-(we+se),n.top+n.height-(Ae+Be)),this.bottomLeftContentBox=P>0||V>0?Si(n.left+R+Re,n.top+le,Math.max(0,P-(R+Re)),V-(Ae+Be),si.BOTTOM_LEFT):new Vt(n.left+R+Re,n.top+n.height-(Ae+Be))}return t}(),si;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(si||(si={}));var Si=function(t,e,i,n,l){var u=4*((Math.sqrt(2)-1)/3),f=i*u,a=n*u,w=t+i,C=e+n;switch(l){case si.TOP_LEFT:return new kh(new Vt(t,C),new Vt(t,C-a),new Vt(w-f,e),new Vt(w,e));case si.TOP_RIGHT:return new kh(new Vt(t,e),new Vt(t+f,e),new Vt(w,C-a),new Vt(w,C));case si.BOTTOM_RIGHT:return new kh(new Vt(w,e),new Vt(w,e+a),new Vt(t+f,C),new Vt(t,C));case si.BOTTOM_LEFT:default:return new kh(new Vt(w,C),new Vt(w-f,C),new Vt(t,e+a),new Vt(t,e))}},df=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},iS=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},pf=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},nS=function(){function t(e,i,n){this.offsetX=e,this.offsetY=i,this.matrix=n,this.type=0,this.target=6}return t}(),Mh=function(){function t(e,i){this.path=e,this.target=i,this.type=1}return t}(),sS=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),AS=function(t){return t.type===0},iB=function(t){return t.type===1},oS=function(t){return t.type===2},Ay=function(t,e){return t.length===e.length?t.some(function(i,n){return i===e[n]}):!1},aS=function(t,e,i,n,l){return t.map(function(u,f){switch(f){case 0:return u.add(e,i);case 1:return u.add(e+n,i);case 2:return u.add(e+n,i+l);case 3:return u.add(e,i+l)}return u})},nB=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),sB=function(){function t(e,i){if(this.container=e,this.parent=i,this.effects=[],this.curves=new rS(this.container),this.container.styles.opacity<1&&this.effects.push(new sS(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,l=this.container.bounds.top+this.container.styles.transformOrigin[1].number,u=this.container.styles.transform;this.effects.push(new nS(n,l,u))}if(this.container.styles.overflowX!==0){var f=df(this.curves),a=pf(this.curves);Ay(f,a)?this.effects.push(new Mh(f,6)):(this.effects.push(new Mh(f,2)),this.effects.push(new Mh(a,4)))}}return t.prototype.getEffects=function(e){for(var i=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,l=this.effects.slice(0);n;){var u=n.effects.filter(function(w){return!iB(w)});if(i||n.container.styles.position!==0||!n.parent){if(l.unshift.apply(l,u),i=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var f=df(n.curves),a=pf(n.curves);Ay(f,a)||l.unshift(new Mh(a,6))}}else l.unshift.apply(l,u);n=n.parent}return l.filter(function(w){return sn(w.target,e)})},t}(),rg=function(t,e,i,n){t.container.elements.forEach(function(l){var u=sn(l.flags,4),f=sn(l.flags,2),a=new sB(l,t);sn(l.styles.display,2048)&&n.push(a);var w=sn(l.flags,8)?[]:n;if(u||f){var C=u||l.styles.isPositioned()?i:e,F=new nB(a);if(l.styles.isPositioned()||l.styles.opacity<1||l.styles.isTransformed()){var E=l.styles.zIndex.order;if(E<0){var U=0;C.negativeZIndex.some(function(P,V){return E>P.element.container.styles.zIndex.order?(U=V,!1):U>0}),C.negativeZIndex.splice(U,0,F)}else if(E>0){var H=0;C.positiveZIndex.some(function(P,V){return E>=P.element.container.styles.zIndex.order?(H=V+1,!1):H>0}),C.positiveZIndex.splice(H,0,F)}else C.zeroOrAutoZIndexOrTransformedOrOpacity.push(F)}else l.styles.isFloating()?C.nonPositionedFloats.push(F):C.nonPositionedInlineLevel.push(F);rg(a,F,u?F:i,w)}else l.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),rg(a,e,i,w);sn(l.flags,8)&&AB(l,w)})},AB=function(t,e){for(var i=t instanceof Jp?t.start:1,n=t instanceof Jp?t.reversed:!1,l=0;l<e.length;l++){var u=e[l];u.container instanceof Nv&&typeof u.container.value=="number"&&u.container.value!==0&&(i=u.container.value),u.listValue=Gc(i,u.container.styles.listStyleType,!0),i+=n?-1:1}},lS=function(t){var e=new sB(t,null),i=new nB(e),n=[];return rg(e,i,i,n),AB(e.container,n),i},oy=function(t,e){switch(e){case 0:return Fs(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Fs(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Fs(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Fs(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},cS=function(t,e){switch(e){case 0:return Fs(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Fs(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Fs(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Fs(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},uS=function(t,e){switch(e){case 0:return Fs(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Fs(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Fs(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Fs(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},hS=function(t,e){switch(e){case 0:return Dh(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Dh(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Dh(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Dh(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Dh=function(t,e){var i=[];return bs(t)?i.push(t.subdivide(.5,!1)):i.push(t),bs(e)?i.push(e.subdivide(.5,!0)):i.push(e),i},Fs=function(t,e,i,n){var l=[];return bs(t)?l.push(t.subdivide(.5,!1)):l.push(t),bs(i)?l.push(i.subdivide(.5,!0)):l.push(i),bs(n)?l.push(n.subdivide(.5,!0).reverse()):l.push(n),bs(e)?l.push(e.subdivide(.5,!1).reverse()):l.push(e),l},oB=function(t){var e=t.bounds,i=t.styles;return e.add(i.borderLeftWidth,i.borderTopWidth,-(i.borderRightWidth+i.borderLeftWidth),-(i.borderTopWidth+i.borderBottomWidth))},gf=function(t){var e=t.styles,i=t.bounds,n=Fi(e.paddingLeft,i.width),l=Fi(e.paddingRight,i.width),u=Fi(e.paddingTop,i.width),f=Fi(e.paddingBottom,i.width);return i.add(n+e.borderLeftWidth,u+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+l),-(e.borderTopWidth+e.borderBottomWidth+u+f))},fS=function(t,e){return t===0?e.bounds:t===2?gf(e):oB(e)},dS=function(t,e){return t===0?e.bounds:t===2?gf(e):oB(e)},mp=function(t,e,i){var n=fS(al(t.styles.backgroundOrigin,e),t),l=dS(al(t.styles.backgroundClip,e),t),u=pS(al(t.styles.backgroundSize,e),i,n),f=u[0],a=u[1],w=Qc(al(t.styles.backgroundPosition,e),n.width-f,n.height-a),C=gS(al(t.styles.backgroundRepeat,e),w,u,n,l),F=Math.round(n.left+w[0]),E=Math.round(n.top+w[1]);return[C,F,E,f,a]},rl=function(t){return gi(t)&&t.value===ml.AUTO},Lh=function(t){return typeof t=="number"},pS=function(t,e,i){var n=e[0],l=e[1],u=e[2],f=t[0],a=t[1];if(!f)return[0,0];if(Yi(f)&&a&&Yi(a))return[Fi(f,i.width),Fi(a,i.height)];var w=Lh(u);if(gi(f)&&(f.value===ml.CONTAIN||f.value===ml.COVER)){if(Lh(u)){var C=i.width/i.height;return C<u!=(f.value===ml.COVER)?[i.width,i.width/u]:[i.height*u,i.height]}return[i.width,i.height]}var F=Lh(n),E=Lh(l),U=F||E;if(rl(f)&&(!a||rl(a))){if(F&&E)return[n,l];if(!w&&!U)return[i.width,i.height];if(U&&w){var H=F?n:l*u,P=E?l:n/u;return[H,P]}var V=F?n:i.width,j=E?l:i.height;return[V,j]}if(w){var Y=0,ee=0;return Yi(f)?Y=Fi(f,i.width):Yi(a)&&(ee=Fi(a,i.height)),rl(f)?Y=ee*u:(!a||rl(a))&&(ee=Y/u),[Y,ee]}var ce=null,Qe=null;if(Yi(f)?ce=Fi(f,i.width):a&&Yi(a)&&(Qe=Fi(a,i.height)),ce!==null&&(!a||rl(a))&&(Qe=F&&E?ce/n*l:i.height),Qe!==null&&rl(f)&&(ce=F&&E?Qe/l*n:i.width),ce!==null&&Qe!==null)return[ce,Qe];throw new Error("Unable to calculate background-size for element")},al=function(t,e){var i=t[e];return typeof i>"u"?t[0]:i},gS=function(t,e,i,n,l){var u=e[0],f=e[1],a=i[0],w=i[1];switch(t){case 2:return[new Vt(Math.round(n.left),Math.round(n.top+f)),new Vt(Math.round(n.left+n.width),Math.round(n.top+f)),new Vt(Math.round(n.left+n.width),Math.round(w+n.top+f)),new Vt(Math.round(n.left),Math.round(w+n.top+f))];case 3:return[new Vt(Math.round(n.left+u),Math.round(n.top)),new Vt(Math.round(n.left+u+a),Math.round(n.top)),new Vt(Math.round(n.left+u+a),Math.round(n.height+n.top)),new Vt(Math.round(n.left+u),Math.round(n.height+n.top))];case 1:return[new Vt(Math.round(n.left+u),Math.round(n.top+f)),new Vt(Math.round(n.left+u+a),Math.round(n.top+f)),new Vt(Math.round(n.left+u+a),Math.round(n.top+f+w)),new Vt(Math.round(n.left+u),Math.round(n.top+f+w))];default:return[new Vt(Math.round(l.left),Math.round(l.top)),new Vt(Math.round(l.left+l.width),Math.round(l.top)),new Vt(Math.round(l.left+l.width),Math.round(l.height+l.top)),new Vt(Math.round(l.left),Math.round(l.height+l.top))]}},mS="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",ay="Hidden Text",_S=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,i){var n=this._document.createElement("div"),l=this._document.createElement("img"),u=this._document.createElement("span"),f=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=i,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",f.appendChild(n),l.src=mS,l.width=1,l.height=1,l.style.margin="0",l.style.padding="0",l.style.verticalAlign="baseline",u.style.fontFamily=e,u.style.fontSize=i,u.style.margin="0",u.style.padding="0",u.appendChild(this._document.createTextNode(ay)),n.appendChild(u),n.appendChild(l);var a=l.offsetTop-u.offsetTop+2;n.removeChild(u),n.appendChild(this._document.createTextNode(ay)),n.style.lineHeight="normal",l.style.verticalAlign="super";var w=l.offsetTop-n.offsetTop+2;return f.removeChild(n),{baseline:a,middle:w}},t.prototype.getMetrics=function(e,i){var n=e+" "+i;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,i)),this._data[n]},t}(),aB=function(){function t(e,i){this.context=e,this.options=i}return t}(),yS=1e4,wS=function(t){js(e,t);function e(i,n){var l=t.call(this,i,n)||this;return l._activeEffects=[],l.canvas=n.canvas?n.canvas:document.createElement("canvas"),l.ctx=l.canvas.getContext("2d"),n.canvas||(l.canvas.width=Math.floor(n.width*n.scale),l.canvas.height=Math.floor(n.height*n.scale),l.canvas.style.width=n.width+"px",l.canvas.style.height=n.height+"px"),l.fontMetrics=new _S(document),l.ctx.scale(l.options.scale,l.options.scale),l.ctx.translate(-n.x,-n.y),l.ctx.textBaseline="bottom",l._activeEffects=[],l.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),l}return e.prototype.applyEffects=function(i){for(var n=this;this._activeEffects.length;)this.popEffect();i.forEach(function(l){return n.applyEffect(l)})},e.prototype.applyEffect=function(i){this.ctx.save(),oS(i)&&(this.ctx.globalAlpha=i.opacity),AS(i)&&(this.ctx.translate(i.offsetX,i.offsetY),this.ctx.transform(i.matrix[0],i.matrix[1],i.matrix[2],i.matrix[3],i.matrix[4],i.matrix[5]),this.ctx.translate(-i.offsetX,-i.offsetY)),iB(i)&&(this.path(i.path),this.ctx.clip()),this._activeEffects.push(i)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(i){return Nn(this,void 0,void 0,function(){var n;return Qn(this,function(l){switch(l.label){case 0:return n=i.element.container.styles,n.isVisible()?[4,this.renderStackContent(i)]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(i){return Nn(this,void 0,void 0,function(){return Qn(this,function(n){switch(n.label){case 0:if(sn(i.container.flags,16))debugger;return i.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(i)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(i)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(i,n,l){var u=this;if(n===0)this.ctx.fillText(i.text,i.bounds.left,i.bounds.top+l);else{var f=Sg(i.text);f.reduce(function(a,w){return u.ctx.fillText(w,a,i.bounds.top+l),a+u.ctx.measureText(w).width},i.bounds.left)}},e.prototype.createFontStyle=function(i){var n=i.fontVariant.filter(function(f){return f==="normal"||f==="small-caps"}).join(""),l=CS(i.fontFamily).join(", "),u=su(i.fontSize)?""+i.fontSize.number+i.fontSize.unit:i.fontSize.number+"px";return[[i.fontStyle,n,i.fontWeight,u,l].join(" "),l,u]},e.prototype.renderTextNode=function(i,n){return Nn(this,void 0,void 0,function(){var l,u,f,a,w,C,F,E,U=this;return Qn(this,function(H){return l=this.createFontStyle(n),u=l[0],f=l[1],a=l[2],this.ctx.font=u,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",w=this.fontMetrics.getMetrics(f,a),C=w.baseline,F=w.middle,E=n.paintOrder,i.textBounds.forEach(function(P){E.forEach(function(V){switch(V){case 0:U.ctx.fillStyle=un(n.color),U.renderTextWithLetterSpacing(P,n.letterSpacing,C);var j=n.textShadow;j.length&&P.text.trim().length&&(j.slice(0).reverse().forEach(function(Y){U.ctx.shadowColor=un(Y.color),U.ctx.shadowOffsetX=Y.offsetX.number*U.options.scale,U.ctx.shadowOffsetY=Y.offsetY.number*U.options.scale,U.ctx.shadowBlur=Y.blur.number,U.renderTextWithLetterSpacing(P,n.letterSpacing,C)}),U.ctx.shadowColor="",U.ctx.shadowOffsetX=0,U.ctx.shadowOffsetY=0,U.ctx.shadowBlur=0),n.textDecorationLine.length&&(U.ctx.fillStyle=un(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(Y){switch(Y){case 1:U.ctx.fillRect(P.bounds.left,Math.round(P.bounds.top+C),P.bounds.width,1);break;case 2:U.ctx.fillRect(P.bounds.left,Math.round(P.bounds.top),P.bounds.width,1);break;case 3:U.ctx.fillRect(P.bounds.left,Math.ceil(P.bounds.top+F),P.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&P.text.trim().length&&(U.ctx.strokeStyle=un(n.webkitTextStrokeColor),U.ctx.lineWidth=n.webkitTextStrokeWidth,U.ctx.lineJoin=window.chrome?"miter":"round",U.ctx.strokeText(P.text,P.bounds.left,P.bounds.top+C)),U.ctx.strokeStyle="",U.ctx.lineWidth=0,U.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(i,n,l){if(l&&i.intrinsicWidth>0&&i.intrinsicHeight>0){var u=gf(i),f=pf(n);this.path(f),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(l,0,0,i.intrinsicWidth,i.intrinsicHeight,u.left,u.top,u.width,u.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(i){return Nn(this,void 0,void 0,function(){var n,l,u,f,a,w,ee,ee,C,F,E,U,Qe,H,P,le,V,j,Y,ee,ce,Qe,le;return Qn(this,function(re){switch(re.label){case 0:this.applyEffects(i.getEffects(4)),n=i.container,l=i.curves,u=n.styles,f=0,a=n.textNodes,re.label=1;case 1:return f<a.length?(w=a[f],[4,this.renderTextNode(w,u)]):[3,4];case 2:re.sent(),re.label=3;case 3:return f++,[3,1];case 4:if(!(n instanceof Rv))return[3,8];re.label=5;case 5:return re.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return ee=re.sent(),this.renderReplacedElement(n,l,ee),[3,8];case 7:return re.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof Ov&&this.renderReplacedElement(n,l,n.canvas),!(n instanceof Kv))return[3,12];re.label=9;case 9:return re.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return ee=re.sent(),this.renderReplacedElement(n,l,ee),[3,12];case 11:return re.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof Xv&&n.tree?(C=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,C.render(n.tree)]):[3,14];case 13:F=re.sent(),n.width&&n.height&&this.ctx.drawImage(F,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),re.label=14;case 14:if(n instanceof kg&&(E=Math.min(n.bounds.width,n.bounds.height),n.type===cf?n.checked&&(this.ctx.save(),this.path([new Vt(n.bounds.left+E*.39363,n.bounds.top+E*.79),new Vt(n.bounds.left+E*.16,n.bounds.top+E*.5549),new Vt(n.bounds.left+E*.27347,n.bounds.top+E*.44071),new Vt(n.bounds.left+E*.39694,n.bounds.top+E*.5649),new Vt(n.bounds.left+E*.72983,n.bounds.top+E*.23),new Vt(n.bounds.left+E*.84,n.bounds.top+E*.34085),new Vt(n.bounds.left+E*.39363,n.bounds.top+E*.79)]),this.ctx.fillStyle=un(q_),this.ctx.fill(),this.ctx.restore()):n.type===uf&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+E/2,n.bounds.top+E/2,E/4,0,Math.PI*2,!0),this.ctx.fillStyle=un(q_),this.ctx.fill(),this.ctx.restore())),vS(n)&&n.value.length){switch(U=this.createFontStyle(u),Qe=U[0],H=U[1],P=this.fontMetrics.getMetrics(Qe,H).baseline,this.ctx.font=Qe,this.ctx.fillStyle=un(u.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=xS(n.styles.textAlign),le=gf(n),V=0,n.styles.textAlign){case 1:V+=le.width/2;break;case 2:V+=le.width;break}j=le.add(V,0,0,-le.height/2+1),this.ctx.save(),this.path([new Vt(le.left,le.top),new Vt(le.left+le.width,le.top),new Vt(le.left+le.width,le.top+le.height),new Vt(le.left,le.top+le.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Lc(n.value,j),u.letterSpacing,P),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!sn(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(Y=n.styles.listStyleImage,Y.type!==0)return[3,18];ee=void 0,ce=Y.url,re.label=15;case 15:return re.trys.push([15,17,,18]),[4,this.context.cache.match(ce)];case 16:return ee=re.sent(),this.ctx.drawImage(ee,n.bounds.left-(ee.width+10),n.bounds.top),[3,18];case 17:return re.sent(),this.context.logger.error("Error loading list-style-image "+ce),[3,18];case 18:return[3,20];case 19:i.listValue&&n.styles.listStyleType!==-1&&(Qe=this.createFontStyle(u)[0],this.ctx.font=Qe,this.ctx.fillStyle=un(u.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",le=new qA(n.bounds.left,n.bounds.top+Fi(n.styles.paddingTop,n.bounds.width),n.bounds.width,S_(u.lineHeight,u.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Lc(i.listValue,le),u.letterSpacing,S_(u.lineHeight,u.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),re.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(i){return Nn(this,void 0,void 0,function(){var n,l,Y,u,f,Y,a,w,Y,C,F,Y,E,U,Y,H,P,Y,V,j,Y;return Qn(this,function(ee){switch(ee.label){case 0:if(sn(i.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(i.element)];case 1:ee.sent(),n=0,l=i.negativeZIndex,ee.label=2;case 2:return n<l.length?(Y=l[n],[4,this.renderStack(Y)]):[3,5];case 3:ee.sent(),ee.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(i.element)];case 6:ee.sent(),u=0,f=i.nonInlineLevel,ee.label=7;case 7:return u<f.length?(Y=f[u],[4,this.renderNode(Y)]):[3,10];case 8:ee.sent(),ee.label=9;case 9:return u++,[3,7];case 10:a=0,w=i.nonPositionedFloats,ee.label=11;case 11:return a<w.length?(Y=w[a],[4,this.renderStack(Y)]):[3,14];case 12:ee.sent(),ee.label=13;case 13:return a++,[3,11];case 14:C=0,F=i.nonPositionedInlineLevel,ee.label=15;case 15:return C<F.length?(Y=F[C],[4,this.renderStack(Y)]):[3,18];case 16:ee.sent(),ee.label=17;case 17:return C++,[3,15];case 18:E=0,U=i.inlineLevel,ee.label=19;case 19:return E<U.length?(Y=U[E],[4,this.renderNode(Y)]):[3,22];case 20:ee.sent(),ee.label=21;case 21:return E++,[3,19];case 22:H=0,P=i.zeroOrAutoZIndexOrTransformedOrOpacity,ee.label=23;case 23:return H<P.length?(Y=P[H],[4,this.renderStack(Y)]):[3,26];case 24:ee.sent(),ee.label=25;case 25:return H++,[3,23];case 26:V=0,j=i.positiveZIndex,ee.label=27;case 27:return V<j.length?(Y=j[V],[4,this.renderStack(Y)]):[3,30];case 28:ee.sent(),ee.label=29;case 29:return V++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(i){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(i.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(i){this.ctx.beginPath(),this.formatPath(i),this.ctx.closePath()},e.prototype.formatPath=function(i){var n=this;i.forEach(function(l,u){var f=bs(l)?l.start:l;u===0?n.ctx.moveTo(f.x,f.y):n.ctx.lineTo(f.x,f.y),bs(l)&&n.ctx.bezierCurveTo(l.startControl.x,l.startControl.y,l.endControl.x,l.endControl.y,l.end.x,l.end.y)})},e.prototype.renderRepeat=function(i,n,l,u){this.path(i),this.ctx.fillStyle=n,this.ctx.translate(l,u),this.ctx.fill(),this.ctx.translate(-l,-u)},e.prototype.resizeImage=function(i,n,l){var u;if(i.width===n&&i.height===l)return i;var f=(u=this.canvas.ownerDocument)!==null&&u!==void 0?u:document,a=f.createElement("canvas");a.width=Math.max(1,n),a.height=Math.max(1,l);var w=a.getContext("2d");return w.drawImage(i,0,0,i.width,i.height,0,0,n,l),a},e.prototype.renderBackgroundImage=function(i){return Nn(this,void 0,void 0,function(){var n,l,u,f,a,w;return Qn(this,function(C){switch(C.label){case 0:n=i.styles.backgroundImage.length-1,l=function(F){var E,U,H,ie,Me,at,Re,ht,Ae,P,ie,Me,at,Re,ht,V,j,Y,ee,ce,Qe,le,re,we,Ae,R,ie,se,Be,Re,ht,_t,Me,at,wt,nt,He,tt,Je,ut,At,Et;return Qn(this,function(qt){switch(qt.label){case 0:if(F.type!==0)return[3,5];E=void 0,U=F.url,qt.label=1;case 1:return qt.trys.push([1,3,,4]),[4,u.context.cache.match(U)];case 2:return E=qt.sent(),[3,4];case 3:return qt.sent(),u.context.logger.error("Error loading background-image "+U),[3,4];case 4:return E&&(H=mp(i,n,[E.width,E.height,E.width/E.height]),ie=H[0],Me=H[1],at=H[2],Re=H[3],ht=H[4],Ae=u.ctx.createPattern(u.resizeImage(E,Re,ht),"repeat"),u.renderRepeat(ie,Ae,Me,at)),[3,6];case 5:AI(F)?(P=mp(i,n,[null,null,null]),ie=P[0],Me=P[1],at=P[2],Re=P[3],ht=P[4],V=tI(F.angle,Re,ht),j=V[0],Y=V[1],ee=V[2],ce=V[3],Qe=V[4],le=document.createElement("canvas"),le.width=Re,le.height=ht,re=le.getContext("2d"),we=re.createLinearGradient(Y,ce,ee,Qe),I_(F.stops,j).forEach(function(Tt){return we.addColorStop(Tt.stop,un(Tt.color))}),re.fillStyle=we,re.fillRect(0,0,Re,ht),Re>0&&ht>0&&(Ae=u.ctx.createPattern(le,"repeat"),u.renderRepeat(ie,Ae,Me,at))):oI(F)&&(R=mp(i,n,[null,null,null]),ie=R[0],se=R[1],Be=R[2],Re=R[3],ht=R[4],_t=F.position.length===0?[Qg]:F.position,Me=Fi(_t[0],Re),at=Fi(_t[_t.length-1],ht),wt=rI(F,Me,at,Re,ht),nt=wt[0],He=wt[1],nt>0&&He>0&&(tt=u.ctx.createRadialGradient(se+Me,Be+at,0,se+Me,Be+at,nt),I_(F.stops,nt*2).forEach(function(Tt){return tt.addColorStop(Tt.stop,un(Tt.color))}),u.path(ie),u.ctx.fillStyle=tt,nt!==He?(Je=i.bounds.left+.5*i.bounds.width,ut=i.bounds.top+.5*i.bounds.height,At=He/nt,Et=1/At,u.ctx.save(),u.ctx.translate(Je,ut),u.ctx.transform(1,0,0,At,0,0),u.ctx.translate(-Je,-ut),u.ctx.fillRect(se,Et*(Be-ut)+ut,Re,ht*Et),u.ctx.restore()):u.ctx.fill())),qt.label=6;case 6:return n--,[2]}})},u=this,f=0,a=i.styles.backgroundImage.slice(0).reverse(),C.label=1;case 1:return f<a.length?(w=a[f],[5,l(w)]):[3,4];case 2:C.sent(),C.label=3;case 3:return f++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(i,n,l){return Nn(this,void 0,void 0,function(){return Qn(this,function(u){return this.path(oy(l,n)),this.ctx.fillStyle=un(i),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(i,n,l,u){return Nn(this,void 0,void 0,function(){var f,a;return Qn(this,function(w){switch(w.label){case 0:return n<3?[4,this.renderSolidBorder(i,l,u)]:[3,2];case 1:return w.sent(),[2];case 2:return f=cS(u,l),this.path(f),this.ctx.fillStyle=un(i),this.ctx.fill(),a=uS(u,l),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(i){return Nn(this,void 0,void 0,function(){var n,l,u,f,a,w,C,F,E=this;return Qn(this,function(U){switch(U.label){case 0:return this.applyEffects(i.getEffects(2)),n=i.container.styles,l=!bo(n.backgroundColor)||n.backgroundImage.length,u=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],f=BS(al(n.backgroundClip,0),i.curves),l||n.boxShadow.length?(this.ctx.save(),this.path(f),this.ctx.clip(),bo(n.backgroundColor)||(this.ctx.fillStyle=un(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(i.container)]):[3,2];case 1:U.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(H){E.ctx.save();var P=df(i.curves),V=H.inset?0:yS,j=aS(P,-V+(H.inset?1:-1)*H.spread.number,(H.inset?1:-1)*H.spread.number,H.spread.number*(H.inset?-2:2),H.spread.number*(H.inset?-2:2));H.inset?(E.path(P),E.ctx.clip(),E.mask(j)):(E.mask(P),E.ctx.clip(),E.path(j)),E.ctx.shadowOffsetX=H.offsetX.number+V,E.ctx.shadowOffsetY=H.offsetY.number,E.ctx.shadowColor=un(H.color),E.ctx.shadowBlur=H.blur.number,E.ctx.fillStyle=H.inset?un(H.color):"rgba(0,0,0,1)",E.ctx.fill(),E.ctx.restore()}),U.label=2;case 2:a=0,w=0,C=u,U.label=3;case 3:return w<C.length?(F=C[w],F.style!==0&&!bo(F.color)&&F.width>0?F.style!==2?[3,5]:[4,this.renderDashedDottedBorder(F.color,F.width,a,i.curves,2)]:[3,11]):[3,13];case 4:return U.sent(),[3,11];case 5:return F.style!==3?[3,7]:[4,this.renderDashedDottedBorder(F.color,F.width,a,i.curves,3)];case 6:return U.sent(),[3,11];case 7:return F.style!==4?[3,9]:[4,this.renderDoubleBorder(F.color,F.width,a,i.curves)];case 8:return U.sent(),[3,11];case 9:return[4,this.renderSolidBorder(F.color,a,i.curves)];case 10:U.sent(),U.label=11;case 11:a++,U.label=12;case 12:return w++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(i,n,l,u,f){return Nn(this,void 0,void 0,function(){var a,w,C,F,E,U,H,P,V,j,Y,ee,ce,Qe,le,re,le,re;return Qn(this,function(we){return this.ctx.save(),a=hS(u,l),w=oy(u,l),f===2&&(this.path(w),this.ctx.clip()),bs(w[0])?(C=w[0].start.x,F=w[0].start.y):(C=w[0].x,F=w[0].y),bs(w[1])?(E=w[1].end.x,U=w[1].end.y):(E=w[1].x,U=w[1].y),l===0||l===2?H=Math.abs(C-E):H=Math.abs(F-U),this.ctx.beginPath(),f===3?this.formatPath(a):this.formatPath(w.slice(0,2)),P=n<3?n*3:n*2,V=n<3?n*2:n,f===3&&(P=n,V=n),j=!0,H<=P*2?j=!1:H<=P*2+V?(Y=H/(2*P+V),P*=Y,V*=Y):(ee=Math.floor((H+V)/(P+V)),ce=(H-ee*P)/(ee-1),Qe=(H-(ee+1)*P)/ee,V=Qe<=0||Math.abs(V-ce)<Math.abs(V-Qe)?ce:Qe),j&&(f===3?this.ctx.setLineDash([0,P+V]):this.ctx.setLineDash([P,V])),f===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=un(i),this.ctx.stroke(),this.ctx.setLineDash([]),f===2&&(bs(w[0])&&(le=w[3],re=w[0],this.ctx.beginPath(),this.formatPath([new Vt(le.end.x,le.end.y),new Vt(re.start.x,re.start.y)]),this.ctx.stroke()),bs(w[1])&&(le=w[1],re=w[2],this.ctx.beginPath(),this.formatPath([new Vt(le.end.x,le.end.y),new Vt(re.start.x,re.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(i){return Nn(this,void 0,void 0,function(){var n;return Qn(this,function(l){switch(l.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=un(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=lS(i),[4,this.renderStack(n)];case 1:return l.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(aB),vS=function(t){return t instanceof Gv||t instanceof Vv?!0:t instanceof kg&&t.type!==uf&&t.type!==cf},BS=function(t,e){switch(t){case 0:return df(e);case 2:return iS(e);case 1:default:return pf(e)}},xS=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},bS=["-apple-system","system-ui"],CS=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return bS.indexOf(e)===-1}):t},ES=function(t){js(e,t);function e(i,n){var l=t.call(this,i,n)||this;return l.canvas=n.canvas?n.canvas:document.createElement("canvas"),l.ctx=l.canvas.getContext("2d"),l.options=n,l.canvas.width=Math.floor(n.width*n.scale),l.canvas.height=Math.floor(n.height*n.scale),l.canvas.style.width=n.width+"px",l.canvas.style.height=n.height+"px",l.ctx.scale(l.options.scale,l.options.scale),l.ctx.translate(-n.x,-n.y),l.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),l}return e.prototype.render=function(i){return Nn(this,void 0,void 0,function(){var n,l;return Qn(this,function(u){switch(u.label){case 0:return n=jp(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,i),[4,FS(n)];case 1:return l=u.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=un(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(l,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(aB),FS=function(t){return new Promise(function(e,i){var n=new Image;n.onload=function(){e(n)},n.onerror=i,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},US=function(){function t(e){var i=e.id,n=e.enabled;this.id=i,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,dh([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,dh([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,dh([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,dh([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),QS=function(){function t(e,i){var n;this.windowBounds=i,this.instanceName="#"+t.instanceCount++,this.logger=new US({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new qT(this,e)}return t.instanceCount=1,t}(),IS=function(t,e){return e===void 0&&(e={}),TS(t,e)};typeof window<"u"&&rB.setContext(window);var TS=function(t,e){return Nn(void 0,void 0,void 0,function(){var i,n,l,u,f,a,w,C,F,E,U,H,P,V,j,Y,ee,ce,Qe,le,we,re,we,Ae,R,ie,se,Be,Re,ht,_t,Me,at,wt,nt,He,tt,Je,ut,At;return Qn(this,function(Et){switch(Et.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(i=t.ownerDocument,!i)throw new Error("Element is not attached to a Document");if(n=i.defaultView,!n)throw new Error("Document is not attached to a Window");return l={allowTaint:(Ae=e.allowTaint)!==null&&Ae!==void 0?Ae:!1,imageTimeout:(R=e.imageTimeout)!==null&&R!==void 0?R:15e3,proxy:e.proxy,useCORS:(ie=e.useCORS)!==null&&ie!==void 0?ie:!1},u=Dp({logging:(se=e.logging)!==null&&se!==void 0?se:!0,cache:e.cache},l),f={windowWidth:(Be=e.windowWidth)!==null&&Be!==void 0?Be:n.innerWidth,windowHeight:(Re=e.windowHeight)!==null&&Re!==void 0?Re:n.innerHeight,scrollX:(ht=e.scrollX)!==null&&ht!==void 0?ht:n.pageXOffset,scrollY:(_t=e.scrollY)!==null&&_t!==void 0?_t:n.pageYOffset},a=new qA(f.scrollX,f.scrollY,f.windowWidth,f.windowHeight),w=new QS(u,a),C=(Me=e.foreignObjectRendering)!==null&&Me!==void 0?Me:!1,F={allowTaint:(at=e.allowTaint)!==null&&at!==void 0?at:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:C,copyStyles:C},w.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),E=new ny(w,t,F),U=E.clonedReferenceElement,U?[4,E.toIFrame(i,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return H=Et.sent(),P=Mg(U)||ST(U)?aU(U.ownerDocument):Ef(w,U),V=P.width,j=P.height,Y=P.left,ee=P.top,ce=SS(w,U,e.backgroundColor),Qe={canvas:e.canvas,backgroundColor:ce,scale:(nt=(wt=e.scale)!==null&&wt!==void 0?wt:n.devicePixelRatio)!==null&&nt!==void 0?nt:1,x:((He=e.x)!==null&&He!==void 0?He:0)+Y,y:((tt=e.y)!==null&&tt!==void 0?tt:0)+ee,width:(Je=e.width)!==null&&Je!==void 0?Je:Math.ceil(V),height:(ut=e.height)!==null&&ut!==void 0?ut:Math.ceil(j)},C?(w.logger.debug("Document cloned, using foreign object rendering"),we=new ES(w,Qe),[4,we.render(U)]):[3,3];case 2:return le=Et.sent(),[3,5];case 3:return w.logger.debug("Document cloned, element located at "+Y+","+ee+" with size "+V+"x"+j+" using computed rendering"),w.logger.debug("Starting DOM parsing"),re=Wv(w,U),ce===re.styles.backgroundColor&&(re.styles.backgroundColor=GA.TRANSPARENT),w.logger.debug("Starting renderer for element at "+Qe.x+","+Qe.y+" with size "+Qe.width+"x"+Qe.height),we=new wS(w,Qe),[4,we.render(re)];case 4:le=Et.sent(),Et.label=5;case 5:return(!((At=e.removeContainer)!==null&&At!==void 0)||At)&&(ny.destroy(H)||w.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),w.logger.debug("Finished rendering"),[2,le]}})})},SS=function(t,e,i){var n=e.ownerDocument,l=n.documentElement?Mc(t,getComputedStyle(n.documentElement).backgroundColor):GA.TRANSPARENT,u=n.body?Mc(t,getComputedStyle(n.body).backgroundColor):GA.TRANSPARENT,f=typeof i=="string"?Mc(t,i):i===null?GA.TRANSPARENT:4294967295;return e===n.documentElement?bo(l)?bo(u)?f:u:l:f};function lB(t,e,i){let n=[];return i?e.forEach(l=>{n.push(t.filter(u=>u[i]==l))}):n=[t],n}function kS(t,e,i,n){let l=[],u=JSON.parse(JSON.stringify(t.filter(f=>f[n]==e[0])));return u.forEach(f=>f[i]=0),e.forEach(f=>{let a=JSON.parse(JSON.stringify(t.filter(w=>w[n]==f)));a.forEach((w,C)=>{w[i]+=u[C][i],u[C][i]=w[i]}),l.push(a)}),l}function MS(t,e=[],i){let n="",l=[];e.forEach(f=>{f&&!l.includes(f)&&l.push(f)}),n+=l.join(",")+`
`,t.forEach(f=>{n+=l.map(a=>f[a]).join(",")+`
`});let u="data:text/csv;charset=utf-8,"+encodeURI(n);cB(u,i+".csv")}function DS(t,e){IS(t).then(i=>{let n=i.toDataURL();cB(n,e+".png")})}function cB(t,e){var i=document.createElement("a");i.href=t,i.download=e,i.click()}function mf(t){const e=String(t).split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}const ly=1,cy=5,LS=2;class HS{constructor(e,i,n,l,u){this.items=e,this.radiusFun=i,this.xFun=n,this.padding=l,this.yOffset=u,this.tieBreakFn=this._sfc32(2654435769,608135816,3084996962,ly),this.maxR=Math.max(...e.map(f=>i(f))),this.rng=this._sfc32(1,2,3,ly)}calculateYPositions(){let e=this.items.map((l,u)=>({datum:l,originalIndex:u,x:this.xFun(l),r:this.radiusFun(l)+this.padding,y:null,placed:!1})).sort((l,u)=>l.x-u.x);e.forEach(function(l,u){l.index=u});let i=this.tieBreakFn;e.forEach(function(l){l.tieBreaker=i(l.x)});let n=[...e].sort((l,u)=>{let f=this.radiusFun(l.datum)+l.tieBreaker*cy,a=this.radiusFun(u.datum)+u.tieBreaker*cy;return f!=a?a-f:l.x-u.x});for(let l of n)l.placed=!0,l.y=this._getBestYPosition(l,e);return e.sort((l,u)=>l.originalIndex-u.originalIndex),e.map(l=>({x:l.x,y:l.y+this.yOffset,r:this.radiusFun(l.datum)}))}_sfc32(e,i,n,l){let u=function(){e>>>=0,i>>>=0,n>>>=0,l>>>=0;var f=e+i|0;return e=i^i>>>9,i=n+(n<<3)|0,n=n<<21|n>>>11,l=l+1|0,f=f+l|0,n=n+f|0,(f>>>0)/4294967296};for(let f=0;f<10;f++)u();return u}_getBestYPosition(e,i){let n=[];for(let u of[-1,1]){let f,a=e.r;for(let w=e.index+u;w>=0&&w<i.length&&(f=Math.abs(e.x-i[w].x))<a+this.maxR;w+=u){let C=i[w];if(!C.placed)continue;let F=a+C.r;if(f>=a+C.r)continue;let E=Math.sqrt(F*F-f*f),U=[C.y-E,C.y+E];n.push(U)}}if(n.length==0)return e.r*(this.rng()-.5)*LS;let l=n.flat();l.push(0),l.sort((u,f)=>{let a=Math.abs(u),w=Math.abs(f);return a<w?-1:a>w?1:u-f});for(let u=0;u<l.length;u++){let f=l[u];if(n.every(a=>f<=a[0]||f>=a[1]))return f}}}function PS(t,e,i){let n,l,u,f,a,w,C,F,E,U,H,P,V,j,Y;const{data:ee,x:ce,y:Qe,r:le,xGet:re,yGet:we,rGet:Ae,xScale:R,yScale:ie,yRange:se,rRange:Be,xDomain:Re,yDomain:ht,custom:_t,width:Me}=Gi("LayerCake");ct(t,ee,tt=>i(20,Y=tt)),ct(t,ce,tt=>i(18,V=tt)),ct(t,Qe,tt=>i(17,P=tt)),ct(t,le,tt=>i(16,H=tt)),ct(t,re,tt=>i(25,f=tt)),ct(t,we,tt=>i(29,F=tt)),ct(t,Ae,tt=>i(27,w=tt)),ct(t,R,tt=>i(23,l=tt)),ct(t,ie,tt=>i(22,n=tt)),ct(t,se,tt=>i(24,u=tt)),ct(t,Be,tt=>i(26,a=tt)),ct(t,Re,tt=>i(30,E=tt)),ct(t,ht,tt=>i(28,C=tt)),ct(t,_t,tt=>i(19,j=tt)),ct(t,Me,tt=>i(15,U=tt));let at=j.coords,wt=j.type,nt=U;function He(tt,Je,ut,At,Et,qt){let Tt=Je.mode,tr=Je.padding,ve=Je.animation&&qt==nt?Je.duration:0;nt=qt;let ft;if(wt=="bar"){let Ft=[],qe=[];ft=tt.map((Gt,xe)=>Gt.map((Ge,nr)=>{Ft[nr]||(Ft[nr]=0),qe[nr]||(qe[nr]=0);let mr=Tt=="default"||Tt=="grouped"||Tt=="comparison"&&xe==0?E[0]:Tt=="stacked"&&ut(Ge)>=0?Ft[nr]:Tt=="stacked"?qe[nr]:ut(Ge),ti=Tt=="default"||Tt=="grouped"||Tt=="comparison"&&xe==0?ut(Ge):Tt=="stacked"&&ut(Ge)>=0?Ft[nr]+ut(Ge):Tt=="stacked"?qe[nr]+ut(Ge):ut(Ge);ut(Ge)>=0?Ft[nr]+=ut(Ge):qe[nr]+=ut(Ge);let er=Tt=="grouped"?F(Ge)+xe*(n.bandwidth()/tt.length):F(Ge),Vr=Tt=="grouped"?er+n.bandwidth()/tt.length:er+n.bandwidth();return{x0:mr,x1:ti,y0:er,y1:Vr}}))}else if(wt=="column"){let Ft=[],qe=[];ft=tt.map((Gt,xe)=>Gt.map((Ge,nr)=>{Ft[nr]||(Ft[nr]=0),qe[nr]||(qe[nr]=0);let mr=Tt=="grouped"&&l.bandwidth?f(Ge)+xe*(1/tt.length)*l.bandwidth():Tt=="grouped"?f(Ge)[0]+xe*(1/tt.length)*Math.max(0,f(Ge)[1]-f(Ge)[0]):l.bandwidth?f(Ge):f(Ge)[0],ti=Tt=="grouped"&&l.bandwidth?mr+l.bandwidth()/tt.length:Tt=="grouped"?mr+Math.max(0,f(Ge)[1]-f(Ge)[0])/tt.length:l.bandwidth?mr+l.bandwidth():mr+Math.max(0,f(Ge)[1]-f(Ge)[0]),er=Tt=="default"||Tt=="grouped"||Tt=="comparison"&&xe==0?C[0]:Tt=="stacked"&&At(Ge)>=0?Ft[nr]:Tt=="stacked"?qe[nr]:At(Ge),Vr=Tt=="default"||Tt=="grouped"||Tt=="comparison"&&xe==0?At(Ge):Tt=="stacked"&&At(Ge)>=0?Ft[nr]+At(Ge):Tt=="stacked"?qe[nr]+At(Ge):At(Ge);return At(Ge)>=0?Ft[nr]+=At(Ge):qe[nr]+=At(Ge),{x0:mr,x1:ti,y0:er,y1:Vr}}))}else if(wt=="scatter"){let Ft=qe=>Et?w(qe):a[0];ft=At?tt.map(qe=>({x:ut(qe),y:At(qe),r:Ft(qe)})):new HS(tt,qe=>Ft(qe),qe=>f(qe),tr,u[0]/2).calculateYPositions().map(qe=>({x:l.invert(qe.x),y:n.invert(qe.y),r:qe.r}))}else ft=tt.map(Ft=>Ft.map(qe=>({x:ut(qe),y:At(qe)})));wt=="dotplot"&&console.log(ft),at.set(ft,{duration:ve})}return t.$$.update=()=>{t.$$.dirty[0]&2064384&&He(Y,j,V,P,H,U)},[ee,ce,Qe,le,re,we,Ae,R,ie,se,Be,Re,ht,_t,Me,U,H,P,V,j,Y]}class Dg extends Nr{constructor(e){super(),Kr(this,e,PS,null,Lr,{},null,[-1,-1])}}function uy(t,e,i){const n=t.slice();return n[33]=e[i],n[35]=i,n}function hy(t,e,i){const n=t.slice();return n[33]=e[i],n[35]=i,n}function fy(t){let e,i,n=t[6],l=[];for(let f=0;f<n.length;f+=1)l[f]=dy(hy(t,n,f));let u=t[17]&&(t[3]||t[1]||t[5][0])&&py(t);return{c(){e=Dr("g");for(let f=0;f<l.length;f+=1)l[f].c();i=hi(),u&&u.c(),ue(e,"class","line-group")},m(f,a){Fe(f,e,a);for(let w=0;w<l.length;w+=1)l[w]&&l[w].m(e,null);$e(e,i),u&&u.m(e,null)},p(f,a){if(a[0]&14681052){n=f[6];let w;for(w=0;w<n.length;w+=1){const C=hy(f,n,w);l[w]?l[w].p(C,a):(l[w]=dy(C),l[w].c(),l[w].m(e,i))}for(;w<l.length;w+=1)l[w].d(1);l.length=n.length}f[17]&&(f[3]||f[1]||f[5][0])?u?u.p(f,a):(u=py(f),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(f){f&&Ee(e),$i(l,f),u&&u.d()}}}function dy(t){let e,i,n,l,u,f,a,w;function C(...U){return t[24](t[35],...U)}function F(...U){return t[26](t[35],...U)}function E(...U){return t[28](t[35],...U)}return{c(){e=Dr("path"),l=Dr("path"),ue(e,"class","path-hover svelte-rh3b33"),ue(e,"d",i=t[21](t[33])),ue(e,"tabindex",n=t[3]||t[4]?0:-1),ue(l,"class","path-line svelte-rh3b33"),ue(l,"d",u=t[21](t[33])),ue(l,"stroke",f=t[8].z?t[9](t[7][t[35]][0]):t[8].zRange[0]),ue(l,"stroke-width",t[2])},m(U,H){Fe(U,e,H),Fe(U,l,H),a||(w=[ki(e,"mouseover",function(){hn(t[3]?C:null)&&(t[3]?C:null).apply(this,arguments)}),ki(e,"mouseleave",function(){hn(t[3]?t[25]:null)&&(t[3]?t[25]:null).apply(this,arguments)}),ki(e,"focus",function(){hn(t[4]?F:null)&&(t[4]?F:null).apply(this,arguments)}),ki(e,"blur",function(){hn(t[4]?t[27]:null)&&(t[4]?t[27]:null).apply(this,arguments)}),ki(e,"click",function(){hn(t[4]?E:null)&&(t[4]?E:null).apply(this,arguments)})],a=!0)},p(U,H){t=U,H[0]&64&&i!==(i=t[21](t[33]))&&ue(e,"d",i),H[0]&24&&n!==(n=t[3]||t[4]?0:-1)&&ue(e,"tabindex",n),H[0]&64&&u!==(u=t[21](t[33]))&&ue(l,"d",u),H[0]&896&&f!==(f=t[8].z?t[9](t[7][t[35]][0]):t[8].zRange[0])&&ue(l,"stroke",f),H[0]&4&&ue(l,"stroke-width",t[2])},d(U){U&&Ee(e),U&&Ee(l),a=!1,yA(w)}}}function py(t){let e,i=t[6],n=[];for(let l=0;l<i.length;l+=1)n[l]=my(uy(t,i,l));return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=hi()},m(l,u){for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(l,u);Fe(l,e,u)},p(l,u){if(u[0]&4063463){i=l[6];let f;for(f=0;f<i.length;f+=1){const a=uy(l,i,f);n[f]?n[f].p(a,u):(n[f]=my(a),n[f].c(),n[f].m(e.parentNode,e))}for(;f<n.length;f+=1)n[f].d(1);n.length=i.length}},d(l){$i(n,l),l&&Ee(e)}}}function gy(t){let e,i,n,l;return{c(){e=Dr("path"),ue(e,"class","path-overlay svelte-rh3b33"),ue(e,"d",i=t[21](t[33])),ue(e,"stroke",n=t[7][t[35]][0][t[17]]==t[0]?t[18]:t[7][t[35]][0][t[17]]==t[1]?t[19]:t[20]),ue(e,"stroke-width",l=t[2]+1.5)},m(u,f){Fe(u,e,f)},p(u,f){f[0]&64&&i!==(i=u[21](u[33]))&&ue(e,"d",i),f[0]&131&&n!==(n=u[7][u[35]][0][u[17]]==u[0]?u[18]:u[7][u[35]][0][u[17]]==u[1]?u[19]:u[20])&&ue(e,"stroke",n),f[0]&4&&l!==(l=u[2]+1.5)&&ue(e,"stroke-width",l)},d(u){u&&Ee(e)}}}function my(t){let e=[t[0],t[1],...t[5]].includes(t[7][t[35]][0][t[17]]),i,n=e&&gy(t);return{c(){n&&n.c(),i=hi()},m(l,u){n&&n.m(l,u),Fe(l,i,u)},p(l,u){u[0]&163&&(e=[l[0],l[1],...l[5]].includes(l[7][l[35]][0][l[17]])),e?n?n.p(l,u):(n=gy(l),n.c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},d(l){n&&n.d(l),l&&Ee(i)}}}function zS(t){let e,i=t[6]&&fy(t);return{c(){i&&i.c(),e=hi()},m(n,l){i&&i.m(n,l),Fe(n,e,l)},p(n,l){n[6]?i?i.p(n,l):(i=fy(n),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:ar,o:ar,d(n){i&&i.d(n),n&&Ee(e)}}}function RS(t,e,i){let n,l,u,f,a,w,C;const{data:F,xScale:E,yScale:U,zGet:H,config:P,custom:V}=Gi("LayerCake");ct(t,F,He=>i(7,a=He)),ct(t,E,He=>i(30,l=He)),ct(t,U,He=>i(29,n=He)),ct(t,H,He=>i(9,C=He)),ct(t,P,He=>i(8,w=He)),ct(t,V,He=>i(31,u=He));const j=Zc();let{lineWidth:Y=2.5}=e,{hover:ee=!1}=e,{hovered:ce=null}=e,{select:Qe=!1}=e,{selected:le=null}=e,{highlighted:re=[]}=e,we=u.coords;ct(t,we,He=>i(6,f=He));let Ae=u.idKey,R=u.colorHover?u.colorHover:"orange",ie=u.colorSelect?u.colorSelect:"#206095",se=u.colorHighlight?u.colorHighlight:"#206095";const Be=He=>"M"+He.map(Je=>l(Je.x)+","+n(Je.y)).join("L");function Re(He,tt){ee&&(i(0,ce=tt?tt[0][Ae]:null),j("hover",{id:ce,data:tt,event:He}))}function ht(He,tt){Qe&&(i(1,le=tt?tt[0][Ae]:null),j("select",{id:le,data:tt,event:He}))}const _t=(He,tt)=>Re(tt,a[He]),Me=He=>Re(He,null),at=(He,tt)=>Re(tt,a[He]),wt=He=>Re(He,null),nt=(He,tt)=>ht(tt,a[He]);return t.$$set=He=>{"lineWidth"in He&&i(2,Y=He.lineWidth),"hover"in He&&i(3,ee=He.hover),"hovered"in He&&i(0,ce=He.hovered),"select"in He&&i(4,Qe=He.select),"selected"in He&&i(1,le=He.selected),"highlighted"in He&&i(5,re=He.highlighted)},[ce,le,Y,ee,Qe,re,f,a,w,C,F,E,U,H,P,V,we,Ae,R,ie,se,Be,Re,ht,_t,Me,at,wt,nt]}class OS extends Nr{constructor(e){super(),Kr(this,e,RS,zS,Lr,{lineWidth:2,hover:3,hovered:0,select:4,selected:1,highlighted:5},null,[-1,-1])}}function _y(t,e,i){const n=t.slice();return n[19]=e[i],n[21]=i,n}function yy(t){let e,i=t[1],n=[];for(let l=0;l<i.length;l+=1)n[l]=wy(_y(t,i,l));return{c(){e=Dr("g");for(let l=0;l<n.length;l+=1)n[l].c();ue(e,"class","area-group")},m(l,u){Fe(l,e,u);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null)},p(l,u){if(u&16447){i=l[1];let f;for(f=0;f<i.length;f+=1){const a=_y(l,i,f);n[f]?n[f].p(a,u):(n[f]=wy(a),n[f].c(),n[f].m(e,null))}for(;f<n.length;f+=1)n[f].d(1);n.length=i.length}},d(l){l&&Ee(e),$i(n,l)}}}function wy(t){let e,i,n;return{c(){e=Dr("path"),ue(e,"class","path-area"),ue(e,"d",i=t[14](t[19],t[21])),ue(e,"fill",n=t[2].z?t[3](t[4][t[21]][0]):t[5][0]),ue(e,"opacity",t[0])},m(l,u){Fe(l,e,u)},p(l,u){u&2&&i!==(i=l[14](l[19],l[21]))&&ue(e,"d",i),u&60&&n!==(n=l[2].z?l[3](l[4][l[21]][0]):l[5][0])&&ue(e,"fill",n),u&1&&ue(e,"opacity",l[0])},d(l){l&&Ee(e)}}}function KS(t){let e,i=t[1]&&yy(t);return{c(){i&&i.c(),e=hi()},m(n,l){i&&i.m(n,l),Fe(n,e,l)},p(n,[l]){n[1]?i?i.p(n,l):(i=yy(n),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:ar,o:ar,d(n){i&&i.d(n),n&&Ee(e)}}}function NS(t,e,i){let n,l,u,f,a,w,C,F;const{data:E,xScale:U,yScale:H,zGet:P,zRange:V,config:j,custom:Y}=Gi("LayerCake");ct(t,E,le=>i(4,C=le)),ct(t,U,le=>i(16,l=le)),ct(t,H,le=>i(15,n=le)),ct(t,P,le=>i(3,w=le)),ct(t,V,le=>i(5,F=le)),ct(t,j,le=>i(2,a=le)),ct(t,Y,le=>i(17,f=le));let{opacity:ee=1}=e,ce=f.coords;ct(t,ce,le=>i(1,u=le)),f.idKey;const Qe=(le,re)=>{let we=n.range(),Ae="M"+le.map(se=>l(se.x)+","+n(se.y)).join("L"),R=re==0?"L"+le.map(se=>l(se.x)+","+we[0]).reverse().join("L"):"L"+[...u[re-1]].reverse().map(se=>l(se.x)+","+n(se.y)).join("L");return Ae+R+"Z"};return t.$$set=le=>{"opacity"in le&&i(0,ee=le.opacity)},[ee,u,a,w,C,F,E,U,H,P,V,j,Y,ce,Qe]}class VS extends Nr{constructor(e){super(),Kr(this,e,NS,KS,Lr,{opacity:0})}}function vy(t,e,i){const n=t.slice();return n[24]=e[i],n[26]=i,n}function By(t){let e,i;return{c(){e=Dr("line"),ue(e,"class","gridline svelte-r9f2bw"),ue(e,"y1",i=t[17]*-1),ue(e,"y2","0"),ue(e,"x1","0"),ue(e,"x2","0"),bt(e,"stroke",t[3]),Sr(e,"dashed",t[1])},m(n,l){Fe(n,e,l)},p(n,l){l&131072&&i!==(i=n[17]*-1)&&ue(e,"y1",i),l&8&&bt(e,"stroke",n[3]),l&2&&Sr(e,"dashed",n[1])},d(n){n&&Ee(e)}}}function xy(t){let e,i,n;return{c(){e=Dr("line"),ue(e,"class","tick-mark svelte-r9f2bw"),ue(e,"y1",0),ue(e,"y2",6),ue(e,"x1",i=t[7]||t[13]?t[14].bandwidth()/2:0),ue(e,"x2",n=t[7]||t[13]?t[14].bandwidth()/2:0),bt(e,"stroke",t[3])},m(l,u){Fe(l,e,u)},p(l,u){u&24704&&i!==(i=l[7]||l[13]?l[14].bandwidth()/2:0)&&ue(e,"x1",i),u&24704&&n!==(n=l[7]||l[13]?l[14].bandwidth()/2:0)&&ue(e,"x2",n),u&8&&bt(e,"stroke",l[3])},d(l){l&&Ee(e)}}}function by(t){let e,i,n,l=(t[26]==t[15].length-1?t[11]+t[5](t[24])+t[12]:t[5](t[24]))+"",u,f,a,w,C=t[0]!==!1&&By(t),F=t[2]===!0&&xy(t);return{c(){e=Dr("g"),C&&C.c(),i=hi(),F&&F.c(),n=Dr("text"),u=yr(l),ue(n,"x",f=t[7]||t[13]?t[14].bandwidth()/2:0),ue(n,"y",t[8]),ue(n,"dx",t[9]),ue(n,"dy",t[10]),ue(n,"text-anchor",t[21](t[26])),bt(n,"fill",t[4]),ue(n,"class","svelte-r9f2bw"),ue(e,"class",a="tick tick-"+t[24]+" svelte-r9f2bw"),ue(e,"transform",w="translate("+t[14](t[24])+","+Math.max(...t[16])+")")},m(E,U){Fe(E,e,U),C&&C.m(e,null),$e(e,i),F&&F.m(e,null),$e(e,n),$e(n,u)},p(E,U){E[0]!==!1?C?C.p(E,U):(C=By(E),C.c(),C.m(e,i)):C&&(C.d(1),C=null),E[2]===!0?F?F.p(E,U):(F=xy(E),F.c(),F.m(e,n)):F&&(F.d(1),F=null),U&38944&&l!==(l=(E[26]==E[15].length-1?E[11]+E[5](E[24])+E[12]:E[5](E[24]))+"")&&Xi(u,l),U&24704&&f!==(f=E[7]||E[13]?E[14].bandwidth()/2:0)&&ue(n,"x",f),U&256&&ue(n,"y",E[8]),U&512&&ue(n,"dx",E[9]),U&1024&&ue(n,"dy",E[10]),U&16&&bt(n,"fill",E[4]),U&32768&&a!==(a="tick tick-"+E[24]+" svelte-r9f2bw")&&ue(e,"class",a),U&114688&&w!==(w="translate("+E[14](E[24])+","+Math.max(...E[16])+")")&&ue(e,"transform",w)},d(E){E&&Ee(e),C&&C.d(),F&&F.d()}}}function GS(t){let e,i=t[15],n=[];for(let l=0;l<i.length;l+=1)n[l]=by(vy(t,i,l));return{c(){e=Dr("g");for(let l=0;l<n.length;l+=1)n[l].c();ue(e,"class","axis x-axis svelte-r9f2bw"),Sr(e,"snapTicks",t[6])},m(l,u){Fe(l,e,u);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null)},p(l,[u]){if(u&2359231){i=l[15];let f;for(f=0;f<i.length;f+=1){const a=vy(l,i,f);n[f]?n[f].p(a,u):(n[f]=by(a),n[f].c(),n[f].m(e,null))}for(;f<n.length;f+=1)n[f].d(1);n.length=i.length}u&64&&Sr(e,"snapTicks",l[6])},i:ar,o:ar,d(l){l&&Ee(e),$i(n,l)}}}function XS(t,e,i){let n,l,u,f,a;const{width:w,height:C,xScale:F,yRange:E}=Gi("LayerCake");ct(t,C,se=>i(17,a=se)),ct(t,F,se=>i(14,u=se)),ct(t,E,se=>i(16,f=se));let{gridlines:U=!0}=e,{tickDashed:H=!1}=e,{tickMarks:P=!1}=e,{tickColor:V="#bbb"}=e,{textColor:j="#666"}=e,{formatTick:Y=se=>se}=e,{snapTicks:ee=!1}=e,{ticks:ce=void 0}=e,{xTick:Qe=void 0}=e,{yTick:le=16}=e,{dxTick:re=0}=e,{dyTick:we=0}=e,{prefix:Ae=""}=e,{suffix:R=""}=e;function ie(se){if(ee===!0){if(se===0)return"start";if(se===l.length-1)return"end"}return"middle"}return t.$$set=se=>{"gridlines"in se&&i(0,U=se.gridlines),"tickDashed"in se&&i(1,H=se.tickDashed),"tickMarks"in se&&i(2,P=se.tickMarks),"tickColor"in se&&i(3,V=se.tickColor),"textColor"in se&&i(4,j=se.textColor),"formatTick"in se&&i(5,Y=se.formatTick),"snapTicks"in se&&i(6,ee=se.snapTicks),"ticks"in se&&i(22,ce=se.ticks),"xTick"in se&&i(7,Qe=se.xTick),"yTick"in se&&i(8,le=se.yTick),"dxTick"in se&&i(9,re=se.dxTick),"dyTick"in se&&i(10,we=se.dyTick),"prefix"in se&&i(11,Ae=se.prefix),"suffix"in se&&i(12,R=se.suffix)},t.$$.update=()=>{t.$$.dirty&16384&&i(13,n=typeof u.bandwidth=="function"),t.$$.dirty&4218880&&i(15,l=Array.isArray(ce)?ce:n?u.domain():typeof ce=="function"?ce(u.ticks()):u.ticks(ce))},[U,H,P,V,j,Y,ee,Qe,le,re,we,Ae,R,n,u,l,f,a,C,F,E,ie,ce]}class Lg extends Nr{constructor(e){super(),Kr(this,e,XS,GS,Lr,{gridlines:0,tickDashed:1,tickMarks:2,tickColor:3,textColor:4,formatTick:5,snapTicks:6,ticks:22,xTick:7,yTick:8,dxTick:9,dyTick:10,prefix:11,suffix:12})}}function Cy(t,e,i){const n=t.slice();return n[22]=e[i],n[24]=i,n}function Ey(t){let e,i,n;return{c(){e=Dr("line"),ue(e,"class","gridline svelte-f7wn4m"),ue(e,"x2","100%"),ue(e,"y1",i=t[7]+(t[13]?t[14].bandwidth()/2:0)),ue(e,"y2",n=t[7]+(t[13]?t[14].bandwidth()/2:0)),bt(e,"stroke",t[3]),Sr(e,"dashed",t[2])},m(l,u){Fe(l,e,u)},p(l,u){u&24704&&i!==(i=l[7]+(l[13]?l[14].bandwidth()/2:0))&&ue(e,"y1",i),u&24704&&n!==(n=l[7]+(l[13]?l[14].bandwidth()/2:0))&&ue(e,"y2",n),u&8&&bt(e,"stroke",l[3]),u&4&&Sr(e,"dashed",l[2])},d(l){l&&Ee(e)}}}function Fy(t){let e,i,n,l;return{c(){e=Dr("line"),ue(e,"class","tick-mark svelte-f7wn4m"),ue(e,"x1","0"),ue(e,"x2",i=t[13]?-6:6),ue(e,"y1",n=t[7]+(t[13]?t[14].bandwidth()/2:0)),ue(e,"y2",l=t[7]+(t[13]?t[14].bandwidth()/2:0)),bt(e,"stroke",t[3])},m(u,f){Fe(u,e,f)},p(u,f){f&8192&&i!==(i=u[13]?-6:6)&&ue(e,"x2",i),f&24704&&n!==(n=u[7]+(u[13]?u[14].bandwidth()/2:0))&&ue(e,"y1",n),f&24704&&l!==(l=u[7]+(u[13]?u[14].bandwidth()/2:0))&&ue(e,"y2",l),f&8&&bt(e,"stroke",u[3])},d(u){u&&Ee(e)}}}function Uy(t){let e,i,n,l=(t[24]==t[15].length-1?t[11]+t[5](t[22])+t[12]:t[5](t[22]))+"",u,f,a,w,C,F,E=t[1]!==!1&&Ey(t),U=t[0]===!0&&Fy(t);return{c(){e=Dr("g"),E&&E.c(),i=hi(),U&&U.c(),n=Dr("text"),u=yr(l),ue(n,"x",t[6]),ue(n,"y",f=t[7]+(t[13]?t[14].bandwidth()/2:0)),ue(n,"dx",a=t[13]?-4:t[8]),ue(n,"dy",w=t[13]?4:t[9]),bt(n,"text-anchor",t[13]?"end":t[10]),bt(n,"fill",t[4]),ue(e,"class",C="tick tick-"+t[22]+" svelte-f7wn4m"),ue(e,"transform",F="translate("+(t[17][0]+(t[13]?t[16].left:0))+", "+t[14](t[22])+")")},m(H,P){Fe(H,e,P),E&&E.m(e,null),$e(e,i),U&&U.m(e,null),$e(e,n),$e(n,u)},p(H,P){H[1]!==!1?E?E.p(H,P):(E=Ey(H),E.c(),E.m(e,i)):E&&(E.d(1),E=null),H[0]===!0?U?U.p(H,P):(U=Fy(H),U.c(),U.m(e,n)):U&&(U.d(1),U=null),P&38944&&l!==(l=(H[24]==H[15].length-1?H[11]+H[5](H[22])+H[12]:H[5](H[22]))+"")&&Xi(u,l),P&64&&ue(n,"x",H[6]),P&24704&&f!==(f=H[7]+(H[13]?H[14].bandwidth()/2:0))&&ue(n,"y",f),P&8448&&a!==(a=H[13]?-4:H[8])&&ue(n,"dx",a),P&8704&&w!==(w=H[13]?4:H[9])&&ue(n,"dy",w),P&9216&&bt(n,"text-anchor",H[13]?"end":H[10]),P&16&&bt(n,"fill",H[4]),P&32768&&C!==(C="tick tick-"+H[22]+" svelte-f7wn4m")&&ue(e,"class",C),P&253952&&F!==(F="translate("+(H[17][0]+(H[13]?H[16].left:0))+", "+H[14](H[22])+")")&&ue(e,"transform",F)},d(H){H&&Ee(e),E&&E.d(),U&&U.d()}}}function ZS(t){let e,i,n=t[15],l=[];for(let u=0;u<n.length;u+=1)l[u]=Uy(Cy(t,n,u));return{c(){e=Dr("g");for(let u=0;u<l.length;u+=1)l[u].c();ue(e,"class","axis y-axis"),ue(e,"transform",i="translate("+-t[16].left+", 0)")},m(u,f){Fe(u,e,f);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(u,[f]){if(f&262143){n=u[15];let a;for(a=0;a<n.length;a+=1){const w=Cy(u,n,a);l[a]?l[a].p(w,f):(l[a]=Uy(w),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=n.length}f&65536&&i!==(i="translate("+-u[16].left+", 0)")&&ue(e,"transform",i)},i:ar,o:ar,d(u){u&&Ee(e),$i(l,u)}}}function WS(t,e,i){let n,l,u,f,a;const{padding:w,xRange:C,yScale:F}=Gi("LayerCake");ct(t,w,R=>i(16,f=R)),ct(t,C,R=>i(17,a=R)),ct(t,F,R=>i(14,u=R));let{ticks:E=4}=e,{tickMarks:U=!1}=e,{gridlines:H=!0}=e,{tickDashed:P=!1}=e,{tickColor:V="#bbb"}=e,{textColor:j="#666"}=e,{formatTick:Y=R=>R}=e,{xTick:ee=0}=e,{yTick:ce=0}=e,{dxTick:Qe=0}=e,{dyTick:le=-4}=e,{textAnchor:re="start"}=e,{prefix:we=""}=e,{suffix:Ae=""}=e;return t.$$set=R=>{"ticks"in R&&i(21,E=R.ticks),"tickMarks"in R&&i(0,U=R.tickMarks),"gridlines"in R&&i(1,H=R.gridlines),"tickDashed"in R&&i(2,P=R.tickDashed),"tickColor"in R&&i(3,V=R.tickColor),"textColor"in R&&i(4,j=R.textColor),"formatTick"in R&&i(5,Y=R.formatTick),"xTick"in R&&i(6,ee=R.xTick),"yTick"in R&&i(7,ce=R.yTick),"dxTick"in R&&i(8,Qe=R.dxTick),"dyTick"in R&&i(9,le=R.dyTick),"textAnchor"in R&&i(10,re=R.textAnchor),"prefix"in R&&i(11,we=R.prefix),"suffix"in R&&i(12,Ae=R.suffix)},t.$$.update=()=>{t.$$.dirty&16384&&i(13,n=typeof u.bandwidth=="function"),t.$$.dirty&2121728&&i(15,l=Array.isArray(E)?E:n?u.domain():typeof E=="function"?E(u.ticks()):u.ticks(E))},[U,H,P,V,j,Y,ee,ce,Qe,le,re,we,Ae,n,u,l,f,a,w,C,F,E]}class Hg extends Nr{constructor(e){super(),Kr(this,e,WS,ZS,Lr,{ticks:21,tickMarks:0,gridlines:1,tickDashed:2,tickColor:3,textColor:4,formatTick:5,xTick:6,yTick:7,dxTick:8,dyTick:9,textAnchor:10,prefix:11,suffix:12})}}function Qy(t,e,i){const n=t.slice();return n[8]=e[i],n[10]=i,n}function Iy(t){let e,i=t[0],n=[];for(let l=0;l<i.length;l+=1)n[l]=Ty(Qy(t,i,l));return{c(){e=it("ul");for(let l=0;l<n.length;l+=1)n[l].c();ue(e,"class","legend svelte-1w19nmy"),ue(e,"aria-hidden","true")},m(l,u){Fe(l,e,u);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null)},p(l,u){if(u&255){i=l[0];let f;for(f=0;f<i.length;f+=1){const a=Qy(l,i,f);n[f]?n[f].p(a,u):(n[f]=Ty(a),n[f].c(),n[f].m(e,null))}for(;f<n.length;f+=1)n[f].d(1);n.length=i.length}},d(l){l&&Ee(e),$i(n,l)}}}function Ty(t){let e,i,n,l=t[8]+"",u,f;return{c(){e=it("li"),i=it("div"),n=dt(),u=yr(l),f=dt(),ue(i,"class","bullet svelte-1w19nmy"),bt(i,"background-color",t[1][t[10]]),bt(i,"width",(!t[4]&&(t[2]||t[3]&&t[10]!=0)?t[5]:t[6])+"px"),bt(i,"height",(t[4]&&(t[2]||t[3]&&t[10]!=0)?t[5]:t[6])+"px"),Sr(i,"round",t[7]),ue(e,"class","svelte-1w19nmy")},m(a,w){Fe(a,e,w),$e(e,i),$e(e,n),$e(e,u),$e(e,f)},p(a,w){w&2&&bt(i,"background-color",a[1][a[10]]),w&124&&bt(i,"width",(!a[4]&&(a[2]||a[3]&&a[10]!=0)?a[5]:a[6])+"px"),w&124&&bt(i,"height",(a[4]&&(a[2]||a[3]&&a[10]!=0)?a[5]:a[6])+"px"),w&128&&Sr(i,"round",a[7]),w&1&&l!==(l=a[8]+"")&&Xi(u,l)},d(a){a&&Ee(e)}}}function qS(t){let e=Array.isArray(t[0])&&Array.isArray(t[1]),i,n=e&&Iy(t);return{c(){n&&n.c(),i=hi()},m(l,u){n&&n.m(l,u),Fe(l,i,u)},p(l,[u]){u&3&&(e=Array.isArray(l[0])&&Array.isArray(l[1])),e?n?n.p(l,u):(n=Iy(l),n.c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},i:ar,o:ar,d(l){n&&n.d(l),l&&Ee(i)}}}function jS(t,e,i){let{domain:n=null}=e,{colors:l=null}=e,{line:u=!1}=e,{comparison:f=!1}=e,{horizontal:a=!0}=e,{markerWidth:w=2.5}=e,{markerLength:C=13}=e,{round:F=!1}=e;return t.$$set=E=>{"domain"in E&&i(0,n=E.domain),"colors"in E&&i(1,l=E.colors),"line"in E&&i(2,u=E.line),"comparison"in E&&i(3,f=E.comparison),"horizontal"in E&&i(4,a=E.horizontal),"markerWidth"in E&&i(5,w=E.markerWidth),"markerLength"in E&&i(6,C=E.markerLength),"round"in E&&i(7,F=E.round)},[n,l,u,f,a,w,C,F]}class Pg extends Nr{constructor(e){super(),Kr(this,e,jS,qS,Lr,{domain:0,colors:1,line:2,comparison:3,horizontal:4,markerWidth:5,markerLength:6,round:7})}}function JS(t){let e,i;const n=t[1].default,l=qr(n,t,t[0],null);return{c(){e=it("div"),l&&l.c(),ue(e,"class","title svelte-b06b69")},m(u,f){Fe(u,e,f),l&&l.m(e,null),i=!0},p(u,[f]){l&&l.p&&(!i||f&1)&&Jr(l,n,u,u[0],i?jr(n,u[0],f,null):Yr(u[0]),null)},i(u){i||(Ce(l,u),i=!0)},o(u){De(l,u),i=!1},d(u){u&&Ee(e),l&&l.d(u)}}}function YS(t,e,i){let{$$slots:n={},$$scope:l}=e;return t.$$set=u=>{"$$scope"in u&&i(0,l=u.$$scope)},[l,n]}class zg extends Nr{constructor(e){super(),Kr(this,e,YS,JS,Lr,{})}}function $S(t){let e,i;const n=t[1].default,l=qr(n,t,t[0],null);return{c(){e=it("div"),l&&l.c(),ue(e,"class","footer svelte-7jvwfp")},m(u,f){Fe(u,e,f),l&&l.m(e,null),i=!0},p(u,[f]){l&&l.p&&(!i||f&1)&&Jr(l,n,u,u[0],i?jr(n,u[0],f,null):Yr(u[0]),null)},i(u){i||(Ce(l,u),i=!0)},o(u){De(l,u),i=!1},d(u){u&&Ee(e),l&&l.d(u)}}}function ek(t,e,i){let{$$slots:n={},$$scope:l}=e;return t.$$set=u=>{"$$scope"in u&&i(0,l=u.$$scope)},[l,n]}class Rg extends Nr{constructor(e){super(),Kr(this,e,ek,$S,Lr,{})}}function Sy(t,e,i){const n=t.slice();return n[15]=e[i],n[17]=i,n}function ky(t,e,i){const n=t.slice();return n[15]=e[i],n[17]=i,n}function My(t){let e,i,n,l,u,f,a,w;function C(U,H){if(U[3][0]&&U[3][0].x)return rk;if(U[3][0]&&U[3][0][0]&&U[3][0][0].x)return tk}let F=C(t),E=F&&F(t);return{c(){e=Dr("defs"),i=Dr("filter"),n=Dr("feFlood"),l=Dr("feMerge"),u=Dr("feMergeNode"),f=Dr("feMergeNode"),a=dt(),w=Dr("g"),E&&E.c(),ue(n,"flood-color","rgba(255,255,255,0.8)"),ue(n,"result","bg"),ue(u,"in","bg"),ue(f,"in","SourceGraphic"),ue(i,"x","0"),ue(i,"y","0"),ue(i,"width","1"),ue(i,"height","1"),ue(i,"id","bgfill"),ue(w,"class","label-group")},m(U,H){Fe(U,e,H),$e(e,i),$e(i,n),$e(i,l),$e(l,u),$e(l,f),Fe(U,a,H),Fe(U,w,H),E&&E.m(w,null)},p(U,H){F===(F=C(U))&&E?E.p(U,H):(E&&E.d(1),E=F&&F(U),E&&(E.c(),E.m(w,null)))},d(U){U&&Ee(e),U&&Ee(a),U&&Ee(w),E&&E.d()}}}function tk(t){let e,i=t[3],n=[];for(let l=0;l<i.length;l+=1)n[l]=Ly(Sy(t,i,l));return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=hi()},m(l,u){for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(l,u);Fe(l,e,u)},p(l,u){if(u&12415){i=l[3];let f;for(f=0;f<i.length;f+=1){const a=Sy(l,i,f);n[f]?n[f].p(a,u):(n[f]=Ly(a),n[f].c(),n[f].m(e.parentNode,e))}for(;f<n.length;f+=1)n[f].d(1);n.length=i.length}},d(l){$i(n,l),l&&Ee(e)}}}function rk(t){let e,i=t[3],n=[];for(let l=0;l<i.length;l+=1)n[l]=Py(ky(t,i,l));return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=hi()},m(l,u){for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(l,u);Fe(l,e,u)},p(l,u){if(u&12415){i=l[3];let f;for(f=0;f<i.length;f+=1){const a=ky(l,i,f);n[f]?n[f].p(a,u):(n[f]=Py(a),n[f].c(),n[f].m(e.parentNode,e))}for(;f<n.length;f+=1)n[f].d(1);n.length=i.length}},d(l){$i(n,l),l&&Ee(e)}}}function Dy(t){let e,i=(t[2]?t[2]:t[4][t[17]][0][t[13]])+"",n,l,u;return{c(){e=Dr("text"),n=yr(i),ue(e,"class","label svelte-1ijkebl"),ue(e,"transform","translate(2,3)"),ue(e,"filter","url(#bgfill)"),ue(e,"fill","#333"),ue(e,"x",l=t[5](t[15][t[15].length-1].x)),ue(e,"y",u=t[6](t[15][t[15].length-1].y))},m(f,a){Fe(f,e,a),$e(e,n)},p(f,a){a&20&&i!==(i=(f[2]?f[2]:f[4][f[17]][0][f[13]])+"")&&Xi(n,i),a&40&&l!==(l=f[5](f[15][f[15].length-1].x))&&ue(e,"x",l),a&72&&u!==(u=f[6](f[15][f[15].length-1].y))&&ue(e,"y",u)},d(f){f&&Ee(e)}}}function Ly(t){let e=[t[0],t[1]].includes(t[4][t[17]][0][t[12]]),i,n=e&&Dy(t);return{c(){n&&n.c(),i=hi()},m(l,u){n&&n.m(l,u),Fe(l,i,u)},p(l,u){u&19&&(e=[l[0],l[1]].includes(l[4][l[17]][0][l[12]])),e?n?n.p(l,u):(n=Dy(l),n.c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},d(l){n&&n.d(l),l&&Ee(i)}}}function Hy(t){let e,i=(t[2]?t[2]:t[4][t[17]][t[13]])+"",n,l,u;return{c(){e=Dr("text"),n=yr(i),ue(e,"class","label svelte-1ijkebl"),ue(e,"transform","translate(5,-5)"),ue(e,"filter","url(#bgfill)"),ue(e,"fill","#333"),ue(e,"x",l=t[5](t[15].x)),ue(e,"y",u=t[6](t[15].y))},m(f,a){Fe(f,e,a),$e(e,n)},p(f,a){a&20&&i!==(i=(f[2]?f[2]:f[4][f[17]][f[13]])+"")&&Xi(n,i),a&40&&l!==(l=f[5](f[15].x))&&ue(e,"x",l),a&72&&u!==(u=f[6](f[15].y))&&ue(e,"y",u)},d(f){f&&Ee(e)}}}function Py(t){let e=[t[0],t[1]].includes(t[4][t[17]][t[12]]),i,n=e&&Hy(t);return{c(){n&&n.c(),i=hi()},m(l,u){n&&n.m(l,u),Fe(l,i,u)},p(l,u){u&19&&(e=[l[0],l[1]].includes(l[4][l[17]][l[12]])),e?n?n.p(l,u):(n=Hy(l),n.c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},d(l){n&&n.d(l),l&&Ee(i)}}}function ik(t){let e,i=t[3]&&My(t);return{c(){i&&i.c(),e=hi()},m(n,l){i&&i.m(n,l),Fe(n,e,l)},p(n,[l]){n[3]?i?i.p(n,l):(i=My(n),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:ar,o:ar,d(n){i&&i.d(n),n&&Ee(e)}}}function nk(t,e,i){let n,l,u,f,a;const{data:w,xScale:C,yScale:F,custom:E}=Gi("LayerCake");ct(t,w,ee=>i(4,u=ee)),ct(t,C,ee=>i(5,f=ee)),ct(t,F,ee=>i(6,a=ee)),ct(t,E,ee=>i(14,n=ee));let{hovered:U=null}=e,{selected:H=null}=e,{content:P=null}=e,V=n.coords;ct(t,V,ee=>i(3,l=ee));let j=n.idKey,Y=n.labelKey;return t.$$set=ee=>{"hovered"in ee&&i(0,U=ee.hovered),"selected"in ee&&i(1,H=ee.selected),"content"in ee&&i(2,P=ee.content)},[U,H,P,l,u,f,a,w,C,F,E,V,j,Y]}class uB extends Nr{constructor(e){super(),Kr(this,e,nk,ik,Lr,{hovered:0,selected:1,content:2})}}function zy(t){let e,i,n;return{c(){e=it("button"),e.textContent="CSV",ue(e,"class","svelte-1wgwv12")},m(l,u){Fe(l,e,u),i||(n=ki(e,"click",t[5]),i=!0)},p:ar,d(l){l&&Ee(e),i=!1,n()}}}function Ry(t){let e,i,n;return{c(){e=it("button"),e.textContent="PNG",ue(e,"class","svelte-1wgwv12")},m(l,u){Fe(l,e,u),i||(n=ki(e,"click",t[6]),i=!0)},p:ar,d(l){l&&Ee(e),i=!1,n()}}}function sk(t){let e,i,n,l=t[4].csv&&zy(t),u=t[4].png&&Ry(t);return{c(){e=it("div"),i=yr(`Export: 
  `),l&&l.c(),n=dt(),u&&u.c(),ue(e,"class","export svelte-1wgwv12")},m(f,a){Fe(f,e,a),$e(e,i),l&&l.m(e,null),$e(e,n),u&&u.m(e,null)},p(f,[a]){f[4].csv?l?l.p(f,a):(l=zy(f),l.c(),l.m(e,n)):l&&(l.d(1),l=null),f[4].png?u?u.p(f,a):(u=Ry(f),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:ar,o:ar,d(f){f&&Ee(e),l&&l.d(),u&&u.d()}}}function Ak(t,e,i){let{el:n}=e,{data:l}=e,{keys:u=[]}=e,{title:f=null}=e,{output:a={}}=e;const w=()=>MS(l,u,f||"chart"),C=()=>DS(n,f||"chart");return t.$$set=F=>{"el"in F&&i(0,n=F.el),"data"in F&&i(1,l=F.data),"keys"in F&&i(2,u=F.keys),"title"in F&&i(3,f=F.title),"output"in F&&i(4,a=F.output)},[n,l,u,f,a,w,C]}class Og extends Nr{constructor(e){super(),Kr(this,e,Ak,sk,Lr,{el:0,data:1,keys:2,title:3,output:4})}}function Oy(t,e,i){const n=t.slice();return n[7]=e[i],n}function Ky(t,e,i){const n=t.slice();return n[10]=e[i],n}function Ny(t,e,i){const n=t.slice();return n[10]=e[i],n}function Vy(t){let e,i,n,l,u,f=t[1],a=[];for(let F=0;F<f.length;F+=1)a[F]=Gy(Ny(t,f,F));let w=t[0],C=[];for(let F=0;F<w.length;F+=1)C[F]=Zy(Oy(t,w,F));return{c(){e=it("table"),i=it("thead"),n=it("tr");for(let F=0;F<a.length;F+=1)a[F].c();l=dt(),u=it("tbody");for(let F=0;F<C.length;F+=1)C[F].c()},m(F,E){Fe(F,e,E),$e(e,i),$e(i,n);for(let U=0;U<a.length;U+=1)a[U]&&a[U].m(n,null);$e(e,l),$e(e,u);for(let U=0;U<C.length;U+=1)C[U]&&C[U].m(u,null)},p(F,E){if(E&2){f=F[1];let U;for(U=0;U<f.length;U+=1){const H=Ny(F,f,U);a[U]?a[U].p(H,E):(a[U]=Gy(H),a[U].c(),a[U].m(n,null))}for(;U<a.length;U+=1)a[U].d(1);a.length=f.length}if(E&3){w=F[0];let U;for(U=0;U<w.length;U+=1){const H=Oy(F,w,U);C[U]?C[U].p(H,E):(C[U]=Zy(H),C[U].c(),C[U].m(u,null))}for(;U<C.length;U+=1)C[U].d(1);C.length=w.length}},d(F){F&&Ee(e),$i(a,F),$i(C,F)}}}function Gy(t){let e,i=t[10]+"",n;return{c(){e=it("th"),n=yr(i)},m(l,u){Fe(l,e,u),$e(e,n)},p(l,u){u&2&&i!==(i=l[10]+"")&&Xi(n,i)},d(l){l&&Ee(e)}}}function Xy(t){let e,i=t[7][t[10]]+"",n;return{c(){e=it("td"),n=yr(i)},m(l,u){Fe(l,e,u),$e(e,n)},p(l,u){u&3&&i!==(i=l[7][l[10]]+"")&&Xi(n,i)},d(l){l&&Ee(e)}}}function Zy(t){let e,i,n=t[1],l=[];for(let u=0;u<n.length;u+=1)l[u]=Xy(Ky(t,n,u));return{c(){e=it("tr");for(let u=0;u<l.length;u+=1)l[u].c();i=dt()},m(u,f){Fe(u,e,f);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null);$e(e,i)},p(u,f){if(f&3){n=u[1];let a;for(a=0;a<n.length;a+=1){const w=Ky(u,n,a);l[a]?l[a].p(w,f):(l[a]=Xy(w),l[a].c(),l[a].m(e,i))}for(;a<l.length;a+=1)l[a].d(1);l.length=n.length}},d(u){u&&Ee(e),$i(l,u)}}}function ok(t){let e,i=t[0]&&t[1]&&Vy(t);return{c(){i&&i.c(),e=hi()},m(n,l){i&&i.m(n,l),Fe(n,e,l)},p(n,[l]){n[0]&&n[1]?i?i.p(n,l):(i=Vy(n),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:ar,o:ar,d(n){i&&i.d(n),n&&Ee(e)}}}function ak(t,e,i){let n,{data:l}=e,{key1:u=null}=e,{key2:f=null}=e,{key3:a=null}=e,{key4:w=null}=e;function C(F,E,U,H){let P=[];return F&&P.push(F),E&&P.push(E),U&&P.push(U),H&&P.push(H),P}return t.$$set=F=>{"data"in F&&i(0,l=F.data),"key1"in F&&i(2,u=F.key1),"key2"in F&&i(3,f=F.key2),"key3"in F&&i(4,a=F.key3),"key4"in F&&i(5,w=F.key4)},t.$$.update=()=>{t.$$.dirty&60&&i(1,n=C(u,f,a,w))},[l,n,u,f,a,w]}class Kg extends Nr{constructor(e){super(),Kr(this,e,ak,ok,Lr,{data:0,key1:2,key2:3,key3:4,key4:5})}}const lk=t=>({}),Wy=t=>({}),ck=t=>({}),qy=t=>({}),uk=t=>({}),jy=t=>({}),hk=t=>({}),Jy=t=>({}),fk=t=>({}),Yy=t=>({});function $y(t){let e,i;return e=new zg({props:{$$slots:{default:[dk]},$$scope:{ctx:t}}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&4194304|l[2]&2&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function dk(t){let e;return{c(){e=yr(t[22])},m(i,n){Fe(i,e,n)},p(i,n){n[0]&4194304&&Xi(e,i[22])},d(i){i&&Ee(e)}}}function e1(t){let e,i;return{c(){e=it("h5"),i=yr(t[23]),ue(e,"class","visuallyhidden svelte-1fy6g2i")},m(n,l){Fe(n,e,l),$e(e,i)},p(n,l){l[0]&8388608&&Xi(i,n[23])},d(n){n&&Ee(e)}}}function t1(t){let e,i;return e=new Lg({props:{ticks:t[20],formatTick:t[17],snapTicks:t[27],prefix:t[36],suffix:t[37]}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&1048576&&(u.ticks=n[20]),l[0]&131072&&(u.formatTick=n[17]),l[0]&134217728&&(u.snapTicks=n[27]),l[1]&32&&(u.prefix=n[36]),l[1]&64&&(u.suffix=n[37]),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function r1(t){let e,i;return e=new Hg({props:{ticks:t[21],formatTick:t[16],prefix:t[38],suffix:t[39]}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&2097152&&(u.ticks=n[21]),l[0]&65536&&(u.formatTick=n[16]),l[1]&128&&(u.prefix=n[38]),l[1]&256&&(u.suffix=n[39]),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function i1(t){let e,i;return e=new VS({props:{mode:t[30],opacity:t[31]}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&1073741824&&(u.mode=n[30]),l[1]&1&&(u.opacity=n[31]),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function n1(t){let e,i,n,l;function u(w){t[58](w)}function f(w){t[59](w)}let a={lineWidth:t[34],select:t[42],hover:t[40],highlighted:t[44]};return t[1]!==void 0&&(a.selected=t[1]),t[0]!==void 0&&(a.hovered=t[0]),e=new OS({props:a}),zi.push(()=>Fo(e,"selected",u)),zi.push(()=>Fo(e,"hovered",f)),e.$on("hover",t[60]),e.$on("select",t[61]),{c(){Rt(e.$$.fragment)},m(w,C){Ht(e,w,C),l=!0},p(w,C){const F={};C[1]&8&&(F.lineWidth=w[34]),C[1]&2048&&(F.select=w[42]),C[1]&512&&(F.hover=w[40]),C[1]&8192&&(F.highlighted=w[44]),!i&&C[0]&2&&(i=!0,F.selected=w[1],Eo(()=>i=!1)),!n&&C[0]&1&&(n=!0,F.hovered=w[0],Eo(()=>n=!1)),e.$set(F)},i(w){l||(Ce(e.$$.fragment,w),l=!0)},o(w){De(e.$$.fragment,w),l=!1},d(w){Pt(e,w)}}}function s1(t){let e,i;return e=new uB({props:{hovered:t[0],selected:t[1]}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&1&&(u.hovered=n[0]),l[0]&2&&(u.selected=n[1]),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function pk(t){let e,i,n,l,u,f,a=t[18]&&t1(t),w=t[19]&&r1(t),C=t[29]&&i1(t),F=t[28]&&n1(t),E=t[26]&&s1(t);const U=t[57].svg,H=qr(U,t,t[63],jy);return{c(){a&&a.c(),e=dt(),w&&w.c(),i=dt(),C&&C.c(),n=dt(),F&&F.c(),l=dt(),E&&E.c(),u=dt(),H&&H.c()},m(P,V){a&&a.m(P,V),Fe(P,e,V),w&&w.m(P,V),Fe(P,i,V),C&&C.m(P,V),Fe(P,n,V),F&&F.m(P,V),Fe(P,l,V),E&&E.m(P,V),Fe(P,u,V),H&&H.m(P,V),f=!0},p(P,V){P[18]?a?(a.p(P,V),V[0]&262144&&Ce(a,1)):(a=t1(P),a.c(),Ce(a,1),a.m(e.parentNode,e)):a&&(Rr(),De(a,1,1,()=>{a=null}),Or()),P[19]?w?(w.p(P,V),V[0]&524288&&Ce(w,1)):(w=r1(P),w.c(),Ce(w,1),w.m(i.parentNode,i)):w&&(Rr(),De(w,1,1,()=>{w=null}),Or()),P[29]?C?(C.p(P,V),V[0]&536870912&&Ce(C,1)):(C=i1(P),C.c(),Ce(C,1),C.m(n.parentNode,n)):C&&(Rr(),De(C,1,1,()=>{C=null}),Or()),P[28]?F?(F.p(P,V),V[0]&268435456&&Ce(F,1)):(F=n1(P),F.c(),Ce(F,1),F.m(l.parentNode,l)):F&&(Rr(),De(F,1,1,()=>{F=null}),Or()),P[26]?E?(E.p(P,V),V[0]&67108864&&Ce(E,1)):(E=s1(P),E.c(),Ce(E,1),E.m(u.parentNode,u)):E&&(Rr(),De(E,1,1,()=>{E=null}),Or()),H&&H.p&&(!f||V[2]&2)&&Jr(H,U,P,P[63],f?jr(U,P[63],V,uk):Yr(P[63]),jy)},i(P){f||(Ce(a),Ce(w),Ce(C),Ce(F),Ce(E),Ce(H,P),f=!0)},o(P){De(a),De(w),De(C),De(F),De(E),De(H,P),f=!1},d(P){a&&a.d(P),P&&Ee(e),w&&w.d(P),P&&Ee(i),C&&C.d(P),P&&Ee(n),F&&F.d(P),P&&Ee(l),E&&E.d(P),P&&Ee(u),H&&H.d(P)}}}function gk(t){let e,i,n,l,u,f;e=new Dg({});const a=t[57].back,w=qr(a,t,t[63],Jy);l=new Eg({props:{pointerEvents:t[35],$$slots:{default:[pk]},$$scope:{ctx:t}}});const C=t[57].front,F=qr(C,t,t[63],qy);return{c(){Rt(e.$$.fragment),i=dt(),w&&w.c(),n=dt(),Rt(l.$$.fragment),u=dt(),F&&F.c()},m(E,U){Ht(e,E,U),Fe(E,i,U),w&&w.m(E,U),Fe(E,n,U),Ht(l,E,U),Fe(E,u,U),F&&F.m(E,U),f=!0},p(E,U){w&&w.p&&(!f||U[2]&2)&&Jr(w,a,E,E[63],f?jr(a,E[63],U,hk):Yr(E[63]),Jy);const H={};U[1]&16&&(H.pointerEvents=E[35]),U[0]&2084503555|U[1]&11241|U[2]&2&&(H.$$scope={dirty:U,ctx:E}),l.$set(H),F&&F.p&&(!f||U[2]&2)&&Jr(F,C,E,E[63],f?jr(C,E[63],U,ck):Yr(E[63]),qy)},i(E){f||(Ce(e.$$.fragment,E),Ce(w,E),Ce(l.$$.fragment,E),Ce(F,E),f=!0)},o(E){De(e.$$.fragment,E),De(w,E),De(l.$$.fragment,E),De(F,E),f=!1},d(E){Pt(e,E),E&&Ee(i),w&&w.d(E),E&&Ee(n),Pt(l,E),E&&Ee(u),F&&F.d(E)}}}function A1(t){let e,i;return e=new Pg({props:{domain:t[47],colors:t[33],line:t[28],markerWidth:t[34]}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[1]&65536&&(u.domain=n[47]),l[1]&4&&(u.colors=n[33]),l[0]&268435456&&(u.line=n[28]),l[1]&8&&(u.markerWidth=n[34]),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function o1(t){let e,i;return e=new Rg({props:{$$slots:{default:[mk]},$$scope:{ctx:t}}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&16777216|l[2]&2&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function mk(t){let e;return{c(){e=yr(t[24])},m(i,n){Fe(i,e,n)},p(i,n){n[0]&16777216&&Xi(e,i[24])},d(i){i&&Ee(e)}}}function a1(t){let e,i;return e=new Og({props:{el:t[48],data:t[2],keys:[t[12],t[9],t[11],t[10]],title:t[22],output:t[46]}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[1]&131072&&(u.el=n[48]),l[0]&4&&(u.data=n[2]),l[0]&7680&&(u.keys=[n[12],n[9],n[11],n[10]]),l[0]&4194304&&(u.title=n[22]),l[1]&32768&&(u.output=n[46]),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function _k(t){let e,i,n,l,u,f,a,w,C,F,E,U,H,P,V,j=t[22]&&$y(t),Y=t[23]&&e1(t);const ee=t[57].options,ce=qr(ee,t,t[63],Yy);f=new Cg({props:{padding:t[32],ssr:t[4],height:t[4]?t[6]:null,width:t[4]?t[5]:null,x:t[9],y:t[10],z:t[11],yDomain:t[50],xScale:typeof t[14]=="function"?t[14]():t[14]=="time"?r_():rs(),yScale:typeof t[15]=="function"?t[15]():t[15]=="log"?KA():rs(),zScale:tu(),zDomain:t[47],zRange:t[33],data:t[49],flatData:t[2],custom:{type:"line",mode:t[30],idKey:t[12],labelKey:t[13],coords:t[51],colorSelect:t[43],colorHover:t[41],colorHighlight:t[45],animation:t[7],duration:t[8]},$$slots:{default:[gk]},$$scope:{ctx:t}}}),C=new Kg({props:{data:t[2],key1:t[11],key2:t[9],key3:t[10]}});const Qe=t[57].legend,le=qr(Qe,t,t[63],Wy);let re=t[25]&&t[47]&&A1(t),we=t[24]&&o1(t),Ae=t[46]&&a1(t);return{c(){e=it("div"),j&&j.c(),i=dt(),Y&&Y.c(),n=dt(),ce&&ce.c(),l=dt(),u=it("div"),Rt(f.$$.fragment),a=dt(),w=it("div"),Rt(C.$$.fragment),F=dt(),le&&le.c(),E=dt(),re&&re.c(),U=dt(),we&&we.c(),H=dt(),Ae&&Ae.c(),P=hi(),ue(u,"class","chart-container svelte-1fy6g2i"),bt(u,"height",typeof t[3]=="number"?t[3]+"px":t[3]),ue(u,"aria-hidden","true"),ue(w,"class","visuallyhidden svelte-1fy6g2i")},m(R,ie){Fe(R,e,ie),j&&j.m(e,null),$e(e,i),Y&&Y.m(e,null),$e(e,n),ce&&ce.m(e,null),$e(e,l),$e(e,u),Ht(f,u,null),$e(e,a),$e(e,w),Ht(C,w,null),$e(e,F),le&&le.m(e,null),$e(e,E),re&&re.m(e,null),$e(e,U),we&&we.m(e,null),t[62](e),Fe(R,H,ie),Ae&&Ae.m(R,ie),Fe(R,P,ie),V=!0},p(R,ie){R[22]?j?(j.p(R,ie),ie[0]&4194304&&Ce(j,1)):(j=$y(R),j.c(),Ce(j,1),j.m(e,i)):j&&(Rr(),De(j,1,1,()=>{j=null}),Or()),R[23]?Y?Y.p(R,ie):(Y=e1(R),Y.c(),Y.m(e,n)):Y&&(Y.d(1),Y=null),ce&&ce.p&&(!V||ie[2]&2)&&Jr(ce,ee,R,R[63],V?jr(ee,R[63],ie,fk):Yr(R[63]),Yy);const se={};ie[1]&2&&(se.padding=R[32]),ie[0]&16&&(se.ssr=R[4]),ie[0]&80&&(se.height=R[4]?R[6]:null),ie[0]&48&&(se.width=R[4]?R[5]:null),ie[0]&512&&(se.x=R[9]),ie[0]&1024&&(se.y=R[10]),ie[0]&2048&&(se.z=R[11]),ie[1]&524288&&(se.yDomain=R[50]),ie[0]&16384&&(se.xScale=typeof R[14]=="function"?R[14]():R[14]=="time"?r_():rs()),ie[0]&32768&&(se.yScale=typeof R[15]=="function"?R[15]():R[15]=="log"?KA():rs()),ie[1]&65536&&(se.zDomain=R[47]),ie[1]&4&&(se.zRange=R[33]),ie[1]&262144&&(se.data=R[49]),ie[0]&4&&(se.flatData=R[2]),ie[0]&1073754496|ie[1]&21504&&(se.custom={type:"line",mode:R[30],idKey:R[12],labelKey:R[13],coords:R[51],colorSelect:R[43],colorHover:R[41],colorHighlight:R[45],animation:R[7],duration:R[8]}),ie[0]&2084503555|ie[1]&11257|ie[2]&2&&(se.$$scope={dirty:ie,ctx:R}),f.$set(se),(!V||ie[0]&8)&&bt(u,"height",typeof R[3]=="number"?R[3]+"px":R[3]);const Be={};ie[0]&4&&(Be.data=R[2]),ie[0]&2048&&(Be.key1=R[11]),ie[0]&512&&(Be.key2=R[9]),ie[0]&1024&&(Be.key3=R[10]),C.$set(Be),le&&le.p&&(!V||ie[2]&2)&&Jr(le,Qe,R,R[63],V?jr(Qe,R[63],ie,lk):Yr(R[63]),Wy),R[25]&&R[47]?re?(re.p(R,ie),ie[0]&33554432|ie[1]&65536&&Ce(re,1)):(re=A1(R),re.c(),Ce(re,1),re.m(e,U)):re&&(Rr(),De(re,1,1,()=>{re=null}),Or()),R[24]?we?(we.p(R,ie),ie[0]&16777216&&Ce(we,1)):(we=o1(R),we.c(),Ce(we,1),we.m(e,null)):we&&(Rr(),De(we,1,1,()=>{we=null}),Or()),R[46]?Ae?(Ae.p(R,ie),ie[1]&32768&&Ce(Ae,1)):(Ae=a1(R),Ae.c(),Ce(Ae,1),Ae.m(P.parentNode,P)):Ae&&(Rr(),De(Ae,1,1,()=>{Ae=null}),Or())},i(R){V||(Ce(j),Ce(ce,R),Ce(f.$$.fragment,R),Ce(C.$$.fragment,R),Ce(le,R),Ce(re),Ce(we),Ce(Ae),V=!0)},o(R){De(j),De(ce,R),De(f.$$.fragment,R),De(C.$$.fragment,R),De(le,R),De(re),De(we),De(Ae),V=!1},d(R){R&&Ee(e),j&&j.d(),Y&&Y.d(),ce&&ce.d(R),Pt(f),Pt(C),le&&le.d(R),re&&re.d(),we&&we.d(),t[62](null),R&&Ee(H),Ae&&Ae.d(R),R&&Ee(P)}}}function yk(t,e,i){let n,l,u,{$$slots:f={},$$scope:a}=e,{data:w}=e,{height:C=200}=e,{ssr:F=!1}=e,{ssrWidth:E=300}=e,{ssrHeight:U=typeof C=="number"?C:200}=e,{animation:H=!0}=e,{duration:P=800}=e,{xKey:V="x"}=e,{yKey:j="y"}=e,{zKey:Y=null}=e,{idKey:ee=Y}=e,{labelKey:ce=ee}=e,{xScale:Qe}=e,{yScale:le="linear"}=e,{yFormatTick:re=mf}=e,{xFormatTick:we=me=>me}=e,{yMax:Ae=null}=e,{yMin:R=0}=e,{xAxis:ie=!0}=e,{yAxis:se=!0}=e,{xTicks:Be=4}=e,{yTicks:Re=4}=e,{zDomain:ht=null}=e,{title:_t=null}=e,{alt:Me=null}=e,{footer:at=null}=e,{legend:wt=!1}=e,{labels:nt=!1}=e,{snapTicks:He=!0}=e,{line:tt=!0}=e,{area:Je=!0}=e,{mode:ut="default"}=e,{areaOpacity:At=1}=e,{padding:Et={top:0,bottom:20,left:35,right:0}}=e,{color:qt=null}=e,{colors:Tt=qt?[qt]:["#206095","#A8BD3A","#003C57","#27A0CC","#118C7B","#F66068","#746CB1","#22D0B6","lightgrey"]}=e,{lineWidth:tr=2.5}=e,{interactive:ve=!0}=e,{xPrefix:ft=""}=e,{xSuffix:Ft=""}=e,{yPrefix:qe=""}=e,{ySuffix:Gt=""}=e,{hover:xe=!1}=e,{hovered:Ge=null}=e,{colorHover:nr="orange"}=e,{select:mr=!1}=e,{selected:ti=null}=e,{colorSelect:er="#206095"}=e,{highlighted:Vr=[]}=e,{colorHighlight:bi="#206095"}=e,{output:Ai=null}=e,mi;const oi={duration:P,easing:Fg},ai=da(void 0,oi),fi=(me,Ot,Kt)=>Kt.indexOf(me)==Ot;function li(me,Ot){let Kt=[];return Ot.forEach(Ir=>{let rr=me.filter(Oe=>Oe[V]==Ir).map(Oe=>Oe[j]).reduce((Oe,kr)=>Oe+kr);Kt.push(rr)}),Kt}const Ze=(me,Ot,Kt,Ir)=>Ir?[R,Ir]:Ot=="stacked"&&Kt?[R,Math.max(...li(me,me.map(wr=>wr[V]).filter(fi)))]:[R,Math.max(...me.map(wr=>wr[Kt]))];function mt(me,Ot,Kt,Ir){let wr=Ze(me,Ot,Kt,Ir);(wr[0]!=_i[0]||wr[1]!=_i[1])&&(ci.set(wr,{duration:H?P:0}),_i=wr)}let _i=Ze(w,ut,j,Ae);const ci=da(_i,oi);ct(t,ci,me=>i(50,u=me));function Ar(me){ti=me,i(1,ti)}function yi(me){Ge=me,i(0,Ge)}function Xe(me){yl.call(this,t,me)}function Hr(me){yl.call(this,t,me)}function Gr(me){zi[me?"unshift":"push"](()=>{mi=me,i(48,mi)})}return t.$$set=me=>{"data"in me&&i(2,w=me.data),"height"in me&&i(3,C=me.height),"ssr"in me&&i(4,F=me.ssr),"ssrWidth"in me&&i(5,E=me.ssrWidth),"ssrHeight"in me&&i(6,U=me.ssrHeight),"animation"in me&&i(7,H=me.animation),"duration"in me&&i(8,P=me.duration),"xKey"in me&&i(9,V=me.xKey),"yKey"in me&&i(10,j=me.yKey),"zKey"in me&&i(11,Y=me.zKey),"idKey"in me&&i(12,ee=me.idKey),"labelKey"in me&&i(13,ce=me.labelKey),"xScale"in me&&i(14,Qe=me.xScale),"yScale"in me&&i(15,le=me.yScale),"yFormatTick"in me&&i(16,re=me.yFormatTick),"xFormatTick"in me&&i(17,we=me.xFormatTick),"yMax"in me&&i(53,Ae=me.yMax),"yMin"in me&&i(54,R=me.yMin),"xAxis"in me&&i(18,ie=me.xAxis),"yAxis"in me&&i(19,se=me.yAxis),"xTicks"in me&&i(20,Be=me.xTicks),"yTicks"in me&&i(21,Re=me.yTicks),"zDomain"in me&&i(55,ht=me.zDomain),"title"in me&&i(22,_t=me.title),"alt"in me&&i(23,Me=me.alt),"footer"in me&&i(24,at=me.footer),"legend"in me&&i(25,wt=me.legend),"labels"in me&&i(26,nt=me.labels),"snapTicks"in me&&i(27,He=me.snapTicks),"line"in me&&i(28,tt=me.line),"area"in me&&i(29,Je=me.area),"mode"in me&&i(30,ut=me.mode),"areaOpacity"in me&&i(31,At=me.areaOpacity),"padding"in me&&i(32,Et=me.padding),"color"in me&&i(56,qt=me.color),"colors"in me&&i(33,Tt=me.colors),"lineWidth"in me&&i(34,tr=me.lineWidth),"interactive"in me&&i(35,ve=me.interactive),"xPrefix"in me&&i(36,ft=me.xPrefix),"xSuffix"in me&&i(37,Ft=me.xSuffix),"yPrefix"in me&&i(38,qe=me.yPrefix),"ySuffix"in me&&i(39,Gt=me.ySuffix),"hover"in me&&i(40,xe=me.hover),"hovered"in me&&i(0,Ge=me.hovered),"colorHover"in me&&i(41,nr=me.colorHover),"select"in me&&i(42,mr=me.select),"selected"in me&&i(1,ti=me.selected),"colorSelect"in me&&i(43,er=me.colorSelect),"highlighted"in me&&i(44,Vr=me.highlighted),"colorHighlight"in me&&i(45,bi=me.colorHighlight),"output"in me&&i(46,Ai=me.output),"$$scope"in me&&i(63,a=me.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&1073742852|t.$$.dirty[1]&4194304&&mt(w,ut,j,Ae),t.$$.dirty[0]&2052|t.$$.dirty[1]&16777216&&i(47,n=Array.isArray(ht)?ht:Y&&typeof ht=="function"?w.map(me=>me[Y]).filter(fi).sort(ht):Y?w.map(me=>me[Y]).filter(fi):null),t.$$.dirty[0]&1073744900|t.$$.dirty[1]&65536&&i(49,l=ut=="stacked"?kS(w,n,j,Y):lB(w,n,Y))},[Ge,ti,w,C,F,E,U,H,P,V,j,Y,ee,ce,Qe,le,re,we,ie,se,Be,Re,_t,Me,at,wt,nt,He,tt,Je,ut,At,Et,Tt,tr,ve,ft,Ft,qe,Gt,xe,nr,mr,er,Vr,bi,Ai,n,mi,l,u,ai,ci,Ae,R,ht,qt,f,Ar,yi,Xe,Hr,Gr,a]}class hB extends Nr{constructor(e){super(),Kr(this,e,yk,_k,Lr,{data:2,height:3,ssr:4,ssrWidth:5,ssrHeight:6,animation:7,duration:8,xKey:9,yKey:10,zKey:11,idKey:12,labelKey:13,xScale:14,yScale:15,yFormatTick:16,xFormatTick:17,yMax:53,yMin:54,xAxis:18,yAxis:19,xTicks:20,yTicks:21,zDomain:55,title:22,alt:23,footer:24,legend:25,labels:26,snapTicks:27,line:28,area:29,mode:30,areaOpacity:31,padding:32,color:56,colors:33,lineWidth:34,interactive:35,xPrefix:36,xSuffix:37,yPrefix:38,ySuffix:39,hover:40,hovered:0,colorHover:41,select:42,selected:1,colorSelect:43,highlighted:44,colorHighlight:45,output:46},null,[-1,-1,-1])}get data(){return this.$$.ctx[2]}set data(e){this.$$set({data:e}),Ve()}get height(){return this.$$.ctx[3]}set height(e){this.$$set({height:e}),Ve()}get ssr(){return this.$$.ctx[4]}set ssr(e){this.$$set({ssr:e}),Ve()}get ssrWidth(){return this.$$.ctx[5]}set ssrWidth(e){this.$$set({ssrWidth:e}),Ve()}get ssrHeight(){return this.$$.ctx[6]}set ssrHeight(e){this.$$set({ssrHeight:e}),Ve()}get animation(){return this.$$.ctx[7]}set animation(e){this.$$set({animation:e}),Ve()}get duration(){return this.$$.ctx[8]}set duration(e){this.$$set({duration:e}),Ve()}get xKey(){return this.$$.ctx[9]}set xKey(e){this.$$set({xKey:e}),Ve()}get yKey(){return this.$$.ctx[10]}set yKey(e){this.$$set({yKey:e}),Ve()}get zKey(){return this.$$.ctx[11]}set zKey(e){this.$$set({zKey:e}),Ve()}get idKey(){return this.$$.ctx[12]}set idKey(e){this.$$set({idKey:e}),Ve()}get labelKey(){return this.$$.ctx[13]}set labelKey(e){this.$$set({labelKey:e}),Ve()}get xScale(){return this.$$.ctx[14]}set xScale(e){this.$$set({xScale:e}),Ve()}get yScale(){return this.$$.ctx[15]}set yScale(e){this.$$set({yScale:e}),Ve()}get yFormatTick(){return this.$$.ctx[16]}set yFormatTick(e){this.$$set({yFormatTick:e}),Ve()}get xFormatTick(){return this.$$.ctx[17]}set xFormatTick(e){this.$$set({xFormatTick:e}),Ve()}get yMax(){return this.$$.ctx[53]}set yMax(e){this.$$set({yMax:e}),Ve()}get yMin(){return this.$$.ctx[54]}set yMin(e){this.$$set({yMin:e}),Ve()}get xAxis(){return this.$$.ctx[18]}set xAxis(e){this.$$set({xAxis:e}),Ve()}get yAxis(){return this.$$.ctx[19]}set yAxis(e){this.$$set({yAxis:e}),Ve()}get xTicks(){return this.$$.ctx[20]}set xTicks(e){this.$$set({xTicks:e}),Ve()}get yTicks(){return this.$$.ctx[21]}set yTicks(e){this.$$set({yTicks:e}),Ve()}get zDomain(){return this.$$.ctx[55]}set zDomain(e){this.$$set({zDomain:e}),Ve()}get title(){return this.$$.ctx[22]}set title(e){this.$$set({title:e}),Ve()}get alt(){return this.$$.ctx[23]}set alt(e){this.$$set({alt:e}),Ve()}get footer(){return this.$$.ctx[24]}set footer(e){this.$$set({footer:e}),Ve()}get legend(){return this.$$.ctx[25]}set legend(e){this.$$set({legend:e}),Ve()}get labels(){return this.$$.ctx[26]}set labels(e){this.$$set({labels:e}),Ve()}get snapTicks(){return this.$$.ctx[27]}set snapTicks(e){this.$$set({snapTicks:e}),Ve()}get line(){return this.$$.ctx[28]}set line(e){this.$$set({line:e}),Ve()}get area(){return this.$$.ctx[29]}set area(e){this.$$set({area:e}),Ve()}get mode(){return this.$$.ctx[30]}set mode(e){this.$$set({mode:e}),Ve()}get areaOpacity(){return this.$$.ctx[31]}set areaOpacity(e){this.$$set({areaOpacity:e}),Ve()}get padding(){return this.$$.ctx[32]}set padding(e){this.$$set({padding:e}),Ve()}get color(){return this.$$.ctx[56]}set color(e){this.$$set({color:e}),Ve()}get colors(){return this.$$.ctx[33]}set colors(e){this.$$set({colors:e}),Ve()}get lineWidth(){return this.$$.ctx[34]}set lineWidth(e){this.$$set({lineWidth:e}),Ve()}get interactive(){return this.$$.ctx[35]}set interactive(e){this.$$set({interactive:e}),Ve()}get xPrefix(){return this.$$.ctx[36]}set xPrefix(e){this.$$set({xPrefix:e}),Ve()}get xSuffix(){return this.$$.ctx[37]}set xSuffix(e){this.$$set({xSuffix:e}),Ve()}get yPrefix(){return this.$$.ctx[38]}set yPrefix(e){this.$$set({yPrefix:e}),Ve()}get ySuffix(){return this.$$.ctx[39]}set ySuffix(e){this.$$set({ySuffix:e}),Ve()}get hover(){return this.$$.ctx[40]}set hover(e){this.$$set({hover:e}),Ve()}get hovered(){return this.$$.ctx[0]}set hovered(e){this.$$set({hovered:e}),Ve()}get colorHover(){return this.$$.ctx[41]}set colorHover(e){this.$$set({colorHover:e}),Ve()}get select(){return this.$$.ctx[42]}set select(e){this.$$set({select:e}),Ve()}get selected(){return this.$$.ctx[1]}set selected(e){this.$$set({selected:e}),Ve()}get colorSelect(){return this.$$.ctx[43]}set colorSelect(e){this.$$set({colorSelect:e}),Ve()}get highlighted(){return this.$$.ctx[44]}set highlighted(e){this.$$set({highlighted:e}),Ve()}get colorHighlight(){return this.$$.ctx[45]}set colorHighlight(e){this.$$set({colorHighlight:e}),Ve()}get output(){return this.$$.ctx[46]}set output(e){this.$$set({output:e}),Ve()}}function l1(t,e,i){const n=t.slice();return n[37]=e[i],n[39]=i,n}function c1(t,e,i){const n=t.slice();return n[40]=e[i],n[42]=i,n}function u1(t){let e,i=t[8],n=[];for(let l=0;l<i.length;l+=1)n[l]=f1(l1(t,i,l));return{c(){e=Dr("g");for(let l=0;l<n.length;l+=1)n[l].c();ue(e,"class","bar-group")},m(l,u){Fe(l,e,u);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null)},p(l,u){if(u[0]&534790143){i=l[8];let f;for(f=0;f<i.length;f+=1){const a=l1(l,i,f);n[f]?n[f].p(a,u):(n[f]=f1(a),n[f].c(),n[f].m(e,null))}for(;f<n.length;f+=1)n[f].d(1);n.length=i.length}},d(l){l&&Ee(e),$i(n,l)}}}function h1(t){let e,i,n,l,u,f,a,w,C;function F(...H){return t[30](t[39],t[42],...H)}function E(...H){return t[32](t[39],t[42],...H)}function U(...H){return t[34](t[39],t[42],...H)}return{c(){e=Dr("polygon"),ue(e,"class","bar-rect"),ue(e,"data-id",t[42]),ue(e,"transform",i="translate("+(t[7]=="barcode"||t[7]=="comparison"&&t[39]>0?-t[26]/2:0)+" 0)"),ue(e,"points",n=t[6](t[9](t[40].x0),t[9](t[40].x1),t[40].y0,t[40].y1)),ue(e,"stroke",l=t[10][t[39]][t[42]][t[21]]==t[0]?t[22]:t[10][t[39]][t[42]][t[21]]==t[1]?t[23]:t[24]),ue(e,"stroke-width",u=t[10][t[39]][t[42]][t[21]]==t[0]||t[10][t[39]][t[42]][t[21]]==t[1]||t[4].includes(t[10][t[39]][t[42]][t[21]])?t[25]:0),ue(e,"fill",f=t[5]&&t[10][t[39]][t[42]][t[21]]==t[1]?t[23]:t[5]&&t[4].includes(t[10][t[39]][t[42]][t[21]])?t[24]:t[11].z?t[12](t[10][t[39]][t[42]]):t[13][0]),ue(e,"tabindex",a=t[2]||t[3]?0:-1)},m(H,P){Fe(H,e,P),w||(C=[ki(e,"mouseover",function(){hn(t[2]?F:null)&&(t[2]?F:null).apply(this,arguments)}),ki(e,"mouseleave",function(){hn(t[2]?t[31]:null)&&(t[2]?t[31]:null).apply(this,arguments)}),ki(e,"focus",function(){hn(t[3]?E:null)&&(t[3]?E:null).apply(this,arguments)}),ki(e,"blur",function(){hn(t[3]?t[33]:null)&&(t[3]?t[33]:null).apply(this,arguments)}),ki(e,"click",function(){hn(t[3]?U:null)&&(t[3]?U:null).apply(this,arguments)})],w=!0)},p(H,P){t=H,P[0]&128&&i!==(i="translate("+(t[7]=="barcode"||t[7]=="comparison"&&t[39]>0?-t[26]/2:0)+" 0)")&&ue(e,"transform",i),P[0]&832&&n!==(n=t[6](t[9](t[40].x0),t[9](t[40].x1),t[40].y0,t[40].y1))&&ue(e,"points",n),P[0]&1027&&l!==(l=t[10][t[39]][t[42]][t[21]]==t[0]?t[22]:t[10][t[39]][t[42]][t[21]]==t[1]?t[23]:t[24])&&ue(e,"stroke",l),P[0]&1043&&u!==(u=t[10][t[39]][t[42]][t[21]]==t[0]||t[10][t[39]][t[42]][t[21]]==t[1]||t[4].includes(t[10][t[39]][t[42]][t[21]])?t[25]:0)&&ue(e,"stroke-width",u),P[0]&15410&&f!==(f=t[5]&&t[10][t[39]][t[42]][t[21]]==t[1]?t[23]:t[5]&&t[4].includes(t[10][t[39]][t[42]][t[21]])?t[24]:t[11].z?t[12](t[10][t[39]][t[42]]):t[13][0])&&ue(e,"fill",f),P[0]&12&&a!==(a=t[2]||t[3]?0:-1)&&ue(e,"tabindex",a)},d(H){H&&Ee(e),w=!1,yA(C)}}}function f1(t){let e,i=t[37],n=[];for(let l=0;l<i.length;l+=1)n[l]=h1(c1(t,i,l));return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=hi()},m(l,u){for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(l,u);Fe(l,e,u)},p(l,u){if(u[0]&534790143){i=l[37];let f;for(f=0;f<i.length;f+=1){const a=c1(l,i,f);n[f]?n[f].p(a,u):(n[f]=h1(a),n[f].c(),n[f].m(e.parentNode,e))}for(;f<n.length;f+=1)n[f].d(1);n.length=i.length}},d(l){$i(n,l),l&&Ee(e)}}}function wk(t){let e,i=t[8]&&u1(t);return{c(){i&&i.c(),e=hi()},m(n,l){i&&i.m(n,l),Fe(n,e,l)},p(n,l){n[8]?i?i.p(n,l):(i=u1(n),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:ar,o:ar,d(n){i&&i.d(n),n&&Ee(e)}}}function vk(t,e,i){let n,l,u,f,a,w,C,F,E;const{data:U,xScale:H,zGet:P,xDomain:V,zRange:j,config:Y,custom:ee}=Gi("LayerCake");ct(t,U,At=>i(10,w=At)),ct(t,H,At=>i(9,a=At)),ct(t,P,At=>i(12,F=At)),ct(t,j,At=>i(13,E=At)),ct(t,Y,At=>i(11,C=At)),ct(t,ee,At=>i(29,u=At));const ce=Zc();let{hover:Qe=!1}=e,{hovered:le=null}=e,{select:re=!1}=e,{selected:we=null}=e,{highlighted:Ae=[]}=e,{overlayFill:R=!1}=e,ie=u.coords;ct(t,ie,At=>i(8,f=At));let se=u.idKey,Be=u.colorHover?u.colorHover:"orange",Re=u.colorSelect?u.colorSelect:"black",ht=u.colorHighlight?u.colorHighlight:"black",_t=u.lineWidth?u.lineWidth:2,Me=u.markerWidth?u.markerWidth:2.5;function at(At,Et){Qe&&(i(0,le=Et?Et[se]:null),ce("hover",{id:le,data:Et,event:At}))}function wt(At,Et){re&&(i(1,we=Et?Et[se]:null),ce("select",{id:we,data:Et,event:At}))}const nt=(At,Et,qt)=>at(qt,w[At][Et]),He=At=>at(At,null),tt=(At,Et,qt)=>at(qt,w[At][Et]),Je=At=>at(At,null),ut=(At,Et,qt)=>wt(qt,w[At][Et]);return t.$$set=At=>{"hover"in At&&i(2,Qe=At.hover),"hovered"in At&&i(0,le=At.hovered),"select"in At&&i(3,re=At.select),"selected"in At&&i(1,we=At.selected),"highlighted"in At&&i(4,Ae=At.highlighted),"overlayFill"in At&&i(5,R=At.overlayFill)},t.$$.update=()=>{t.$$.dirty[0]&536870912&&i(7,n=u.mode?u.mode:"default")},i(6,l=(At,Et,qt,Tt)=>(Et=Math.abs(Et-At)<Me?At+Me:Et,`${At},${qt} ${At},${Tt} ${Et},${Tt} ${Et},${qt}`)),[le,we,Qe,re,Ae,R,l,n,f,a,w,C,F,E,U,H,P,j,Y,ee,ie,se,Be,Re,ht,_t,Me,at,wt,u,nt,He,tt,Je,ut]}class Bk extends Nr{constructor(e){super(),Kr(this,e,vk,wk,Lr,{hover:2,hovered:0,select:3,selected:1,highlighted:4,overlayFill:5},null,[-1,-1])}}const xk=t=>({}),d1=t=>({}),bk=t=>({}),p1=t=>({}),Ck=t=>({}),g1=t=>({}),Ek=t=>({}),m1=t=>({}),Fk=t=>({}),_1=t=>({});function y1(t){let e,i;return e=new zg({props:{$$slots:{default:[Uk]},$$scope:{ctx:t}}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&1048576|l[1]&536870912&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function Uk(t){let e;return{c(){e=yr(t[20])},m(i,n){Fe(i,e,n)},p(i,n){n[0]&1048576&&Xi(e,i[20])},d(i){i&&Ee(e)}}}function w1(t){let e,i;return{c(){e=it("h5"),i=yr(t[21]),ue(e,"class","visuallyhidden svelte-1fy6g2i")},m(n,l){Fe(n,e,l),$e(e,i)},p(n,l){l[0]&2097152&&Xi(i,n[21])},d(n){n&&Ee(e)}}}function v1(t){let e,i;return e=new Lg({props:{ticks:t[16],formatTick:t[13],snapTicks:t[24],prefix:t[31],suffix:t[32],textColor:t[17],tickColor:t[18],tickDashed:t[19]}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&65536&&(u.ticks=n[16]),l[0]&8192&&(u.formatTick=n[13]),l[0]&16777216&&(u.snapTicks=n[24]),l[1]&1&&(u.prefix=n[31]),l[1]&2&&(u.suffix=n[32]),l[0]&131072&&(u.textColor=n[17]),l[0]&262144&&(u.tickColor=n[18]),l[0]&524288&&(u.tickDashed=n[19]),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function B1(t){let e,i;return e=new Hg({props:{gridlines:!1,prefix:t[33],suffix:t[34],textColor:t[17],tickColor:t[18],tickDashed:t[19]}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[1]&4&&(u.prefix=n[33]),l[1]&8&&(u.suffix=n[34]),l[0]&131072&&(u.textColor=n[17]),l[0]&262144&&(u.tickColor=n[18]),l[0]&524288&&(u.tickDashed=n[19]),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function Qk(t){let e,i,n,l,u,f=t[14]&&v1(t),a=t[15]&&B1(t);n=new Bk({props:{select:t[38],selected:t[39],hover:t[35],hovered:t[36],highlighted:t[41],overlayFill:t[43]}}),n.$on("hover",t[57]),n.$on("select",t[58]);const w=t[56].svg,C=qr(w,t,t[60],g1);return{c(){f&&f.c(),e=dt(),a&&a.c(),i=dt(),Rt(n.$$.fragment),l=dt(),C&&C.c()},m(F,E){f&&f.m(F,E),Fe(F,e,E),a&&a.m(F,E),Fe(F,i,E),Ht(n,F,E),Fe(F,l,E),C&&C.m(F,E),u=!0},p(F,E){F[14]?f?(f.p(F,E),E[0]&16384&&Ce(f,1)):(f=v1(F),f.c(),Ce(f,1),f.m(e.parentNode,e)):f&&(Rr(),De(f,1,1,()=>{f=null}),Or()),F[15]?a?(a.p(F,E),E[0]&32768&&Ce(a,1)):(a=B1(F),a.c(),Ce(a,1),a.m(i.parentNode,i)):a&&(Rr(),De(a,1,1,()=>{a=null}),Or());const U={};E[1]&128&&(U.select=F[38]),E[1]&256&&(U.selected=F[39]),E[1]&16&&(U.hover=F[35]),E[1]&32&&(U.hovered=F[36]),E[1]&1024&&(U.highlighted=F[41]),E[1]&4096&&(U.overlayFill=F[43]),n.$set(U),C&&C.p&&(!u||E[1]&536870912)&&Jr(C,w,F,F[60],u?jr(w,F[60],E,Ck):Yr(F[60]),g1)},i(F){u||(Ce(f),Ce(a),Ce(n.$$.fragment,F),Ce(C,F),u=!0)},o(F){De(f),De(a),De(n.$$.fragment,F),De(C,F),u=!1},d(F){f&&f.d(F),F&&Ee(e),a&&a.d(F),F&&Ee(i),Pt(n,F),F&&Ee(l),C&&C.d(F)}}}function Ik(t){let e,i,n,l,u,f;e=new Dg({});const a=t[56].back,w=qr(a,t,t[60],m1);l=new Eg({props:{pointerEvents:t[30],$$slots:{default:[Qk]},$$scope:{ctx:t}}});const C=t[56].front,F=qr(C,t,t[60],p1);return{c(){Rt(e.$$.fragment),i=dt(),w&&w.c(),n=dt(),Rt(l.$$.fragment),u=dt(),F&&F.c()},m(E,U){Ht(e,E,U),Fe(E,i,U),w&&w.m(E,U),Fe(E,n,U),Ht(l,E,U),Fe(E,u,U),F&&F.m(E,U),f=!0},p(E,U){w&&w.p&&(!f||U[1]&536870912)&&Jr(w,a,E,E[60],f?jr(a,E[60],U,Ek):Yr(E[60]),m1);const H={};U[0]&1073741824&&(H.pointerEvents=E[30]),U[0]&17817600|U[1]&536876479&&(H.$$scope={dirty:U,ctx:E}),l.$set(H),F&&F.p&&(!f||U[1]&536870912)&&Jr(F,C,E,E[60],f?jr(C,E[60],U,bk):Yr(E[60]),p1)},i(E){f||(Ce(e.$$.fragment,E),Ce(w,E),Ce(l.$$.fragment,E),Ce(F,E),f=!0)},o(E){De(e.$$.fragment,E),De(w,E),De(l.$$.fragment,E),De(F,E),f=!1},d(E){Pt(e,E),E&&Ee(i),w&&w.d(E),E&&Ee(n),Pt(l,E),E&&Ee(u),F&&F.d(E)}}}function x1(t){let e,i;return e=new Pg({props:{domain:t[45],colors:t[27],markerWidth:t[28],horizontal:!1,line:t[25]=="barcode",comparison:t[25]=="comparison"}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[1]&16384&&(u.domain=n[45]),l[0]&134217728&&(u.colors=n[27]),l[0]&268435456&&(u.markerWidth=n[28]),l[0]&33554432&&(u.line=n[25]=="barcode"),l[0]&33554432&&(u.comparison=n[25]=="comparison"),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function b1(t){let e,i;return e=new Rg({props:{$$slots:{default:[Tk]},$$scope:{ctx:t}}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&4194304|l[1]&536870912&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function Tk(t){let e;return{c(){e=yr(t[22])},m(i,n){Fe(i,e,n)},p(i,n){n[0]&4194304&&Xi(e,i[22])},d(i){i&&Ee(e)}}}function C1(t){let e,i;return e=new Og({props:{el:t[46],data:t[0],keys:[t[11],t[9],t[10],t[8]],title:t[20],output:t[44]}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[1]&32768&&(u.el=n[46]),l[0]&1&&(u.data=n[0]),l[0]&3840&&(u.keys=[n[11],n[9],n[10],n[8]]),l[0]&1048576&&(u.title=n[20]),l[1]&8192&&(u.output=n[44]),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function Sk(t){let e,i,n,l,u,f,a,w,C,F,E,U,H,P,V,j=t[20]&&y1(t),Y=t[21]&&w1(t);const ee=t[56].options,ce=qr(ee,t,t[60],_1);f=new Cg({props:{padding:t[26],ssr:t[3],height:t[3]?t[5]:null,width:t[3]?t[4]:null,x:t[8],y:t[9],z:t[10],xDomain:t[49],yDomain:t[48],xScale:typeof t[12]=="function"?t[12]():t[12]=="log"?KA():rs(),yScale:Ip().paddingInner([t[29]]).round(!0),zScale:tu(),zDomain:t[45],zRange:t[27],data:t[47],flatData:t[0],custom:{type:"bar",mode:t[25],idKey:t[11],coords:t[50],markerWidth:t[28],colorSelect:t[40],colorHover:t[37],colorHighlight:t[42],animation:t[6],duration:t[7]},$$slots:{default:[Ik]},$$scope:{ctx:t}}}),C=new Kg({props:{data:t[0],key1:t[9],key2:t[8]}});const Qe=t[56].legend,le=qr(Qe,t,t[60],d1);let re=t[23]&&t[45]&&x1(t),we=t[22]&&b1(t),Ae=t[44]&&C1(t);return{c(){e=it("div"),j&&j.c(),i=dt(),Y&&Y.c(),n=dt(),ce&&ce.c(),l=dt(),u=it("div"),Rt(f.$$.fragment),a=dt(),w=it("div"),Rt(C.$$.fragment),F=dt(),le&&le.c(),E=dt(),re&&re.c(),U=dt(),we&&we.c(),H=dt(),Ae&&Ae.c(),P=hi(),ue(u,"class","chart-container svelte-1fy6g2i"),bt(u,"height",typeof t[2]=="number"?`${t[2]}px`:t[2]?t[2]:t[48]?`${t[26].top+t[26].bottom+t[1]*t[48].length}px`:"300px"),ue(u,"aria-hidden","true"),ue(w,"class","visuallyhidden svelte-1fy6g2i")},m(R,ie){Fe(R,e,ie),j&&j.m(e,null),$e(e,i),Y&&Y.m(e,null),$e(e,n),ce&&ce.m(e,null),$e(e,l),$e(e,u),Ht(f,u,null),$e(e,a),$e(e,w),Ht(C,w,null),$e(e,F),le&&le.m(e,null),$e(e,E),re&&re.m(e,null),$e(e,U),we&&we.m(e,null),t[59](e),Fe(R,H,ie),Ae&&Ae.m(R,ie),Fe(R,P,ie),V=!0},p(R,ie){R[20]?j?(j.p(R,ie),ie[0]&1048576&&Ce(j,1)):(j=y1(R),j.c(),Ce(j,1),j.m(e,i)):j&&(Rr(),De(j,1,1,()=>{j=null}),Or()),R[21]?Y?Y.p(R,ie):(Y=w1(R),Y.c(),Y.m(e,n)):Y&&(Y.d(1),Y=null),ce&&ce.p&&(!V||ie[1]&536870912)&&Jr(ce,ee,R,R[60],V?jr(ee,R[60],ie,Fk):Yr(R[60]),_1);const se={};ie[0]&67108864&&(se.padding=R[26]),ie[0]&8&&(se.ssr=R[3]),ie[0]&40&&(se.height=R[3]?R[5]:null),ie[0]&24&&(se.width=R[3]?R[4]:null),ie[0]&256&&(se.x=R[8]),ie[0]&512&&(se.y=R[9]),ie[0]&1024&&(se.z=R[10]),ie[1]&262144&&(se.xDomain=R[49]),ie[1]&131072&&(se.yDomain=R[48]),ie[0]&4096&&(se.xScale=typeof R[12]=="function"?R[12]():R[12]=="log"?KA():rs()),ie[0]&536870912&&(se.yScale=Ip().paddingInner([R[29]]).round(!0)),ie[1]&16384&&(se.zDomain=R[45]),ie[0]&134217728&&(se.zRange=R[27]),ie[1]&65536&&(se.data=R[47]),ie[0]&1&&(se.flatData=R[0]),ie[0]&301992128|ie[1]&2624&&(se.custom={type:"bar",mode:R[25],idKey:R[11],coords:R[50],markerWidth:R[28],colorSelect:R[40],colorHover:R[37],colorHighlight:R[42],animation:R[6],duration:R[7]}),ie[0]&1091559424|ie[1]&536876479&&(se.$$scope={dirty:ie,ctx:R}),f.$set(se),(!V||ie[0]&67108870|ie[1]&131072)&&bt(u,"height",typeof R[2]=="number"?`${R[2]}px`:R[2]?R[2]:R[48]?`${R[26].top+R[26].bottom+R[1]*R[48].length}px`:"300px");const Be={};ie[0]&1&&(Be.data=R[0]),ie[0]&512&&(Be.key1=R[9]),ie[0]&256&&(Be.key2=R[8]),C.$set(Be),le&&le.p&&(!V||ie[1]&536870912)&&Jr(le,Qe,R,R[60],V?jr(Qe,R[60],ie,xk):Yr(R[60]),d1),R[23]&&R[45]?re?(re.p(R,ie),ie[0]&8388608|ie[1]&16384&&Ce(re,1)):(re=x1(R),re.c(),Ce(re,1),re.m(e,U)):re&&(Rr(),De(re,1,1,()=>{re=null}),Or()),R[22]?we?(we.p(R,ie),ie[0]&4194304&&Ce(we,1)):(we=b1(R),we.c(),Ce(we,1),we.m(e,null)):we&&(Rr(),De(we,1,1,()=>{we=null}),Or()),R[44]?Ae?(Ae.p(R,ie),ie[1]&8192&&Ce(Ae,1)):(Ae=C1(R),Ae.c(),Ce(Ae,1),Ae.m(P.parentNode,P)):Ae&&(Rr(),De(Ae,1,1,()=>{Ae=null}),Or())},i(R){V||(Ce(j),Ce(ce,R),Ce(f.$$.fragment,R),Ce(C.$$.fragment,R),Ce(le,R),Ce(re),Ce(we),Ce(Ae),V=!0)},o(R){De(j),De(ce,R),De(f.$$.fragment,R),De(C.$$.fragment,R),De(le,R),De(re),De(we),De(Ae),V=!1},d(R){R&&Ee(e),j&&j.d(),Y&&Y.d(),ce&&ce.d(R),Pt(f),Pt(C),le&&le.d(R),re&&re.d(),we&&we.d(),t[59](null),R&&Ee(H),Ae&&Ae.d(R),R&&Ee(P)}}}function kk(t,e,i){let n,l,u,f,{$$slots:a={},$$scope:w}=e,{data:C}=e,{barHeight:F=40}=e,{height:E=null}=e,{ssr:U=!1}=e,{ssrWidth:H=300}=e,{ssrHeight:P=typeof E=="number"?E:300}=e,{animation:V=!0}=e,{duration:j=800}=e,{xKey:Y="x"}=e,{yKey:ee="y"}=e,{zKey:ce=null}=e,{idKey:Qe=ee}=e,{xScale:le="linear"}=e,{xFormatTick:re=mf}=e,{xMax:we=null}=e,{xMin:Ae=null}=e,{xAxis:R=!0}=e,{yAxis:ie=!0}=e,{xTicks:se=4}=e,{zDomain:Be=null}=e,{textColor:Re="#666"}=e,{tickColor:ht="#ccc"}=e,{tickDashed:_t=!1}=e,{title:Me=null}=e,{alt:at=null}=e,{footer:wt=null}=e,{legend:nt=!1}=e,{snapTicks:He=!1}=e,{mode:tt="default"}=e,{padding:Je={top:0,bottom:20,left:35,right:0}}=e,{color:ut=null}=e,{colors:At=ut?[ut]:["#206095","#A8BD3A","#003C57","#27A0CC","#118C7B","#F66068","#746CB1","#22D0B6","lightgrey"]}=e,{markerWidth:Et=2.5}=e,{spacing:qt=.2}=e,{interactive:Tt=!0}=e,{xPrefix:tr=""}=e,{xSuffix:ve=""}=e,{yPrefix:ft=""}=e,{ySuffix:Ft=""}=e,{hover:qe=!1}=e,{hovered:Gt=null}=e,{colorHover:xe="orange"}=e,{select:Ge=!1}=e,{selected:nr=null}=e,{colorSelect:mr="black"}=e,{highlighted:ti=[]}=e,{colorHighlight:er="black"}=e,{overlayFill:Vr=!1}=e,{output:bi=null}=e,Ai;const mi={duration:j,easing:Fg},oi=da(void 0,mi),ai=(Xe,Hr,Gr)=>Gr.indexOf(Xe)==Hr;function fi(Xe,Hr){let Gr=[];return Hr.forEach(me=>{let Ot=0,Kt=0;Xe.filter(wr=>wr[ee]==me).map(wr=>wr[Y]).forEach(wr=>{wr>=0?Ot+=wr:Kt+=wr}),Ot!=0&&Gr.push(Ot),Kt!=0&&Gr.push(Kt)}),Gr}function li(Xe,Hr,Gr,me){let Ot=Hr=="stacked"&&ce?fi(Xe,Xe.map(wr=>wr[ee]).filter(ai)):Xe.map(wr=>wr[Gr]),Kt=Ae||(Math.min(...Ot)>0?0:Math.min(...Ot)),Ir=me||(Math.max(...Ot)<0?0:Math.max(...Ot));return[Kt,Ir]}function Ze(Xe,Hr,Gr,me){let Ot=li(Xe,Hr,Gr,me);(Ot[0]!=mt[0]||Ot[1]!=mt[1])&&(_i.set(Ot,{duration:V?j:0}),mt=Ot)}let mt=li(C,tt,Y,we);const _i=da(mt,mi);ct(t,_i,Xe=>i(49,f=Xe));function ci(Xe){yl.call(this,t,Xe)}function Ar(Xe){yl.call(this,t,Xe)}function yi(Xe){zi[Xe?"unshift":"push"](()=>{Ai=Xe,i(46,Ai)})}return t.$$set=Xe=>{"data"in Xe&&i(0,C=Xe.data),"barHeight"in Xe&&i(1,F=Xe.barHeight),"height"in Xe&&i(2,E=Xe.height),"ssr"in Xe&&i(3,U=Xe.ssr),"ssrWidth"in Xe&&i(4,H=Xe.ssrWidth),"ssrHeight"in Xe&&i(5,P=Xe.ssrHeight),"animation"in Xe&&i(6,V=Xe.animation),"duration"in Xe&&i(7,j=Xe.duration),"xKey"in Xe&&i(8,Y=Xe.xKey),"yKey"in Xe&&i(9,ee=Xe.yKey),"zKey"in Xe&&i(10,ce=Xe.zKey),"idKey"in Xe&&i(11,Qe=Xe.idKey),"xScale"in Xe&&i(12,le=Xe.xScale),"xFormatTick"in Xe&&i(13,re=Xe.xFormatTick),"xMax"in Xe&&i(52,we=Xe.xMax),"xMin"in Xe&&i(53,Ae=Xe.xMin),"xAxis"in Xe&&i(14,R=Xe.xAxis),"yAxis"in Xe&&i(15,ie=Xe.yAxis),"xTicks"in Xe&&i(16,se=Xe.xTicks),"zDomain"in Xe&&i(54,Be=Xe.zDomain),"textColor"in Xe&&i(17,Re=Xe.textColor),"tickColor"in Xe&&i(18,ht=Xe.tickColor),"tickDashed"in Xe&&i(19,_t=Xe.tickDashed),"title"in Xe&&i(20,Me=Xe.title),"alt"in Xe&&i(21,at=Xe.alt),"footer"in Xe&&i(22,wt=Xe.footer),"legend"in Xe&&i(23,nt=Xe.legend),"snapTicks"in Xe&&i(24,He=Xe.snapTicks),"mode"in Xe&&i(25,tt=Xe.mode),"padding"in Xe&&i(26,Je=Xe.padding),"color"in Xe&&i(55,ut=Xe.color),"colors"in Xe&&i(27,At=Xe.colors),"markerWidth"in Xe&&i(28,Et=Xe.markerWidth),"spacing"in Xe&&i(29,qt=Xe.spacing),"interactive"in Xe&&i(30,Tt=Xe.interactive),"xPrefix"in Xe&&i(31,tr=Xe.xPrefix),"xSuffix"in Xe&&i(32,ve=Xe.xSuffix),"yPrefix"in Xe&&i(33,ft=Xe.yPrefix),"ySuffix"in Xe&&i(34,Ft=Xe.ySuffix),"hover"in Xe&&i(35,qe=Xe.hover),"hovered"in Xe&&i(36,Gt=Xe.hovered),"colorHover"in Xe&&i(37,xe=Xe.colorHover),"select"in Xe&&i(38,Ge=Xe.select),"selected"in Xe&&i(39,nr=Xe.selected),"colorSelect"in Xe&&i(40,mr=Xe.colorSelect),"highlighted"in Xe&&i(41,ti=Xe.highlighted),"colorHighlight"in Xe&&i(42,er=Xe.colorHighlight),"overlayFill"in Xe&&i(43,Vr=Xe.overlayFill),"output"in Xe&&i(44,bi=Xe.output),"$$scope"in Xe&&i(60,w=Xe.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&33554689|t.$$.dirty[1]&2097152&&Ze(C,tt,Y,we),t.$$.dirty[0]&513&&i(48,n=C.map(Xe=>Xe[ee]).filter(ai)),t.$$.dirty[0]&1025|t.$$.dirty[1]&8388608&&i(45,l=Array.isArray(Be)?Be:ce&&typeof Be=="function"?C.map(Xe=>Xe[ce]).filter(ai).sort(Be):ce?C.map(Xe=>Xe[ce]).filter(ai):null),t.$$.dirty[0]&1025|t.$$.dirty[1]&16384&&i(47,u=lB(C,l,ce))},[C,F,E,U,H,P,V,j,Y,ee,ce,Qe,le,re,R,ie,se,Re,ht,_t,Me,at,wt,nt,He,tt,Je,At,Et,qt,Tt,tr,ve,ft,Ft,qe,Gt,xe,Ge,nr,mr,ti,er,Vr,bi,l,Ai,u,n,f,oi,_i,we,Ae,Be,ut,a,ci,Ar,yi,w]}class Mk extends Nr{constructor(e){super(),Kr(this,e,kk,Sk,Lr,{data:0,barHeight:1,height:2,ssr:3,ssrWidth:4,ssrHeight:5,animation:6,duration:7,xKey:8,yKey:9,zKey:10,idKey:11,xScale:12,xFormatTick:13,xMax:52,xMin:53,xAxis:14,yAxis:15,xTicks:16,zDomain:54,textColor:17,tickColor:18,tickDashed:19,title:20,alt:21,footer:22,legend:23,snapTicks:24,mode:25,padding:26,color:55,colors:27,markerWidth:28,spacing:29,interactive:30,xPrefix:31,xSuffix:32,yPrefix:33,ySuffix:34,hover:35,hovered:36,colorHover:37,select:38,selected:39,colorSelect:40,highlighted:41,colorHighlight:42,overlayFill:43,output:44},null,[-1,-1,-1])}get data(){return this.$$.ctx[0]}set data(e){this.$$set({data:e}),Ve()}get barHeight(){return this.$$.ctx[1]}set barHeight(e){this.$$set({barHeight:e}),Ve()}get height(){return this.$$.ctx[2]}set height(e){this.$$set({height:e}),Ve()}get ssr(){return this.$$.ctx[3]}set ssr(e){this.$$set({ssr:e}),Ve()}get ssrWidth(){return this.$$.ctx[4]}set ssrWidth(e){this.$$set({ssrWidth:e}),Ve()}get ssrHeight(){return this.$$.ctx[5]}set ssrHeight(e){this.$$set({ssrHeight:e}),Ve()}get animation(){return this.$$.ctx[6]}set animation(e){this.$$set({animation:e}),Ve()}get duration(){return this.$$.ctx[7]}set duration(e){this.$$set({duration:e}),Ve()}get xKey(){return this.$$.ctx[8]}set xKey(e){this.$$set({xKey:e}),Ve()}get yKey(){return this.$$.ctx[9]}set yKey(e){this.$$set({yKey:e}),Ve()}get zKey(){return this.$$.ctx[10]}set zKey(e){this.$$set({zKey:e}),Ve()}get idKey(){return this.$$.ctx[11]}set idKey(e){this.$$set({idKey:e}),Ve()}get xScale(){return this.$$.ctx[12]}set xScale(e){this.$$set({xScale:e}),Ve()}get xFormatTick(){return this.$$.ctx[13]}set xFormatTick(e){this.$$set({xFormatTick:e}),Ve()}get xMax(){return this.$$.ctx[52]}set xMax(e){this.$$set({xMax:e}),Ve()}get xMin(){return this.$$.ctx[53]}set xMin(e){this.$$set({xMin:e}),Ve()}get xAxis(){return this.$$.ctx[14]}set xAxis(e){this.$$set({xAxis:e}),Ve()}get yAxis(){return this.$$.ctx[15]}set yAxis(e){this.$$set({yAxis:e}),Ve()}get xTicks(){return this.$$.ctx[16]}set xTicks(e){this.$$set({xTicks:e}),Ve()}get zDomain(){return this.$$.ctx[54]}set zDomain(e){this.$$set({zDomain:e}),Ve()}get textColor(){return this.$$.ctx[17]}set textColor(e){this.$$set({textColor:e}),Ve()}get tickColor(){return this.$$.ctx[18]}set tickColor(e){this.$$set({tickColor:e}),Ve()}get tickDashed(){return this.$$.ctx[19]}set tickDashed(e){this.$$set({tickDashed:e}),Ve()}get title(){return this.$$.ctx[20]}set title(e){this.$$set({title:e}),Ve()}get alt(){return this.$$.ctx[21]}set alt(e){this.$$set({alt:e}),Ve()}get footer(){return this.$$.ctx[22]}set footer(e){this.$$set({footer:e}),Ve()}get legend(){return this.$$.ctx[23]}set legend(e){this.$$set({legend:e}),Ve()}get snapTicks(){return this.$$.ctx[24]}set snapTicks(e){this.$$set({snapTicks:e}),Ve()}get mode(){return this.$$.ctx[25]}set mode(e){this.$$set({mode:e}),Ve()}get padding(){return this.$$.ctx[26]}set padding(e){this.$$set({padding:e}),Ve()}get color(){return this.$$.ctx[55]}set color(e){this.$$set({color:e}),Ve()}get colors(){return this.$$.ctx[27]}set colors(e){this.$$set({colors:e}),Ve()}get markerWidth(){return this.$$.ctx[28]}set markerWidth(e){this.$$set({markerWidth:e}),Ve()}get spacing(){return this.$$.ctx[29]}set spacing(e){this.$$set({spacing:e}),Ve()}get interactive(){return this.$$.ctx[30]}set interactive(e){this.$$set({interactive:e}),Ve()}get xPrefix(){return this.$$.ctx[31]}set xPrefix(e){this.$$set({xPrefix:e}),Ve()}get xSuffix(){return this.$$.ctx[32]}set xSuffix(e){this.$$set({xSuffix:e}),Ve()}get yPrefix(){return this.$$.ctx[33]}set yPrefix(e){this.$$set({yPrefix:e}),Ve()}get ySuffix(){return this.$$.ctx[34]}set ySuffix(e){this.$$set({ySuffix:e}),Ve()}get hover(){return this.$$.ctx[35]}set hover(e){this.$$set({hover:e}),Ve()}get hovered(){return this.$$.ctx[36]}set hovered(e){this.$$set({hovered:e}),Ve()}get colorHover(){return this.$$.ctx[37]}set colorHover(e){this.$$set({colorHover:e}),Ve()}get select(){return this.$$.ctx[38]}set select(e){this.$$set({select:e}),Ve()}get selected(){return this.$$.ctx[39]}set selected(e){this.$$set({selected:e}),Ve()}get colorSelect(){return this.$$.ctx[40]}set colorSelect(e){this.$$set({colorSelect:e}),Ve()}get highlighted(){return this.$$.ctx[41]}set highlighted(e){this.$$set({highlighted:e}),Ve()}get colorHighlight(){return this.$$.ctx[42]}set colorHighlight(e){this.$$set({colorHighlight:e}),Ve()}get overlayFill(){return this.$$.ctx[43]}set overlayFill(e){this.$$set({overlayFill:e}),Ve()}get output(){return this.$$.ctx[44]}set output(e){this.$$set({output:e}),Ve()}}function E1(t,e,i){const n=t.slice();return n[25]=e[i],n[27]=i,n}function F1(t,e,i){const n=t.slice();return n[25]=e[i],n[27]=i,n}function U1(t){let e,i,n=t[4],l=[];for(let f=0;f<n.length;f+=1)l[f]=Q1(F1(t,n,f));let u=t[19]&&(t[0]||t[1]||t[2][0])&&I1(t);return{c(){e=Dr("g");for(let f=0;f<l.length;f+=1)l[f].c();i=hi(),u&&u.c(),ue(e,"class","scatter-group")},m(f,a){Fe(f,e,a);for(let w=0;w<l.length;w+=1)l[w]&&l[w].m(e,null);$e(e,i),u&&u.m(e,null)},p(f,a){if(a&2032){n=f[4];let w;for(w=0;w<n.length;w+=1){const C=F1(f,n,w);l[w]?l[w].p(C,a):(l[w]=Q1(C),l[w].c(),l[w].m(e,i))}for(;w<l.length;w+=1)l[w].d(1);l.length=n.length}f[19]&&(f[0]||f[1]||f[2][0])?u?u.p(f,a):(u=I1(f),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(f){f&&Ee(e),$i(l,f),u&&u.d()}}}function Q1(t){let e,i,n,l,u;return{c(){e=Dr("circle"),ue(e,"class",""),ue(e,"cx",i=t[5](t[25].x)),ue(e,"cy",n=t[6](t[25].y)),ue(e,"r",l=t[25].r),ue(e,"fill",u=t[7]?t[8](t[9][t[27]]):t[10][0])},m(f,a){Fe(f,e,a)},p(f,a){a&48&&i!==(i=f[5](f[25].x))&&ue(e,"cx",i),a&80&&n!==(n=f[6](f[25].y))&&ue(e,"cy",n),a&16&&l!==(l=f[25].r)&&ue(e,"r",l),a&1920&&u!==(u=f[7]?f[8](f[9][f[27]]):f[10][0])&&ue(e,"fill",u)},d(f){f&&Ee(e)}}}function I1(t){let e,i=t[4],n=[];for(let l=0;l<i.length;l+=1)n[l]=S1(E1(t,i,l));return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=hi()},m(l,u){for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(l,u);Fe(l,e,u)},p(l,u){if(u&16253567){i=l[4];let f;for(f=0;f<i.length;f+=1){const a=E1(l,i,f);n[f]?n[f].p(a,u):(n[f]=S1(a),n[f].c(),n[f].m(e.parentNode,e))}for(;f<n.length;f+=1)n[f].d(1);n.length=i.length}},d(l){$i(n,l),l&&Ee(e)}}}function T1(t){let e,i,n,l,u,f,a;return{c(){e=Dr("circle"),ue(e,"class",""),ue(e,"cx",i=t[5](t[25].x)),ue(e,"cy",n=t[6](t[25].y)),ue(e,"r",l=t[25].r),ue(e,"fill",u=t[3]&&t[9][t[27]][t[19]]==t[1]?t[21]:t[3]&t[2].includes(t[9][t[27]][t[19]])?t[22]:"none"),ue(e,"stroke",f=t[9][t[27]][t[19]]==t[0]?t[20]:t[9][t[27]][t[19]]==t[1]?t[21]:t[22]),ue(e,"stroke-width",a=t[9][t[27]][t[19]]==t[0]||t[9][t[27]][t[19]]==t[1]||t[2].includes(t[9][t[27]][t[19]])?t[23]:0)},m(w,C){Fe(w,e,C)},p(w,C){C&48&&i!==(i=w[5](w[25].x))&&ue(e,"cx",i),C&80&&n!==(n=w[6](w[25].y))&&ue(e,"cy",n),C&16&&l!==(l=w[25].r)&&ue(e,"r",l),C&526&&u!==(u=w[3]&&w[9][w[27]][w[19]]==w[1]?w[21]:w[3]&w[2].includes(w[9][w[27]][w[19]])?w[22]:"none")&&ue(e,"fill",u),C&515&&f!==(f=w[9][w[27]][w[19]]==w[0]?w[20]:w[9][w[27]][w[19]]==w[1]?w[21]:w[22])&&ue(e,"stroke",f),C&519&&a!==(a=w[9][w[27]][w[19]]==w[0]||w[9][w[27]][w[19]]==w[1]||w[2].includes(w[9][w[27]][w[19]])?w[23]:0)&&ue(e,"stroke-width",a)},d(w){w&&Ee(e)}}}function S1(t){let e=[...t[2],t[1],t[0]].includes(t[9][t[27]][t[19]]),i,n=e&&T1(t);return{c(){n&&n.c(),i=hi()},m(l,u){n&&n.m(l,u),Fe(l,i,u)},p(l,u){u&519&&(e=[...l[2],l[1],l[0]].includes(l[9][l[27]][l[19]])),e?n?n.p(l,u):(n=T1(l),n.c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},d(l){n&&n.d(l),l&&Ee(i)}}}function Dk(t){let e,i=t[4]&&U1(t);return{c(){i&&i.c(),e=hi()},m(n,l){i&&i.m(n,l),Fe(n,e,l)},p(n,[l]){n[4]?i?i.p(n,l):(i=U1(n),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:ar,o:ar,d(n){i&&i.d(n),n&&Ee(e)}}}function Lk(t,e,i){let n,l,u,f,a,w,C,F;const{data:E,z:U,xScale:H,yScale:P,zGet:V,zRange:j,custom:Y}=Gi("LayerCake");ct(t,E,Be=>i(9,C=Be)),ct(t,U,Be=>i(7,a=Be)),ct(t,H,Be=>i(5,u=Be)),ct(t,P,Be=>i(6,f=Be)),ct(t,V,Be=>i(8,w=Be)),ct(t,j,Be=>i(10,F=Be)),ct(t,Y,Be=>i(24,n=Be));let{hovered:ee=null}=e,{selected:ce=null}=e,{highlighted:Qe=[]}=e,{overlayFill:le=!1}=e,re=n.coords;ct(t,re,Be=>i(4,l=Be));let we=n.idKey,Ae=n.colorHover?n.colorHover:"orange",R=n.colorSelect?n.colorSelect:"black",ie=n.colorHighlight?n.colorHighlight:"black",se=n.lineWidth?n.lineWidth:2;return t.$$set=Be=>{"hovered"in Be&&i(0,ee=Be.hovered),"selected"in Be&&i(1,ce=Be.selected),"highlighted"in Be&&i(2,Qe=Be.highlighted),"overlayFill"in Be&&i(3,le=Be.overlayFill)},[ee,ce,Qe,le,l,u,f,a,w,C,F,E,U,H,P,V,j,Y,re,we,Ae,R,ie,se]}class Hk extends Nr{constructor(e){super(),Kr(this,e,Lk,Dk,Lr,{hovered:0,selected:1,highlighted:2,overlayFill:3})}}const XA=11102230246251565e-32,Un=134217729,Pk=(3+8*XA)*XA;function _p(t,e,i,n,l){let u,f,a,w,C=e[0],F=n[0],E=0,U=0;F>C==F>-C?(u=C,C=e[++E]):(u=F,F=n[++U]);let H=0;if(E<t&&U<i)for(F>C==F>-C?(f=C+u,a=u-(f-C),C=e[++E]):(f=F+u,a=u-(f-F),F=n[++U]),u=f,a!==0&&(l[H++]=a);E<t&&U<i;)F>C==F>-C?(f=u+C,w=f-u,a=u-(f-w)+(C-w),C=e[++E]):(f=u+F,w=f-u,a=u-(f-w)+(F-w),F=n[++U]),u=f,a!==0&&(l[H++]=a);for(;E<t;)f=u+C,w=f-u,a=u-(f-w)+(C-w),C=e[++E],u=f,a!==0&&(l[H++]=a);for(;U<i;)f=u+F,w=f-u,a=u-(f-w)+(F-w),F=n[++U],u=f,a!==0&&(l[H++]=a);return(u!==0||H===0)&&(l[H++]=u),H}function zk(t,e){let i=e[0];for(let n=1;n<t;n++)i+=e[n];return i}function Au(t){return new Float64Array(t)}const Rk=(3+16*XA)*XA,Ok=(2+12*XA)*XA,Kk=(9+64*XA)*XA*XA,il=Au(4),k1=Au(8),M1=Au(12),D1=Au(16),Kn=Au(4);function Nk(t,e,i,n,l,u,f){let a,w,C,F,E,U,H,P,V,j,Y,ee,ce,Qe,le,re,we,Ae;const R=t-l,ie=i-l,se=e-u,Be=n-u;Qe=R*Be,U=Un*R,H=U-(U-R),P=R-H,U=Un*Be,V=U-(U-Be),j=Be-V,le=P*j-(Qe-H*V-P*V-H*j),re=se*ie,U=Un*se,H=U-(U-se),P=se-H,U=Un*ie,V=U-(U-ie),j=ie-V,we=P*j-(re-H*V-P*V-H*j),Y=le-we,E=le-Y,il[0]=le-(Y+E)+(E-we),ee=Qe+Y,E=ee-Qe,ce=Qe-(ee-E)+(Y-E),Y=ce-re,E=ce-Y,il[1]=ce-(Y+E)+(E-re),Ae=ee+Y,E=Ae-ee,il[2]=ee-(Ae-E)+(Y-E),il[3]=Ae;let Re=zk(4,il),ht=Ok*f;if(Re>=ht||-Re>=ht||(E=t-R,a=t-(R+E)+(E-l),E=i-ie,C=i-(ie+E)+(E-l),E=e-se,w=e-(se+E)+(E-u),E=n-Be,F=n-(Be+E)+(E-u),a===0&&w===0&&C===0&&F===0)||(ht=Kk*f+Pk*Math.abs(Re),Re+=R*F+Be*a-(se*C+ie*w),Re>=ht||-Re>=ht))return Re;Qe=a*Be,U=Un*a,H=U-(U-a),P=a-H,U=Un*Be,V=U-(U-Be),j=Be-V,le=P*j-(Qe-H*V-P*V-H*j),re=w*ie,U=Un*w,H=U-(U-w),P=w-H,U=Un*ie,V=U-(U-ie),j=ie-V,we=P*j-(re-H*V-P*V-H*j),Y=le-we,E=le-Y,Kn[0]=le-(Y+E)+(E-we),ee=Qe+Y,E=ee-Qe,ce=Qe-(ee-E)+(Y-E),Y=ce-re,E=ce-Y,Kn[1]=ce-(Y+E)+(E-re),Ae=ee+Y,E=Ae-ee,Kn[2]=ee-(Ae-E)+(Y-E),Kn[3]=Ae;const _t=_p(4,il,4,Kn,k1);Qe=R*F,U=Un*R,H=U-(U-R),P=R-H,U=Un*F,V=U-(U-F),j=F-V,le=P*j-(Qe-H*V-P*V-H*j),re=se*C,U=Un*se,H=U-(U-se),P=se-H,U=Un*C,V=U-(U-C),j=C-V,we=P*j-(re-H*V-P*V-H*j),Y=le-we,E=le-Y,Kn[0]=le-(Y+E)+(E-we),ee=Qe+Y,E=ee-Qe,ce=Qe-(ee-E)+(Y-E),Y=ce-re,E=ce-Y,Kn[1]=ce-(Y+E)+(E-re),Ae=ee+Y,E=Ae-ee,Kn[2]=ee-(Ae-E)+(Y-E),Kn[3]=Ae;const Me=_p(_t,k1,4,Kn,M1);Qe=a*F,U=Un*a,H=U-(U-a),P=a-H,U=Un*F,V=U-(U-F),j=F-V,le=P*j-(Qe-H*V-P*V-H*j),re=w*C,U=Un*w,H=U-(U-w),P=w-H,U=Un*C,V=U-(U-C),j=C-V,we=P*j-(re-H*V-P*V-H*j),Y=le-we,E=le-Y,Kn[0]=le-(Y+E)+(E-we),ee=Qe+Y,E=ee-Qe,ce=Qe-(ee-E)+(Y-E),Y=ce-re,E=ce-Y,Kn[1]=ce-(Y+E)+(E-re),Ae=ee+Y,E=Ae-ee,Kn[2]=ee-(Ae-E)+(Y-E),Kn[3]=Ae;const at=_p(Me,M1,4,Kn,D1);return D1[at-1]}function Hh(t,e,i,n,l,u){const f=(e-u)*(i-l),a=(t-l)*(n-u),w=f-a;if(f===0||a===0||f>0!=a>0)return w;const C=Math.abs(f+a);return Math.abs(w)>=Rk*C?w:-Nk(t,e,i,n,l,u,C)}const L1=Math.pow(2,-52),Ph=new Uint32Array(512);class _f{static from(e,i=Wk,n=qk){const l=e.length,u=new Float64Array(l*2);for(let f=0;f<l;f++){const a=e[f];u[2*f]=i(a),u[2*f+1]=n(a)}return new _f(u)}constructor(e){const i=e.length>>1;if(i>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*i-5,0);this._triangles=new Uint32Array(n*3),this._halfedges=new Int32Array(n*3),this._hashSize=Math.ceil(Math.sqrt(i)),this._hullPrev=new Uint32Array(i),this._hullNext=new Uint32Array(i),this._hullTri=new Uint32Array(i),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(i),this._dists=new Float64Array(i),this.update()}update(){const{coords:e,_hullPrev:i,_hullNext:n,_hullTri:l,_hullHash:u}=this,f=e.length>>1;let a=1/0,w=1/0,C=-1/0,F=-1/0;for(let ie=0;ie<f;ie++){const se=e[2*ie],Be=e[2*ie+1];se<a&&(a=se),Be<w&&(w=Be),se>C&&(C=se),Be>F&&(F=Be),this._ids[ie]=ie}const E=(a+C)/2,U=(w+F)/2;let H=1/0,P,V,j;for(let ie=0;ie<f;ie++){const se=yp(E,U,e[2*ie],e[2*ie+1]);se<H&&(P=ie,H=se)}const Y=e[2*P],ee=e[2*P+1];H=1/0;for(let ie=0;ie<f;ie++){if(ie===P)continue;const se=yp(Y,ee,e[2*ie],e[2*ie+1]);se<H&&se>0&&(V=ie,H=se)}let ce=e[2*V],Qe=e[2*V+1],le=1/0;for(let ie=0;ie<f;ie++){if(ie===P||ie===V)continue;const se=Xk(Y,ee,ce,Qe,e[2*ie],e[2*ie+1]);se<le&&(j=ie,le=se)}let re=e[2*j],we=e[2*j+1];if(le===1/0){for(let Be=0;Be<f;Be++)this._dists[Be]=e[2*Be]-e[0]||e[2*Be+1]-e[1];hl(this._ids,this._dists,0,f-1);const ie=new Uint32Array(f);let se=0;for(let Be=0,Re=-1/0;Be<f;Be++){const ht=this._ids[Be];this._dists[ht]>Re&&(ie[se++]=ht,Re=this._dists[ht])}this.hull=ie.subarray(0,se),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Hh(Y,ee,ce,Qe,re,we)<0){const ie=V,se=ce,Be=Qe;V=j,ce=re,Qe=we,j=ie,re=se,we=Be}const Ae=Zk(Y,ee,ce,Qe,re,we);this._cx=Ae.x,this._cy=Ae.y;for(let ie=0;ie<f;ie++)this._dists[ie]=yp(e[2*ie],e[2*ie+1],Ae.x,Ae.y);hl(this._ids,this._dists,0,f-1),this._hullStart=P;let R=3;n[P]=i[j]=V,n[V]=i[P]=j,n[j]=i[V]=P,l[P]=0,l[V]=1,l[j]=2,u.fill(-1),u[this._hashKey(Y,ee)]=P,u[this._hashKey(ce,Qe)]=V,u[this._hashKey(re,we)]=j,this.trianglesLen=0,this._addTriangle(P,V,j,-1,-1,-1);for(let ie=0,se,Be;ie<this._ids.length;ie++){const Re=this._ids[ie],ht=e[2*Re],_t=e[2*Re+1];if(ie>0&&Math.abs(ht-se)<=L1&&Math.abs(_t-Be)<=L1||(se=ht,Be=_t,Re===P||Re===V||Re===j))continue;let Me=0;for(let tt=0,Je=this._hashKey(ht,_t);tt<this._hashSize&&(Me=u[(Je+tt)%this._hashSize],!(Me!==-1&&Me!==n[Me]));tt++);Me=i[Me];let at=Me,wt;for(;wt=n[at],Hh(ht,_t,e[2*at],e[2*at+1],e[2*wt],e[2*wt+1])>=0;)if(at=wt,at===Me){at=-1;break}if(at===-1)continue;let nt=this._addTriangle(at,Re,n[at],-1,-1,l[at]);l[Re]=this._legalize(nt+2),l[at]=nt,R++;let He=n[at];for(;wt=n[He],Hh(ht,_t,e[2*He],e[2*He+1],e[2*wt],e[2*wt+1])<0;)nt=this._addTriangle(He,Re,wt,l[Re],-1,l[He]),l[Re]=this._legalize(nt+2),n[He]=He,R--,He=wt;if(at===Me)for(;wt=i[at],Hh(ht,_t,e[2*wt],e[2*wt+1],e[2*at],e[2*at+1])<0;)nt=this._addTriangle(wt,Re,at,-1,l[at],l[wt]),this._legalize(nt+2),l[wt]=nt,n[at]=at,R--,at=wt;this._hullStart=i[Re]=at,n[at]=i[He]=Re,n[Re]=He,u[this._hashKey(ht,_t)]=Re,u[this._hashKey(e[2*at],e[2*at+1])]=at}this.hull=new Uint32Array(R);for(let ie=0,se=this._hullStart;ie<R;ie++)this.hull[ie]=se,se=n[se];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,i){return Math.floor(Vk(e-this._cx,i-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:i,_halfedges:n,coords:l}=this;let u=0,f=0;for(;;){const a=n[e],w=e-e%3;if(f=w+(e+2)%3,a===-1){if(u===0)break;e=Ph[--u];continue}const C=a-a%3,F=w+(e+1)%3,E=C+(a+2)%3,U=i[f],H=i[e],P=i[F],V=i[E];if(Gk(l[2*U],l[2*U+1],l[2*H],l[2*H+1],l[2*P],l[2*P+1],l[2*V],l[2*V+1])){i[e]=V,i[a]=U;const Y=n[E];if(Y===-1){let ce=this._hullStart;do{if(this._hullTri[ce]===E){this._hullTri[ce]=e;break}ce=this._hullPrev[ce]}while(ce!==this._hullStart)}this._link(e,Y),this._link(a,n[f]),this._link(f,E);const ee=C+(a+1)%3;u<Ph.length&&(Ph[u++]=ee)}else{if(u===0)break;e=Ph[--u]}}return f}_link(e,i){this._halfedges[e]=i,i!==-1&&(this._halfedges[i]=e)}_addTriangle(e,i,n,l,u,f){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=i,this._triangles[a+2]=n,this._link(a,l),this._link(a+1,u),this._link(a+2,f),this.trianglesLen+=3,a}}function Vk(t,e){const i=t/(Math.abs(t)+Math.abs(e));return(e>0?3-i:1+i)/4}function yp(t,e,i,n){const l=t-i,u=e-n;return l*l+u*u}function Gk(t,e,i,n,l,u,f,a){const w=t-f,C=e-a,F=i-f,E=n-a,U=l-f,H=u-a,P=w*w+C*C,V=F*F+E*E,j=U*U+H*H;return w*(E*j-V*H)-C*(F*j-V*U)+P*(F*H-E*U)<0}function Xk(t,e,i,n,l,u){const f=i-t,a=n-e,w=l-t,C=u-e,F=f*f+a*a,E=w*w+C*C,U=.5/(f*C-a*w),H=(C*F-a*E)*U,P=(f*E-w*F)*U;return H*H+P*P}function Zk(t,e,i,n,l,u){const f=i-t,a=n-e,w=l-t,C=u-e,F=f*f+a*a,E=w*w+C*C,U=.5/(f*C-a*w),H=t+(C*F-a*E)*U,P=e+(f*E-w*F)*U;return{x:H,y:P}}function hl(t,e,i,n){if(n-i<=20)for(let l=i+1;l<=n;l++){const u=t[l],f=e[u];let a=l-1;for(;a>=i&&e[t[a]]>f;)t[a+1]=t[a--];t[a+1]=u}else{const l=i+n>>1;let u=i+1,f=n;yc(t,l,u),e[t[i]]>e[t[n]]&&yc(t,i,n),e[t[u]]>e[t[n]]&&yc(t,u,n),e[t[i]]>e[t[u]]&&yc(t,i,u);const a=t[u],w=e[a];for(;;){do u++;while(e[t[u]]<w);do f--;while(e[t[f]]>w);if(f<u)break;yc(t,u,f)}t[i+1]=t[f],t[f]=a,n-u+1>=f-i?(hl(t,e,u,n),hl(t,e,i,f-1)):(hl(t,e,i,f-1),hl(t,e,u,n))}}function yc(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function Wk(t){return t[0]}function qk(t){return t[1]}const H1=1e-6;class ua{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,i){this._+=`L${this._x1=+e},${this._y1=+i}`}arc(e,i,n){e=+e,i=+i,n=+n;const l=e+n,u=i;if(n<0)throw new Error("negative radius");this._x1===null?this._+=`M${l},${u}`:(Math.abs(this._x1-l)>H1||Math.abs(this._y1-u)>H1)&&(this._+="L"+l+","+u),n&&(this._+=`A${n},${n},0,1,1,${e-n},${i}A${n},${n},0,1,1,${this._x1=l},${this._y1=u}`)}rect(e,i,n,l){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}h${+n}v${+l}h${-n}Z`}value(){return this._||null}}class ig{constructor(){this._=[]}moveTo(e,i){this._.push([e,i])}closePath(){this._.push(this._[0].slice())}lineTo(e,i){this._.push([e,i])}value(){return this._.length?this._:null}}let jk=class{constructor(e,[i,n,l,u]=[0,0,960,500]){if(!((l=+l)>=(i=+i))||!((u=+u)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=l,this.xmin=i,this.ymax=u,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:i,triangles:n},vectors:l}=this;let u,f;const a=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let V=0,j=0,Y=n.length,ee,ce;V<Y;V+=3,j+=2){const Qe=n[V]*2,le=n[V+1]*2,re=n[V+2]*2,we=e[Qe],Ae=e[Qe+1],R=e[le],ie=e[le+1],se=e[re],Be=e[re+1],Re=R-we,ht=ie-Ae,_t=se-we,Me=Be-Ae,at=(Re*Me-ht*_t)*2;if(Math.abs(at)<1e-9){if(u===void 0){u=f=0;for(const nt of i)u+=e[nt*2],f+=e[nt*2+1];u/=i.length,f/=i.length}const wt=1e9*Math.sign((u-we)*Me-(f-Ae)*_t);ee=(we+se)/2-wt*Me,ce=(Ae+Be)/2+wt*_t}else{const wt=1/at,nt=Re*Re+ht*ht,He=_t*_t+Me*Me;ee=we+(Me*nt-ht*He)*wt,ce=Ae+(Re*He-_t*nt)*wt}a[j]=ee,a[j+1]=ce}let w=i[i.length-1],C,F=w*4,E,U=e[2*w],H,P=e[2*w+1];l.fill(0);for(let V=0;V<i.length;++V)w=i[V],C=F,E=U,H=P,F=w*4,U=e[2*w],P=e[2*w+1],l[C+2]=l[F]=H-P,l[C+3]=l[F+1]=U-E}render(e){const i=e==null?e=new ua:void 0,{delaunay:{halfedges:n,inedges:l,hull:u},circumcenters:f,vectors:a}=this;if(u.length<=1)return null;for(let F=0,E=n.length;F<E;++F){const U=n[F];if(U<F)continue;const H=Math.floor(F/3)*2,P=Math.floor(U/3)*2,V=f[H],j=f[H+1],Y=f[P],ee=f[P+1];this._renderSegment(V,j,Y,ee,e)}let w,C=u[u.length-1];for(let F=0;F<u.length;++F){w=C,C=u[F];const E=Math.floor(l[C]/3)*2,U=f[E],H=f[E+1],P=w*4,V=this._project(U,H,a[P+2],a[P+3]);V&&this._renderSegment(U,H,V[0],V[1],e)}return i&&i.value()}renderBounds(e){const i=e==null?e=new ua:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),i&&i.value()}renderCell(e,i){const n=i==null?i=new ua:void 0,l=this._clip(e);if(l===null||!l.length)return;i.moveTo(l[0],l[1]);let u=l.length;for(;l[0]===l[u-2]&&l[1]===l[u-1]&&u>1;)u-=2;for(let f=2;f<u;f+=2)(l[f]!==l[f-2]||l[f+1]!==l[f-1])&&i.lineTo(l[f],l[f+1]);return i.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let i=0,n=e.length/2;i<n;++i){const l=this.cellPolygon(i);l&&(l.index=i,yield l)}}cellPolygon(e){const i=new ig;return this.renderCell(e,i),i.value()}_renderSegment(e,i,n,l,u){let f;const a=this._regioncode(e,i),w=this._regioncode(n,l);a===0&&w===0?(u.moveTo(e,i),u.lineTo(n,l)):(f=this._clipSegment(e,i,n,l,a,w))&&(u.moveTo(f[0],f[1]),u.lineTo(f[2],f[3]))}contains(e,i,n){return i=+i,i!==i||(n=+n,n!==n)?!1:this.delaunay._step(e,i,n)===e}*neighbors(e){const i=this._clip(e);if(i)for(const n of this.delaunay.neighbors(e)){const l=this._clip(n);if(l){e:for(let u=0,f=i.length;u<f;u+=2)for(let a=0,w=l.length;a<w;a+=2)if(i[u]===l[a]&&i[u+1]===l[a+1]&&i[(u+2)%f]===l[(a+w-2)%w]&&i[(u+3)%f]===l[(a+w-1)%w]){yield n;break e}}}}_cell(e){const{circumcenters:i,delaunay:{inedges:n,halfedges:l,triangles:u}}=this,f=n[e];if(f===-1)return null;const a=[];let w=f;do{const C=Math.floor(w/3);if(a.push(i[C*2],i[C*2+1]),w=w%3===2?w-2:w+1,u[w]!==e)break;w=l[w]}while(w!==f&&w!==-1);return a}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const i=this._cell(e);if(i===null)return null;const{vectors:n}=this,l=e*4;return this._simplify(n[l]||n[l+1]?this._clipInfinite(e,i,n[l],n[l+1],n[l+2],n[l+3]):this._clipFinite(e,i))}_clipFinite(e,i){const n=i.length;let l=null,u,f,a=i[n-2],w=i[n-1],C,F=this._regioncode(a,w),E,U=0;for(let H=0;H<n;H+=2)if(u=a,f=w,a=i[H],w=i[H+1],C=F,F=this._regioncode(a,w),C===0&&F===0)E=U,U=0,l?l.push(a,w):l=[a,w];else{let P,V,j,Y,ee;if(C===0){if((P=this._clipSegment(u,f,a,w,C,F))===null)continue;[V,j,Y,ee]=P}else{if((P=this._clipSegment(a,w,u,f,F,C))===null)continue;[Y,ee,V,j]=P,E=U,U=this._edgecode(V,j),E&&U&&this._edge(e,E,U,l,l.length),l?l.push(V,j):l=[V,j]}E=U,U=this._edgecode(Y,ee),E&&U&&this._edge(e,E,U,l,l.length),l?l.push(Y,ee):l=[Y,ee]}if(l)E=U,U=this._edgecode(l[0],l[1]),E&&U&&this._edge(e,E,U,l,l.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return l}_clipSegment(e,i,n,l,u,f){const a=u<f;for(a&&([e,i,n,l,u,f]=[n,l,e,i,f,u]);;){if(u===0&&f===0)return a?[n,l,e,i]:[e,i,n,l];if(u&f)return null;let w,C,F=u||f;F&8?(w=e+(n-e)*(this.ymax-i)/(l-i),C=this.ymax):F&4?(w=e+(n-e)*(this.ymin-i)/(l-i),C=this.ymin):F&2?(C=i+(l-i)*(this.xmax-e)/(n-e),w=this.xmax):(C=i+(l-i)*(this.xmin-e)/(n-e),w=this.xmin),u?(e=w,i=C,u=this._regioncode(e,i)):(n=w,l=C,f=this._regioncode(n,l))}}_clipInfinite(e,i,n,l,u,f){let a=Array.from(i),w;if((w=this._project(a[0],a[1],n,l))&&a.unshift(w[0],w[1]),(w=this._project(a[a.length-2],a[a.length-1],u,f))&&a.push(w[0],w[1]),a=this._clipFinite(e,a))for(let C=0,F=a.length,E,U=this._edgecode(a[F-2],a[F-1]);C<F;C+=2)E=U,U=this._edgecode(a[C],a[C+1]),E&&U&&(C=this._edge(e,E,U,a,C),F=a.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(e,i,n,l,u){for(;i!==n;){let f,a;switch(i){case 5:i=4;continue;case 4:i=6,f=this.xmax,a=this.ymin;break;case 6:i=2;continue;case 2:i=10,f=this.xmax,a=this.ymax;break;case 10:i=8;continue;case 8:i=9,f=this.xmin,a=this.ymax;break;case 9:i=1;continue;case 1:i=5,f=this.xmin,a=this.ymin;break}(l[u]!==f||l[u+1]!==a)&&this.contains(e,f,a)&&(l.splice(u,0,f,a),u+=2)}return u}_project(e,i,n,l){let u=1/0,f,a,w;if(l<0){if(i<=this.ymin)return null;(f=(this.ymin-i)/l)<u&&(w=this.ymin,a=e+(u=f)*n)}else if(l>0){if(i>=this.ymax)return null;(f=(this.ymax-i)/l)<u&&(w=this.ymax,a=e+(u=f)*n)}if(n>0){if(e>=this.xmax)return null;(f=(this.xmax-e)/n)<u&&(a=this.xmax,w=i+(u=f)*l)}else if(n<0){if(e<=this.xmin)return null;(f=(this.xmin-e)/n)<u&&(a=this.xmin,w=i+(u=f)*l)}return[a,w]}_edgecode(e,i){return(e===this.xmin?1:e===this.xmax?2:0)|(i===this.ymin?4:i===this.ymax?8:0)}_regioncode(e,i){return(e<this.xmin?1:e>this.xmax?2:0)|(i<this.ymin?4:i>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let i=0;i<e.length;i+=2){const n=(i+2)%e.length,l=(i+4)%e.length;(e[i]===e[n]&&e[n]===e[l]||e[i+1]===e[n+1]&&e[n+1]===e[l+1])&&(e.splice(n,2),i-=2)}e.length||(e=null)}return e}};const Jk=2*Math.PI,nl=Math.pow;function Yk(t){return t[0]}function $k(t){return t[1]}function e3(t){const{triangles:e,coords:i}=t;for(let n=0;n<e.length;n+=3){const l=2*e[n],u=2*e[n+1],f=2*e[n+2];if((i[f]-i[l])*(i[u+1]-i[l+1])-(i[u]-i[l])*(i[f+1]-i[l+1])>1e-10)return!1}return!0}function t3(t,e,i){return[t+Math.sin(t+e)*i,e+Math.cos(t-e)*i]}class Ng{static from(e,i=Yk,n=$k,l){return new Ng("length"in e?r3(e,i,n,l):Float64Array.from(i3(e,i,n,l)))}constructor(e){this._delaunator=new _f(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,i=this.points;if(e.hull&&e.hull.length>2&&e3(e)){this.collinear=Int32Array.from({length:i.length/2},(U,H)=>H).sort((U,H)=>i[2*U]-i[2*H]||i[2*U+1]-i[2*H+1]);const w=this.collinear[0],C=this.collinear[this.collinear.length-1],F=[i[2*w],i[2*w+1],i[2*C],i[2*C+1]],E=1e-8*Math.hypot(F[3]-F[1],F[2]-F[0]);for(let U=0,H=i.length/2;U<H;++U){const P=t3(i[2*U],i[2*U+1],E);i[2*U]=P[0],i[2*U+1]=P[1]}this._delaunator=new _f(i)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,l=this.hull=this._delaunator.hull,u=this.triangles=this._delaunator.triangles,f=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let w=0,C=n.length;w<C;++w){const F=u[w%3===2?w-2:w+1];(n[w]===-1||f[F]===-1)&&(f[F]=w)}for(let w=0,C=l.length;w<C;++w)a[l[w]]=w;l.length<=2&&l.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=l[0],f[l[0]]=1,l.length===2&&(f[l[1]]=0,this.triangles[1]=l[1],this.triangles[2]=l[1]))}voronoi(e){return new jk(this,e)}*neighbors(e){const{inedges:i,hull:n,_hullIndex:l,halfedges:u,triangles:f,collinear:a}=this;if(a){const E=a.indexOf(e);E>0&&(yield a[E-1]),E<a.length-1&&(yield a[E+1]);return}const w=i[e];if(w===-1)return;let C=w,F=-1;do{if(yield F=f[C],C=C%3===2?C-2:C+1,f[C]!==e)return;if(C=u[C],C===-1){const E=n[(l[e]+1)%n.length];E!==F&&(yield E);return}}while(C!==w)}find(e,i,n=0){if(e=+e,e!==e||(i=+i,i!==i))return-1;const l=n;let u;for(;(u=this._step(n,e,i))>=0&&u!==n&&u!==l;)n=u;return u}_step(e,i,n){const{inedges:l,hull:u,_hullIndex:f,halfedges:a,triangles:w,points:C}=this;if(l[e]===-1||!C.length)return(e+1)%(C.length>>1);let F=e,E=nl(i-C[e*2],2)+nl(n-C[e*2+1],2);const U=l[e];let H=U;do{let P=w[H];const V=nl(i-C[P*2],2)+nl(n-C[P*2+1],2);if(V<E&&(E=V,F=P),H=H%3===2?H-2:H+1,w[H]!==e)break;if(H=a[H],H===-1){if(H=u[(f[e]+1)%u.length],H!==P&&nl(i-C[H*2],2)+nl(n-C[H*2+1],2)<E)return H;break}}while(H!==U);return F}render(e){const i=e==null?e=new ua:void 0,{points:n,halfedges:l,triangles:u}=this;for(let f=0,a=l.length;f<a;++f){const w=l[f];if(w<f)continue;const C=u[f]*2,F=u[w]*2;e.moveTo(n[C],n[C+1]),e.lineTo(n[F],n[F+1])}return this.renderHull(e),i&&i.value()}renderPoints(e,i){i===void 0&&(!e||typeof e.moveTo!="function")&&(i=e,e=null),i=i==null?2:+i;const n=e==null?e=new ua:void 0,{points:l}=this;for(let u=0,f=l.length;u<f;u+=2){const a=l[u],w=l[u+1];e.moveTo(a+i,w),e.arc(a,w,i,0,Jk)}return n&&n.value()}renderHull(e){const i=e==null?e=new ua:void 0,{hull:n,points:l}=this,u=n[0]*2,f=n.length;e.moveTo(l[u],l[u+1]);for(let a=1;a<f;++a){const w=2*n[a];e.lineTo(l[w],l[w+1])}return e.closePath(),i&&i.value()}hullPolygon(){const e=new ig;return this.renderHull(e),e.value()}renderTriangle(e,i){const n=i==null?i=new ua:void 0,{points:l,triangles:u}=this,f=u[e*=3]*2,a=u[e+1]*2,w=u[e+2]*2;return i.moveTo(l[f],l[f+1]),i.lineTo(l[a],l[a+1]),i.lineTo(l[w],l[w+1]),i.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let i=0,n=e.length/3;i<n;++i)yield this.trianglePolygon(i)}trianglePolygon(e){const i=new ig;return this.renderTriangle(e,i),i.value()}}function r3(t,e,i,n){const l=t.length,u=new Float64Array(l*2);for(let f=0;f<l;++f){const a=t[f];u[f*2]=e.call(n,a,f,t),u[f*2+1]=i.call(n,a,f,t)}return u}function*i3(t,e,i,n){let l=0;for(const u of t)yield e.call(n,u,l,t),yield i.call(n,u,l,t),++l}function P1(t,e,i){const n=t.slice();return n[29]=e[i],n[31]=i,n}function z1(t){let e,i=t[3],n=[];for(let l=0;l<i.length;l+=1)n[l]=R1(P1(t,i,l));return{c(){e=Dr("g");for(let l=0;l<n.length;l+=1)n[l].c();ue(e,"class","voronoi-group")},m(l,u){Fe(l,e,u);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null)},p(l,u){if(u[0]&6159){i=l[3];let f;for(f=0;f<i.length;f+=1){const a=P1(l,i,f);n[f]?n[f].p(a,u):(n[f]=R1(a),n[f].c(),n[f].m(e,null))}for(;f<n.length;f+=1)n[f].d(1);n.length=i.length}},d(l){l&&Ee(e),$i(n,l)}}}function R1(t){let e,i,n,l,u;function f(...C){return t[21](t[31],...C)}function a(...C){return t[23](t[31],...C)}function w(...C){return t[25](t[31],...C)}return{c(){e=Dr("path"),ue(e,"class","voronoi-cell svelte-169satm"),ue(e,"d",i=t[2].renderCell(t[31])),ue(e,"tabindex",n=t[0]||t[1]?0:-1)},m(C,F){Fe(C,e,F),l||(u=[ki(e,"mouseover",function(){hn(t[0]?f:null)&&(t[0]?f:null).apply(this,arguments)}),ki(e,"mouseleave",function(){hn(t[0]?t[22]:null)&&(t[0]?t[22]:null).apply(this,arguments)}),ki(e,"focus",function(){hn(t[1]?a:null)&&(t[1]?a:null).apply(this,arguments)}),ki(e,"blur",function(){hn(t[1]?t[24]:null)&&(t[1]?t[24]:null).apply(this,arguments)}),ki(e,"click",function(){hn(t[1]?w:null)&&(t[1]?w:null).apply(this,arguments)})],l=!0)},p(C,F){t=C,F[0]&4&&i!==(i=t[2].renderCell(t[31]))&&ue(e,"d",i),F[0]&3&&n!==(n=t[0]||t[1]?0:-1)&&ue(e,"tabindex",n)},d(C){C&&Ee(e),l=!1,yA(u)}}}function n3(t){let e,i=t[2]&&z1(t);return{c(){i&&i.c(),e=hi()},m(n,l){i&&i.m(n,l),Fe(n,e,l)},p(n,l){n[2]?i?i.p(n,l):(i=z1(n),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:ar,o:ar,d(n){i&&i.d(n),n&&Ee(e)}}}function s3(t,e,i){let n,l,u,f,a,w,C,F,E;const{data:U,width:H,height:P,custom:V,xScale:j,yScale:Y}=Gi("LayerCake");ct(t,U,Me=>i(3,E=Me)),ct(t,H,Me=>i(17,f=Me)),ct(t,P,Me=>i(16,u=Me)),ct(t,V,Me=>i(26,F=Me)),ct(t,j,Me=>i(19,w=Me)),ct(t,Y,Me=>i(18,a=Me));const ee=Zc();let{hover:ce=!1}=e,{hovered:Qe=null}=e,{select:le=!1}=e,{selected:re=null}=e,we=F.coords;ct(t,we,Me=>i(20,C=Me));let Ae=F.idKey;function R(Me,at){ce&&(i(13,Qe=at?at[Ae]:null),ee("hover",{id:Qe,data:at,event:Me}))}function ie(Me,at){le&&(i(14,re=at?at[Ae]:null),ee("select",{id:re,data:at,event:Me}))}const se=(Me,at)=>R(at,E[Me]),Be=Me=>R(Me,null),Re=(Me,at)=>R(at,E[Me]),ht=Me=>R(Me,null),_t=(Me,at)=>ie(at,E[Me]);return t.$$set=Me=>{"hover"in Me&&i(0,ce=Me.hover),"hovered"in Me&&i(13,Qe=Me.hovered),"select"in Me&&i(1,le=Me.select),"selected"in Me&&i(14,re=Me.selected)},t.$$.update=()=>{t.$$.dirty[0]&1835008&&i(15,n=Array.isArray(C)?C.map(Me=>[w(Me.x),a(Me.y)]):[]),t.$$.dirty[0]&229376&&i(2,l=Ng.from(n).voronoi([0,0,f,u]))},[ce,le,l,E,U,H,P,V,j,Y,we,R,ie,Qe,re,n,u,f,a,w,C,se,Be,Re,ht,_t]}class A3 extends Nr{constructor(e){super(),Kr(this,e,s3,n3,Lr,{hover:0,hovered:13,select:1,selected:14},null,[-1,-1])}}const o3=t=>({}),O1=t=>({}),a3=t=>({}),K1=t=>({}),l3=t=>({}),N1=t=>({}),c3=t=>({}),V1=t=>({}),u3=t=>({}),G1=t=>({});function X1(t){let e,i;return e=new zg({props:{$$slots:{default:[h3]},$$scope:{ctx:t}}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&67108864|l[2]&128&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function h3(t){let e;return{c(){e=yr(t[26])},m(i,n){Fe(i,e,n)},p(i,n){n[0]&67108864&&Xi(e,i[26])},d(i){i&&Ee(e)}}}function Z1(t){let e,i;return{c(){e=it("h5"),i=yr(t[27]),ue(e,"class","visuallyhidden svelte-1fy6g2i")},m(n,l){Fe(n,e,l),$e(e,i)},p(n,l){l[0]&134217728&&Xi(i,n[27])},d(n){n&&Ee(e)}}}function W1(t){let e,i;return e=new Lg({props:{ticks:t[21],formatTick:t[17],snapTicks:t[32],prefix:t[38],suffix:t[39],textColor:t[23],tickColor:t[24],tickDashed:t[25]}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&2097152&&(u.ticks=n[21]),l[0]&131072&&(u.formatTick=n[17]),l[1]&2&&(u.snapTicks=n[32]),l[1]&128&&(u.prefix=n[38]),l[1]&256&&(u.suffix=n[39]),l[0]&8388608&&(u.textColor=n[23]),l[0]&16777216&&(u.tickColor=n[24]),l[0]&33554432&&(u.tickDashed=n[25]),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function q1(t){let e,i;return e=new Hg({props:{ticks:t[22],formatTick:t[18],prefix:t[40],suffix:t[41],textColor:t[23],tickColor:t[24],tickDashed:t[25]}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&4194304&&(u.ticks=n[22]),l[0]&262144&&(u.formatTick=n[18]),l[1]&512&&(u.prefix=n[40]),l[1]&1024&&(u.suffix=n[41]),l[0]&8388608&&(u.textColor=n[23]),l[0]&16777216&&(u.tickColor=n[24]),l[0]&33554432&&(u.tickDashed=n[25]),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function j1(t){let e,i,n,l;function u(w){t[64](w)}function f(w){t[65](w)}let a={select:t[44],hover:t[42],highlighted:t[46]};return t[1]!==void 0&&(a.selected=t[1]),t[0]!==void 0&&(a.hovered=t[0]),e=new A3({props:a}),zi.push(()=>Fo(e,"selected",u)),zi.push(()=>Fo(e,"hovered",f)),e.$on("hover",t[66]),e.$on("select",t[67]),{c(){Rt(e.$$.fragment)},m(w,C){Ht(e,w,C),l=!0},p(w,C){const F={};C[1]&8192&&(F.select=w[44]),C[1]&2048&&(F.hover=w[42]),C[1]&32768&&(F.highlighted=w[46]),!i&&C[0]&2&&(i=!0,F.selected=w[1],Eo(()=>i=!1)),!n&&C[0]&1&&(n=!0,F.hovered=w[0],Eo(()=>n=!1)),e.$set(F)},i(w){l||(Ce(e.$$.fragment,w),l=!0)},o(w){De(e.$$.fragment,w),l=!1},d(w){Pt(e,w)}}}function J1(t){let e,i;return e=new uB({props:{hovered:t[0],selected:t[1],content:t[31]}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&1&&(u.hovered=n[0]),l[0]&2&&(u.selected=n[1]),l[1]&1&&(u.content=n[31]),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function f3(t){let e,i,n,l,u,f,a,w=t[19]&&W1(t),C=t[20]&&t[10]&&q1(t);n=new Hk({props:{selected:t[1],hovered:t[0],highlighted:t[46],overlayFill:t[48]}});let F=(t[44]||t[42])&&j1(t),E=t[30]&&J1(t);const U=t[63].svg,H=qr(U,t,t[69],N1);return{c(){w&&w.c(),e=dt(),C&&C.c(),i=dt(),Rt(n.$$.fragment),l=dt(),F&&F.c(),u=dt(),E&&E.c(),f=dt(),H&&H.c()},m(P,V){w&&w.m(P,V),Fe(P,e,V),C&&C.m(P,V),Fe(P,i,V),Ht(n,P,V),Fe(P,l,V),F&&F.m(P,V),Fe(P,u,V),E&&E.m(P,V),Fe(P,f,V),H&&H.m(P,V),a=!0},p(P,V){P[19]?w?(w.p(P,V),V[0]&524288&&Ce(w,1)):(w=W1(P),w.c(),Ce(w,1),w.m(e.parentNode,e)):w&&(Rr(),De(w,1,1,()=>{w=null}),Or()),P[20]&&P[10]?C?(C.p(P,V),V[0]&1049600&&Ce(C,1)):(C=q1(P),C.c(),Ce(C,1),C.m(i.parentNode,i)):C&&(Rr(),De(C,1,1,()=>{C=null}),Or());const j={};V[0]&2&&(j.selected=P[1]),V[0]&1&&(j.hovered=P[0]),V[1]&32768&&(j.highlighted=P[46]),V[1]&131072&&(j.overlayFill=P[48]),n.$set(j),P[44]||P[42]?F?(F.p(P,V),V[1]&10240&&Ce(F,1)):(F=j1(P),F.c(),Ce(F,1),F.m(u.parentNode,u)):F&&(Rr(),De(F,1,1,()=>{F=null}),Or()),P[30]?E?(E.p(P,V),V[0]&1073741824&&Ce(E,1)):(E=J1(P),E.c(),Ce(E,1),E.m(f.parentNode,f)):E&&(Rr(),De(E,1,1,()=>{E=null}),Or()),H&&H.p&&(!a||V[2]&128)&&Jr(H,U,P,P[69],a?jr(U,P[69],V,l3):Yr(P[69]),N1)},i(P){a||(Ce(w),Ce(C),Ce(n.$$.fragment,P),Ce(F),Ce(E),Ce(H,P),a=!0)},o(P){De(w),De(C),De(n.$$.fragment,P),De(F),De(E),De(H,P),a=!1},d(P){w&&w.d(P),P&&Ee(e),C&&C.d(P),P&&Ee(i),Pt(n,P),P&&Ee(l),F&&F.d(P),P&&Ee(u),E&&E.d(P),P&&Ee(f),H&&H.d(P)}}}function d3(t){let e,i,n,l,u,f;e=new Dg({});const a=t[63].back,w=qr(a,t,t[69],V1);l=new Eg({props:{pointerEvents:t[37],$$slots:{default:[f3]},$$scope:{ctx:t}}});const C=t[63].front,F=qr(C,t,t[69],K1);return{c(){Rt(e.$$.fragment),i=dt(),w&&w.c(),n=dt(),Rt(l.$$.fragment),u=dt(),F&&F.c()},m(E,U){Ht(e,E,U),Fe(E,i,U),w&&w.m(E,U),Fe(E,n,U),Ht(l,E,U),Fe(E,u,U),F&&F.m(E,U),f=!0},p(E,U){w&&w.p&&(!f||U[2]&128)&&Jr(w,a,E,E[69],f?jr(a,E[69],U,c3):Yr(E[69]),V1);const H={};U[1]&64&&(H.pointerEvents=E[37]),U[0]&1140720643|U[1]&176003|U[2]&128&&(H.$$scope={dirty:U,ctx:E}),l.$set(H),F&&F.p&&(!f||U[2]&128)&&Jr(F,C,E,E[69],f?jr(C,E[69],U,a3):Yr(E[69]),K1)},i(E){f||(Ce(e.$$.fragment,E),Ce(w,E),Ce(l.$$.fragment,E),Ce(F,E),f=!0)},o(E){De(e.$$.fragment,E),De(w,E),De(l.$$.fragment,E),De(F,E),f=!1},d(E){Pt(e,E),E&&Ee(i),w&&w.d(E),E&&Ee(n),Pt(l,E),E&&Ee(u),F&&F.d(E)}}}function Y1(t){let e,i;return e=new Pg({props:{domain:t[51],colors:t[35],markerLength:Array.isArray(t[36])?t[36][0]*2:t[36]*2,round:!0}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[1]&1048576&&(u.domain=n[51]),l[1]&16&&(u.colors=n[35]),l[1]&32&&(u.markerLength=Array.isArray(n[36])?n[36][0]*2:n[36]*2),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function $1(t){let e,i;return e=new Rg({props:{$$slots:{default:[p3]},$$scope:{ctx:t}}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&268435456|l[2]&128&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function p3(t){let e;return{c(){e=yr(t[28])},m(i,n){Fe(i,e,n)},p(i,n){n[0]&268435456&&Xi(e,i[28])},d(i){i&&Ee(e)}}}function ew(t){let e,i;return e=new Og({props:{el:t[50],data:t[2],keys:[t[13],t[9],t[11],t[10]],title:t[26],output:t[49]}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[1]&524288&&(u.el=n[50]),l[0]&4&&(u.data=n[2]),l[0]&11776&&(u.keys=[n[13],n[9],n[11],n[10]]),l[0]&67108864&&(u.title=n[26]),l[1]&262144&&(u.output=n[49]),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function g3(t){let e,i,n,l,u,f,a,w,C,F,E,U,H,P,V,j=t[26]&&X1(t),Y=t[27]&&Z1(t);const ee=t[63].options,ce=qr(ee,t,t[69],G1);f=new Cg({props:{padding:t[33],ssr:t[4],height:t[4]?t[6]:null,width:t[4]?t[5]:null,x:t[9],y:t[10],z:t[11],r:t[12],xScale:typeof t[15]=="function"?t[15]():t[15]=="log"?KA():rs(),yScale:typeof t[16]=="function"?t[16]():t[16]=="log"?KA():rs(),zScale:tu(),xDomain:t[52],yDomain:t[53],zDomain:t[51],zRange:t[35],rRange:Array.isArray(t[36])?t[36]:[t[36],t[36]],data:t[2],xPadding:[t[34],t[34]],yPadding:t[10]?[t[34],t[34]]:null,custom:{type:"scatter",idKey:t[13],labelKey:t[14],coords:t[54],colorSelect:t[45],colorHover:t[43],colorHighlight:t[47],padding:1,animation:t[7],duration:t[8]},$$slots:{default:[d3]},$$scope:{ctx:t}}}),C=new Kg({props:{data:t[2],key1:t[11],key2:t[9],key3:t[10],key4:t[12]}});const Qe=t[63].legend,le=qr(Qe,t,t[69],O1);let re=t[29]&&t[51]&&Y1(t),we=t[28]&&$1(t),Ae=t[49]&&ew(t);return{c(){e=it("div"),j&&j.c(),i=dt(),Y&&Y.c(),n=dt(),ce&&ce.c(),l=dt(),u=it("div"),Rt(f.$$.fragment),a=dt(),w=it("div"),Rt(C.$$.fragment),F=dt(),le&&le.c(),E=dt(),re&&re.c(),U=dt(),we&&we.c(),H=dt(),Ae&&Ae.c(),P=hi(),ue(u,"class","chart-container svelte-1fy6g2i"),bt(u,"height",typeof t[3]=="number"?t[3]+"px":t[3]),ue(u,"aria-hidden","true"),ue(w,"class","visuallyhidden svelte-1fy6g2i")},m(R,ie){Fe(R,e,ie),j&&j.m(e,null),$e(e,i),Y&&Y.m(e,null),$e(e,n),ce&&ce.m(e,null),$e(e,l),$e(e,u),Ht(f,u,null),$e(e,a),$e(e,w),Ht(C,w,null),$e(e,F),le&&le.m(e,null),$e(e,E),re&&re.m(e,null),$e(e,U),we&&we.m(e,null),t[68](e),Fe(R,H,ie),Ae&&Ae.m(R,ie),Fe(R,P,ie),V=!0},p(R,ie){R[26]?j?(j.p(R,ie),ie[0]&67108864&&Ce(j,1)):(j=X1(R),j.c(),Ce(j,1),j.m(e,i)):j&&(Rr(),De(j,1,1,()=>{j=null}),Or()),R[27]?Y?Y.p(R,ie):(Y=Z1(R),Y.c(),Y.m(e,n)):Y&&(Y.d(1),Y=null),ce&&ce.p&&(!V||ie[2]&128)&&Jr(ce,ee,R,R[69],V?jr(ee,R[69],ie,u3):Yr(R[69]),G1);const se={};ie[1]&4&&(se.padding=R[33]),ie[0]&16&&(se.ssr=R[4]),ie[0]&80&&(se.height=R[4]?R[6]:null),ie[0]&48&&(se.width=R[4]?R[5]:null),ie[0]&512&&(se.x=R[9]),ie[0]&1024&&(se.y=R[10]),ie[0]&2048&&(se.z=R[11]),ie[0]&4096&&(se.r=R[12]),ie[0]&32768&&(se.xScale=typeof R[15]=="function"?R[15]():R[15]=="log"?KA():rs()),ie[0]&65536&&(se.yScale=typeof R[16]=="function"?R[16]():R[16]=="log"?KA():rs()),ie[1]&2097152&&(se.xDomain=R[52]),ie[1]&4194304&&(se.yDomain=R[53]),ie[1]&1048576&&(se.zDomain=R[51]),ie[1]&16&&(se.zRange=R[35]),ie[1]&32&&(se.rRange=Array.isArray(R[36])?R[36]:[R[36],R[36]]),ie[0]&4&&(se.data=R[2]),ie[1]&8&&(se.xPadding=[R[34],R[34]]),ie[0]&1024|ie[1]&8&&(se.yPadding=R[10]?[R[34],R[34]]:null),ie[0]&24960|ie[1]&86016&&(se.custom={type:"scatter",idKey:R[13],labelKey:R[14],coords:R[54],colorSelect:R[45],colorHover:R[43],colorHighlight:R[47],padding:1,animation:R[7],duration:R[8]}),ie[0]&1140720643|ie[1]&176067|ie[2]&128&&(se.$$scope={dirty:ie,ctx:R}),f.$set(se),(!V||ie[0]&8)&&bt(u,"height",typeof R[3]=="number"?R[3]+"px":R[3]);const Be={};ie[0]&4&&(Be.data=R[2]),ie[0]&2048&&(Be.key1=R[11]),ie[0]&512&&(Be.key2=R[9]),ie[0]&1024&&(Be.key3=R[10]),ie[0]&4096&&(Be.key4=R[12]),C.$set(Be),le&&le.p&&(!V||ie[2]&128)&&Jr(le,Qe,R,R[69],V?jr(Qe,R[69],ie,o3):Yr(R[69]),O1),R[29]&&R[51]?re?(re.p(R,ie),ie[0]&536870912|ie[1]&1048576&&Ce(re,1)):(re=Y1(R),re.c(),Ce(re,1),re.m(e,U)):re&&(Rr(),De(re,1,1,()=>{re=null}),Or()),R[28]?we?(we.p(R,ie),ie[0]&268435456&&Ce(we,1)):(we=$1(R),we.c(),Ce(we,1),we.m(e,null)):we&&(Rr(),De(we,1,1,()=>{we=null}),Or()),R[49]?Ae?(Ae.p(R,ie),ie[1]&262144&&Ce(Ae,1)):(Ae=ew(R),Ae.c(),Ce(Ae,1),Ae.m(P.parentNode,P)):Ae&&(Rr(),De(Ae,1,1,()=>{Ae=null}),Or())},i(R){V||(Ce(j),Ce(ce,R),Ce(f.$$.fragment,R),Ce(C.$$.fragment,R),Ce(le,R),Ce(re),Ce(we),Ce(Ae),V=!0)},o(R){De(j),De(ce,R),De(f.$$.fragment,R),De(C.$$.fragment,R),De(le,R),De(re),De(we),De(Ae),V=!1},d(R){R&&Ee(e),j&&j.d(),Y&&Y.d(),ce&&ce.d(R),Pt(f),Pt(C),le&&le.d(R),re&&re.d(),we&&we.d(),t[68](null),R&&Ee(H),Ae&&Ae.d(R),R&&Ee(P)}}}function zh(t,e,i,n){let l=t.map(u=>u[e]);return[i||(l[0]?Math.min(...l):-1),n||(l[0]?Math.max(...l):1)]}function m3(t,e,i){let n,l,u,{$$slots:f={},$$scope:a}=e,{data:w}=e,{height:C=200}=e,{ssr:F=!1}=e,{ssrWidth:E=300}=e,{ssrHeight:U=typeof C=="number"?C:200}=e,{animation:H=!0}=e,{duration:P=800}=e,{xKey:V="x"}=e,{yKey:j=null}=e,{zKey:Y=null}=e,{rKey:ee=null}=e,{idKey:ce=V}=e,{labelKey:Qe=ce}=e,{xScale:le="linear"}=e,{yScale:re="linear"}=e,{xFormatTick:we=mf}=e,{yFormatTick:Ae=mf}=e,{xMax:R=null}=e,{xMin:ie=null}=e,{yMax:se=null}=e,{yMin:Be=null}=e,{xAxis:Re=!0}=e,{yAxis:ht=!0}=e,{xTicks:_t=4}=e,{yTicks:Me=4}=e,{zDomain:at=null}=e,{textColor:wt="#666"}=e,{tickColor:nt="#ccc"}=e,{tickDashed:He=!1}=e,{title:tt=null}=e,{alt:Je=null}=e,{footer:ut=null}=e,{legend:At=!1}=e,{labels:Et=!1}=e,{labelContent:qt=null}=e,{snapTicks:Tt=!1}=e,{padding:tr={top:0,bottom:20,left:35,right:0}}=e,{buffer:ve=5}=e,{color:ft=null}=e,{colors:Ft=ft?[ft]:["#206095","#A8BD3A","#003C57","#27A0CC","#118C7B","#F66068","#746CB1","#22D0B6","lightgrey"]}=e,{r:qe=4}=e,{interactive:Gt=!0}=e,{xPrefix:xe=""}=e,{xSuffix:Ge=""}=e,{yPrefix:nr=""}=e,{ySuffix:mr=""}=e,{hover:ti=!1}=e,{hovered:er=null}=e,{colorHover:Vr="orange"}=e,{select:bi=!1}=e,{selected:Ai=null}=e,{colorSelect:mi="black"}=e,{highlighted:oi=[]}=e,{colorHighlight:ai="black"}=e,{overlayFill:fi=!1}=e,{output:li=null}=e,Ze;const mt={duration:P,easing:Fg},_i=da(void 0,mt),ci=(Oe,kr,en)=>en.indexOf(Oe)==kr;function Ar(Oe,kr,en,ri){let Pr=zh(Oe,kr,en,ri);(Pr[0]!=Xe[0]||Pr[1]!=Xe[1])&&(Hr.set(Pr),Xe=Pr)}function yi(Oe,kr,en,ri){let Pr=kr?zh(Oe,kr,en,ri):Gr;(Pr[0]!=Gr[0]||Pr[1]!=Gr[1])&&(me.set(Pr,{duration:H?P:0}),Gr=Pr)}let Xe=zh(w,V,ie,R);const Hr=da(Xe,mt);ct(t,Hr,Oe=>i(52,l=Oe));let Gr=zh(w,j,Be,se);const me=da(Gr,mt);ct(t,me,Oe=>i(53,u=Oe));function Ot(Oe){Ai=Oe,i(1,Ai)}function Kt(Oe){er=Oe,i(0,er)}function Ir(Oe){yl.call(this,t,Oe)}function wr(Oe){yl.call(this,t,Oe)}function rr(Oe){zi[Oe?"unshift":"push"](()=>{Ze=Oe,i(50,Ze)})}return t.$$set=Oe=>{"data"in Oe&&i(2,w=Oe.data),"height"in Oe&&i(3,C=Oe.height),"ssr"in Oe&&i(4,F=Oe.ssr),"ssrWidth"in Oe&&i(5,E=Oe.ssrWidth),"ssrHeight"in Oe&&i(6,U=Oe.ssrHeight),"animation"in Oe&&i(7,H=Oe.animation),"duration"in Oe&&i(8,P=Oe.duration),"xKey"in Oe&&i(9,V=Oe.xKey),"yKey"in Oe&&i(10,j=Oe.yKey),"zKey"in Oe&&i(11,Y=Oe.zKey),"rKey"in Oe&&i(12,ee=Oe.rKey),"idKey"in Oe&&i(13,ce=Oe.idKey),"labelKey"in Oe&&i(14,Qe=Oe.labelKey),"xScale"in Oe&&i(15,le=Oe.xScale),"yScale"in Oe&&i(16,re=Oe.yScale),"xFormatTick"in Oe&&i(17,we=Oe.xFormatTick),"yFormatTick"in Oe&&i(18,Ae=Oe.yFormatTick),"xMax"in Oe&&i(57,R=Oe.xMax),"xMin"in Oe&&i(58,ie=Oe.xMin),"yMax"in Oe&&i(59,se=Oe.yMax),"yMin"in Oe&&i(60,Be=Oe.yMin),"xAxis"in Oe&&i(19,Re=Oe.xAxis),"yAxis"in Oe&&i(20,ht=Oe.yAxis),"xTicks"in Oe&&i(21,_t=Oe.xTicks),"yTicks"in Oe&&i(22,Me=Oe.yTicks),"zDomain"in Oe&&i(61,at=Oe.zDomain),"textColor"in Oe&&i(23,wt=Oe.textColor),"tickColor"in Oe&&i(24,nt=Oe.tickColor),"tickDashed"in Oe&&i(25,He=Oe.tickDashed),"title"in Oe&&i(26,tt=Oe.title),"alt"in Oe&&i(27,Je=Oe.alt),"footer"in Oe&&i(28,ut=Oe.footer),"legend"in Oe&&i(29,At=Oe.legend),"labels"in Oe&&i(30,Et=Oe.labels),"labelContent"in Oe&&i(31,qt=Oe.labelContent),"snapTicks"in Oe&&i(32,Tt=Oe.snapTicks),"padding"in Oe&&i(33,tr=Oe.padding),"buffer"in Oe&&i(34,ve=Oe.buffer),"color"in Oe&&i(62,ft=Oe.color),"colors"in Oe&&i(35,Ft=Oe.colors),"r"in Oe&&i(36,qe=Oe.r),"interactive"in Oe&&i(37,Gt=Oe.interactive),"xPrefix"in Oe&&i(38,xe=Oe.xPrefix),"xSuffix"in Oe&&i(39,Ge=Oe.xSuffix),"yPrefix"in Oe&&i(40,nr=Oe.yPrefix),"ySuffix"in Oe&&i(41,mr=Oe.ySuffix),"hover"in Oe&&i(42,ti=Oe.hover),"hovered"in Oe&&i(0,er=Oe.hovered),"colorHover"in Oe&&i(43,Vr=Oe.colorHover),"select"in Oe&&i(44,bi=Oe.select),"selected"in Oe&&i(1,Ai=Oe.selected),"colorSelect"in Oe&&i(45,mi=Oe.colorSelect),"highlighted"in Oe&&i(46,oi=Oe.highlighted),"colorHighlight"in Oe&&i(47,ai=Oe.colorHighlight),"overlayFill"in Oe&&i(48,fi=Oe.overlayFill),"output"in Oe&&i(49,li=Oe.output),"$$scope"in Oe&&i(69,a=Oe.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&516|t.$$.dirty[1]&201326592&&Ar(w,V,ie,R),t.$$.dirty[0]&1028|t.$$.dirty[1]&805306368&&yi(w,j,Be,se),t.$$.dirty[0]&2052|t.$$.dirty[1]&1073741824&&i(51,n=Array.isArray(at)?at:Y&&typeof at=="function"?w.map(Oe=>Oe[Y]).filter(ci).sort(at):Y?w.map(Oe=>Oe[Y]).filter(ci):null)},[er,Ai,w,C,F,E,U,H,P,V,j,Y,ee,ce,Qe,le,re,we,Ae,Re,ht,_t,Me,wt,nt,He,tt,Je,ut,At,Et,qt,Tt,tr,ve,Ft,qe,Gt,xe,Ge,nr,mr,ti,Vr,bi,mi,oi,ai,fi,li,Ze,n,l,u,_i,Hr,me,R,ie,se,Be,at,ft,f,Ot,Kt,Ir,wr,rr,a]}class _3 extends Nr{constructor(e){super(),Kr(this,e,m3,g3,Lr,{data:2,height:3,ssr:4,ssrWidth:5,ssrHeight:6,animation:7,duration:8,xKey:9,yKey:10,zKey:11,rKey:12,idKey:13,labelKey:14,xScale:15,yScale:16,xFormatTick:17,yFormatTick:18,xMax:57,xMin:58,yMax:59,yMin:60,xAxis:19,yAxis:20,xTicks:21,yTicks:22,zDomain:61,textColor:23,tickColor:24,tickDashed:25,title:26,alt:27,footer:28,legend:29,labels:30,labelContent:31,snapTicks:32,padding:33,buffer:34,color:62,colors:35,r:36,interactive:37,xPrefix:38,xSuffix:39,yPrefix:40,ySuffix:41,hover:42,hovered:0,colorHover:43,select:44,selected:1,colorSelect:45,highlighted:46,colorHighlight:47,overlayFill:48,output:49},null,[-1,-1,-1])}get data(){return this.$$.ctx[2]}set data(e){this.$$set({data:e}),Ve()}get height(){return this.$$.ctx[3]}set height(e){this.$$set({height:e}),Ve()}get ssr(){return this.$$.ctx[4]}set ssr(e){this.$$set({ssr:e}),Ve()}get ssrWidth(){return this.$$.ctx[5]}set ssrWidth(e){this.$$set({ssrWidth:e}),Ve()}get ssrHeight(){return this.$$.ctx[6]}set ssrHeight(e){this.$$set({ssrHeight:e}),Ve()}get animation(){return this.$$.ctx[7]}set animation(e){this.$$set({animation:e}),Ve()}get duration(){return this.$$.ctx[8]}set duration(e){this.$$set({duration:e}),Ve()}get xKey(){return this.$$.ctx[9]}set xKey(e){this.$$set({xKey:e}),Ve()}get yKey(){return this.$$.ctx[10]}set yKey(e){this.$$set({yKey:e}),Ve()}get zKey(){return this.$$.ctx[11]}set zKey(e){this.$$set({zKey:e}),Ve()}get rKey(){return this.$$.ctx[12]}set rKey(e){this.$$set({rKey:e}),Ve()}get idKey(){return this.$$.ctx[13]}set idKey(e){this.$$set({idKey:e}),Ve()}get labelKey(){return this.$$.ctx[14]}set labelKey(e){this.$$set({labelKey:e}),Ve()}get xScale(){return this.$$.ctx[15]}set xScale(e){this.$$set({xScale:e}),Ve()}get yScale(){return this.$$.ctx[16]}set yScale(e){this.$$set({yScale:e}),Ve()}get xFormatTick(){return this.$$.ctx[17]}set xFormatTick(e){this.$$set({xFormatTick:e}),Ve()}get yFormatTick(){return this.$$.ctx[18]}set yFormatTick(e){this.$$set({yFormatTick:e}),Ve()}get xMax(){return this.$$.ctx[57]}set xMax(e){this.$$set({xMax:e}),Ve()}get xMin(){return this.$$.ctx[58]}set xMin(e){this.$$set({xMin:e}),Ve()}get yMax(){return this.$$.ctx[59]}set yMax(e){this.$$set({yMax:e}),Ve()}get yMin(){return this.$$.ctx[60]}set yMin(e){this.$$set({yMin:e}),Ve()}get xAxis(){return this.$$.ctx[19]}set xAxis(e){this.$$set({xAxis:e}),Ve()}get yAxis(){return this.$$.ctx[20]}set yAxis(e){this.$$set({yAxis:e}),Ve()}get xTicks(){return this.$$.ctx[21]}set xTicks(e){this.$$set({xTicks:e}),Ve()}get yTicks(){return this.$$.ctx[22]}set yTicks(e){this.$$set({yTicks:e}),Ve()}get zDomain(){return this.$$.ctx[61]}set zDomain(e){this.$$set({zDomain:e}),Ve()}get textColor(){return this.$$.ctx[23]}set textColor(e){this.$$set({textColor:e}),Ve()}get tickColor(){return this.$$.ctx[24]}set tickColor(e){this.$$set({tickColor:e}),Ve()}get tickDashed(){return this.$$.ctx[25]}set tickDashed(e){this.$$set({tickDashed:e}),Ve()}get title(){return this.$$.ctx[26]}set title(e){this.$$set({title:e}),Ve()}get alt(){return this.$$.ctx[27]}set alt(e){this.$$set({alt:e}),Ve()}get footer(){return this.$$.ctx[28]}set footer(e){this.$$set({footer:e}),Ve()}get legend(){return this.$$.ctx[29]}set legend(e){this.$$set({legend:e}),Ve()}get labels(){return this.$$.ctx[30]}set labels(e){this.$$set({labels:e}),Ve()}get labelContent(){return this.$$.ctx[31]}set labelContent(e){this.$$set({labelContent:e}),Ve()}get snapTicks(){return this.$$.ctx[32]}set snapTicks(e){this.$$set({snapTicks:e}),Ve()}get padding(){return this.$$.ctx[33]}set padding(e){this.$$set({padding:e}),Ve()}get buffer(){return this.$$.ctx[34]}set buffer(e){this.$$set({buffer:e}),Ve()}get color(){return this.$$.ctx[62]}set color(e){this.$$set({color:e}),Ve()}get colors(){return this.$$.ctx[35]}set colors(e){this.$$set({colors:e}),Ve()}get r(){return this.$$.ctx[36]}set r(e){this.$$set({r:e}),Ve()}get interactive(){return this.$$.ctx[37]}set interactive(e){this.$$set({interactive:e}),Ve()}get xPrefix(){return this.$$.ctx[38]}set xPrefix(e){this.$$set({xPrefix:e}),Ve()}get xSuffix(){return this.$$.ctx[39]}set xSuffix(e){this.$$set({xSuffix:e}),Ve()}get yPrefix(){return this.$$.ctx[40]}set yPrefix(e){this.$$set({yPrefix:e}),Ve()}get ySuffix(){return this.$$.ctx[41]}set ySuffix(e){this.$$set({ySuffix:e}),Ve()}get hover(){return this.$$.ctx[42]}set hover(e){this.$$set({hover:e}),Ve()}get hovered(){return this.$$.ctx[0]}set hovered(e){this.$$set({hovered:e}),Ve()}get colorHover(){return this.$$.ctx[43]}set colorHover(e){this.$$set({colorHover:e}),Ve()}get select(){return this.$$.ctx[44]}set select(e){this.$$set({select:e}),Ve()}get selected(){return this.$$.ctx[1]}set selected(e){this.$$set({selected:e}),Ve()}get colorSelect(){return this.$$.ctx[45]}set colorSelect(e){this.$$set({colorSelect:e}),Ve()}get highlighted(){return this.$$.ctx[46]}set highlighted(e){this.$$set({highlighted:e}),Ve()}get colorHighlight(){return this.$$.ctx[47]}set colorHighlight(e){this.$$set({colorHighlight:e}),Ve()}get overlayFill(){return this.$$.ctx[48]}set overlayFill(e){this.$$set({overlayFill:e}),Ve()}get output(){return this.$$.ctx[49]}set output(e){this.$$set({output:e}),Ve()}}var ng={},y3={get exports(){return ng},set exports(t){ng=t}};(function(t,e){(function(i,n){t.exports=n()})(r2,function(){var i,n,l;function u(a,w){if(!i)i=w;else if(!n)n=w;else{var C="var sharedChunk = {}; ("+i+")(sharedChunk); ("+n+")(sharedChunk);",F={};i(F),l=w(F),typeof window<"u"&&(l.workerUrl=window.URL.createObjectURL(new Blob([C],{type:"text/javascript"})))}}u(["exports"],function(a){var w=C;function C(o,s,c,d){this.cx=3*o,this.bx=3*(c-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(d-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=s,this.p2x=c,this.p2y=d}function F(o,s,c,d){const _=new w(o,s,c,d);return function(v){return _.solve(v)}}C.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,s){if(s===void 0&&(s=1e-6),o<0)return 0;if(o>1)return 1;for(var c=o,d=0;d<8;d++){var _=this.sampleCurveX(c)-o;if(Math.abs(_)<s)return c;var v=this.sampleCurveDerivativeX(c);if(Math.abs(v)<1e-6)break;c-=_/v}var x=0,I=1;for(c=o,d=0;d<20&&(_=this.sampleCurveX(c),!(Math.abs(_-o)<s));d++)o>_?x=c:I=c,c=.5*(I-x)+x;return c},solve:function(o,s){return this.sampleCurveY(this.solveCurveX(o,s))}};const E=F(.25,.1,.25,1);function U(o,s,c){return Math.min(c,Math.max(s,o))}function H(o,s,c){const d=c-s,_=((o-s)%d+d)%d+s;return _===s?c:_}function P(o,...s){for(const c of s)for(const d in c)o[d]=c[d];return o}let V=1;function j(o,s){o.forEach(c=>{s[c]&&(s[c]=s[c].bind(s))})}function Y(o,s,c){const d={};for(const _ in o)d[_]=s.call(c||this,o[_],_,o);return d}function ee(o,s,c){const d={};for(const _ in o)s.call(c||this,o[_],_,o)&&(d[_]=o[_]);return d}function ce(o){return Array.isArray(o)?o.map(ce):typeof o=="object"&&o?Y(o,ce):o}const Qe={};function le(o){Qe[o]||(typeof console<"u"&&console.warn(o),Qe[o]=!0)}function re(o,s,c){return(c.y-o.y)*(s.x-o.x)>(s.y-o.y)*(c.x-o.x)}function we(o){let s=0;for(let c,d,_=0,v=o.length,x=v-1;_<v;x=_++)c=o[_],d=o[x],s+=(d.x-c.x)*(c.y+d.y);return s}function Ae(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function R(o){const s={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,d,_,v)=>{const x=_||v;return s[d]=!x||x.toLowerCase(),""}),s["max-age"]){const c=parseInt(s["max-age"],10);isNaN(c)?delete s["max-age"]:s["max-age"]=c}return s}let ie,se,Be=null;function Re(o){if(Be==null){const s=o.navigator?o.navigator.userAgent:null;Be=!!o.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Be}function ht(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const _t={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const s=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(s)}},getImageData(o,s=0){const c=window.document.createElement("canvas"),d=c.getContext("2d");if(!d)throw new Error("failed to create canvas 2d context");return c.width=o.width,c.height=o.height,d.drawImage(o,0,0,o.width,o.height),d.getImageData(-s,-s,o.width+2*s,o.height+2*s)},resolveURL:o=>(ie||(ie=document.createElement("a")),ie.href=o,ie.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(se==null&&(se=matchMedia("(prefers-reduced-motion: reduce)")),se.matches)}};var Me=at;function at(o,s){this.x=o,this.y=s}at.prototype={clone:function(){return new at(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,s){return this.clone()._rotateAround(o,s)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var s=o.x-this.x,c=o.y-this.y;return s*s+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,s){return Math.atan2(this.x*s-this.y*o,this.x*o+this.y*s)},_matMult:function(o){var s=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=s,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var s=Math.cos(o),c=Math.sin(o),d=c*this.x+s*this.y;return this.x=s*this.x-c*this.y,this.y=d,this},_rotateAround:function(o,s){var c=Math.cos(o),d=Math.sin(o),_=s.y+d*(this.x-s.x)+c*(this.y-s.y);return this.x=s.x+c*(this.x-s.x)-d*(this.y-s.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},at.convert=function(o){return o instanceof at?o:Array.isArray(o)?new at(o[0],o[1]):o};const wt={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},nt="mapbox-tiles";let He,tt,Je=500,ut=50;function At(){typeof caches>"u"||He||(He=caches.open(nt))}let Et=1/0;const qt={supported:!1,testSupport:function(o){!ve&&tr&&(ft?Ft(o):Tt=o)}};let Tt,tr,ve=!1,ft=!1;function Ft(o){const s=o.createTexture();o.bindTexture(o.TEXTURE_2D,s);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,tr),o.isContextLost())return;qt.supported=!0}catch{}o.deleteTexture(s),ve=!0}typeof document<"u"&&(tr=document.createElement("img"),tr.onload=function(){Tt&&Ft(Tt),Tt=null,ft=!0},tr.onerror=function(){ve=!0,Tt=null},tr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const qe={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(qe);class Gt extends Error{constructor(s,c,d,_){super(`AJAXError: ${c} (${s}): ${d}`),this.status=s,this.statusText=c,this.url=d,this.body=_}}const xe=Ae()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function Ge(o,s){const c=new AbortController,d=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:xe(),signal:c.signal});let _=!1,v=!1;return o.type==="json"&&d.headers.set("Accept","application/json"),((x,I,T)=>{if(v)return;const M=Date.now();fetch(d).then(z=>z.ok?((K,X,W)=>{(o.type==="arrayBuffer"?K.arrayBuffer():o.type==="json"?K.json():K.text()).then(q=>{v||(X&&W&&function(pe,fe,ke){if(At(),!He)return;const Ne={status:fe.status,statusText:fe.statusText,headers:new Headers};fe.headers.forEach((ze,ot)=>Ne.headers.set(ot,ze));const Se=R(fe.headers.get("Cache-Control")||"");Se["no-store"]||(Se["max-age"]&&Ne.headers.set("Expires",new Date(ke+1e3*Se["max-age"]).toUTCString()),new Date(Ne.headers.get("Expires")).getTime()-ke<42e4||function(ze,ot){if(tt===void 0)try{new Response(new ReadableStream),tt=!0}catch{tt=!1}tt?ot(ze.body):ze.blob().then(ot)}(fe,ze=>{const ot=new Response(ze,Ne);At(),He&&He.then(st=>st.put(function(Mt){const Nt=Mt.indexOf("?");return Nt<0?Mt:Mt.slice(0,Nt)}(pe.url),ot)).catch(st=>le(st.message))}))}(d,X,W),_=!0,s(null,q,K.headers.get("Cache-Control"),K.headers.get("Expires")))}).catch(q=>{v||s(new Error(q.message))})})(z,null,M):z.blob().then(K=>s(new Gt(z.status,z.statusText,o.url,K)))).catch(z=>{z.code!==20&&s(new Error(z.message))})})(),{cancel:()=>{v=!0,_||c.abort()}}}const nr=function(o,s){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(Ae()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,s);if(!Ae()){const d=o.url.substring(0,o.url.indexOf("://"));return(wt.REGISTERED_PROTOCOLS[d]||Ge)(o,s)}}if(!(/^file:/.test(c=o.url)||/^file:/.test(xe())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Ge(o,s);if(Ae()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,s,void 0,!0)}var c;return function(d,_){const v=new XMLHttpRequest;v.open(d.method||"GET",d.url,!0),d.type==="arrayBuffer"&&(v.responseType="arraybuffer");for(const x in d.headers)v.setRequestHeader(x,d.headers[x]);return d.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=d.credentials==="include",v.onerror=()=>{_(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(d.type==="json")try{x=JSON.parse(v.response)}catch(I){return _(I)}_(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});_(new Gt(v.status,v.statusText,d.url,x))}},v.send(d.body),{cancel:()=>v.abort()}}(o,s)},mr=function(o,s){return nr(P(o,{type:"arrayBuffer"}),s)};function ti(o){const s=window.document.createElement("a");return s.href=o,s.protocol===window.document.location.protocol&&s.host===window.document.location.host}const er="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Vr,bi;Vr=[],bi=0;const Ai=function(o,s){if(qt.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),bi>=wt.MAX_PARALLEL_IMAGE_REQUESTS){const v={requestParameters:o,callback:s,cancelled:!1,cancel(){this.cancelled=!0}};return Vr.push(v),v}bi++;let c=!1;const d=()=>{if(!c)for(c=!0,bi--;Vr.length&&bi<wt.MAX_PARALLEL_IMAGE_REQUESTS;){const v=Vr.shift(),{requestParameters:x,callback:I,cancelled:T}=v;T||(v.cancel=Ai(x,I).cancel)}},_=mr(o,(v,x,I,T)=>{d(),v?s(v):x&&function(M,z){typeof createImageBitmap=="function"?function(K,X){const W=new Blob([new Uint8Array(K)],{type:"image/png"});createImageBitmap(W).then(q=>{X(null,q)}).catch(q=>{X(new Error(`Could not load image because of ${q.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(M,z):function(K,X){const W=new Image;W.onload=()=>{X(null,W),URL.revokeObjectURL(W.src),W.onload=null,window.requestAnimationFrame(()=>{W.src=er})},W.onerror=()=>X(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const q=new Blob([new Uint8Array(K)],{type:"image/png"});W.src=K.byteLength?URL.createObjectURL(q):er}(M,z)}(x,(M,z)=>{M!=null?s(M):z!=null&&s(null,z,{cacheControl:I,expires:T})})});return{cancel:()=>{_.cancel(),d()}}};function mi(o,s,c){c[o]&&c[o].indexOf(s)!==-1||(c[o]=c[o]||[],c[o].push(s))}function oi(o,s,c){if(c&&c[o]){const d=c[o].indexOf(s);d!==-1&&c[o].splice(d,1)}}class ai{constructor(s,c={}){P(this,c),this.type=s}}class fi extends ai{constructor(s,c={}){super("error",P({error:s},c))}}class li{on(s,c){return this._listeners=this._listeners||{},mi(s,c,this._listeners),this}off(s,c){return oi(s,c,this._listeners),oi(s,c,this._oneTimeListeners),this}once(s,c){return this._oneTimeListeners=this._oneTimeListeners||{},mi(s,c,this._oneTimeListeners),this}fire(s,c){typeof s=="string"&&(s=new ai(s,c||{}));const d=s.type;if(this.listens(d)){s.target=this;const _=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const I of _)I.call(this,s);const v=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const I of v)oi(d,I,this._oneTimeListeners),I.call(this,s);const x=this._eventedParent;x&&(P(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(s))}else s instanceof fi&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,c){return this._eventedParent=s,this._eventedParentData=c,this}}var Ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class mt{constructor(s,c,d,_){this.message=(s?`${s}: `:"")+d,_&&(this.identifier=_),c!=null&&c.__line__&&(this.line=c.__line__)}}function _i(o){const s=o.value;return s?[new mt(o.key,s,"constants have been deprecated as of v8")]:[]}function ci(o,...s){for(const c of s)for(const d in c)o[d]=c[d];return o}function Ar(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function yi(o){if(Array.isArray(o))return o.map(yi);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const s={};for(const c in o)s[c]=yi(o[c]);return s}return Ar(o)}class Xe extends Error{constructor(s,c){super(c),this.message=c,this.key=s}}class Hr{constructor(s,c=[]){this.parent=s,this.bindings={};for(const[d,_]of c)this.bindings[d]=_}concat(s){return new Hr(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const Gr={kind:"null"},me={kind:"number"},Ot={kind:"string"},Kt={kind:"boolean"},Ir={kind:"color"},wr={kind:"object"},rr={kind:"value"},Oe={kind:"collator"},kr={kind:"formatted"},en={kind:"padding"},ri={kind:"resolvedImage"};function Pr(o,s){return{kind:"array",itemType:o,N:s}}function vr(o){if(o.kind==="array"){const s=vr(o.itemType);return typeof o.N=="number"?`array<${s}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${s}>`}return o.kind}const Tn=[Gr,me,Ot,Kt,Ir,kr,wr,Pr(rr),en,ri];function tn(o,s){if(s.kind==="error")return null;if(o.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!tn(o.itemType,s.itemType))&&(typeof o.N!="number"||o.N===s.N))return null}else{if(o.kind===s.kind)return null;if(o.kind==="value"){for(const c of Tn)if(!tn(c,s))return null}}return`Expected ${vr(o)} but found ${vr(s)} instead.`}function Gn(o,s){return s.some(c=>c.kind===o.kind)}function Xn(o,s){return s.some(c=>c==="null"?o===null:c==="array"?Array.isArray(o):c==="object"?o&&!Array.isArray(o)&&typeof o=="object":c===typeof o)}var is,Zn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function te(o){return(o=Math.round(o))<0?0:o>255?255:o}function L(o){return te(o[o.length-1]==="%"?parseFloat(o)/100*255:parseInt(o))}function N(o){return(s=o[o.length-1]==="%"?parseFloat(o)/100:parseFloat(o))<0?0:s>1?1:s;var s}function J(o,s,c){return c<0?c+=1:c>1&&(c-=1),6*c<1?o+(s-o)*c*6:2*c<1?s:3*c<2?o+(s-o)*(2/3-c)*6:o}try{is={}.parseCSSColor=function(o){var s,c=o.replace(/ /g,"").toLowerCase();if(c in Zn)return Zn[c].slice();if(c[0]==="#")return c.length===4?(s=parseInt(c.substr(1),16))>=0&&s<=4095?[(3840&s)>>4|(3840&s)>>8,240&s|(240&s)>>4,15&s|(15&s)<<4,1]:null:c.length===7&&(s=parseInt(c.substr(1),16))>=0&&s<=16777215?[(16711680&s)>>16,(65280&s)>>8,255&s,1]:null;var d=c.indexOf("("),_=c.indexOf(")");if(d!==-1&&_+1===c.length){var v=c.substr(0,d),x=c.substr(d+1,_-(d+1)).split(","),I=1;switch(v){case"rgba":if(x.length!==4)return null;I=N(x.pop());case"rgb":return x.length!==3?null:[L(x[0]),L(x[1]),L(x[2]),I];case"hsla":if(x.length!==4)return null;I=N(x.pop());case"hsl":if(x.length!==3)return null;var T=(parseFloat(x[0])%360+360)%360/360,M=N(x[1]),z=N(x[2]),K=z<=.5?z*(M+1):z+M-z*M,X=2*z-K;return[te(255*J(X,K,T+1/3)),te(255*J(X,K,T)),te(255*J(X,K,T-1/3)),I];default:return null}}return null}}catch{}class ${constructor(s,c,d,_=1){this.r=s,this.g=c,this.b=d,this.a=_}static parse(s){if(!s)return;if(s instanceof $)return s;if(typeof s!="string")return;const c=is(s);return c?new $(c[0]/255*c[3],c[1]/255*c[3],c[2]/255*c[3],c[3]):void 0}toString(){const[s,c,d,_]=this.toArray();return`rgba(${Math.round(s)},${Math.round(c)},${Math.round(d)},${_})`}toArray(){const{r:s,g:c,b:d,a:_}=this;return _===0?[0,0,0,0]:[255*s/_,255*c/_,255*d/_,_]}}$.black=new $(0,0,0,1),$.white=new $(1,1,1,1),$.transparent=new $(0,0,0,0),$.red=new $(1,0,0,1);class ge{constructor(s,c,d){this.sensitivity=s?c?"variant":"case":c?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,c){return this.collator.compare(s,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class _e{constructor(s,c,d,_,v){this.text=s,this.image=c,this.scale=d,this.fontStack=_,this.textColor=v}}class ye{constructor(s){this.sections=s}static fromString(s){return new ye([new _e(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof ye?s:ye.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class de{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof de)return s;if(typeof s=="number")return new de([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const c of s)if(typeof c!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new de(s)}}toString(){return JSON.stringify(this.values)}}class Ue{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new Ue({name:s,available:!1}):null}}function je(o,s,c,d){return typeof o=="number"&&o>=0&&o<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof c=="number"&&c>=0&&c<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[o,s,c,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[o,s,c,d]:[o,s,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function lt(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof $||o instanceof ge||o instanceof ye||o instanceof de||o instanceof Ue)return!0;if(Array.isArray(o)){for(const s of o)if(!lt(s))return!1;return!0}if(typeof o=="object"){for(const s in o)if(!lt(o[s]))return!1;return!0}return!1}function We(o){if(o===null)return Gr;if(typeof o=="string")return Ot;if(typeof o=="boolean")return Kt;if(typeof o=="number")return me;if(o instanceof $)return Ir;if(o instanceof ge)return Oe;if(o instanceof ye)return kr;if(o instanceof de)return en;if(o instanceof Ue)return ri;if(Array.isArray(o)){const s=o.length;let c;for(const d of o){const _=We(d);if(c){if(c===_)continue;c=rr;break}c=_}return Pr(c||rr,s)}return wr}function Dt(o){const s=typeof o;return o===null?"":s==="string"||s==="number"||s==="boolean"?String(o):o instanceof $||o instanceof ye||o instanceof de||o instanceof Ue?o.toString():JSON.stringify(o)}class Lt{constructor(s,c){this.type=s,this.value=c}static parse(s,c){if(s.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!lt(s[1]))return c.error("invalid value");const d=s[1];let _=We(d);const v=c.expectedType;return _.kind!=="array"||_.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(_=v),new Lt(_,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class vt{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const jt={string:Ot,number:me,boolean:Kt,object:wr};class $t{constructor(s,c){this.type=s,this.args=c}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");let d,_=1;const v=s[0];if(v==="array"){let I,T;if(s.length>2){const M=s[1];if(typeof M!="string"||!(M in jt)||M==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);I=jt[M],_++}else I=rr;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return c.error('The length argument to "array" must be a positive integer literal',2);T=s[2],_++}d=Pr(I,T)}else{if(!jt[v])throw new Error(`Types doesn't contain name = ${v}`);d=jt[v]}const x=[];for(;_<s.length;_++){const I=c.parse(s[_],_,rr);if(!I)return null;x.push(I)}return new $t(d,x)}evaluate(s){for(let c=0;c<this.args.length;c++){const d=this.args[c].evaluate(s);if(!tn(this.type,We(d)))return d;if(c===this.args.length-1)throw new vt(`Expected value to be of type ${vr(this.type)}, but found ${vr(We(d))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const hr={"to-boolean":Kt,"to-color":Ir,"to-number":me,"to-string":Ot};class sr{constructor(s,c){this.type=s,this.args=c}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");const d=s[0];if(!hr[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&s.length!==2)return c.error("Expected one argument.");const _=hr[d],v=[];for(let x=1;x<s.length;x++){const I=c.parse(s[x],x,rr);if(!I)return null;v.push(I)}return new sr(_,v)}evaluate(s){if(this.type.kind==="boolean")return!!this.args[0].evaluate(s);if(this.type.kind==="color"){let c,d;for(const _ of this.args){if(c=_.evaluate(s),d=null,c instanceof $)return c;if(typeof c=="string"){const v=s.parseColor(c);if(v)return v}else if(Array.isArray(c)&&(d=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:je(c[0],c[1],c[2],c[3]),!d))return new $(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new vt(d||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}if(this.type.kind==="padding"){let c;for(const d of this.args){c=d.evaluate(s);const _=de.parse(c);if(_)return _}throw new vt(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}if(this.type.kind==="number"){let c=null;for(const d of this.args){if(c=d.evaluate(s),c===null)return 0;const _=Number(c);if(!isNaN(_))return _}throw new vt(`Could not convert ${JSON.stringify(c)} to number.`)}return this.type.kind==="formatted"?ye.fromString(Dt(this.args[0].evaluate(s))):this.type.kind==="resolvedImage"?Ue.fromString(Dt(this.args[0].evaluate(s))):Dt(this.args[0].evaluate(s))}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const or=["Unknown","Point","LineString","Polygon"];class fr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?or[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let c=this._parseColorCache[s];return c||(c=this._parseColorCache[s]=$.parse(s)),c}}class Cr{constructor(s,c,d,_){this.name=s,this.type=c,this._evaluate=d,this.args=_}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,c){const d=s[0],_=Cr.definitions[d];if(!_)return c.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(_)?_[0]:_.type,x=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,I=x.filter(([M])=>!Array.isArray(M)||M.length===s.length-1);let T=null;for(const[M,z]of I){T=new Ms(c.registry,c.path,null,c.scope);const K=[];let X=!1;for(let W=1;W<s.length;W++){const q=s[W],pe=Array.isArray(M)?M[W-1]:M.type,fe=T.parse(q,1+K.length,pe);if(!fe){X=!0;break}K.push(fe)}if(!X)if(Array.isArray(M)&&M.length!==K.length)T.error(`Expected ${M.length} arguments, but found ${K.length} instead.`);else{for(let W=0;W<K.length;W++){const q=Array.isArray(M)?M[W]:M.type,pe=K[W];T.concat(W+1).checkSubtype(q,pe.type)}if(T.errors.length===0)return new Cr(d,v,z,K)}}if(I.length===1)c.errors.push(...T.errors);else{const M=(I.length?I:x).map(([K])=>{return X=K,Array.isArray(X)?`(${X.map(vr).join(", ")})`:`(${vr(X.type)}...)`;var X}).join(" | "),z=[];for(let K=1;K<s.length;K++){const X=c.parse(s[K],1+z.length);if(!X)return null;z.push(vr(X.type))}c.error(`Expected arguments of type ${M}, but found (${z.join(", ")}) instead.`)}return null}static register(s,c){Cr.definitions=c;for(const d in c)s[d]=Cr}}class Ci{constructor(s,c,d){this.type=Oe,this.locale=d,this.caseSensitive=s,this.diacriticSensitive=c}static parse(s,c){if(s.length!==2)return c.error("Expected one argument.");const d=s[1];if(typeof d!="object"||Array.isArray(d))return c.error("Collator options argument must be an object.");const _=c.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Kt);if(!_)return null;const v=c.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Kt);if(!v)return null;let x=null;return d.locale&&(x=c.parse(d.locale,1,Ot),!x)?null:new Ci(_,v,x)}evaluate(s){return new ge(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}const Xr=8192;function Ui(o,s){o[0]=Math.min(o[0],s[0]),o[1]=Math.min(o[1],s[1]),o[2]=Math.max(o[2],s[0]),o[3]=Math.max(o[3],s[1])}function Wn(o,s){return!(o[0]<=s[0]||o[2]>=s[2]||o[1]<=s[1]||o[3]>=s[3])}function ns(o,s){const c=(180+o[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,_=Math.pow(2,s.z);return[Math.round(c*_*Xr),Math.round(d*_*Xr)]}function Er(o,s,c){const d=o[0]-s[0],_=o[1]-s[1],v=o[0]-c[0],x=o[1]-c[1];return d*x-v*_==0&&d*v<=0&&_*x<=0}function Us(o,s){let c=!1;for(let x=0,I=s.length;x<I;x++){const T=s[x];for(let M=0,z=T.length;M<z-1;M++){if(Er(o,T[M],T[M+1]))return!1;(_=T[M])[1]>(d=o)[1]!=(v=T[M+1])[1]>d[1]&&d[0]<(v[0]-_[0])*(d[1]-_[1])/(v[1]-_[1])+_[0]&&(c=!c)}}var d,_,v;return c}function Qs(o,s){for(let c=0;c<s.length;c++)if(Us(o,s[c]))return!0;return!1}function Js(o,s,c,d){const _=d[0]-c[0],v=d[1]-c[1],x=(o[0]-c[0])*v-_*(o[1]-c[1]),I=(s[0]-c[0])*v-_*(s[1]-c[1]);return x>0&&I<0||x<0&&I>0}function Ys(o,s,c){for(const M of c)for(let z=0;z<M.length-1;++z)if((I=[(x=M[z+1])[0]-(v=M[z])[0],x[1]-v[1]])[0]*(T=[(_=s)[0]-(d=o)[0],_[1]-d[1]])[1]-I[1]*T[0]!=0&&Js(d,_,v,x)&&Js(v,x,d,_))return!0;var d,_,v,x,I,T;return!1}function Is(o,s){for(let c=0;c<o.length;++c)if(!Us(o[c],s))return!1;for(let c=0;c<o.length-1;++c)if(Ys(o[c],o[c+1],s))return!1;return!0}function jA(o,s){for(let c=0;c<s.length;c++)if(Is(o,s[c]))return!0;return!1}function Ts(o,s,c){const d=[];for(let _=0;_<o.length;_++){const v=[];for(let x=0;x<o[_].length;x++){const I=ns(o[_][x],c);Ui(s,I),v.push(I)}d.push(v)}return d}function $s(o,s,c){const d=[];for(let _=0;_<o.length;_++){const v=Ts(o[_],s,c);d.push(v)}return d}function BA(o,s,c,d){if(o[0]<c[0]||o[0]>c[2]){const _=.5*d;let v=o[0]-c[0]>_?-d:c[0]-o[0]>_?d:0;v===0&&(v=o[0]-c[2]>_?-d:c[2]-o[0]>_?d:0),o[0]+=v}Ui(s,o)}function eA(o,s,c,d){const _=Math.pow(2,d.z)*Xr,v=[d.x*Xr,d.y*Xr],x=[];for(const I of o)for(const T of I){const M=[T.x+v[0],T.y+v[1]];BA(M,s,c,_),x.push(M)}return x}function tA(o,s,c,d){const _=Math.pow(2,d.z)*Xr,v=[d.x*Xr,d.y*Xr],x=[];for(const T of o){const M=[];for(const z of T){const K=[z.x+v[0],z.y+v[1]];Ui(s,K),M.push(K)}x.push(M)}if(s[2]-s[0]<=_/2){(I=s)[0]=I[1]=1/0,I[2]=I[3]=-1/0;for(const T of x)for(const M of T)BA(M,s,c,_)}var I;return x}class Sn{constructor(s,c){this.type=Kt,this.geojson=s,this.geometries=c}static parse(s,c){if(s.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(lt(s[1])){const d=s[1];if(d.type==="FeatureCollection")for(let _=0;_<d.features.length;++_){const v=d.features[_].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Sn(d,d.features[_].geometry)}else if(d.type==="Feature"){const _=d.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new Sn(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Sn(d,d)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(c,d){const _=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=c.canonicalID();if(d.type==="Polygon"){const I=Ts(d.coordinates,v,x),T=eA(c.geometry(),_,v,x);if(!Wn(_,v))return!1;for(const M of T)if(!Us(M,I))return!1}if(d.type==="MultiPolygon"){const I=$s(d.coordinates,v,x),T=eA(c.geometry(),_,v,x);if(!Wn(_,v))return!1;for(const M of T)if(!Qs(M,I))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(c,d){const _=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=c.canonicalID();if(d.type==="Polygon"){const I=Ts(d.coordinates,v,x),T=tA(c.geometry(),_,v,x);if(!Wn(_,v))return!1;for(const M of T)if(!Is(M,I))return!1}if(d.type==="MultiPolygon"){const I=$s(d.coordinates,v,x),T=tA(c.geometry(),_,v,x);if(!Wn(_,v))return!1;for(const M of T)if(!jA(M,I))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function ss(o){if(o instanceof Cr&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Sn)return!1;let s=!0;return o.eachChild(c=>{s&&!ss(c)&&(s=!1)}),s}function As(o){if(o instanceof Cr&&o.name==="feature-state")return!1;let s=!0;return o.eachChild(c=>{s&&!As(c)&&(s=!1)}),s}function Ss(o,s){if(o instanceof Cr&&s.indexOf(o.name)>=0)return!1;let c=!0;return o.eachChild(d=>{c&&!Ss(d,s)&&(c=!1)}),c}class ks{constructor(s,c){this.type=c.type,this.name=s,this.boundExpression=c}static parse(s,c){if(s.length!==2||typeof s[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");const d=s[1];return c.scope.has(d)?new ks(d,c.scope.get(d)):c.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class Ms{constructor(s,c=[],d,_=new Hr,v=[]){this.registry=s,this.path=c,this.key=c.map(x=>`[${x}]`).join(""),this.scope=_,this.errors=v,this.expectedType=d}parse(s,c,d,_,v={}){return c?this.concat(c,d,_)._parse(s,v):this._parse(s,v)}_parse(s,c){function d(_,v,x){return x==="assert"?new $t(v,[_]):x==="coerce"?new sr(v,[_]):_}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=s[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[_];if(v){let x=v.parse(s,this);if(!x)return null;if(this.expectedType){const I=this.expectedType,T=x.type;if(I.kind!=="string"&&I.kind!=="number"&&I.kind!=="boolean"&&I.kind!=="object"&&I.kind!=="array"||T.kind!=="value")if(I.kind!=="color"&&I.kind!=="formatted"&&I.kind!=="resolvedImage"||T.kind!=="value"&&T.kind!=="string")if(I.kind!=="padding"||T.kind!=="value"&&T.kind!=="number"&&T.kind!=="array"){if(this.checkSubtype(I,T))return null}else x=d(x,I,c.typeAnnotation||"coerce");else x=d(x,I,c.typeAnnotation||"coerce");else x=d(x,I,c.typeAnnotation||"assert")}if(!(x instanceof Lt)&&x.type.kind!=="resolvedImage"&&rA(x)){const I=new fr;try{x=new Lt(x.type,x.evaluate(I))}catch(T){return this.error(T.message),null}}return x}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,c,d){const _=typeof s=="number"?this.path.concat(s):this.path,v=d?this.scope.concat(d):this.scope;return new Ms(this.registry,_,c||null,v,this.errors)}error(s,...c){const d=`${this.key}${c.map(_=>`[${_}]`).join("")}`;this.errors.push(new Xe(d,s))}checkSubtype(s,c){const d=tn(s,c);return d&&this.error(d),d}}function rA(o){if(o instanceof ks)return rA(o.boundExpression);if(o instanceof Cr&&o.name==="error"||o instanceof Ci||o instanceof Sn)return!1;const s=o instanceof sr||o instanceof $t;let c=!0;return o.eachChild(d=>{c=s?c&&rA(d):c&&d instanceof Lt}),!!c&&ss(o)&&Ss(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function kn(o,s){const c=o.length-1;let d,_,v=0,x=c,I=0;for(;v<=x;)if(I=Math.floor((v+x)/2),d=o[I],_=o[I+1],d<=s){if(I===c||s<_)return I;v=I+1}else{if(!(d>s))throw new vt("Input is not a number.");x=I-1}return 0}class vn{constructor(s,c,d){this.type=s,this.input=c,this.labels=[],this.outputs=[];for(const[_,v]of d)this.labels.push(_),this.outputs.push(v)}static parse(s,c){if(s.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return c.error("Expected an even number of arguments.");const d=c.parse(s[1],1,me);if(!d)return null;const _=[];let v=null;c.expectedType&&c.expectedType.kind!=="value"&&(v=c.expectedType);for(let x=1;x<s.length;x+=2){const I=x===1?-1/0:s[x],T=s[x+1],M=x,z=x+1;if(typeof I!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(_.length&&_[_.length-1][0]>=I)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',M);const K=c.parse(T,z,v);if(!K)return null;v=v||K.type,_.push([I,K])}return new vn(v,d,_)}evaluate(s){const c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(s);const _=this.input.evaluate(s);if(_<=c[0])return d[0].evaluate(s);const v=c.length;return _>=c[v-1]?d[v-1].evaluate(s):d[kn(c,_)].evaluate(s)}eachChild(s){s(this.input);for(const c of this.outputs)s(c)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function Fr(o,s,c){return o*(1-c)+s*c}var iA=Object.freeze({__proto__:null,number:Fr,color:function(o,s,c){return new $(Fr(o.r,s.r,c),Fr(o.g,s.g,c),Fr(o.b,s.b,c),Fr(o.a,s.a,c))},array:function(o,s,c){return o.map((d,_)=>Fr(d,s[_],c))},padding:function(o,s,c){const d=o.values,_=s.values;return new de([Fr(d[0],_[0],c),Fr(d[1],_[1],c),Fr(d[2],_[2],c),Fr(d[3],_[3],c)])}});const Qo=.95047,Io=1.08883,JA=4/29,gs=6/29,Ba=3*gs*gs,xA=Math.PI/180,El=180/Math.PI;function Ds(o){return o>.008856451679035631?Math.pow(o,1/3):o/Ba+JA}function To(o){return o>gs?o*o*o:Ba*(o-JA)}function Ls(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function So(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Ur(o){const s=So(o.r),c=So(o.g),d=So(o.b),_=Ds((.4124564*s+.3575761*c+.1804375*d)/Qo),v=Ds((.2126729*s+.7151522*c+.072175*d)/1);return{l:116*v-16,a:500*(_-v),b:200*(v-Ds((.0193339*s+.119192*c+.9503041*d)/Io)),alpha:o.a}}function xa(o){let s=(o.l+16)/116,c=isNaN(o.a)?s:s+o.a/500,d=isNaN(o.b)?s:s-o.b/200;return s=1*To(s),c=Qo*To(c),d=Io*To(d),new $(Ls(3.2404542*c-1.5371385*s-.4985314*d),Ls(-.969266*c+1.8760108*s+.041556*d),Ls(.0556434*c-.2040259*s+1.0572252*d),o.alpha)}function Fl(o,s,c){const d=s-o;return o+c*(d>180||d<-180?d-360*Math.round(d/360):d)}const bA={forward:Ur,reverse:xa,interpolate:function(o,s,c){return{l:Fr(o.l,s.l,c),a:Fr(o.a,s.a,c),b:Fr(o.b,s.b,c),alpha:Fr(o.alpha,s.alpha,c)}}},Hs={forward:function(o){const{l:s,a:c,b:d}=Ur(o),_=Math.atan2(d,c)*El;return{h:_<0?_+360:_,c:Math.sqrt(c*c+d*d),l:s,alpha:o.a}},reverse:function(o){const s=o.h*xA,c=o.c;return xa({l:o.l,a:Math.cos(s)*c,b:Math.sin(s)*c,alpha:o.alpha})},interpolate:function(o,s,c){return{h:Fl(o.h,s.h,c),c:Fr(o.c,s.c,c),l:Fr(o.l,s.l,c),alpha:Fr(o.alpha,s.alpha,c)}}};var ba=Object.freeze({__proto__:null,lab:bA,hcl:Hs});class dn{constructor(s,c,d,_,v){this.type=s,this.operator=c,this.interpolation=d,this.input=_,this.labels=[],this.outputs=[];for(const[x,I]of v)this.labels.push(x),this.outputs.push(I)}static interpolationFactor(s,c,d,_){let v=0;if(s.name==="exponential")v=Ie(c,s.base,d,_);else if(s.name==="linear")v=Ie(c,1,d,_);else if(s.name==="cubic-bezier"){const x=s.controlPoints;v=new w(x[0],x[1],x[2],x[3]).solve(Ie(c,1,d,_))}return v}static parse(s,c){let[d,_,v,...x]=s;if(!Array.isArray(_)||_.length===0)return c.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){const M=_[1];if(typeof M!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:M}}else{if(_[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const M=_.slice(1);if(M.length!==4||M.some(z=>typeof z!="number"||z<0||z>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:M}}}if(s.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(v=c.parse(v,2,me),!v)return null;const I=[];let T=null;d==="interpolate-hcl"||d==="interpolate-lab"?T=Ir:c.expectedType&&c.expectedType.kind!=="value"&&(T=c.expectedType);for(let M=0;M<x.length;M+=2){const z=x[M],K=x[M+1],X=M+3,W=M+4;if(typeof z!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',X);if(I.length&&I[I.length-1][0]>=z)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',X);const q=c.parse(K,W,T);if(!q)return null;T=T||q.type,I.push([z,q])}return T.kind==="number"||T.kind==="color"||T.kind==="padding"||T.kind==="array"&&T.itemType.kind==="number"&&typeof T.N=="number"?new dn(T,d,_,v,I):c.error(`Type ${vr(T)} is not interpolatable.`)}evaluate(s){const c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(s);const _=this.input.evaluate(s);if(_<=c[0])return d[0].evaluate(s);const v=c.length;if(_>=c[v-1])return d[v-1].evaluate(s);const x=kn(c,_),I=dn.interpolationFactor(this.interpolation,_,c[x],c[x+1]),T=d[x].evaluate(s),M=d[x+1].evaluate(s);return this.operator==="interpolate"?iA[this.type.kind.toLowerCase()](T,M,I):this.operator==="interpolate-hcl"?Hs.reverse(Hs.interpolate(Hs.forward(T),Hs.forward(M),I)):bA.reverse(bA.interpolate(bA.forward(T),bA.forward(M),I))}eachChild(s){s(this.input);for(const c of this.outputs)s(c)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function Ie(o,s,c,d){const _=d-c,v=o-c;return _===0?0:s===1?v/_:(Math.pow(s,v)-1)/(Math.pow(s,_)-1)}class Bn{constructor(s,c){this.type=s,this.args=c}static parse(s,c){if(s.length<2)return c.error("Expectected at least one argument.");let d=null;const _=c.expectedType;_&&_.kind!=="value"&&(d=_);const v=[];for(const I of s.slice(1)){const T=c.parse(I,1+v.length,d,void 0,{typeAnnotation:"omit"});if(!T)return null;d=d||T.type,v.push(T)}if(!d)throw new Error("No output type");const x=_&&v.some(I=>tn(_,I.type));return new Bn(x?rr:d,v)}evaluate(s){let c,d=null,_=0;for(const v of this.args)if(_++,d=v.evaluate(s),d&&d instanceof Ue&&!d.available&&(c||(c=d.name),d=null,_===this.args.length&&(d=c)),d!==null)break;return d}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}class pn{constructor(s,c){this.type=c.type,this.bindings=[].concat(s),this.result=c}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const c of this.bindings)s(c[1]);s(this.result)}static parse(s,c){if(s.length<4)return c.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const d=[];for(let v=1;v<s.length-1;v+=2){const x=s[v];if(typeof x!="string")return c.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return c.error("Variable names must contain only alphanumeric characters or '_'.",v);const I=c.parse(s[v+1],v+1);if(!I)return null;d.push([x,I])}const _=c.parse(s[s.length-1],s.length-1,c.expectedType,d);return _?new pn(d,_):null}outputDefined(){return this.result.outputDefined()}}class Qi{constructor(s,c,d){this.type=s,this.index=c,this.input=d}static parse(s,c){if(s.length!==3)return c.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const d=c.parse(s[1],1,me),_=c.parse(s[2],2,Pr(c.expectedType||rr));return d&&_?new Qi(_.type.itemType,d,_):null}evaluate(s){const c=this.index.evaluate(s),d=this.input.evaluate(s);if(c<0)throw new vt(`Array index out of bounds: ${c} < 0.`);if(c>=d.length)throw new vt(`Array index out of bounds: ${c} > ${d.length-1}.`);if(c!==Math.floor(c))throw new vt(`Array index must be an integer, but found ${c} instead.`);return d[c]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class os{constructor(s,c){this.type=Kt,this.needle=s,this.haystack=c}static parse(s,c){if(s.length!==3)return c.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const d=c.parse(s[1],1,rr),_=c.parse(s[2],2,rr);return d&&_?Gn(d.type,[Kt,Ot,me,Gr,rr])?new os(d,_):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${vr(d.type)} instead`):null}evaluate(s){const c=this.needle.evaluate(s),d=this.haystack.evaluate(s);if(!d)return!1;if(!Xn(c,["boolean","string","number","null"]))throw new vt(`Expected first argument to be of type boolean, string, number or null, but found ${vr(We(c))} instead.`);if(!Xn(d,["string","array"]))throw new vt(`Expected second argument to be of type array or string, but found ${vr(We(d))} instead.`);return d.indexOf(c)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class YA{constructor(s,c,d){this.type=me,this.needle=s,this.haystack=c,this.fromIndex=d}static parse(s,c){if(s.length<=2||s.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const d=c.parse(s[1],1,rr),_=c.parse(s[2],2,rr);if(!d||!_)return null;if(!Gn(d.type,[Kt,Ot,me,Gr,rr]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${vr(d.type)} instead`);if(s.length===4){const v=c.parse(s[3],3,me);return v?new YA(d,_,v):null}return new YA(d,_)}evaluate(s){const c=this.needle.evaluate(s),d=this.haystack.evaluate(s);if(!Xn(c,["boolean","string","number","null"]))throw new vt(`Expected first argument to be of type boolean, string, number or null, but found ${vr(We(c))} instead.`);if(!Xn(d,["string","array"]))throw new vt(`Expected second argument to be of type array or string, but found ${vr(We(d))} instead.`);if(this.fromIndex){const _=this.fromIndex.evaluate(s);return d.indexOf(c,_)}return d.indexOf(c)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class ko{constructor(s,c,d,_,v,x){this.inputType=s,this.type=c,this.input=d,this.cases=_,this.outputs=v,this.otherwise=x}static parse(s,c){if(s.length<5)return c.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return c.error("Expected an even number of arguments.");let d,_;c.expectedType&&c.expectedType.kind!=="value"&&(_=c.expectedType);const v={},x=[];for(let M=2;M<s.length-1;M+=2){let z=s[M];const K=s[M+1];Array.isArray(z)||(z=[z]);const X=c.concat(M);if(z.length===0)return X.error("Expected at least one branch label.");for(const q of z){if(typeof q!="number"&&typeof q!="string")return X.error("Branch labels must be numbers or strings.");if(typeof q=="number"&&Math.abs(q)>Number.MAX_SAFE_INTEGER)return X.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof q=="number"&&Math.floor(q)!==q)return X.error("Numeric branch labels must be integer values.");if(d){if(X.checkSubtype(d,We(q)))return null}else d=We(q);if(v[String(q)]!==void 0)return X.error("Branch labels must be unique.");v[String(q)]=x.length}const W=c.parse(K,M,_);if(!W)return null;_=_||W.type,x.push(W)}const I=c.parse(s[1],1,rr);if(!I)return null;const T=c.parse(s[s.length-1],s.length-1,_);return T?I.type.kind!=="value"&&c.concat(1).checkSubtype(d,I.type)?null:new ko(d,_,I,v,x,T):null}evaluate(s){const c=this.input.evaluate(s);return(We(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class Mo{constructor(s,c,d){this.type=s,this.branches=c,this.otherwise=d}static parse(s,c){if(s.length<4)return c.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return c.error("Expected an odd number of arguments.");let d;c.expectedType&&c.expectedType.kind!=="value"&&(d=c.expectedType);const _=[];for(let x=1;x<s.length-1;x+=2){const I=c.parse(s[x],x,Kt);if(!I)return null;const T=c.parse(s[x+1],x+1,d);if(!T)return null;_.push([I,T]),d=d||T.type}const v=c.parse(s[s.length-1],s.length-1,d);if(!v)return null;if(!d)throw new Error("Can't infer output type");return new Mo(d,_,v)}evaluate(s){for(const[c,d]of this.branches)if(c.evaluate(s))return d.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[c,d]of this.branches)s(c),s(d);s(this.otherwise)}outputDefined(){return this.branches.every(([s,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class nA{constructor(s,c,d,_){this.type=s,this.input=c,this.beginIndex=d,this.endIndex=_}static parse(s,c){if(s.length<=2||s.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const d=c.parse(s[1],1,rr),_=c.parse(s[2],2,me);if(!d||!_)return null;if(!Gn(d.type,[Pr(rr),Ot,rr]))return c.error(`Expected first argument to be of type array or string, but found ${vr(d.type)} instead`);if(s.length===4){const v=c.parse(s[3],3,me);return v?new nA(d.type,d,_,v):null}return new nA(d.type,d,_)}evaluate(s){const c=this.input.evaluate(s),d=this.beginIndex.evaluate(s);if(!Xn(c,["string","array"]))throw new vt(`Expected first argument to be of type array or string, but found ${vr(We(c))} instead.`);if(this.endIndex){const _=this.endIndex.evaluate(s);return c.slice(d,_)}return c.slice(d)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function Ca(o,s){return o==="=="||o==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function $A(o,s,c,d){return d.compare(s,c)===0}function eo(o,s,c){const d=o!=="=="&&o!=="!=";return class fB{constructor(v,x,I){this.type=Kt,this.lhs=v,this.rhs=x,this.collator=I,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const I=v[0];let T=x.parse(v[1],1,rr);if(!T)return null;if(!Ca(I,T.type))return x.concat(1).error(`"${I}" comparisons are not supported for type '${vr(T.type)}'.`);let M=x.parse(v[2],2,rr);if(!M)return null;if(!Ca(I,M.type))return x.concat(2).error(`"${I}" comparisons are not supported for type '${vr(M.type)}'.`);if(T.type.kind!==M.type.kind&&T.type.kind!=="value"&&M.type.kind!=="value")return x.error(`Cannot compare types '${vr(T.type)}' and '${vr(M.type)}'.`);d&&(T.type.kind==="value"&&M.type.kind!=="value"?T=new $t(M.type,[T]):T.type.kind!=="value"&&M.type.kind==="value"&&(M=new $t(T.type,[M])));let z=null;if(v.length===4){if(T.type.kind!=="string"&&M.type.kind!=="string"&&T.type.kind!=="value"&&M.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(z=x.parse(v[3],3,Oe),!z)return null}return new fB(T,M,z)}evaluate(v){const x=this.lhs.evaluate(v),I=this.rhs.evaluate(v);if(d&&this.hasUntypedArgument){const T=We(x),M=We(I);if(T.kind!==M.kind||T.kind!=="string"&&T.kind!=="number")throw new vt(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${T.kind}, ${M.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const T=We(x),M=We(I);if(T.kind!=="string"||M.kind!=="string")return s(v,x,I)}return this.collator?c(v,x,I,this.collator.evaluate(v)):s(v,x,I)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const Lf=eo("==",function(o,s,c){return s===c},$A),Hf=eo("!=",function(o,s,c){return s!==c},function(o,s,c,d){return!$A(0,s,c,d)}),Pf=eo("<",function(o,s,c){return s<c},function(o,s,c,d){return d.compare(s,c)<0}),zf=eo(">",function(o,s,c){return s>c},function(o,s,c,d){return d.compare(s,c)>0}),Rf=eo("<=",function(o,s,c){return s<=c},function(o,s,c,d){return d.compare(s,c)<=0}),Of=eo(">=",function(o,s,c){return s>=c},function(o,s,c,d){return d.compare(s,c)>=0});class Ul{constructor(s,c,d,_,v){this.type=Ot,this.number=s,this.locale=c,this.currency=d,this.minFractionDigits=_,this.maxFractionDigits=v}static parse(s,c){if(s.length!==3)return c.error("Expected two arguments.");const d=c.parse(s[1],1,me);if(!d)return null;const _=s[2];if(typeof _!="object"||Array.isArray(_))return c.error("NumberFormat options argument must be an object.");let v=null;if(_.locale&&(v=c.parse(_.locale,1,Ot),!v))return null;let x=null;if(_.currency&&(x=c.parse(_.currency,1,Ot),!x))return null;let I=null;if(_["min-fraction-digits"]&&(I=c.parse(_["min-fraction-digits"],1,me),!I))return null;let T=null;return _["max-fraction-digits"]&&(T=c.parse(_["max-fraction-digits"],1,me),!T)?null:new Ul(d,v,x,I,T)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class Ea{constructor(s){this.type=kr,this.sections=s}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");const d=s[1];if(!Array.isArray(d)&&typeof d=="object")return c.error("First argument must be an image or text section.");const _=[];let v=!1;for(let x=1;x<=s.length-1;++x){const I=s[x];if(v&&typeof I=="object"&&!Array.isArray(I)){v=!1;let T=null;if(I["font-scale"]&&(T=c.parse(I["font-scale"],1,me),!T))return null;let M=null;if(I["text-font"]&&(M=c.parse(I["text-font"],1,Pr(Ot)),!M))return null;let z=null;if(I["text-color"]&&(z=c.parse(I["text-color"],1,Ir),!z))return null;const K=_[_.length-1];K.scale=T,K.font=M,K.textColor=z}else{const T=c.parse(s[x],1,rr);if(!T)return null;const M=T.type.kind;if(M!=="string"&&M!=="value"&&M!=="null"&&M!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,_.push({content:T,scale:null,font:null,textColor:null})}}return new Ea(_)}evaluate(s){return new ye(this.sections.map(c=>{const d=c.content.evaluate(s);return We(d)===ri?new _e("",d,null,null,null):new _e(Dt(d),null,c.scale?c.scale.evaluate(s):null,c.font?c.font.evaluate(s).join(","):null,c.textColor?c.textColor.evaluate(s):null)}))}eachChild(s){for(const c of this.sections)s(c.content),c.scale&&s(c.scale),c.font&&s(c.font),c.textColor&&s(c.textColor)}outputDefined(){return!1}}class Ql{constructor(s){this.type=ri,this.input=s}static parse(s,c){if(s.length!==2)return c.error("Expected two arguments.");const d=c.parse(s[1],1,Ot);return d?new Ql(d):c.error("No image name provided.")}evaluate(s){const c=this.input.evaluate(s),d=Ue.fromString(c);return d&&s.availableImages&&(d.available=s.availableImages.indexOf(c)>-1),d}eachChild(s){s(this.input)}outputDefined(){return!1}}class Il{constructor(s){this.type=me,this.input=s}static parse(s,c){if(s.length!==2)return c.error(`Expected 1 argument, but found ${s.length-1} instead.`);const d=c.parse(s[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${vr(d.type)} instead.`):new Il(d):null}evaluate(s){const c=this.input.evaluate(s);if(typeof c=="string"||Array.isArray(c))return c.length;throw new vt(`Expected value to be of type string or array, but found ${vr(We(c))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const to={"==":Lf,"!=":Hf,">":zf,"<":Pf,">=":Of,"<=":Rf,array:$t,at:Qi,boolean:$t,case:Mo,coalesce:Bn,collator:Ci,format:Ea,image:Ql,in:os,"index-of":YA,interpolate:dn,"interpolate-hcl":dn,"interpolate-lab":dn,length:Il,let:pn,literal:Lt,match:ko,number:$t,"number-format":Ul,object:$t,slice:nA,step:vn,string:$t,"to-boolean":sr,"to-color":sr,"to-number":sr,"to-string":sr,var:ks,within:Sn};function au(o,[s,c,d,_]){s=s.evaluate(o),c=c.evaluate(o),d=d.evaluate(o);const v=_?_.evaluate(o):1,x=je(s,c,d,v);if(x)throw new vt(x);return new $(s/255*v,c/255*v,d/255*v,v)}function lu(o,s){return o in s}function Fa(o,s){const c=s[o];return c===void 0?null:c}function CA(o){return{type:o}}function cu(o){return{result:"success",value:o}}function ro(o){return{result:"error",value:o}}function di(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function uu(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function gr(o){return!!o.expression&&o.expression.interpolated}function Mr(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function ui(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function wi(o){return o}function Do(o,s){const c=s.type==="color",d=o.stops&&typeof o.stops[0][0]=="object",_=d||!(d||o.property!==void 0),v=o.type||(gr(s)?"exponential":"interval");if(c||s.type==="padding"){const M=c?$.parse:de.parse;(o=ci({},o)).stops&&(o.stops=o.stops.map(z=>[z[0],M(z[1])])),o.default=M(o.default?o.default:s.default)}if(o.colorSpace&&o.colorSpace!=="rgb"&&!ba[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let x,I,T;if(v==="exponential")x=hu;else if(v==="interval")x=Nf;else if(v==="categorical"){x=Kf,I=Object.create(null);for(const M of o.stops)I[M[0]]=M[1];T=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);x=Vf}if(d){const M={},z=[];for(let W=0;W<o.stops.length;W++){const q=o.stops[W],pe=q[0].zoom;M[pe]===void 0&&(M[pe]={zoom:pe,type:o.type,property:o.property,default:o.default,stops:[]},z.push(pe)),M[pe].stops.push([q[0].value,q[1]])}const K=[];for(const W of z)K.push([M[W].zoom,Do(M[W],s)]);const X={name:"linear"};return{kind:"composite",interpolationType:X,interpolationFactor:dn.interpolationFactor.bind(void 0,X),zoomStops:K.map(W=>W[0]),evaluate:({zoom:W},q)=>hu({stops:K,base:o.base},s,W).evaluate(W,q)}}if(_){const M=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:dn.interpolationFactor.bind(void 0,M),zoomStops:o.stops.map(z=>z[0]),evaluate:({zoom:z})=>x(o,s,z,I,T)}}return{kind:"source",evaluate(M,z){const K=z&&z.properties?z.properties[o.property]:void 0;return K===void 0?io(o.default,s.default):x(o,s,K,I,T)}}}function io(o,s,c){return o!==void 0?o:s!==void 0?s:c!==void 0?c:void 0}function Kf(o,s,c,d,_){return io(typeof c===_?d[c]:void 0,o.default,s.default)}function Nf(o,s,c){if(Mr(c)!=="number")return io(o.default,s.default);const d=o.stops.length;if(d===1||c<=o.stops[0][0])return o.stops[0][1];if(c>=o.stops[d-1][0])return o.stops[d-1][1];const _=kn(o.stops.map(v=>v[0]),c);return o.stops[_][1]}function hu(o,s,c){const d=o.base!==void 0?o.base:1;if(Mr(c)!=="number")return io(o.default,s.default);const _=o.stops.length;if(_===1||c<=o.stops[0][0])return o.stops[0][1];if(c>=o.stops[_-1][0])return o.stops[_-1][1];const v=kn(o.stops.map(z=>z[0]),c),x=function(z,K,X,W){const q=W-X,pe=z-X;return q===0?0:K===1?pe/q:(Math.pow(K,pe)-1)/(Math.pow(K,q)-1)}(c,d,o.stops[v][0],o.stops[v+1][0]),I=o.stops[v][1],T=o.stops[v+1][1];let M=iA[s.type]||wi;if(o.colorSpace&&o.colorSpace!=="rgb"){const z=ba[o.colorSpace];M=(K,X)=>z.reverse(z.interpolate(z.forward(K),z.forward(X),x))}return typeof I.evaluate=="function"?{evaluate(...z){const K=I.evaluate.apply(void 0,z),X=T.evaluate.apply(void 0,z);if(K!==void 0&&X!==void 0)return M(K,X,x)}}:M(I,T,x)}function Vf(o,s,c){switch(s.type){case"color":c=$.parse(c);break;case"formatted":c=ye.fromString(c.toString());break;case"resolvedImage":c=Ue.fromString(c.toString());break;case"padding":c=de.parse(c);break;default:Mr(c)===s.type||s.type==="enum"&&s.values[c]||(c=void 0)}return io(c,o.default,s.default)}Cr.register(to,{error:[{kind:"error"},[Ot],(o,[s])=>{throw new vt(s.evaluate(o))}],typeof:[Ot,[rr],(o,[s])=>vr(We(s.evaluate(o)))],"to-rgba":[Pr(me,4),[Ir],(o,[s])=>s.evaluate(o).toArray()],rgb:[Ir,[me,me,me],au],rgba:[Ir,[me,me,me,me],au],has:{type:Kt,overloads:[[[Ot],(o,[s])=>lu(s.evaluate(o),o.properties())],[[Ot,wr],(o,[s,c])=>lu(s.evaluate(o),c.evaluate(o))]]},get:{type:rr,overloads:[[[Ot],(o,[s])=>Fa(s.evaluate(o),o.properties())],[[Ot,wr],(o,[s,c])=>Fa(s.evaluate(o),c.evaluate(o))]]},"feature-state":[rr,[Ot],(o,[s])=>Fa(s.evaluate(o),o.featureState||{})],properties:[wr,[],o=>o.properties()],"geometry-type":[Ot,[],o=>o.geometryType()],id:[rr,[],o=>o.id()],zoom:[me,[],o=>o.globals.zoom],"heatmap-density":[me,[],o=>o.globals.heatmapDensity||0],"line-progress":[me,[],o=>o.globals.lineProgress||0],accumulated:[rr,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[me,CA(me),(o,s)=>{let c=0;for(const d of s)c+=d.evaluate(o);return c}],"*":[me,CA(me),(o,s)=>{let c=1;for(const d of s)c*=d.evaluate(o);return c}],"-":{type:me,overloads:[[[me,me],(o,[s,c])=>s.evaluate(o)-c.evaluate(o)],[[me],(o,[s])=>-s.evaluate(o)]]},"/":[me,[me,me],(o,[s,c])=>s.evaluate(o)/c.evaluate(o)],"%":[me,[me,me],(o,[s,c])=>s.evaluate(o)%c.evaluate(o)],ln2:[me,[],()=>Math.LN2],pi:[me,[],()=>Math.PI],e:[me,[],()=>Math.E],"^":[me,[me,me],(o,[s,c])=>Math.pow(s.evaluate(o),c.evaluate(o))],sqrt:[me,[me],(o,[s])=>Math.sqrt(s.evaluate(o))],log10:[me,[me],(o,[s])=>Math.log(s.evaluate(o))/Math.LN10],ln:[me,[me],(o,[s])=>Math.log(s.evaluate(o))],log2:[me,[me],(o,[s])=>Math.log(s.evaluate(o))/Math.LN2],sin:[me,[me],(o,[s])=>Math.sin(s.evaluate(o))],cos:[me,[me],(o,[s])=>Math.cos(s.evaluate(o))],tan:[me,[me],(o,[s])=>Math.tan(s.evaluate(o))],asin:[me,[me],(o,[s])=>Math.asin(s.evaluate(o))],acos:[me,[me],(o,[s])=>Math.acos(s.evaluate(o))],atan:[me,[me],(o,[s])=>Math.atan(s.evaluate(o))],min:[me,CA(me),(o,s)=>Math.min(...s.map(c=>c.evaluate(o)))],max:[me,CA(me),(o,s)=>Math.max(...s.map(c=>c.evaluate(o)))],abs:[me,[me],(o,[s])=>Math.abs(s.evaluate(o))],round:[me,[me],(o,[s])=>{const c=s.evaluate(o);return c<0?-Math.round(-c):Math.round(c)}],floor:[me,[me],(o,[s])=>Math.floor(s.evaluate(o))],ceil:[me,[me],(o,[s])=>Math.ceil(s.evaluate(o))],"filter-==":[Kt,[Ot,rr],(o,[s,c])=>o.properties()[s.value]===c.value],"filter-id-==":[Kt,[rr],(o,[s])=>o.id()===s.value],"filter-type-==":[Kt,[Ot],(o,[s])=>o.geometryType()===s.value],"filter-<":[Kt,[Ot,rr],(o,[s,c])=>{const d=o.properties()[s.value],_=c.value;return typeof d==typeof _&&d<_}],"filter-id-<":[Kt,[rr],(o,[s])=>{const c=o.id(),d=s.value;return typeof c==typeof d&&c<d}],"filter->":[Kt,[Ot,rr],(o,[s,c])=>{const d=o.properties()[s.value],_=c.value;return typeof d==typeof _&&d>_}],"filter-id->":[Kt,[rr],(o,[s])=>{const c=o.id(),d=s.value;return typeof c==typeof d&&c>d}],"filter-<=":[Kt,[Ot,rr],(o,[s,c])=>{const d=o.properties()[s.value],_=c.value;return typeof d==typeof _&&d<=_}],"filter-id-<=":[Kt,[rr],(o,[s])=>{const c=o.id(),d=s.value;return typeof c==typeof d&&c<=d}],"filter->=":[Kt,[Ot,rr],(o,[s,c])=>{const d=o.properties()[s.value],_=c.value;return typeof d==typeof _&&d>=_}],"filter-id->=":[Kt,[rr],(o,[s])=>{const c=o.id(),d=s.value;return typeof c==typeof d&&c>=d}],"filter-has":[Kt,[rr],(o,[s])=>s.value in o.properties()],"filter-has-id":[Kt,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[Kt,[Pr(Ot)],(o,[s])=>s.value.indexOf(o.geometryType())>=0],"filter-id-in":[Kt,[Pr(rr)],(o,[s])=>s.value.indexOf(o.id())>=0],"filter-in-small":[Kt,[Ot,Pr(rr)],(o,[s,c])=>c.value.indexOf(o.properties()[s.value])>=0],"filter-in-large":[Kt,[Ot,Pr(rr)],(o,[s,c])=>function(d,_,v,x){for(;v<=x;){const I=v+x>>1;if(_[I]===d)return!0;_[I]>d?x=I-1:v=I+1}return!1}(o.properties()[s.value],c.value,0,c.value.length-1)],all:{type:Kt,overloads:[[[Kt,Kt],(o,[s,c])=>s.evaluate(o)&&c.evaluate(o)],[CA(Kt),(o,s)=>{for(const c of s)if(!c.evaluate(o))return!1;return!0}]]},any:{type:Kt,overloads:[[[Kt,Kt],(o,[s,c])=>s.evaluate(o)||c.evaluate(o)],[CA(Kt),(o,s)=>{for(const c of s)if(c.evaluate(o))return!0;return!1}]]},"!":[Kt,[Kt],(o,[s])=>!s.evaluate(o)],"is-supported-script":[Kt,[Ot],(o,[s])=>{const c=o.globals&&o.globals.isSupportedScript;return!c||c(s.evaluate(o))}],upcase:[Ot,[Ot],(o,[s])=>s.evaluate(o).toUpperCase()],downcase:[Ot,[Ot],(o,[s])=>s.evaluate(o).toLowerCase()],concat:[Ot,CA(rr),(o,s)=>s.map(c=>Dt(c.evaluate(o))).join("")],"resolved-locale":[Ot,[Oe],(o,[s])=>s.evaluate(o).resolvedLocale()]});class Ua{constructor(s,c){this.expression=s,this._warningHistory={},this._evaluator=new fr,this._defaultValue=c?function(d){return d.type==="color"&&ui(d.default)?new $(0,0,0,0):d.type==="color"?$.parse(d.default)||null:d.type==="padding"?de.parse(d.default)||null:d.default===void 0?null:d.default}(c):null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(s,c,d,_,v,x){return this._evaluator.globals=s,this._evaluator.feature=c,this._evaluator.featureState=d,this._evaluator.canonical=_,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(s,c,d,_,v,x){this._evaluator.globals=s,this._evaluator.feature=c||null,this._evaluator.featureState=d||null,this._evaluator.canonical=_,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const I=this.expression.evaluate(this._evaluator);if(I==null||typeof I=="number"&&I!=I)return this._defaultValue;if(this._enumValues&&!(I in this._enumValues))throw new vt(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify(I)} instead.`);return I}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,typeof console<"u"&&console.warn(I.message)),this._defaultValue}}}function Lo(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in to}function Ho(o,s){const c=new Ms(to,[],s?function(_){const v={color:Ir,string:Ot,number:me,enum:Ot,boolean:Kt,formatted:kr,padding:en,resolvedImage:ri};return _.type==="array"?Pr(v[_.value]||rr,_.length):v[_.type]}(s):void 0),d=c.parse(o,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?cu(new Ua(d,s)):ro(c.errors)}class Po{constructor(s,c){this.kind=s,this._styleExpression=c,this.isStateDependent=s!=="constant"&&!As(c.expression)}evaluateWithoutErrorHandling(s,c,d,_,v,x){return this._styleExpression.evaluateWithoutErrorHandling(s,c,d,_,v,x)}evaluate(s,c,d,_,v,x){return this._styleExpression.evaluate(s,c,d,_,v,x)}}class Tl{constructor(s,c,d,_){this.kind=s,this.zoomStops=d,this._styleExpression=c,this.isStateDependent=s!=="camera"&&!As(c.expression),this.interpolationType=_}evaluateWithoutErrorHandling(s,c,d,_,v,x){return this._styleExpression.evaluateWithoutErrorHandling(s,c,d,_,v,x)}evaluate(s,c,d,_,v,x){return this._styleExpression.evaluate(s,c,d,_,v,x)}interpolationFactor(s,c,d){return this.interpolationType?dn.interpolationFactor(this.interpolationType,s,c,d):0}}function fu(o,s){const c=Ho(o,s);if(c.result==="error")return c;const d=c.value.expression,_=ss(d);if(!_&&!di(s))return ro([new Xe("","data expressions not supported")]);const v=Ss(d,["zoom"]);if(!v&&!uu(s))return ro([new Xe("","zoom expressions not supported")]);const x=Ia(d);return x||v?x instanceof Xe?ro([x]):x instanceof dn&&!gr(s)?ro([new Xe("",'"interpolate" expressions cannot be used with this property')]):cu(x?new Tl(_?"camera":"composite",c.value,x.labels,x instanceof dn?x.interpolation:void 0):new Po(_?"constant":"source",c.value)):ro([new Xe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Qa{constructor(s,c){this._parameters=s,this._specification=c,ci(this,Do(this._parameters,this._specification))}static deserialize(s){return new Qa(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function Ia(o){let s=null;if(o instanceof pn)s=Ia(o.result);else if(o instanceof Bn){for(const c of o.args)if(s=Ia(c),s)break}else(o instanceof vn||o instanceof dn)&&o.input instanceof Cr&&o.input.name==="zoom"&&(s=o);return s instanceof Xe||o.eachChild(c=>{const d=Ia(c);d instanceof Xe?s=d:!s&&d?s=new Xe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&d&&s!==d&&(s=new Xe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}function as(o){const s=o.key,c=o.value,d=o.valueSpec||{},_=o.objectElementValidators||{},v=o.style,x=o.styleSpec;let I=[];const T=Mr(c);if(T!=="object")return[new mt(s,c,`object expected, ${T} found`)];for(const M in c){const z=M.split(".")[0],K=d[z]||d["*"];let X;if(_[z])X=_[z];else if(d[z])X=Dn;else if(_["*"])X=_["*"];else{if(!d["*"]){I.push(new mt(s,c[M],`unknown property "${M}"`));continue}X=Dn}I=I.concat(X({key:(s&&`${s}.`)+M,value:c[M],valueSpec:K,style:v,styleSpec:x,object:c,objectKey:M},c))}for(const M in d)_[M]||d[M].required&&d[M].default===void 0&&c[M]===void 0&&I.push(new mt(s,c,`missing required property "${M}"`));return I}function du(o){const s=o.value,c=o.valueSpec,d=o.style,_=o.styleSpec,v=o.key,x=o.arrayElementValidator||Dn;if(Mr(s)!=="array")return[new mt(v,s,`array expected, ${Mr(s)} found`)];if(c.length&&s.length!==c.length)return[new mt(v,s,`array length ${c.length} expected, length ${s.length} found`)];if(c["min-length"]&&s.length<c["min-length"])return[new mt(v,s,`array length at least ${c["min-length"]} expected, length ${s.length} found`)];let I={type:c.value,values:c.values};_.$version<7&&(I.function=c.function),Mr(c.value)==="object"&&(I=c.value);let T=[];for(let M=0;M<s.length;M++)T=T.concat(x({array:s,arrayIndex:M,value:s[M],valueSpec:I,style:d,styleSpec:_,key:`${v}[${M}]`}));return T}function Sl(o){const s=o.key,c=o.value,d=o.valueSpec;let _=Mr(c);return _==="number"&&c!=c&&(_="NaN"),_!=="number"?[new mt(s,c,`number expected, ${_} found`)]:"minimum"in d&&c<d.minimum?[new mt(s,c,`${c} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&c>d.maximum?[new mt(s,c,`${c} is greater than the maximum value ${d.maximum}`)]:[]}function pu(o){const s=o.valueSpec,c=Ar(o.value.type);let d,_,v,x={};const I=c!=="categorical"&&o.value.property===void 0,T=!I,M=Mr(o.value.stops)==="array"&&Mr(o.value.stops[0])==="array"&&Mr(o.value.stops[0][0])==="object",z=as({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(W){if(c==="identity")return[new mt(W.key,W.value,'identity function may not have a "stops" property')];let q=[];const pe=W.value;return q=q.concat(du({key:W.key,value:pe,valueSpec:W.valueSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:K})),Mr(pe)==="array"&&pe.length===0&&q.push(new mt(W.key,pe,"array must have at least one stop")),q},default:function(W){return Dn({key:W.key,value:W.value,valueSpec:s,style:W.style,styleSpec:W.styleSpec})}}});return c==="identity"&&I&&z.push(new mt(o.key,o.value,'missing required property "property"')),c==="identity"||o.value.stops||z.push(new mt(o.key,o.value,'missing required property "stops"')),c==="exponential"&&o.valueSpec.expression&&!gr(o.valueSpec)&&z.push(new mt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(T&&!di(o.valueSpec)?z.push(new mt(o.key,o.value,"property functions not supported")):I&&!uu(o.valueSpec)&&z.push(new mt(o.key,o.value,"zoom functions not supported"))),c!=="categorical"&&!M||o.value.property!==void 0||z.push(new mt(o.key,o.value,'"property" property is required')),z;function K(W){let q=[];const pe=W.value,fe=W.key;if(Mr(pe)!=="array")return[new mt(fe,pe,`array expected, ${Mr(pe)} found`)];if(pe.length!==2)return[new mt(fe,pe,`array length 2 expected, length ${pe.length} found`)];if(M){if(Mr(pe[0])!=="object")return[new mt(fe,pe,`object expected, ${Mr(pe[0])} found`)];if(pe[0].zoom===void 0)return[new mt(fe,pe,"object stop key must have zoom")];if(pe[0].value===void 0)return[new mt(fe,pe,"object stop key must have value")];if(v&&v>Ar(pe[0].zoom))return[new mt(fe,pe[0].zoom,"stop zoom values must appear in ascending order")];Ar(pe[0].zoom)!==v&&(v=Ar(pe[0].zoom),_=void 0,x={}),q=q.concat(as({key:`${fe}[0]`,value:pe[0],valueSpec:{zoom:{}},style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:Sl,value:X}}))}else q=q.concat(X({key:`${fe}[0]`,value:pe[0],valueSpec:{},style:W.style,styleSpec:W.styleSpec},pe));return Lo(yi(pe[1]))?q.concat([new mt(`${fe}[1]`,pe[1],"expressions are not allowed in function stops.")]):q.concat(Dn({key:`${fe}[1]`,value:pe[1],valueSpec:s,style:W.style,styleSpec:W.styleSpec}))}function X(W,q){const pe=Mr(W.value),fe=Ar(W.value),ke=W.value!==null?W.value:q;if(d){if(pe!==d)return[new mt(W.key,ke,`${pe} stop domain type must match previous stop domain type ${d}`)]}else d=pe;if(pe!=="number"&&pe!=="string"&&pe!=="boolean")return[new mt(W.key,ke,"stop domain value must be a number, string, or boolean")];if(pe!=="number"&&c!=="categorical"){let Ne=`number expected, ${pe} found`;return di(s)&&c===void 0&&(Ne+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new mt(W.key,ke,Ne)]}return c!=="categorical"||pe!=="number"||isFinite(fe)&&Math.floor(fe)===fe?c!=="categorical"&&pe==="number"&&_!==void 0&&fe<_?[new mt(W.key,ke,"stop domain values must appear in ascending order")]:(_=fe,c==="categorical"&&fe in x?[new mt(W.key,ke,"stop domain values must be unique")]:(x[fe]=!0,[])):[new mt(W.key,ke,`integer expected, found ${fe}`)]}}function EA(o){const s=(o.expressionContext==="property"?fu:Ho)(yi(o.value),o.valueSpec);if(s.result==="error")return s.value.map(d=>new mt(`${o.key}${d.key}`,o.value,d.message));const c=s.value.expression||s.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!c.outputDefined())return[new mt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!As(c))return[new mt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!As(c))return[new mt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Ss(c,["zoom","feature-state"]))return[new mt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!ss(c))return[new mt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function zo(o){const s=o.key,c=o.value,d=o.valueSpec,_=[];return Array.isArray(d.values)?d.values.indexOf(Ar(c))===-1&&_.push(new mt(s,c,`expected one of [${d.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(d.values).indexOf(Ar(c))===-1&&_.push(new mt(s,c,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(c)} found`)),_}function no(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const s of o.slice(1))if(!no(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}const Gf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ta(o){if(o==null)return{filter:()=>!0,needGeometry:!1};no(o)||(o=Ro(o));const s=Ho(o,Gf);if(s.result==="error")throw new Error(s.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,d,_)=>s.value.evaluate(c,d,{},_),needGeometry:mu(o)}}function gu(o,s){return o<s?-1:o>s?1:0}function mu(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let s=1;s<o.length;s++)if(mu(o[s]))return!0;return!1}function Ro(o){if(!o)return!0;const s=o[0];return o.length<=1?s!=="any":s==="=="?kl(o[1],o[2],"=="):s==="!="?so(kl(o[1],o[2],"==")):s==="<"||s===">"||s==="<="||s===">="?kl(o[1],o[2],s):s==="any"?(c=o.slice(1),["any"].concat(c.map(Ro))):s==="all"?["all"].concat(o.slice(1).map(Ro)):s==="none"?["all"].concat(o.slice(1).map(Ro).map(so)):s==="in"?Sa(o[1],o.slice(2)):s==="!in"?so(Sa(o[1],o.slice(2))):s==="has"?Oo(o[1]):s==="!has"?so(Oo(o[1])):s!=="within"||o;var c}function kl(o,s,c){switch(o){case"$type":return[`filter-type-${c}`,s];case"$id":return[`filter-id-${c}`,s];default:return[`filter-${c}`,o,s]}}function Sa(o,s){if(s.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(c=>typeof c!=typeof s[0])?["filter-in-large",o,["literal",s.sort(gu)]]:["filter-in-small",o,["literal",s]]}}function Oo(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function so(o){return["!",o]}function Ko(o){return no(yi(o.value))?EA(ci({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):_u(o)}function _u(o){const s=o.value,c=o.key;if(Mr(s)!=="array")return[new mt(c,s,`array expected, ${Mr(s)} found`)];const d=o.styleSpec;let _,v=[];if(s.length<1)return[new mt(c,s,"filter array must have at least 1 element")];switch(v=v.concat(zo({key:`${c}[0]`,value:s[0],valueSpec:d.filter_operator,style:o.style,styleSpec:o.styleSpec})),Ar(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&Ar(s[1])==="$type"&&v.push(new mt(c,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&v.push(new mt(c,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(_=Mr(s[1]),_!=="string"&&v.push(new mt(`${c}[1]`,s[1],`string expected, ${_} found`)));for(let x=2;x<s.length;x++)_=Mr(s[x]),Ar(s[1])==="$type"?v=v.concat(zo({key:`${c}[${x}]`,value:s[x],valueSpec:d.geometry_type,style:o.style,styleSpec:o.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&v.push(new mt(`${c}[${x}]`,s[x],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let x=1;x<s.length;x++)v=v.concat(_u({key:`${c}[${x}]`,value:s[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":_=Mr(s[1]),s.length!==2?v.push(new mt(c,s,`filter array for "${s[0]}" operator must have 2 elements`)):_!=="string"&&v.push(new mt(`${c}[1]`,s[1],`string expected, ${_} found`));break;case"within":_=Mr(s[1]),s.length!==2?v.push(new mt(c,s,`filter array for "${s[0]}" operator must have 2 elements`)):_!=="object"&&v.push(new mt(`${c}[1]`,s[1],`object expected, ${_} found`))}return v}function No(o,s){const c=o.key,d=o.style,_=o.styleSpec,v=o.value,x=o.objectKey,I=_[`${s}_${o.layerType}`];if(!I)return[];const T=x.match(/^(.*)-transition$/);if(s==="paint"&&T&&I[T[1]]&&I[T[1]].transition)return Dn({key:c,value:v,valueSpec:_.transition,style:d,styleSpec:_});const M=o.valueSpec||I[x];if(!M)return[new mt(c,v,`unknown property "${x}"`)];let z;if(Mr(v)==="string"&&di(M)&&!M.tokens&&(z=/^{([^}]+)}$/.exec(v)))return[new mt(c,v,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(z[1])} }\`.`)];const K=[];return o.layerType==="symbol"&&(x==="text-field"&&d&&!d.glyphs&&K.push(new mt(c,v,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&ui(yi(v))&&Ar(v.type)==="identity"&&K.push(new mt(c,v,'"text-font" does not support identity functions'))),K.concat(Dn({key:o.key,value:v,valueSpec:M,style:d,styleSpec:_,expressionContext:"property",propertyType:s,propertyKey:x}))}function yu(o){return No(o,"paint")}function wu(o){return No(o,"layout")}function vu(o){let s=[];const c=o.value,d=o.key,_=o.style,v=o.styleSpec;c.type||c.ref||s.push(new mt(d,c,'either "type" or "ref" is required'));let x=Ar(c.type);const I=Ar(c.ref);if(c.id){const T=Ar(c.id);for(let M=0;M<o.arrayIndex;M++){const z=_.layers[M];Ar(z.id)===T&&s.push(new mt(d,c.id,`duplicate layer id "${c.id}", previously used at line ${z.id.__line__}`))}}if("ref"in c){let T;["type","source","source-layer","filter","layout"].forEach(M=>{M in c&&s.push(new mt(d,c[M],`"${M}" is prohibited for ref layers`))}),_.layers.forEach(M=>{Ar(M.id)===I&&(T=M)}),T?T.ref?s.push(new mt(d,c.ref,"ref cannot reference another ref layer")):x=Ar(T.type):s.push(new mt(d,c.ref,`ref layer "${I}" not found`))}else if(x!=="background")if(c.source){const T=_.sources&&_.sources[c.source],M=T&&Ar(T.type);T?M==="vector"&&x==="raster"?s.push(new mt(d,c.source,`layer "${c.id}" requires a raster source`)):M==="raster"&&x!=="raster"?s.push(new mt(d,c.source,`layer "${c.id}" requires a vector source`)):M!=="vector"||c["source-layer"]?M==="raster-dem"&&x!=="hillshade"?s.push(new mt(d,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!c.paint||!c.paint["line-gradient"]||M==="geojson"&&T.lineMetrics||s.push(new mt(d,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new mt(d,c,`layer "${c.id}" must specify a "source-layer"`)):s.push(new mt(d,c.source,`source "${c.source}" not found`))}else s.push(new mt(d,c,'missing required property "source"'));return s=s.concat(as({key:d,value:c,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Dn({key:`${d}.type`,value:c.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,object:c,objectKey:"type"}),filter:Ko,layout:T=>as({layer:c,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,objectElementValidators:{"*":M=>wu(ci({layerType:x},M))}}),paint:T=>as({layer:c,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,objectElementValidators:{"*":M=>yu(ci({layerType:x},M))}})}})),s}function Ao(o){const s=o.value,c=o.key,d=Mr(s);return d!=="string"?[new mt(c,s,`string expected, ${d} found`)]:[]}const Bu={promoteId:function({key:o,value:s}){if(Mr(s)==="string")return Ao({key:o,value:s});{const c=[];for(const d in s)c.push(...Ao({key:`${o}.${d}`,value:s[d]}));return c}}};function Vo(o){const s=o.value,c=o.key,d=o.styleSpec,_=o.style;if(!s.type)return[new mt(c,s,'"type" is required')];const v=Ar(s.type);let x;switch(v){case"vector":case"raster":case"raster-dem":return x=as({key:c,value:s,valueSpec:d[`source_${v.replace("-","_")}`],style:o.style,styleSpec:d,objectElementValidators:Bu}),x;case"geojson":if(x=as({key:c,value:s,valueSpec:d.source_geojson,style:_,styleSpec:d,objectElementValidators:Bu}),s.cluster)for(const I in s.clusterProperties){const[T,M]=s.clusterProperties[I],z=typeof T=="string"?[T,["accumulated"],["get",I]]:T;x.push(...EA({key:`${c}.${I}.map`,value:M,expressionContext:"cluster-map"})),x.push(...EA({key:`${c}.${I}.reduce`,value:z,expressionContext:"cluster-reduce"}))}return x;case"video":return as({key:c,value:s,valueSpec:d.source_video,style:_,styleSpec:d});case"image":return as({key:c,value:s,valueSpec:d.source_image,style:_,styleSpec:d});case"canvas":return[new mt(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return zo({key:`${c}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:_,styleSpec:d})}}function Go(o){const s=o.value,c=o.styleSpec,d=c.light,_=o.style;let v=[];const x=Mr(s);if(s===void 0)return v;if(x!=="object")return v=v.concat([new mt("light",s,`object expected, ${x} found`)]),v;for(const I in s){const T=I.match(/^(.*)-transition$/);v=v.concat(T&&d[T[1]]&&d[T[1]].transition?Dn({key:I,value:s[I],valueSpec:c.transition,style:_,styleSpec:c}):d[I]?Dn({key:I,value:s[I],valueSpec:d[I],style:_,styleSpec:c}):[new mt(I,s[I],`unknown property "${I}"`)])}return v}function Mn(o){const s=o.value,c=o.styleSpec,d=c.terrain,_=o.style;let v=[];const x=Mr(s);if(s===void 0)return v;if(x!=="object")return v=v.concat([new mt("terrain",s,`object expected, ${x} found`)]),v;for(const I in s)v=v.concat(d[I]?Dn({key:I,value:s[I],valueSpec:d[I],style:_,styleSpec:c}):[new mt(I,s[I],`unknown property "${I}"`)]);return v}const Xo={"*":()=>[],array:du,boolean:function(o){const s=o.value,c=o.key,d=Mr(s);return d!=="boolean"?[new mt(c,s,`boolean expected, ${d} found`)]:[]},number:Sl,color:function(o){const s=o.key,c=o.value,d=Mr(c);return d!=="string"?[new mt(s,c,`color expected, ${d} found`)]:is(c)===null?[new mt(s,c,`color expected, "${c}" found`)]:[]},constants:_i,enum:zo,filter:Ko,function:pu,layer:vu,object:as,source:Vo,light:Go,terrain:Mn,string:Ao,formatted:function(o){return Ao(o).length===0?[]:EA(o)},resolvedImage:function(o){return Ao(o).length===0?[]:EA(o)},padding:function(o){const s=o.key,c=o.value;if(Mr(c)==="array"){if(c.length<1||c.length>4)return[new mt(s,c,`padding requires 1 to 4 values; ${c.length} values found`)];const d={type:"number"};let _=[];for(let v=0;v<c.length;v++)_=_.concat(Dn({key:`${s}[${v}]`,value:c[v],valueSpec:d}));return _}return Sl({key:s,value:c,valueSpec:{}})}};function Dn(o){const s=o.value,c=o.valueSpec,d=o.styleSpec;return c.expression&&ui(Ar(s))?pu(o):c.expression&&Lo(yi(s))?EA(o):c.type&&Xo[c.type]?Xo[c.type](o):as(ci({},o,{valueSpec:c.type?d[c.type]:c}))}function Xf(o){const s=o.value,c=o.key,d=Ao(o);return d.length||(s.indexOf("{fontstack}")===-1&&d.push(new mt(c,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&d.push(new mt(c,s,'"glyphs" url must include a "{range}" token'))),d}function sA(o,s=Ze){let c=[];return c=c.concat(Dn({key:"",value:o,valueSpec:s.$root,styleSpec:s,style:o,objectElementValidators:{glyphs:Xf,"*":()=>[]}})),o.constants&&(c=c.concat(_i({key:"constants",value:o.constants,style:o,styleSpec:s}))),xu(c)}function xu(o){return[].concat(o).sort((s,c)=>s.line-c.line)}function Ps(o){return function(...s){return xu(o.apply(this,s))}}sA.source=Ps(Vo),sA.light=Ps(Go),sA.terrain=Ps(Mn),sA.layer=Ps(vu),sA.filter=Ps(Ko),sA.paintProperty=Ps(yu),sA.layoutProperty=Ps(wu);const Zo=sA,Ml=Zo.light,Zf=Zo.paintProperty,Wf=Zo.layoutProperty;function ka(o,s){let c=!1;if(s&&s.length)for(const d of s)o.fire(new fi(new Error(d.message))),c=!0;return c}class Wo{constructor(s,c,d){const _=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const x=new Int32Array(this.arrayBuffer);s=x[0],this.d=(c=x[1])+2*(d=x[2]);for(let T=0;T<this.d*this.d;T++){const M=x[3+T],z=x[3+T+1];_.push(M===z?null:x.subarray(M,z))}const I=x[3+_.length+1];this.keys=x.subarray(x[3+_.length],I),this.bboxes=x.subarray(I),this.insert=this._insertReadonly}else{this.d=c+2*d;for(let x=0;x<this.d*this.d;x++)_.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=s,this.padding=d,this.scale=c/s,this.uid=0;const v=d/c*s;this.min=-v,this.max=s+v}insert(s,c,d,_,v){this._forEachCell(c,d,_,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(_),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,c,d,_,v,x){this.cells[v].push(x)}query(s,c,d,_,v){const x=this.min,I=this.max;if(s<=x&&c<=x&&I<=d&&I<=_&&!v)return Array.prototype.slice.call(this.keys);{const T=[];return this._forEachCell(s,c,d,_,this._queryCell,T,{},v),T}}_queryCell(s,c,d,_,v,x,I,T){const M=this.cells[v];if(M!==null){const z=this.keys,K=this.bboxes;for(let X=0;X<M.length;X++){const W=M[X];if(I[W]===void 0){const q=4*W;(T?T(K[q+0],K[q+1],K[q+2],K[q+3]):s<=K[q+2]&&c<=K[q+3]&&d>=K[q+0]&&_>=K[q+1])?(I[W]=!0,x.push(z[W])):I[W]=!1}}}}_forEachCell(s,c,d,_,v,x,I,T){const M=this._convertToCellCoord(s),z=this._convertToCellCoord(c),K=this._convertToCellCoord(d),X=this._convertToCellCoord(_);for(let W=M;W<=K;W++)for(let q=z;q<=X;q++){const pe=this.d*q+W;if((!T||T(this._convertFromCellCoord(W),this._convertFromCellCoord(q),this._convertFromCellCoord(W+1),this._convertFromCellCoord(q+1)))&&v.call(this,s,c,d,_,pe,x,I,T))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,c=3+this.cells.length+1+1;let d=0;for(let x=0;x<this.cells.length;x++)d+=this.cells[x].length;const _=new Int32Array(c+d+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let v=c;for(let x=0;x<s.length;x++){const I=s[x];_[3+x]=v,_.set(I,v),v+=I.length}return _[3+s.length]=v,_.set(this.keys,v),v+=this.keys.length,_[3+s.length+1]=v,_.set(this.bboxes,v),v+=this.bboxes.length,_.buffer}static serialize(s,c){const d=s.toArrayBuffer();return c&&c.push(d),{buffer:d}}static deserialize(s){return new Wo(s.buffer)}}const zs={};function zt(o,s,c={}){if(zs[o])throw new Error(`${o} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:o,writeable:!1}),zs[o]={klass:s,omit:c.omit||[],shallow:c.shallow||[]}}zt("Object",Object),zt("TransferableGridIndex",Wo),zt("Color",$),zt("Error",Error),zt("AJAXError",Gt),zt("ResolvedImage",Ue),zt("StylePropertyFunction",Qa),zt("StyleExpression",Ua,{omit:["_evaluator"]}),zt("ZoomDependentExpression",Tl),zt("ZoomConstantExpression",Po),zt("CompoundExpression",Cr,{omit:["_evaluate"]});for(const o in to)to[o]._classRegistryKey||zt(`Expression_${o}`,to[o]);function bu(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function FA(o,s){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(bu(o)||ht(o))return s&&s.push(o),o;if(ArrayBuffer.isView(o)){const c=o;return s&&s.push(c.buffer),c}if(o instanceof ImageData)return s&&s.push(o.data.buffer),o;if(Array.isArray(o)){const c=[];for(const d of o)c.push(FA(d,s));return c}if(typeof o=="object"){const c=o.constructor,d=c._classRegistryKey;if(!d)throw new Error("can't serialize object of unregistered class");if(!zs[d])throw new Error(`${d} is not registered.`);const _=c.serialize?c.serialize(o,s):{};if(c.serialize){if(s&&_===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||zs[d].omit.indexOf(v)>=0)continue;const x=o[v];_[v]=zs[d].shallow.indexOf(v)>=0?x:FA(x,s)}o instanceof Error&&(_.message=o.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(_.$name=d),_}throw new Error("can't serialize object of type "+typeof o)}function AA(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||bu(o)||ht(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(AA);if(typeof o=="object"){const s=o.$name||"Object";if(!zs[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:c}=zs[s];if(!c)throw new Error(`can't deserialize unregistered class ${s}`);if(c.deserialize)return c.deserialize(o);const d=Object.create(c.prototype);for(const _ of Object.keys(o)){if(_==="$name")continue;const v=o[_];d[_]=zs[s].shallow.indexOf(_)>=0?v:AA(v)}return d}throw new Error("can't deserialize object of type "+typeof o)}class Dl{constructor(){this.first=!0}update(s,c){const d=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=c),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=d,!0))}}const Ut={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Ma(o){for(const s of o)if(Hl(s.charCodeAt(0)))return!0;return!1}function qf(o){for(const s of o)if(!Ll(s.charCodeAt(0)))return!1;return!0}function Ll(o){return!(Ut.Arabic(o)||Ut["Arabic Supplement"](o)||Ut["Arabic Extended-A"](o)||Ut["Arabic Presentation Forms-A"](o)||Ut["Arabic Presentation Forms-B"](o))}function Hl(o){return!(o!==746&&o!==747&&(o<4352||!(Ut["Bopomofo Extended"](o)||Ut.Bopomofo(o)||Ut["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Ut["CJK Compatibility Ideographs"](o)||Ut["CJK Compatibility"](o)||Ut["CJK Radicals Supplement"](o)||Ut["CJK Strokes"](o)||!(!Ut["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Ut["CJK Unified Ideographs Extension A"](o)||Ut["CJK Unified Ideographs"](o)||Ut["Enclosed CJK Letters and Months"](o)||Ut["Hangul Compatibility Jamo"](o)||Ut["Hangul Jamo Extended-A"](o)||Ut["Hangul Jamo Extended-B"](o)||Ut["Hangul Jamo"](o)||Ut["Hangul Syllables"](o)||Ut.Hiragana(o)||Ut["Ideographic Description Characters"](o)||Ut.Kanbun(o)||Ut["Kangxi Radicals"](o)||Ut["Katakana Phonetic Extensions"](o)||Ut.Katakana(o)&&o!==12540||!(!Ut["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Ut["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Ut["Unified Canadian Aboriginal Syllabics"](o)||Ut["Unified Canadian Aboriginal Syllabics Extended"](o)||Ut["Vertical Forms"](o)||Ut["Yijing Hexagram Symbols"](o)||Ut["Yi Syllables"](o)||Ut["Yi Radicals"](o))))}function Cu(o){return!(Hl(o)||function(s){return!!(Ut["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Ut["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Ut["Letterlike Symbols"](s)||Ut["Number Forms"](s)||Ut["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Ut["Control Pictures"](s)&&s!==9251||Ut["Optical Character Recognition"](s)||Ut["Enclosed Alphanumerics"](s)||Ut["Geometric Shapes"](s)||Ut["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Ut["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Ut["CJK Symbols and Punctuation"](s)||Ut.Katakana(s)||Ut["Private Use Area"](s)||Ut["CJK Compatibility Forms"](s)||Ut["Small Form Variants"](s)||Ut["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(o))}function Eu(o){return o>=1424&&o<=2303||Ut["Arabic Presentation Forms-A"](o)||Ut["Arabic Presentation Forms-B"](o)}function jf(o,s){return!(!s&&Eu(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Ut.Khmer(o))}function Fu(o){for(const s of o)if(Eu(s.charCodeAt(0)))return!0;return!1}const Pl="deferred",zl="loading",Rl="loaded";let Ol=null,xn="unavailable",oA=null;const Uu=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(xn="error"),Ol&&Ol(o)};function oo(){Kl.fire(new ai("pluginStateChange",{pluginStatus:xn,pluginURL:oA}))}const Kl=new li,qo=function(){return xn},Qu=function(){if(xn!==Pl||!oA)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");xn=zl,oo(),oA&&mr({url:oA},o=>{o?Uu(o):(xn=Rl,oo())})},qn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>xn===Rl||qn.applyArabicShaping!=null,isLoading:()=>xn===zl,setState(o){if(!Ae())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");xn=o.pluginStatus,oA=o.pluginURL},isParsed(){if(!Ae())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return qn.applyArabicShaping!=null&&qn.processBidirectionalText!=null&&qn.processStyledBidirectionalText!=null},getPluginURL(){if(!Ae())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return oA}};class vi{constructor(s,c){this.zoom=s,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Dl,this.transition={})}isSupportedScript(s){return function(c,d){for(const _ of c)if(!jf(_.charCodeAt(0),d))return!1;return!0}(s,qn.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,c=s-Math.floor(s),d=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*c}}}class jo{constructor(s,c){this.property=s,this.value=c,this.expression=function(d,_){if(ui(d))return new Qa(d,_);if(Lo(d)){const v=fu(d,_);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=d;return _.type==="color"&&typeof d=="string"?v=$.parse(d):_.type!=="padding"||typeof d!="number"&&!Array.isArray(d)||(v=de.parse(d)),{kind:"constant",evaluate:()=>v}}}(c===void 0?s.specification.default:c,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,c,d){return this.property.possiblyEvaluate(this,s,c,d)}}class Da{constructor(s){this.property=s,this.value=new jo(s,void 0)}transitioned(s,c){return new Tu(this.property,this.value,c,P({},s.transition,this.transition),s.now)}untransitioned(){return new Tu(this.property,this.value,null,{},0)}}class Iu{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return ce(this._values[s].value.value)}setValue(s,c){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Da(this._values[s].property)),this._values[s].value=new jo(this._values[s].property,c===null?void 0:ce(c))}getTransition(s){return ce(this._values[s].transition)}setTransition(s,c){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Da(this._values[s].property)),this._values[s].transition=ce(c)||void 0}serialize(){const s={};for(const c of Object.keys(this._values)){const d=this.getValue(c);d!==void 0&&(s[c]=d);const _=this.getTransition(c);_!==void 0&&(s[`${c}-transition`]=_)}return s}transitioned(s,c){const d=new Su(this._properties);for(const _ of Object.keys(this._values))d._values[_]=this._values[_].transitioned(s,c._values[_]);return d}untransitioned(){const s=new Su(this._properties);for(const c of Object.keys(this._values))s._values[c]=this._values[c].untransitioned();return s}}class Tu{constructor(s,c,d,_,v){this.property=s,this.value=c,this.begin=v+_.delay||0,this.end=this.begin+_.duration||0,s.specification.transition&&(_.delay||_.duration)&&(this.prior=d)}possiblyEvaluate(s,c,d){const _=s.now||0,v=this.value.possiblyEvaluate(s,c,d),x=this.prior;if(x){if(_>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(_<this.begin)return x.possiblyEvaluate(s,c,d);{const I=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(s,c,d),v,function(T){if(T<=0)return 0;if(T>=1)return 1;const M=T*T,z=M*T;return 4*(T<.5?z:3*(T-M)+z-.75)}(I))}}return v}}class Su{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,c,d){const _=new Jo(this._properties);for(const v of Object.keys(this._values))_._values[v]=this._values[v].possiblyEvaluate(s,c,d);return _}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class Jf{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}getValue(s){return ce(this._values[s].value)}setValue(s,c){this._values[s]=new jo(this._values[s].property,c===null?void 0:ce(c))}serialize(){const s={};for(const c of Object.keys(this._values)){const d=this.getValue(c);d!==void 0&&(s[c]=d)}return s}possiblyEvaluate(s,c,d){const _=new Jo(this._properties);for(const v of Object.keys(this._values))_._values[v]=this._values[v].possiblyEvaluate(s,c,d);return _}}class ms{constructor(s,c,d){this.property=s,this.value=c,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,c,d,_){return this.property.evaluate(this.value,this.parameters,s,c,d,_)}}class Jo{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class Xt{constructor(s){this.specification=s}possiblyEvaluate(s,c){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(c)}interpolate(s,c,d){const _=iA[this.specification.type];return _?_(s,c,d):s}}class ir{constructor(s,c){this.specification=s,this.overrides=c}possiblyEvaluate(s,c,d,_){return new ms(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(c,null,{},d,_)}:s.expression,c)}interpolate(s,c,d){if(s.value.kind!=="constant"||c.value.kind!=="constant")return s;if(s.value.value===void 0||c.value.value===void 0)return new ms(this,{kind:"constant",value:void 0},s.parameters);const _=iA[this.specification.type];return _?new ms(this,{kind:"constant",value:_(s.value.value,c.value.value,d)},s.parameters):s}evaluate(s,c,d,_,v,x){return s.kind==="constant"?s.value:s.evaluate(c,d,_,v,x)}}class ao extends ir{possiblyEvaluate(s,c,d,_){if(s.value===void 0)return new ms(this,{kind:"constant",value:void 0},c);if(s.expression.kind==="constant"){const v=s.expression.evaluate(c,null,{},d,_),x=s.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,I=this._calculate(x,x,x,c);return new ms(this,{kind:"constant",value:I},c)}if(s.expression.kind==="camera"){const v=this._calculate(s.expression.evaluate({zoom:c.zoom-1}),s.expression.evaluate({zoom:c.zoom}),s.expression.evaluate({zoom:c.zoom+1}),c);return new ms(this,{kind:"constant",value:v},c)}return new ms(this,s.expression,c)}evaluate(s,c,d,_,v,x){if(s.kind==="source"){const I=s.evaluate(c,d,_,v,x);return this._calculate(I,I,I,c)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(c.zoom)-1},d,_),s.evaluate({zoom:Math.floor(c.zoom)},d,_),s.evaluate({zoom:Math.floor(c.zoom)+1},d,_),c):s.value}_calculate(s,c,d,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:s,to:c}:{from:d,to:c}}interpolate(s){return s}}class Nl{constructor(s){this.specification=s}possiblyEvaluate(s,c,d,_){if(s.value!==void 0){if(s.expression.kind==="constant"){const v=s.expression.evaluate(c,null,{},d,_);return this._calculate(v,v,v,c)}return this._calculate(s.expression.evaluate(new vi(Math.floor(c.zoom-1),c)),s.expression.evaluate(new vi(Math.floor(c.zoom),c)),s.expression.evaluate(new vi(Math.floor(c.zoom+1),c)),c)}}_calculate(s,c,d,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:s,to:c}:{from:d,to:c}}interpolate(s){return s}}class aA{constructor(s){this.specification=s}possiblyEvaluate(s,c,d,_){return!!s.expression.evaluate(c,null,{},d,_)}interpolate(){return!1}}class rn{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const c in s){const d=s[c];d.specification.overridable&&this.overridableProperties.push(c);const _=this.defaultPropertyValues[c]=new jo(d,void 0),v=this.defaultTransitionablePropertyValues[c]=new Da(d);this.defaultTransitioningPropertyValues[c]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=_.possiblyEvaluate({})}}}zt("DataDrivenProperty",ir),zt("DataConstantProperty",Xt),zt("CrossFadedDataDrivenProperty",ao),zt("CrossFadedProperty",Nl),zt("ColorRampProperty",aA);const lA="-transition";class _s extends li{constructor(s,c){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),c.layout&&(this._unevaluatedLayout=new Jf(c.layout)),c.paint)){this._transitionablePaint=new Iu(c.paint);for(const d in s.paint)this.setPaintProperty(d,s.paint[d],{validate:!1});for(const d in s.layout)this.setLayoutProperty(d,s.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Jo(c.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,c,d={}){c!=null&&this._validate(Wf,`layers.${this.id}.layout.${s}`,s,c,d)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,c):this.visibility=c)}getPaintProperty(s){return s.endsWith(lA)?this._transitionablePaint.getTransition(s.slice(0,-lA.length)):this._transitionablePaint.getValue(s)}setPaintProperty(s,c,d={}){if(c!=null&&this._validate(Zf,`layers.${this.id}.paint.${s}`,s,c,d))return!1;if(s.endsWith(lA))return this._transitionablePaint.setTransition(s.slice(0,-lA.length),c||void 0),!1;{const _=this._transitionablePaint._values[s],v=_.property.specification["property-type"]==="cross-faded-data-driven",x=_.value.isDataDriven(),I=_.value;this._transitionablePaint.setValue(s,c),this._handleSpecialPaintPropertyUpdate(s);const T=this._transitionablePaint._values[s].value;return T.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(s,I,T)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,c,d){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,c){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,c)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),ee(s,(c,d)=>!(c===void 0||d==="layout"&&!Object.keys(c).length||d==="paint"&&!Object.keys(c).length))}_validate(s,c,d,_,v={}){return(!v||v.validate!==!1)&&ka(this,s.call(Zo,{key:c,layerType:this.type,objectKey:d,value:_,styleSpec:Ze,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const c=this.paint.get(s);if(c instanceof ms&&di(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}const ku={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class cA{constructor(s,c){this._structArray=s,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ii{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,c){return s._trim(),c&&(s.isTransferred=!0,c.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const c=Object.create(this.prototype);return c.arrayBuffer=s.arrayBuffer,c.length=s.length,c.capacity=s.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Li(o,s=1){let c=0,d=0;return{members:o.map(_=>{const v=ku[_.type].BYTES_PER_ELEMENT,x=c=Vl(c,Math.max(s,v)),I=_.components||1;return d=Math.max(d,v),c+=v*I,{name:_.name,type:_.type,components:I,offset:x}}),size:Vl(c,Math.max(d,s)),alignment:s}}function Vl(o,s){return Math.ceil(o/s)*s}class UA extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c){const d=this.length;return this.resize(d+1),this.emplace(d,s,c)}emplace(s,c,d){const _=2*s;return this.int16[_+0]=c,this.int16[_+1]=d,s}}UA.prototype.bytesPerElement=4,zt("StructArrayLayout2i4",UA);class m extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,d,_){const v=this.length;return this.resize(v+1),this.emplace(v,s,c,d,_)}emplace(s,c,d,_,v){const x=4*s;return this.int16[x+0]=c,this.int16[x+1]=d,this.int16[x+2]=_,this.int16[x+3]=v,s}}m.prototype.bytesPerElement=8,zt("StructArrayLayout4i8",m);class A extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,d,_,v,x){const I=this.length;return this.resize(I+1),this.emplace(I,s,c,d,_,v,x)}emplace(s,c,d,_,v,x,I){const T=6*s;return this.int16[T+0]=c,this.int16[T+1]=d,this.int16[T+2]=_,this.int16[T+3]=v,this.int16[T+4]=x,this.int16[T+5]=I,s}}A.prototype.bytesPerElement=12,zt("StructArrayLayout2i4i12",A);class h extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,d,_,v,x){const I=this.length;return this.resize(I+1),this.emplace(I,s,c,d,_,v,x)}emplace(s,c,d,_,v,x,I){const T=4*s,M=8*s;return this.int16[T+0]=c,this.int16[T+1]=d,this.uint8[M+4]=_,this.uint8[M+5]=v,this.uint8[M+6]=x,this.uint8[M+7]=I,s}}h.prototype.bytesPerElement=8,zt("StructArrayLayout2i4ub8",h);class p extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c){const d=this.length;return this.resize(d+1),this.emplace(d,s,c)}emplace(s,c,d){const _=2*s;return this.float32[_+0]=c,this.float32[_+1]=d,s}}p.prototype.bytesPerElement=8,zt("StructArrayLayout2f8",p);class y extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,d,_,v,x,I,T,M,z){const K=this.length;return this.resize(K+1),this.emplace(K,s,c,d,_,v,x,I,T,M,z)}emplace(s,c,d,_,v,x,I,T,M,z,K){const X=10*s;return this.uint16[X+0]=c,this.uint16[X+1]=d,this.uint16[X+2]=_,this.uint16[X+3]=v,this.uint16[X+4]=x,this.uint16[X+5]=I,this.uint16[X+6]=T,this.uint16[X+7]=M,this.uint16[X+8]=z,this.uint16[X+9]=K,s}}y.prototype.bytesPerElement=20,zt("StructArrayLayout10ui20",y);class B extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,d,_,v,x,I,T,M,z,K,X){const W=this.length;return this.resize(W+1),this.emplace(W,s,c,d,_,v,x,I,T,M,z,K,X)}emplace(s,c,d,_,v,x,I,T,M,z,K,X,W){const q=12*s;return this.int16[q+0]=c,this.int16[q+1]=d,this.int16[q+2]=_,this.int16[q+3]=v,this.uint16[q+4]=x,this.uint16[q+5]=I,this.uint16[q+6]=T,this.uint16[q+7]=M,this.int16[q+8]=z,this.int16[q+9]=K,this.int16[q+10]=X,this.int16[q+11]=W,s}}B.prototype.bytesPerElement=24,zt("StructArrayLayout4i4ui4i24",B);class Q extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,d){const _=this.length;return this.resize(_+1),this.emplace(_,s,c,d)}emplace(s,c,d,_){const v=3*s;return this.float32[v+0]=c,this.float32[v+1]=d,this.float32[v+2]=_,s}}Q.prototype.bytesPerElement=12,zt("StructArrayLayout3f12",Q);class S extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.uint32[1*s+0]=c,s}}S.prototype.bytesPerElement=4,zt("StructArrayLayout1ul4",S);class k extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,d,_,v,x,I,T,M){const z=this.length;return this.resize(z+1),this.emplace(z,s,c,d,_,v,x,I,T,M)}emplace(s,c,d,_,v,x,I,T,M,z){const K=10*s,X=5*s;return this.int16[K+0]=c,this.int16[K+1]=d,this.int16[K+2]=_,this.int16[K+3]=v,this.int16[K+4]=x,this.int16[K+5]=I,this.uint32[X+3]=T,this.uint16[K+8]=M,this.uint16[K+9]=z,s}}k.prototype.bytesPerElement=20,zt("StructArrayLayout6i1ul2ui20",k);class D extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,d,_,v,x){const I=this.length;return this.resize(I+1),this.emplace(I,s,c,d,_,v,x)}emplace(s,c,d,_,v,x,I){const T=6*s;return this.int16[T+0]=c,this.int16[T+1]=d,this.int16[T+2]=_,this.int16[T+3]=v,this.int16[T+4]=x,this.int16[T+5]=I,s}}D.prototype.bytesPerElement=12,zt("StructArrayLayout2i2i2i12",D);class O extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,d,_,v){const x=this.length;return this.resize(x+1),this.emplace(x,s,c,d,_,v)}emplace(s,c,d,_,v,x){const I=4*s,T=8*s;return this.float32[I+0]=c,this.float32[I+1]=d,this.float32[I+2]=_,this.int16[T+6]=v,this.int16[T+7]=x,s}}O.prototype.bytesPerElement=16,zt("StructArrayLayout2f1f2i16",O);class G extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,d,_){const v=this.length;return this.resize(v+1),this.emplace(v,s,c,d,_)}emplace(s,c,d,_,v){const x=12*s,I=3*s;return this.uint8[x+0]=c,this.uint8[x+1]=d,this.float32[I+1]=_,this.float32[I+2]=v,s}}G.prototype.bytesPerElement=12,zt("StructArrayLayout2ub2f12",G);class Z extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,d){const _=this.length;return this.resize(_+1),this.emplace(_,s,c,d)}emplace(s,c,d,_){const v=3*s;return this.uint16[v+0]=c,this.uint16[v+1]=d,this.uint16[v+2]=_,s}}Z.prototype.bytesPerElement=6,zt("StructArrayLayout3ui6",Z);class ae extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,d,_,v,x,I,T,M,z,K,X,W,q,pe,fe,ke){const Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,s,c,d,_,v,x,I,T,M,z,K,X,W,q,pe,fe,ke)}emplace(s,c,d,_,v,x,I,T,M,z,K,X,W,q,pe,fe,ke,Ne){const Se=24*s,ze=12*s,ot=48*s;return this.int16[Se+0]=c,this.int16[Se+1]=d,this.uint16[Se+2]=_,this.uint16[Se+3]=v,this.uint32[ze+2]=x,this.uint32[ze+3]=I,this.uint32[ze+4]=T,this.uint16[Se+10]=M,this.uint16[Se+11]=z,this.uint16[Se+12]=K,this.float32[ze+7]=X,this.float32[ze+8]=W,this.uint8[ot+36]=q,this.uint8[ot+37]=pe,this.uint8[ot+38]=fe,this.uint32[ze+10]=ke,this.int16[Se+22]=Ne,s}}ae.prototype.bytesPerElement=48,zt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ae);class ne extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,d,_,v,x,I,T,M,z,K,X,W,q,pe,fe,ke,Ne,Se,ze,ot,st,Mt,Nt,Qt,xt,yt,It){const Ct=this.length;return this.resize(Ct+1),this.emplace(Ct,s,c,d,_,v,x,I,T,M,z,K,X,W,q,pe,fe,ke,Ne,Se,ze,ot,st,Mt,Nt,Qt,xt,yt,It)}emplace(s,c,d,_,v,x,I,T,M,z,K,X,W,q,pe,fe,ke,Ne,Se,ze,ot,st,Mt,Nt,Qt,xt,yt,It,Ct){const gt=34*s,Yt=17*s;return this.int16[gt+0]=c,this.int16[gt+1]=d,this.int16[gt+2]=_,this.int16[gt+3]=v,this.int16[gt+4]=x,this.int16[gt+5]=I,this.int16[gt+6]=T,this.int16[gt+7]=M,this.uint16[gt+8]=z,this.uint16[gt+9]=K,this.uint16[gt+10]=X,this.uint16[gt+11]=W,this.uint16[gt+12]=q,this.uint16[gt+13]=pe,this.uint16[gt+14]=fe,this.uint16[gt+15]=ke,this.uint16[gt+16]=Ne,this.uint16[gt+17]=Se,this.uint16[gt+18]=ze,this.uint16[gt+19]=ot,this.uint16[gt+20]=st,this.uint16[gt+21]=Mt,this.uint16[gt+22]=Nt,this.uint32[Yt+12]=Qt,this.float32[Yt+13]=xt,this.float32[Yt+14]=yt,this.float32[Yt+15]=It,this.float32[Yt+16]=Ct,s}}ne.prototype.bytesPerElement=68,zt("StructArrayLayout8i15ui1ul4f68",ne);class oe extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.float32[1*s+0]=c,s}}oe.prototype.bytesPerElement=4,zt("StructArrayLayout1f4",oe);class be extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,d){const _=this.length;return this.resize(_+1),this.emplace(_,s,c,d)}emplace(s,c,d,_){const v=3*s;return this.int16[v+0]=c,this.int16[v+1]=d,this.int16[v+2]=_,s}}be.prototype.bytesPerElement=6,zt("StructArrayLayout3i6",be);class Te extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,d){const _=this.length;return this.resize(_+1),this.emplace(_,s,c,d)}emplace(s,c,d,_){const v=4*s;return this.uint32[2*s+0]=c,this.uint16[v+2]=d,this.uint16[v+3]=_,s}}Te.prototype.bytesPerElement=8,zt("StructArrayLayout1ul2ui8",Te);class Le extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c){const d=this.length;return this.resize(d+1),this.emplace(d,s,c)}emplace(s,c,d){const _=2*s;return this.uint16[_+0]=c,this.uint16[_+1]=d,s}}Le.prototype.bytesPerElement=4,zt("StructArrayLayout2ui4",Le);class he extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.uint16[1*s+0]=c,s}}he.prototype.bytesPerElement=2,zt("StructArrayLayout1ui2",he);class Ke extends Ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,d,_){const v=this.length;return this.resize(v+1),this.emplace(v,s,c,d,_)}emplace(s,c,d,_,v){const x=4*s;return this.float32[x+0]=c,this.float32[x+1]=d,this.float32[x+2]=_,this.float32[x+3]=v,s}}Ke.prototype.bytesPerElement=16,zt("StructArrayLayout4f16",Ke);class Pe extends cA{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Me(this.anchorPointX,this.anchorPointY)}}Pe.prototype.size=20;class et extends k{get(s){return new Pe(this,s)}}zt("CollisionBoxArray",et);class rt extends cA{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}rt.prototype.size=48;class pt extends ae{get(s){return new rt(this,s)}}zt("PlacedSymbolArray",pt);class Ye extends cA{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Ye.prototype.size=68;class St extends ne{get(s){return new Ye(this,s)}}zt("SymbolInstanceArray",St);class Bt extends oe{getoffsetX(s){return this.float32[1*s+0]}}zt("GlyphOffsetArray",Bt);class kt extends be{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}zt("SymbolLineVertexArray",kt);class lr extends cA{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}lr.prototype.size=8;class cr extends Te{get(s){return new lr(this,s)}}zt("FeatureIndexArray",cr);class Jt extends UA{}class Zr extends UA{}class Wr extends UA{}class Br extends A{}class br extends h{}class $r extends p{}class Zi extends y{}class ys extends B{}class ls extends Q{}class ws extends S{}class uA extends D{}class jn extends G{}class bn extends Z{}class Rs extends Le{}const La=Li([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ri}=La;class dr{constructor(s=[]){this.segments=s}prepareSegment(s,c,d,_){let v=this.segments[this.segments.length-1];return s>dr.MAX_VERTEX_ARRAY_LENGTH&&le(`Max vertices per segment is ${dr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!v||v.vertexLength+s>dr.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==_)&&(v={vertexOffset:c.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},_!==void 0&&(v.sortKey=_),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const s of this.segments)for(const c in s.vaos)s.vaos[c].destroy()}static simpleSegment(s,c,d,_){return new dr([{vertexOffset:s,primitiveOffset:c,vertexLength:d,primitiveLength:_,vaos:{},sortKey:0}])}}function zr(o,s){return 256*(o=U(Math.floor(o),0,255))+U(Math.floor(s),0,255)}dr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,zt("SegmentVector",dr);const Wi=Li([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var qi={exports:{}},Bi={exports:{}};Bi.exports=function(o,s){var c,d,_,v,x,I,T,M;for(d=o.length-(c=3&o.length),_=s,x=3432918353,I=461845907,M=0;M<d;)T=255&o.charCodeAt(M)|(255&o.charCodeAt(++M))<<8|(255&o.charCodeAt(++M))<<16|(255&o.charCodeAt(++M))<<24,++M,_=27492+(65535&(v=5*(65535&(_=(_^=T=(65535&(T=(T=(65535&T)*x+(((T>>>16)*x&65535)<<16)&4294967295)<<15|T>>>17))*I+(((T>>>16)*I&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(T=0,c){case 3:T^=(255&o.charCodeAt(M+2))<<16;case 2:T^=(255&o.charCodeAt(M+1))<<8;case 1:_^=T=(65535&(T=(T=(65535&(T^=255&o.charCodeAt(M)))*x+(((T>>>16)*x&65535)<<16)&4294967295)<<15|T>>>17))*I+(((T>>>16)*I&65535)<<16)&4294967295}return _^=o.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0};var Jn={exports:{}};Jn.exports=function(o,s){for(var c,d=o.length,_=s^d,v=0;d>=4;)c=1540483477*(65535&(c=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(c>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),d-=4,++v;switch(d){case 3:_^=(255&o.charCodeAt(v+2))<<16;case 2:_^=(255&o.charCodeAt(v+1))<<8;case 1:_=1540483477*(65535&(_^=255&o.charCodeAt(v)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0};var QA=Bi.exports,Gl=Jn.exports;qi.exports=QA,qi.exports.murmur3=QA,qi.exports.murmur2=Gl;class lo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,c,d,_){this.ids.push(Mu(s)),this.positions.push(c,d,_)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const c=Mu(s);let d=0,_=this.ids.length-1;for(;d<_;){const x=d+_>>1;this.ids[x]>=c?_=x:d=x+1}const v=[];for(;this.ids[d]===c;)v.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return v}static serialize(s,c){const d=new Float64Array(s.ids),_=new Uint32Array(s.positions);return Xl(d,_,0,d.length-1),c&&c.push(d.buffer,_.buffer),{ids:d,positions:_}}static deserialize(s){const c=new lo;return c.ids=s.ids,c.positions=s.positions,c.indexed=!0,c}}function Mu(o){const s=+o;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:qi.exports(String(o))}function Xl(o,s,c,d){for(;c<d;){const _=o[c+d>>1];let v=c-1,x=d+1;for(;;){do v++;while(o[v]<_);do x--;while(o[x]>_);if(v>=x)break;hA(o,v,x),hA(s,3*v,3*x),hA(s,3*v+1,3*x+1),hA(s,3*v+2,3*x+2)}x-c<d-x?(Xl(o,s,c,x),c=x+1):(Xl(o,s,x+1,d),d=x)}}function hA(o,s,c){const d=o[s];o[s]=o[c],o[c]=d}zt("FeaturePositionMap",lo);class IA{constructor(s,c){this.gl=s.gl,this.location=c}}class TA extends IA{constructor(s,c){super(s,c),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class Ha extends IA{constructor(s,c){super(s,c),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class Gg extends IA{constructor(s,c){super(s,c),this.current=$.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const QB=new Float32Array(16);function Yf(o){return[zr(255*o.r,255*o.g),zr(255*o.b,255*o.a)]}class Zl{constructor(s,c,d){this.value=s,this.uniformNames=c.map(_=>`u_${_}`),this.type=d}setUniform(s,c,d){s.set(d.constantOr(this.value))}getBinding(s,c,d){return this.type==="color"?new Gg(s,c):new TA(s,c)}}class Pa{constructor(s,c){this.uniformNames=c.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=s.tlbr}setUniform(s,c,d,_){const v=_==="u_pattern_to"?this.patternTo:_==="u_pattern_from"?this.patternFrom:_==="u_pixel_ratio_to"?this.pixelRatioTo:_==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&s.set(v)}getBinding(s,c,d){return d.substr(0,9)==="u_pattern"?new Ha(s,c):new TA(s,c)}}class SA{constructor(s,c,d,_){this.expression=s,this.type=d,this.maxValue=0,this.paintVertexAttributes=c.map(v=>({name:`a_${v}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(s,c,d,_,v){const x=this.paintVertexArray.length,I=this.expression.evaluate(new vi(0),c,{},_,[],v);this.paintVertexArray.resize(s),this._setPaintValue(x,s,I)}updatePaintArray(s,c,d,_){const v=this.expression.evaluate({zoom:0},d,_);this._setPaintValue(s,c,v)}_setPaintValue(s,c,d){if(this.type==="color"){const _=Yf(d);for(let v=s;v<c;v++)this.paintVertexArray.emplace(v,_[0],_[1])}else{for(let _=s;_<c;_++)this.paintVertexArray.emplace(_,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Os{constructor(s,c,d,_,v,x){this.expression=s,this.uniformNames=c.map(I=>`u_${I}_t`),this.type=d,this.useIntegerZoom=_,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=c.map(I=>({name:`a_${I}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(s,c,d,_,v){const x=this.expression.evaluate(new vi(this.zoom),c,{},_,[],v),I=this.expression.evaluate(new vi(this.zoom+1),c,{},_,[],v),T=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(T,s,x,I)}updatePaintArray(s,c,d,_){const v=this.expression.evaluate({zoom:this.zoom},d,_),x=this.expression.evaluate({zoom:this.zoom+1},d,_);this._setPaintValue(s,c,v,x)}_setPaintValue(s,c,d,_){if(this.type==="color"){const v=Yf(d),x=Yf(_);for(let I=s;I<c;I++)this.paintVertexArray.emplace(I,v[0],v[1],x[0],x[1])}else{for(let v=s;v<c;v++)this.paintVertexArray.emplace(v,d,_);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(_))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,c){const d=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,_=U(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);s.set(_)}getBinding(s,c,d){return new TA(s,c)}}class co{constructor(s,c,d,_,v,x){this.expression=s,this.type=c,this.useIntegerZoom=d,this.zoom=_,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(s,c,d){const _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(_,s,c.patterns&&c.patterns[this.layerId],d)}updatePaintArray(s,c,d,_,v){this._setPaintValues(s,c,d.patterns&&d.patterns[this.layerId],v)}_setPaintValues(s,c,d,_){if(!_||!d)return;const{min:v,mid:x,max:I}=d,T=_[v],M=_[x],z=_[I];if(T&&M&&z)for(let K=s;K<c;K++)this.zoomInPaintVertexArray.emplace(K,M.tl[0],M.tl[1],M.br[0],M.br[1],T.tl[0],T.tl[1],T.br[0],T.br[1],M.pixelRatio,T.pixelRatio),this.zoomOutPaintVertexArray.emplace(K,M.tl[0],M.tl[1],M.br[0],M.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],M.pixelRatio,z.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,Wi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,Wi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Xg{constructor(s,c,d){this.binders={},this._buffers=[];const _=[];for(const v in s.paint._values){if(!d(v))continue;const x=s.paint.get(v);if(!(x instanceof ms&&di(x.property.specification)))continue;const I=IB(v,s.type),T=x.value,M=x.property.specification.type,z=x.property.useIntegerZoom,K=x.property.specification["property-type"],X=K==="cross-faded"||K==="cross-faded-data-driven";if(T.kind==="constant")this.binders[v]=X?new Pa(T.value,I):new Zl(T.value,I,M),_.push(`/u_${v}`);else if(T.kind==="source"||X){const W=Zg(v,M,"source");this.binders[v]=X?new co(T,M,z,c,W,s.id):new SA(T,I,M,W),_.push(`/a_${v}`)}else{const W=Zg(v,M,"composite");this.binders[v]=new Os(T,I,M,z,c,W),_.push(`/z_${v}`)}}this.cacheKey=_.sort().join("")}getMaxValue(s){const c=this.binders[s];return c instanceof SA||c instanceof Os?c.maxValue:0}populatePaintArrays(s,c,d,_,v){for(const x in this.binders){const I=this.binders[x];(I instanceof SA||I instanceof Os||I instanceof co)&&I.populatePaintArray(s,c,d,_,v)}}setConstantPatternPositions(s,c){for(const d in this.binders){const _=this.binders[d];_ instanceof Pa&&_.setConstantPatternPositions(s,c)}}updatePaintArrays(s,c,d,_,v){let x=!1;for(const I in s){const T=c.getPositions(I);for(const M of T){const z=d.feature(M.index);for(const K in this.binders){const X=this.binders[K];if((X instanceof SA||X instanceof Os||X instanceof co)&&X.expression.isStateDependent===!0){const W=_.paint.get(K);X.expression=W.value,X.updatePaintArray(M.start,M.end,z,s[I],v),x=!0}}}}return x}defines(){const s=[];for(const c in this.binders){const d=this.binders[c];(d instanceof Zl||d instanceof Pa)&&s.push(...d.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return s}getBinderAttributes(){const s=[];for(const c in this.binders){const d=this.binders[c];if(d instanceof SA||d instanceof Os)for(let _=0;_<d.paintVertexAttributes.length;_++)s.push(d.paintVertexAttributes[_].name);else if(d instanceof co)for(let _=0;_<Wi.members.length;_++)s.push(Wi.members[_].name)}return s}getBinderUniforms(){const s=[];for(const c in this.binders){const d=this.binders[c];if(d instanceof Zl||d instanceof Pa||d instanceof Os)for(const _ of d.uniformNames)s.push(_)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,c){const d=[];for(const _ in this.binders){const v=this.binders[_];if(v instanceof Zl||v instanceof Pa||v instanceof Os){for(const x of v.uniformNames)if(c[x]){const I=v.getBinding(s,c[x],x);d.push({name:x,property:_,binding:I})}}}return d}setUniforms(s,c,d,_){for(const{name:v,property:x,binding:I}of c)this.binders[x].setUniform(I,_,d.get(x),v)}updatePaintBuffers(s){this._buffers=[];for(const c in this.binders){const d=this.binders[c];if(s&&d instanceof co){const _=s.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(d instanceof SA||d instanceof Os)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(s){for(const c in this.binders){const d=this.binders[c];(d instanceof SA||d instanceof Os||d instanceof co)&&d.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const c=this.binders[s];(c instanceof SA||c instanceof Os||c instanceof co)&&c.destroy()}}}class Yo{constructor(s,c,d=()=>!0){this.programConfigurations={};for(const _ of s)this.programConfigurations[_.id]=new Xg(_,c,d);this.needsUpload=!1,this._featureMap=new lo,this._bufferOffset=0}populatePaintArrays(s,c,d,_,v,x){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(s,c,_,v,x);c.id!==void 0&&this._featureMap.add(c.id,d,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,c,d,_){for(const v of d)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(s,this._featureMap,c,v,_)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function IB(o,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${s}-`,"").replace(/-/g,"_")]}function Zg(o,s,c){const d={color:{source:p,composite:Ke},number:{source:oe,composite:p}},_=function(v){return{"line-pattern":{source:Zi,composite:Zi},"fill-pattern":{source:Zi,composite:Zi},"fill-extrusion-pattern":{source:Zi,composite:Zi}}[v]}(o);return _&&_[c]||d[s][c]}zt("ConstantBinder",Zl),zt("CrossFadedConstantBinder",Pa),zt("SourceExpressionBinder",SA),zt("CrossFadedCompositeBinder",co),zt("CompositeExpressionBinder",Os),zt("ProgramConfiguration",Xg,{omit:["_buffers"]}),zt("ProgramConfigurationSet",Yo);var Oi=8192;const $f=Math.pow(2,14)-1,Wg=-$f-1;function $o(o){const s=Oi/o.extent,c=o.loadGeometry();for(let d=0;d<c.length;d++){const _=c[d];for(let v=0;v<_.length;v++){const x=_[v],I=Math.round(x.x*s),T=Math.round(x.y*s);x.x=U(I,Wg,$f),x.y=U(T,Wg,$f),(I<x.x||I>x.x+1||T<x.y||T>x.y+1)&&le("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function ea(o,s){return{type:o.type,id:o.id,properties:o.properties,geometry:s?$o(o):[]}}function Du(o,s,c,d,_){o.emplaceBack(2*s+(d+1)/2,2*c+(_+1)/2)}class ed{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Zr,this.indexArray=new bn,this.segments=new dr,this.programConfigurations=new Yo(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(s,c,d){const _=this.layers[0],v=[];let x=null,I=!1;_.type==="circle"&&(x=_.layout.get("circle-sort-key"),I=!x.isConstant());for(const{feature:T,id:M,index:z,sourceLayerIndex:K}of s){const X=this.layers[0]._featureFilter.needGeometry,W=ea(T,X);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),W,d))continue;const q=I?x.evaluate(W,{},d):void 0,pe={id:M,properties:T.properties,type:T.type,sourceLayerIndex:K,index:z,geometry:X?W.geometry:$o(T),patterns:{},sortKey:q};v.push(pe)}I&&v.sort((T,M)=>T.sortKey-M.sortKey);for(const T of v){const{geometry:M,index:z,sourceLayerIndex:K}=T,X=s[z].feature;this.addFeature(T,M,z,d),c.featureIndex.insert(X,M,z,K,this.index)}}update(s,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Ri),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,c,d,_){for(const v of c)for(const x of v){const I=x.x,T=x.y;if(I<0||I>=Oi||T<0||T>=Oi)continue;const M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),z=M.vertexLength;Du(this.layoutVertexArray,I,T,-1,-1),Du(this.layoutVertexArray,I,T,1,-1),Du(this.layoutVertexArray,I,T,1,1),Du(this.layoutVertexArray,I,T,-1,1),this.indexArray.emplaceBack(z,z+1,z+2),this.indexArray.emplaceBack(z,z+3,z+2),M.vertexLength+=4,M.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,{},_)}}function qg(o,s){for(let c=0;c<o.length;c++)if(za(s,o[c]))return!0;for(let c=0;c<s.length;c++)if(za(o,s[c]))return!0;return!!td(o,s)}function TB(o,s,c){return!!za(o,s)||!!rd(s,o,c)}function jg(o,s){if(o.length===1)return Yg(s,o[0]);for(let c=0;c<s.length;c++){const d=s[c];for(let _=0;_<d.length;_++)if(za(o,d[_]))return!0}for(let c=0;c<o.length;c++)if(Yg(s,o[c]))return!0;for(let c=0;c<s.length;c++)if(td(o,s[c]))return!0;return!1}function SB(o,s,c){if(o.length>1){if(td(o,s))return!0;for(let d=0;d<s.length;d++)if(rd(s[d],o,c))return!0}for(let d=0;d<o.length;d++)if(rd(o[d],s,c))return!0;return!1}function td(o,s){if(o.length===0||s.length===0)return!1;for(let c=0;c<o.length-1;c++){const d=o[c],_=o[c+1];for(let v=0;v<s.length-1;v++)if(kB(d,_,s[v],s[v+1]))return!0}return!1}function kB(o,s,c,d){return re(o,c,d)!==re(s,c,d)&&re(o,s,c)!==re(o,s,d)}function rd(o,s,c){const d=c*c;if(s.length===1)return o.distSqr(s[0])<d;for(let _=1;_<s.length;_++)if(Jg(o,s[_-1],s[_])<d)return!0;return!1}function Jg(o,s,c){const d=s.distSqr(c);if(d===0)return o.distSqr(s);const _=((o.x-s.x)*(c.x-s.x)+(o.y-s.y)*(c.y-s.y))/d;return o.distSqr(_<0?s:_>1?c:c.sub(s)._mult(_)._add(s))}function Yg(o,s){let c,d,_,v=!1;for(let x=0;x<o.length;x++){c=o[x];for(let I=0,T=c.length-1;I<c.length;T=I++)d=c[I],_=c[T],d.y>s.y!=_.y>s.y&&s.x<(_.x-d.x)*(s.y-d.y)/(_.y-d.y)+d.x&&(v=!v)}return v}function za(o,s){let c=!1;for(let d=0,_=o.length-1;d<o.length;_=d++){const v=o[d],x=o[_];v.y>s.y!=x.y>s.y&&s.x<(x.x-v.x)*(s.y-v.y)/(x.y-v.y)+v.x&&(c=!c)}return c}function MB(o,s,c){const d=c[0],_=c[2];if(o.x<d.x&&s.x<d.x||o.x>_.x&&s.x>_.x||o.y<d.y&&s.y<d.y||o.y>_.y&&s.y>_.y)return!1;const v=re(o,s,c[0]);return v!==re(o,s,c[1])||v!==re(o,s,c[2])||v!==re(o,s,c[3])}function Wl(o,s,c){const d=s.paint.get(o).value;return d.kind==="constant"?d.value:c.programConfigurations.get(s.id).getMaxValue(o)}function Lu(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Hu(o,s,c,d,_){if(!s[0]&&!s[1])return o;const v=Me.convert(s)._mult(_);c==="viewport"&&v._rotate(-d);const x=[];for(let I=0;I<o.length;I++)x.push(o[I].sub(v));return x}zt("CircleBucket",ed,{omit:["layers"]});const DB=new rn({"circle-sort-key":new ir(Ze.layout_circle["circle-sort-key"])});var LB={paint:new rn({"circle-radius":new ir(Ze.paint_circle["circle-radius"]),"circle-color":new ir(Ze.paint_circle["circle-color"]),"circle-blur":new ir(Ze.paint_circle["circle-blur"]),"circle-opacity":new ir(Ze.paint_circle["circle-opacity"]),"circle-translate":new Xt(Ze.paint_circle["circle-translate"]),"circle-translate-anchor":new Xt(Ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Xt(Ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Xt(Ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ir(Ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ir(Ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ir(Ze.paint_circle["circle-stroke-opacity"])}),layout:DB},Cn=1e-6,En=typeof Float32Array<"u"?Float32Array:Array;function $g(){var o=new En(9);return En!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function id(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function em(o,s,c){var d=s[0],_=s[1],v=s[2],x=s[3],I=s[4],T=s[5],M=s[6],z=s[7],K=s[8],X=s[9],W=s[10],q=s[11],pe=s[12],fe=s[13],ke=s[14],Ne=s[15],Se=c[0],ze=c[1],ot=c[2],st=c[3];return o[0]=Se*d+ze*I+ot*K+st*pe,o[1]=Se*_+ze*T+ot*X+st*fe,o[2]=Se*v+ze*M+ot*W+st*ke,o[3]=Se*x+ze*z+ot*q+st*Ne,o[4]=(Se=c[4])*d+(ze=c[5])*I+(ot=c[6])*K+(st=c[7])*pe,o[5]=Se*_+ze*T+ot*X+st*fe,o[6]=Se*v+ze*M+ot*W+st*ke,o[7]=Se*x+ze*z+ot*q+st*Ne,o[8]=(Se=c[8])*d+(ze=c[9])*I+(ot=c[10])*K+(st=c[11])*pe,o[9]=Se*_+ze*T+ot*X+st*fe,o[10]=Se*v+ze*M+ot*W+st*ke,o[11]=Se*x+ze*z+ot*q+st*Ne,o[12]=(Se=c[12])*d+(ze=c[13])*I+(ot=c[14])*K+(st=c[15])*pe,o[13]=Se*_+ze*T+ot*X+st*fe,o[14]=Se*v+ze*M+ot*W+st*ke,o[15]=Se*x+ze*z+ot*q+st*Ne,o}Math.hypot||(Math.hypot=function(){for(var o=0,s=arguments.length;s--;)o+=arguments[s]*arguments[s];return Math.sqrt(o)});var ql,HB=em;function tm(){var o=new En(3);return En!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function rm(o,s,c){var d=new En(3);return d[0]=o,d[1]=s,d[2]=c,d}function Pu(o,s,c){var d=s[0],_=s[1],v=s[2],x=s[3];return o[0]=c[0]*d+c[4]*_+c[8]*v+c[12]*x,o[1]=c[1]*d+c[5]*_+c[9]*v+c[13]*x,o[2]=c[2]*d+c[6]*_+c[10]*v+c[14]*x,o[3]=c[3]*d+c[7]*_+c[11]*v+c[15]*x,o}function im(){var o=new En(4);return En!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function nm(o,s){const c=Pu([],[o.x,o.y,0,1],s);return new Me(c[0]/c[3],c[1]/c[3])}tm(),ql=new En(4),En!=Float32Array&&(ql[0]=0,ql[1]=0,ql[2]=0,ql[3]=0),tm(),rm(1,0,0),rm(0,1,0),im(),im(),$g(),function(){var o;o=new En(2),En!=Float32Array&&(o[0]=0,o[1]=0)}();class sm extends ed{}zt("HeatmapBucket",sm,{omit:["layers"]});var PB={paint:new rn({"heatmap-radius":new ir(Ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ir(Ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Xt(Ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new aA(Ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Xt(Ze.paint_heatmap["heatmap-opacity"])})};function nd(o,{width:s,height:c},d,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==s*c*d)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${s*c*d}`)}else _=new Uint8Array(s*c*d);return o.width=s,o.height=c,o.data=_,o}function Am(o,{width:s,height:c},d){if(s===o.width&&c===o.height)return;const _=nd({},{width:s,height:c},d);sd(o,_,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,s),height:Math.min(o.height,c)},d),o.width=s,o.height=c,o.data=_.data}function sd(o,s,c,d,_,v){if(_.width===0||_.height===0)return s;if(_.width>o.width||_.height>o.height||c.x>o.width-_.width||c.y>o.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>s.width||_.height>s.height||d.x>s.width-_.width||d.y>s.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,I=s.data;if(x===I)throw new Error("srcData equals dstData, so image is already copied");for(let T=0;T<_.height;T++){const M=((c.y+T)*o.width+c.x)*v,z=((d.y+T)*s.width+d.x)*v;for(let K=0;K<_.width*v;K++)I[z+K]=x[M+K]}return s}class jl{constructor(s,c){nd(this,s,1,c)}resize(s){Am(this,s,1)}clone(){return new jl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,c,d,_,v){sd(s,c,d,_,v,1)}}class cs{constructor(s,c){nd(this,s,4,c)}resize(s){Am(this,s,4)}replace(s,c){c?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new cs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,c,d,_,v){sd(s,c,d,_,v,4)}}function om(o){const s={},c=o.resolution||256,d=o.clips?o.clips.length:1,_=o.image||new cs({width:c,height:d});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);const v=(x,I,T)=>{s[o.evaluationKey]=T;const M=o.expression.evaluate(s);_.data[x+I+0]=Math.floor(255*M.r/M.a),_.data[x+I+1]=Math.floor(255*M.g/M.a),_.data[x+I+2]=Math.floor(255*M.b/M.a),_.data[x+I+3]=Math.floor(255*M.a)};if(o.clips)for(let x=0,I=0;x<d;++x,I+=4*c)for(let T=0,M=0;T<c;T++,M+=4){const z=T/(c-1),{start:K,end:X}=o.clips[x];v(I,M,K*(1-z)+X*z)}else for(let x=0,I=0;x<c;x++,I+=4)v(0,I,x/(c-1));return _}zt("AlphaImage",jl),zt("RGBAImage",cs);var zB={paint:new rn({"hillshade-illumination-direction":new Xt(Ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Xt(Ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Xt(Ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Xt(Ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Xt(Ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Xt(Ze.paint_hillshade["hillshade-accent-color"])})};const RB=Li([{name:"a_pos",components:2,type:"Int16"}],4),{members:OB}=RB;var zu={exports:{}};function Ru(o,s,c){c=c||2;var d,_,v,x,I,T,M,z=s&&s.length,K=z?s[0]*c:o.length,X=am(o,0,K,c,!0),W=[];if(!X||X.next===X.prev)return W;if(z&&(X=function(pe,fe,ke,Ne){var Se,ze,ot,st=[];for(Se=0,ze=fe.length;Se<ze;Se++)(ot=am(pe,fe[Se]*Ne,Se<ze-1?fe[Se+1]*Ne:pe.length,Ne,!1))===ot.next&&(ot.steiner=!0),st.push(qB(ot));for(st.sort(XB),Se=0;Se<st.length;Se++)ke=ZB(st[Se],ke);return ke}(o,s,X,c)),o.length>80*c){d=v=o[0],_=x=o[1];for(var q=c;q<K;q+=c)(I=o[q])<d&&(d=I),(T=o[q+1])<_&&(_=T),I>v&&(v=I),T>x&&(x=T);M=(M=Math.max(v-d,x-_))!==0?32767/M:0}return Jl(X,W,c,d,_,M,0),W}function am(o,s,c,d,_){var v,x;if(_===ad(o,s,c,d)>0)for(v=s;v<c;v+=d)x=um(v,o[v],o[v+1],x);else for(v=c-d;v>=s;v-=d)x=um(v,o[v],o[v+1],x);return x&&Ou(x,x.next)&&($l(x),x=x.next),x}function ta(o,s){if(!o)return o;s||(s=o);var c,d=o;do if(c=!1,d.steiner||!Ou(d,d.next)&&Mi(d.prev,d,d.next)!==0)d=d.next;else{if($l(d),(d=s=d.prev)===d.next)break;c=!0}while(c||d!==s);return s}function Jl(o,s,c,d,_,v,x){if(o){!x&&v&&function(z,K,X,W){var q=z;do q.z===0&&(q.z=Ad(q.x,q.y,K,X,W)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==z);q.prevZ.nextZ=null,q.prevZ=null,function(pe){var fe,ke,Ne,Se,ze,ot,st,Mt,Nt=1;do{for(ke=pe,pe=null,ze=null,ot=0;ke;){for(ot++,Ne=ke,st=0,fe=0;fe<Nt&&(st++,Ne=Ne.nextZ);fe++);for(Mt=Nt;st>0||Mt>0&&Ne;)st!==0&&(Mt===0||!Ne||ke.z<=Ne.z)?(Se=ke,ke=ke.nextZ,st--):(Se=Ne,Ne=Ne.nextZ,Mt--),ze?ze.nextZ=Se:pe=Se,Se.prevZ=ze,ze=Se;ke=Ne}ze.nextZ=null,Nt*=2}while(ot>1)}(q)}(o,d,_,v);for(var I,T,M=o;o.prev!==o.next;)if(I=o.prev,T=o.next,v?NB(o,d,_,v):KB(o))s.push(I.i/c|0),s.push(o.i/c|0),s.push(T.i/c|0),$l(o),o=T.next,M=T.next;else if((o=T)===M){x?x===1?Jl(o=VB(ta(o),s,c),s,c,d,_,v,2):x===2&&GB(o,s,c,d,_,v):Jl(ta(o),s,c,d,_,v,1);break}}}function KB(o){var s=o.prev,c=o,d=o.next;if(Mi(s,c,d)>=0)return!1;for(var _=s.x,v=c.x,x=d.x,I=s.y,T=c.y,M=d.y,z=_<v?_<x?_:x:v<x?v:x,K=I<T?I<M?I:M:T<M?T:M,X=_>v?_>x?_:x:v>x?v:x,W=I>T?I>M?I:M:T>M?T:M,q=d.next;q!==s;){if(q.x>=z&&q.x<=X&&q.y>=K&&q.y<=W&&Ra(_,I,v,T,x,M,q.x,q.y)&&Mi(q.prev,q,q.next)>=0)return!1;q=q.next}return!0}function NB(o,s,c,d){var _=o.prev,v=o,x=o.next;if(Mi(_,v,x)>=0)return!1;for(var I=_.x,T=v.x,M=x.x,z=_.y,K=v.y,X=x.y,W=I<T?I<M?I:M:T<M?T:M,q=z<K?z<X?z:X:K<X?K:X,pe=I>T?I>M?I:M:T>M?T:M,fe=z>K?z>X?z:X:K>X?K:X,ke=Ad(W,q,s,c,d),Ne=Ad(pe,fe,s,c,d),Se=o.prevZ,ze=o.nextZ;Se&&Se.z>=ke&&ze&&ze.z<=Ne;){if(Se.x>=W&&Se.x<=pe&&Se.y>=q&&Se.y<=fe&&Se!==_&&Se!==x&&Ra(I,z,T,K,M,X,Se.x,Se.y)&&Mi(Se.prev,Se,Se.next)>=0||(Se=Se.prevZ,ze.x>=W&&ze.x<=pe&&ze.y>=q&&ze.y<=fe&&ze!==_&&ze!==x&&Ra(I,z,T,K,M,X,ze.x,ze.y)&&Mi(ze.prev,ze,ze.next)>=0))return!1;ze=ze.nextZ}for(;Se&&Se.z>=ke;){if(Se.x>=W&&Se.x<=pe&&Se.y>=q&&Se.y<=fe&&Se!==_&&Se!==x&&Ra(I,z,T,K,M,X,Se.x,Se.y)&&Mi(Se.prev,Se,Se.next)>=0)return!1;Se=Se.prevZ}for(;ze&&ze.z<=Ne;){if(ze.x>=W&&ze.x<=pe&&ze.y>=q&&ze.y<=fe&&ze!==_&&ze!==x&&Ra(I,z,T,K,M,X,ze.x,ze.y)&&Mi(ze.prev,ze,ze.next)>=0)return!1;ze=ze.nextZ}return!0}function VB(o,s,c){var d=o;do{var _=d.prev,v=d.next.next;!Ou(_,v)&&lm(_,d,d.next,v)&&Yl(_,v)&&Yl(v,_)&&(s.push(_.i/c|0),s.push(d.i/c|0),s.push(v.i/c|0),$l(d),$l(d.next),d=o=v),d=d.next}while(d!==o);return ta(d)}function GB(o,s,c,d,_,v){var x=o;do{for(var I=x.next.next;I!==x.prev;){if(x.i!==I.i&&jB(x,I)){var T=cm(x,I);return x=ta(x,x.next),T=ta(T,T.next),Jl(x,s,c,d,_,v,0),void Jl(T,s,c,d,_,v,0)}I=I.next}x=x.next}while(x!==o)}function XB(o,s){return o.x-s.x}function ZB(o,s){var c=function(_,v){var x,I=v,T=_.x,M=_.y,z=-1/0;do{if(M<=I.y&&M>=I.next.y&&I.next.y!==I.y){var K=I.x+(M-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(K<=T&&K>z&&(z=K,x=I.x<I.next.x?I:I.next,K===T))return x}I=I.next}while(I!==v);if(!x)return null;var X,W=x,q=x.x,pe=x.y,fe=1/0;I=x;do T>=I.x&&I.x>=q&&T!==I.x&&Ra(M<pe?T:z,M,q,pe,M<pe?z:T,M,I.x,I.y)&&(X=Math.abs(M-I.y)/(T-I.x),Yl(I,_)&&(X<fe||X===fe&&(I.x>x.x||I.x===x.x&&WB(x,I)))&&(x=I,fe=X)),I=I.next;while(I!==W);return x}(o,s);if(!c)return s;var d=cm(c,o);return ta(d,d.next),ta(c,c.next)}function WB(o,s){return Mi(o.prev,o,s.prev)<0&&Mi(s.next,o,o.next)<0}function Ad(o,s,c,d,_){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-c)*_|0)|o<<8))|o<<4))|o<<2))|o<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-d)*_|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function qB(o){var s=o,c=o;do(s.x<c.x||s.x===c.x&&s.y<c.y)&&(c=s),s=s.next;while(s!==o);return c}function Ra(o,s,c,d,_,v,x,I){return(_-x)*(s-I)>=(o-x)*(v-I)&&(o-x)*(d-I)>=(c-x)*(s-I)&&(c-x)*(v-I)>=(_-x)*(d-I)}function jB(o,s){return o.next.i!==s.i&&o.prev.i!==s.i&&!function(c,d){var _=c;do{if(_.i!==c.i&&_.next.i!==c.i&&_.i!==d.i&&_.next.i!==d.i&&lm(_,_.next,c,d))return!0;_=_.next}while(_!==c);return!1}(o,s)&&(Yl(o,s)&&Yl(s,o)&&function(c,d){var _=c,v=!1,x=(c.x+d.x)/2,I=(c.y+d.y)/2;do _.y>I!=_.next.y>I&&_.next.y!==_.y&&x<(_.next.x-_.x)*(I-_.y)/(_.next.y-_.y)+_.x&&(v=!v),_=_.next;while(_!==c);return v}(o,s)&&(Mi(o.prev,o,s.prev)||Mi(o,s.prev,s))||Ou(o,s)&&Mi(o.prev,o,o.next)>0&&Mi(s.prev,s,s.next)>0)}function Mi(o,s,c){return(s.y-o.y)*(c.x-s.x)-(s.x-o.x)*(c.y-s.y)}function Ou(o,s){return o.x===s.x&&o.y===s.y}function lm(o,s,c,d){var _=Nu(Mi(o,s,c)),v=Nu(Mi(o,s,d)),x=Nu(Mi(c,d,o)),I=Nu(Mi(c,d,s));return _!==v&&x!==I||!(_!==0||!Ku(o,c,s))||!(v!==0||!Ku(o,d,s))||!(x!==0||!Ku(c,o,d))||!(I!==0||!Ku(c,s,d))}function Ku(o,s,c){return s.x<=Math.max(o.x,c.x)&&s.x>=Math.min(o.x,c.x)&&s.y<=Math.max(o.y,c.y)&&s.y>=Math.min(o.y,c.y)}function Nu(o){return o>0?1:o<0?-1:0}function Yl(o,s){return Mi(o.prev,o,o.next)<0?Mi(o,s,o.next)>=0&&Mi(o,o.prev,s)>=0:Mi(o,s,o.prev)<0||Mi(o,o.next,s)<0}function cm(o,s){var c=new od(o.i,o.x,o.y),d=new od(s.i,s.x,s.y),_=o.next,v=s.prev;return o.next=s,s.prev=o,c.next=_,_.prev=c,d.next=c,c.prev=d,v.next=d,d.prev=v,d}function um(o,s,c,d){var _=new od(o,s,c);return d?(_.next=d.next,_.prev=d,d.next.prev=_,d.next=_):(_.prev=_,_.next=_),_}function $l(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function od(o,s,c){this.i=o,this.x=s,this.y=c,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ad(o,s,c,d){for(var _=0,v=s,x=c-d;v<c;v+=d)_+=(o[x]-o[v])*(o[v+1]+o[x+1]),x=v;return _}function JB(o,s,c,d,_){hm(o,s,c||0,d||o.length-1,_||YB)}function hm(o,s,c,d,_){for(;d>c;){if(d-c>600){var v=d-c+1,x=s-c+1,I=Math.log(v),T=.5*Math.exp(2*I/3),M=.5*Math.sqrt(I*T*(v-T)/v)*(x-v/2<0?-1:1);hm(o,s,Math.max(c,Math.floor(s-x*T/v+M)),Math.min(d,Math.floor(s+(v-x)*T/v+M)),_)}var z=o[s],K=c,X=d;for(ec(o,c,s),_(o[d],z)>0&&ec(o,c,d);K<X;){for(ec(o,K,X),K++,X--;_(o[K],z)<0;)K++;for(;_(o[X],z)>0;)X--}_(o[c],z)===0?ec(o,c,X):ec(o,++X,d),X<=s&&(c=X+1),s<=X&&(d=X-1)}}function ec(o,s,c){var d=o[s];o[s]=o[c],o[c]=d}function YB(o,s){return o<s?-1:o>s?1:0}function ld(o,s){const c=o.length;if(c<=1)return[o];const d=[];let _,v;for(let x=0;x<c;x++){const I=we(o[x]);I!==0&&(o[x].area=Math.abs(I),v===void 0&&(v=I<0),v===I<0?(_&&d.push(_),_=[o[x]]):_.push(o[x]))}if(_&&d.push(_),s>1)for(let x=0;x<d.length;x++)d[x].length<=s||(JB(d[x],s,1,d[x].length-1,$B),d[x]=d[x].slice(0,s));return d}function $B(o,s){return s.area-o.area}function cd(o,s,c){const d=c.patternDependencies;let _=!1;for(const v of s){const x=v.paint.get(`${o}-pattern`);x.isConstant()||(_=!0);const I=x.constantOr(null);I&&(_=!0,d[I.to]=!0,d[I.from]=!0)}return _}function ud(o,s,c,d,_){const v=_.patternDependencies;for(const x of s){const I=x.paint.get(`${o}-pattern`).value;if(I.kind!=="constant"){let T=I.evaluate({zoom:d-1},c,{},_.availableImages),M=I.evaluate({zoom:d},c,{},_.availableImages),z=I.evaluate({zoom:d+1},c,{},_.availableImages);T=T&&T.name?T.name:T,M=M&&M.name?M.name:M,z=z&&z.name?z.name:z,v[T]=!0,v[M]=!0,v[z]=!0,c.patterns[x.id]={min:T,mid:M,max:z}}}return c}zu.exports=Ru,zu.exports.default=Ru,Ru.deviation=function(o,s,c,d){var _=s&&s.length,v=Math.abs(ad(o,0,_?s[0]*c:o.length,c));if(_)for(var x=0,I=s.length;x<I;x++)v-=Math.abs(ad(o,s[x]*c,x<I-1?s[x+1]*c:o.length,c));var T=0;for(x=0;x<d.length;x+=3){var M=d[x]*c,z=d[x+1]*c,K=d[x+2]*c;T+=Math.abs((o[M]-o[K])*(o[z+1]-o[M+1])-(o[M]-o[z])*(o[K+1]-o[M+1]))}return v===0&&T===0?0:Math.abs((T-v)/v)},Ru.flatten=function(o){for(var s=o[0][0].length,c={vertices:[],holes:[],dimensions:s},d=0,_=0;_<o.length;_++){for(var v=0;v<o[_].length;v++)for(var x=0;x<s;x++)c.vertices.push(o[_][v][x]);_>0&&c.holes.push(d+=o[_-1].length)}return c};class hd{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Wr,this.indexArray=new bn,this.indexArray2=new Rs,this.programConfigurations=new Yo(s.layers,s.zoom),this.segments=new dr,this.segments2=new dr,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(s,c,d){this.hasPattern=cd("fill",this.layers,c);const _=this.layers[0].layout.get("fill-sort-key"),v=!_.isConstant(),x=[];for(const{feature:I,id:T,index:M,sourceLayerIndex:z}of s){const K=this.layers[0]._featureFilter.needGeometry,X=ea(I,K);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),X,d))continue;const W=v?_.evaluate(X,{},d,c.availableImages):void 0,q={id:T,properties:I.properties,type:I.type,sourceLayerIndex:z,index:M,geometry:K?X.geometry:$o(I),patterns:{},sortKey:W};x.push(q)}v&&x.sort((I,T)=>I.sortKey-T.sortKey);for(const I of x){const{geometry:T,index:M,sourceLayerIndex:z}=I;if(this.hasPattern){const K=ud("fill",this.layers,I,this.zoom,c);this.patternFeatures.push(K)}else this.addFeature(I,T,M,d,{});c.featureIndex.insert(s[M].feature,T,M,z,this.index)}}update(s,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,d)}addFeatures(s,c,d){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,c,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,OB),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,c,d,_,v){for(const x of ld(c,500)){let I=0;for(const W of x)I+=W.length;const T=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),M=T.vertexLength,z=[],K=[];for(const W of x){if(W.length===0)continue;W!==x[0]&&K.push(z.length/2);const q=this.segments2.prepareSegment(W.length,this.layoutVertexArray,this.indexArray2),pe=q.vertexLength;this.layoutVertexArray.emplaceBack(W[0].x,W[0].y),this.indexArray2.emplaceBack(pe+W.length-1,pe),z.push(W[0].x),z.push(W[0].y);for(let fe=1;fe<W.length;fe++)this.layoutVertexArray.emplaceBack(W[fe].x,W[fe].y),this.indexArray2.emplaceBack(pe+fe-1,pe+fe),z.push(W[fe].x),z.push(W[fe].y);q.vertexLength+=W.length,q.primitiveLength+=W.length}const X=zu.exports(z,K);for(let W=0;W<X.length;W+=3)this.indexArray.emplaceBack(M+X[W],M+X[W+1],M+X[W+2]);T.vertexLength+=I,T.primitiveLength+=X.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,v,_)}}zt("FillBucket",hd,{omit:["layers","patternFeatures"]});const ex=new rn({"fill-sort-key":new ir(Ze.layout_fill["fill-sort-key"])});var tx={paint:new rn({"fill-antialias":new Xt(Ze.paint_fill["fill-antialias"]),"fill-opacity":new ir(Ze.paint_fill["fill-opacity"]),"fill-color":new ir(Ze.paint_fill["fill-color"]),"fill-outline-color":new ir(Ze.paint_fill["fill-outline-color"]),"fill-translate":new Xt(Ze.paint_fill["fill-translate"]),"fill-translate-anchor":new Xt(Ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new ao(Ze.paint_fill["fill-pattern"])}),layout:ex};const rx=Li([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),ix=Li([{name:"a_centroid",components:2,type:"Int16"}],4),{members:nx}=rx;var uo={},sx=Me,fm=Oa;function Oa(o,s,c,d,_){this.properties={},this.extent=c,this.type=0,this._pbf=o,this._geometry=-1,this._keys=d,this._values=_,o.readFields(Ax,this,s)}function Ax(o,s,c){o==1?s.id=c.readVarint():o==2?function(d,_){for(var v=d.readVarint()+d.pos;d.pos<v;){var x=_._keys[d.readVarint()],I=_._values[d.readVarint()];_.properties[x]=I}}(c,s):o==3?s.type=c.readVarint():o==4&&(s._geometry=c.pos)}function ox(o){for(var s,c,d=0,_=0,v=o.length,x=v-1;_<v;x=_++)d+=((c=o[x]).x-(s=o[_]).x)*(s.y+c.y);return d}Oa.types=["Unknown","Point","LineString","Polygon"],Oa.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var s,c=o.readVarint()+o.pos,d=1,_=0,v=0,x=0,I=[];o.pos<c;){if(_<=0){var T=o.readVarint();d=7&T,_=T>>3}if(_--,d===1||d===2)v+=o.readSVarint(),x+=o.readSVarint(),d===1&&(s&&I.push(s),s=[]),s.push(new sx(v,x));else{if(d!==7)throw new Error("unknown command "+d);s&&s.push(s[0].clone())}}return s&&I.push(s),I},Oa.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var s=o.readVarint()+o.pos,c=1,d=0,_=0,v=0,x=1/0,I=-1/0,T=1/0,M=-1/0;o.pos<s;){if(d<=0){var z=o.readVarint();c=7&z,d=z>>3}if(d--,c===1||c===2)(_+=o.readSVarint())<x&&(x=_),_>I&&(I=_),(v+=o.readSVarint())<T&&(T=v),v>M&&(M=v);else if(c!==7)throw new Error("unknown command "+c)}return[x,T,I,M]},Oa.prototype.toGeoJSON=function(o,s,c){var d,_,v=this.extent*Math.pow(2,c),x=this.extent*o,I=this.extent*s,T=this.loadGeometry(),M=Oa.types[this.type];function z(W){for(var q=0;q<W.length;q++){var pe=W[q];W[q]=[360*(pe.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(pe.y+I)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var K=[];for(d=0;d<T.length;d++)K[d]=T[d][0];z(T=K);break;case 2:for(d=0;d<T.length;d++)z(T[d]);break;case 3:for(T=function(W){var q=W.length;if(q<=1)return[W];for(var pe,fe,ke=[],Ne=0;Ne<q;Ne++){var Se=ox(W[Ne]);Se!==0&&(fe===void 0&&(fe=Se<0),fe===Se<0?(pe&&ke.push(pe),pe=[W[Ne]]):pe.push(W[Ne]))}return pe&&ke.push(pe),ke}(T),d=0;d<T.length;d++)for(_=0;_<T[d].length;_++)z(T[d][_])}T.length===1?T=T[0]:M="Multi"+M;var X={type:"Feature",geometry:{type:M,coordinates:T},properties:this.properties};return"id"in this&&(X.id=this.id),X};var ax=fm,dm=pm;function pm(o,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(lx,this,s),this.length=this._features.length}function lx(o,s,c){o===15?s.version=c.readVarint():o===1?s.name=c.readString():o===5?s.extent=c.readVarint():o===2?s._features.push(c.pos):o===3?s._keys.push(c.readString()):o===4&&s._values.push(function(d){for(var _=null,v=d.readVarint()+d.pos;d.pos<v;){var x=d.readVarint()>>3;_=x===1?d.readString():x===2?d.readFloat():x===3?d.readDouble():x===4?d.readVarint64():x===5?d.readVarint():x===6?d.readSVarint():x===7?d.readBoolean():null}return _}(c))}pm.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var s=this._pbf.readVarint()+this._pbf.pos;return new ax(this._pbf,s,this.extent,this._keys,this._values)};var cx=dm;function ux(o,s,c){if(o===3){var d=new cx(c,c.readVarint()+c.pos);d.length&&(s[d.name]=d)}}uo.VectorTile=function(o,s){this.layers=o.readFields(ux,{},s)},uo.VectorTileFeature=fm,uo.VectorTileLayer=dm;const hx=uo.VectorTileFeature.types,fd=Math.pow(2,13);function tc(o,s,c,d,_,v,x,I){o.emplaceBack(s,c,2*Math.floor(d*fd)+x,_*fd*2,v*fd*2,Math.round(I))}class dd{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Br,this.centroidVertexArray=new Jt,this.indexArray=new bn,this.programConfigurations=new Yo(s.layers,s.zoom),this.segments=new dr,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(s,c,d){this.features=[],this.hasPattern=cd("fill-extrusion",this.layers,c);for(const{feature:_,id:v,index:x,sourceLayerIndex:I}of s){const T=this.layers[0]._featureFilter.needGeometry,M=ea(_,T);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),M,d))continue;const z={id:v,sourceLayerIndex:I,index:x,geometry:T?M.geometry:$o(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(ud("fill-extrusion",this.layers,z,this.zoom,c)):this.addFeature(z,z.geometry,x,d,{}),c.featureIndex.insert(_,z.geometry,x,I,this.index,!0)}}addFeatures(s,c,d){for(const _ of this.features){const{geometry:v}=_;this.addFeature(_,v,_.index,c,d)}}update(s,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,nx),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,ix.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,c,d,_,v){const x={x:0,y:0,vertexCount:0};for(const I of ld(c,500)){let T=0;for(const q of I)T+=q.length;let M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const q of I){if(q.length===0||dx(q))continue;let pe=0;for(let fe=0;fe<q.length;fe++){const ke=q[fe];if(fe>=1){const Ne=q[fe-1];if(!fx(ke,Ne)){M.vertexLength+4>dr.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Se=ke.sub(Ne)._perp()._unit(),ze=Ne.dist(ke);pe+ze>32768&&(pe=0),tc(this.layoutVertexArray,ke.x,ke.y,Se.x,Se.y,0,0,pe),tc(this.layoutVertexArray,ke.x,ke.y,Se.x,Se.y,0,1,pe),x.x+=2*ke.x,x.y+=2*ke.y,x.vertexCount+=2,pe+=ze,tc(this.layoutVertexArray,Ne.x,Ne.y,Se.x,Se.y,0,0,pe),tc(this.layoutVertexArray,Ne.x,Ne.y,Se.x,Se.y,0,1,pe),x.x+=2*Ne.x,x.y+=2*Ne.y,x.vertexCount+=2;const ot=M.vertexLength;this.indexArray.emplaceBack(ot,ot+2,ot+1),this.indexArray.emplaceBack(ot+1,ot+2,ot+3),M.vertexLength+=4,M.primitiveLength+=2}}}}if(M.vertexLength+T>dr.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray)),hx[s.type]!=="Polygon")continue;const z=[],K=[],X=M.vertexLength;for(const q of I)if(q.length!==0){q!==I[0]&&K.push(z.length/2);for(let pe=0;pe<q.length;pe++){const fe=q[pe];tc(this.layoutVertexArray,fe.x,fe.y,0,0,1,1,0),x.x+=fe.x,x.y+=fe.y,x.vertexCount+=1,z.push(fe.x),z.push(fe.y)}}const W=zu.exports(z,K);for(let q=0;q<W.length;q+=3)this.indexArray.emplaceBack(X+W[q],X+W[q+2],X+W[q+1]);M.primitiveLength+=W.length/3,M.vertexLength+=T}for(let I=0;I<x.vertexCount;I++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,v,_)}}function fx(o,s){return o.x===s.x&&(o.x<0||o.x>Oi)||o.y===s.y&&(o.y<0||o.y>Oi)}function dx(o){return o.every(s=>s.x<0)||o.every(s=>s.x>Oi)||o.every(s=>s.y<0)||o.every(s=>s.y>Oi)}zt("FillExtrusionBucket",dd,{omit:["layers","features"]});var px={paint:new rn({"fill-extrusion-opacity":new Xt(Ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ir(Ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Xt(Ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Xt(Ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ao(Ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ir(Ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ir(Ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Xt(Ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function rc(o,s){return o.x*s.x+o.y*s.y}function gm(o,s){if(o.length===1){let c=0;const d=s[c++];let _;for(;!_||d.equals(_);)if(_=s[c++],!_)return 1/0;for(;c<s.length;c++){const v=s[c],x=o[0],I=_.sub(d),T=v.sub(d),M=x.sub(d),z=rc(I,I),K=rc(I,T),X=rc(T,T),W=rc(M,I),q=rc(M,T),pe=z*X-K*K,fe=(X*W-K*q)/pe,ke=(z*q-K*W)/pe,Ne=d.z*(1-fe-ke)+_.z*fe+v.z*ke;if(isFinite(Ne))return Ne}return 1/0}{let c=1/0;for(const d of s)c=Math.min(c,d.z);return c}}const gx=Li([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:mx}=gx,_x=Li([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:yx}=_x,wx=uo.VectorTileFeature.types,vx=Math.cos(Math.PI/180*37.5),mm=Math.pow(2,14)/.5;class pd{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new br,this.layoutVertexArray2=new $r,this.indexArray=new bn,this.programConfigurations=new Yo(s.layers,s.zoom),this.segments=new dr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(s,c,d){this.hasPattern=cd("line",this.layers,c);const _=this.layers[0].layout.get("line-sort-key"),v=!_.isConstant(),x=[];for(const{feature:I,id:T,index:M,sourceLayerIndex:z}of s){const K=this.layers[0]._featureFilter.needGeometry,X=ea(I,K);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),X,d))continue;const W=v?_.evaluate(X,{},d):void 0,q={id:T,properties:I.properties,type:I.type,sourceLayerIndex:z,index:M,geometry:K?X.geometry:$o(I),patterns:{},sortKey:W};x.push(q)}v&&x.sort((I,T)=>I.sortKey-T.sortKey);for(const I of x){const{geometry:T,index:M,sourceLayerIndex:z}=I;if(this.hasPattern){const K=ud("line",this.layers,I,this.zoom,c);this.patternFeatures.push(K)}else this.addFeature(I,T,M,d,{});c.featureIndex.insert(s[M].feature,T,M,z,this.index)}}update(s,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,d)}addFeatures(s,c,d){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,c,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,yx)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,mx),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,c,d,_,v){const x=this.layers[0].layout,I=x.get("line-join").evaluate(s,{}),T=x.get("line-cap"),M=x.get("line-miter-limit"),z=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const K of c)this.addLine(K,s,I,T,M,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,v,_)}addLine(s,c,d,_,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ke=0;ke<s.length-1;ke++)this.totalDistance+=s[ke].dist(s[ke+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const I=wx[c.type]==="Polygon";let T=s.length;for(;T>=2&&s[T-1].equals(s[T-2]);)T--;let M=0;for(;M<T-1&&s[M].equals(s[M+1]);)M++;if(T<(I?3:2))return;d==="bevel"&&(v=1.05);const z=this.overscaling<=16?122880/(512*this.overscaling):0,K=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray);let X,W,q,pe,fe;this.e1=this.e2=-1,I&&(X=s[T-2],fe=s[M].sub(X)._unit()._perp());for(let ke=M;ke<T;ke++){if(q=ke===T-1?I?s[M+1]:void 0:s[ke+1],q&&s[ke].equals(q))continue;fe&&(pe=fe),X&&(W=X),X=s[ke],fe=q?q.sub(X)._unit()._perp():pe,pe=pe||fe;let Ne=pe.add(fe);Ne.x===0&&Ne.y===0||Ne._unit();const Se=pe.x*fe.x+pe.y*fe.y,ze=Ne.x*fe.x+Ne.y*fe.y,ot=ze!==0?1/ze:1/0,st=2*Math.sqrt(2-2*ze),Mt=ze<vx&&W&&q,Nt=pe.x*fe.y-pe.y*fe.x>0;if(Mt&&ke>M){const yt=X.dist(W);if(yt>2*z){const It=X.sub(X.sub(W)._mult(z/yt)._round());this.updateDistance(W,It),this.addCurrentVertex(It,pe,0,0,K),W=It}}const Qt=W&&q;let xt=Qt?d:I?"butt":_;if(Qt&&xt==="round"&&(ot<x?xt="miter":ot<=2&&(xt="fakeround")),xt==="miter"&&ot>v&&(xt="bevel"),xt==="bevel"&&(ot>2&&(xt="flipbevel"),ot<v&&(xt="miter")),W&&this.updateDistance(W,X),xt==="miter")Ne._mult(ot),this.addCurrentVertex(X,Ne,0,0,K);else if(xt==="flipbevel"){if(ot>100)Ne=fe.mult(-1);else{const yt=ot*pe.add(fe).mag()/pe.sub(fe).mag();Ne._perp()._mult(yt*(Nt?-1:1))}this.addCurrentVertex(X,Ne,0,0,K),this.addCurrentVertex(X,Ne.mult(-1),0,0,K)}else if(xt==="bevel"||xt==="fakeround"){const yt=-Math.sqrt(ot*ot-1),It=Nt?yt:0,Ct=Nt?0:yt;if(W&&this.addCurrentVertex(X,pe,It,Ct,K),xt==="fakeround"){const gt=Math.round(180*st/Math.PI/20);for(let Yt=1;Yt<gt;Yt++){let Wt=Yt/gt;if(Wt!==.5){const pi=Wt-.5;Wt+=Wt*pi*(Wt-1)*((1.0904+Se*(Se*(3.55645-1.43519*Se)-3.2452))*pi*pi+(.848013+Se*(.215638*Se-1.06021)))}const ur=fe.sub(pe)._mult(Wt)._add(pe)._unit()._mult(Nt?-1:1);this.addHalfVertex(X,ur.x,ur.y,!1,Nt,0,K)}}q&&this.addCurrentVertex(X,fe,-It,-Ct,K)}else if(xt==="butt")this.addCurrentVertex(X,Ne,0,0,K);else if(xt==="square"){const yt=W?1:-1;this.addCurrentVertex(X,Ne,yt,yt,K)}else xt==="round"&&(W&&(this.addCurrentVertex(X,pe,0,0,K),this.addCurrentVertex(X,pe,1,1,K,!0)),q&&(this.addCurrentVertex(X,fe,-1,-1,K,!0),this.addCurrentVertex(X,fe,0,0,K)));if(Mt&&ke<T-1){const yt=X.dist(q);if(yt>2*z){const It=X.add(q.sub(X)._mult(z/yt)._round());this.updateDistance(X,It),this.addCurrentVertex(It,fe,0,0,K),X=It}}}}addCurrentVertex(s,c,d,_,v,x=!1){const I=c.y*_-c.x,T=-c.y-c.x*_;this.addHalfVertex(s,c.x+c.y*d,c.y-c.x*d,x,!1,d,v),this.addHalfVertex(s,I,T,x,!0,-_,v),this.distance>mm/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(s,c,d,_,v,x))}addHalfVertex({x:s,y:c},d,_,v,x,I,T){const M=.5*(this.lineClips?this.scaledDistance*(mm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(v?1:0),(c<<1)+(x?1:0),Math.round(63*d)+128,Math.round(63*_)+128,1+(I===0?0:I<0?-1:1)|(63&M)<<2,M>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const z=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,z),T.primitiveLength++),x?this.e2=z:this.e1=z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,c){this.distance+=s.dist(c),this.updateScaledDistance()}}zt("LineBucket",pd,{omit:["layers","patternFeatures"]});const Bx=new rn({"line-cap":new Xt(Ze.layout_line["line-cap"]),"line-join":new ir(Ze.layout_line["line-join"]),"line-miter-limit":new Xt(Ze.layout_line["line-miter-limit"]),"line-round-limit":new Xt(Ze.layout_line["line-round-limit"]),"line-sort-key":new ir(Ze.layout_line["line-sort-key"])});var _m={paint:new rn({"line-opacity":new ir(Ze.paint_line["line-opacity"]),"line-color":new ir(Ze.paint_line["line-color"]),"line-translate":new Xt(Ze.paint_line["line-translate"]),"line-translate-anchor":new Xt(Ze.paint_line["line-translate-anchor"]),"line-width":new ir(Ze.paint_line["line-width"]),"line-gap-width":new ir(Ze.paint_line["line-gap-width"]),"line-offset":new ir(Ze.paint_line["line-offset"]),"line-blur":new ir(Ze.paint_line["line-blur"]),"line-dasharray":new Nl(Ze.paint_line["line-dasharray"]),"line-pattern":new ao(Ze.paint_line["line-pattern"]),"line-gradient":new aA(Ze.paint_line["line-gradient"])}),layout:Bx};const ym=new class extends ir{possiblyEvaluate(o,s){return s=new vi(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(o,s)}evaluate(o,s,c,d){return s=P({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(o,s,c,d)}}(_m.paint.properties["line-width"].specification);function wm(o,s){return s>0?s+2*o:o}ym.useIntegerZoom=!0;const xx=Li([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),bx=Li([{name:"a_projected_pos",components:3,type:"Float32"}],4);Li([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Cx=Li([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Li([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const vm=Li([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ex=Li([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Fx(o,s,c){return o.sections.forEach(d=>{d.text=function(_,v,x){const I=v.layout.get("text-transform").evaluate(x,{});return I==="uppercase"?_=_.toLocaleUpperCase():I==="lowercase"&&(_=_.toLocaleLowerCase()),qn.applyArabicShaping&&(_=qn.applyArabicShaping(_)),_}(d.text,s,c)}),o}Li([{name:"triangle",components:3,type:"Uint16"}]),Li([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Li([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Li([{type:"Float32",name:"offsetX"}]),Li([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const ic={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var nn=24,gd=ii,Bm=function(o,s,c,d,_){var v,x,I=8*_-d-1,T=(1<<I)-1,M=T>>1,z=-7,K=c?_-1:0,X=c?-1:1,W=o[s+K];for(K+=X,v=W&(1<<-z)-1,W>>=-z,z+=I;z>0;v=256*v+o[s+K],K+=X,z-=8);for(x=v&(1<<-z)-1,v>>=-z,z+=d;z>0;x=256*x+o[s+K],K+=X,z-=8);if(v===0)v=1-M;else{if(v===T)return x?NaN:1/0*(W?-1:1);x+=Math.pow(2,d),v-=M}return(W?-1:1)*x*Math.pow(2,v-d)},xm=function(o,s,c,d,_,v){var x,I,T,M=8*v-_-1,z=(1<<M)-1,K=z>>1,X=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=d?0:v-1,q=d?1:-1,pe=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(I=isNaN(s)?1:0,x=z):(x=Math.floor(Math.log(s)/Math.LN2),s*(T=Math.pow(2,-x))<1&&(x--,T*=2),(s+=x+K>=1?X/T:X*Math.pow(2,1-K))*T>=2&&(x++,T/=2),x+K>=z?(I=0,x=z):x+K>=1?(I=(s*T-1)*Math.pow(2,_),x+=K):(I=s*Math.pow(2,K-1)*Math.pow(2,_),x=0));_>=8;o[c+W]=255&I,W+=q,I/=256,_-=8);for(x=x<<_|I,M+=_;M>0;o[c+W]=255&x,W+=q,x/=256,M-=8);o[c+W-q]|=128*pe};function ii(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}ii.Varint=0,ii.Fixed64=1,ii.Bytes=2,ii.Fixed32=5;var ho,md=4294967296,bm=1/md,Cm=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function kA(o){return o.type===ii.Bytes?o.readVarint()+o.pos:o.pos+1}function Ka(o,s,c){return c?4294967296*s+(o>>>0):4294967296*(s>>>0)+(o>>>0)}function Em(o,s,c){var d=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));c.realloc(d);for(var _=c.pos-1;_>=o;_--)c.buf[_+d]=c.buf[_]}function Ux(o,s){for(var c=0;c<o.length;c++)s.writeVarint(o[c])}function Qx(o,s){for(var c=0;c<o.length;c++)s.writeSVarint(o[c])}function Ix(o,s){for(var c=0;c<o.length;c++)s.writeFloat(o[c])}function Tx(o,s){for(var c=0;c<o.length;c++)s.writeDouble(o[c])}function Sx(o,s){for(var c=0;c<o.length;c++)s.writeBoolean(o[c])}function kx(o,s){for(var c=0;c<o.length;c++)s.writeFixed32(o[c])}function Mx(o,s){for(var c=0;c<o.length;c++)s.writeSFixed32(o[c])}function Dx(o,s){for(var c=0;c<o.length;c++)s.writeFixed64(o[c])}function Lx(o,s){for(var c=0;c<o.length;c++)s.writeSFixed64(o[c])}function Vu(o,s){return(o[s]|o[s+1]<<8|o[s+2]<<16)+16777216*o[s+3]}function Na(o,s,c){o[c]=s,o[c+1]=s>>>8,o[c+2]=s>>>16,o[c+3]=s>>>24}function Fm(o,s){return(o[s]|o[s+1]<<8|o[s+2]<<16)+(o[s+3]<<24)}function Hx(o,s,c){o===1&&c.readMessage(Px,s)}function Px(o,s,c){if(o===3){const{id:d,bitmap:_,width:v,height:x,left:I,top:T,advance:M}=c.readMessage(zx,{});s.push({id:d,bitmap:new jl({width:v+6,height:x+6},_),metrics:{width:v,height:x,left:I,top:T,advance:M}})}}function zx(o,s,c){o===1?s.id=c.readVarint():o===2?s.bitmap=c.readBytes():o===3?s.width=c.readVarint():o===4?s.height=c.readVarint():o===5?s.left=c.readSVarint():o===6?s.top=c.readSVarint():o===7&&(s.advance=c.readVarint())}function Um(o){let s=0,c=0;for(const x of o)s+=x.w*x.h,c=Math.max(c,x.w);o.sort((x,I)=>I.h-x.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),c),h:1/0}];let _=0,v=0;for(const x of o)for(let I=d.length-1;I>=0;I--){const T=d[I];if(!(x.w>T.w||x.h>T.h)){if(x.x=T.x,x.y=T.y,v=Math.max(v,x.y+x.h),_=Math.max(_,x.x+x.w),x.w===T.w&&x.h===T.h){const M=d.pop();I<d.length&&(d[I]=M)}else x.h===T.h?(T.x+=x.w,T.w-=x.w):x.w===T.w?(T.y+=x.h,T.h-=x.h):(d.push({x:T.x+x.w,y:T.y,w:T.w-x.w,h:x.h}),T.y+=x.h,T.h-=x.h);break}}return{w:_,h:v,fill:s/(_*v)||0}}ii.prototype={destroy:function(){this.buf=null},readFields:function(o,s,c){for(c=c||this.length;this.pos<c;){var d=this.readVarint(),_=d>>3,v=this.pos;this.type=7&d,o(_,s,this),this.pos===v&&this.skip(d)}return s},readMessage:function(o,s){return this.readFields(o,s,this.readVarint()+this.pos)},readFixed32:function(){var o=Vu(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Fm(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Vu(this.buf,this.pos)+Vu(this.buf,this.pos+4)*md;return this.pos+=8,o},readSFixed64:function(){var o=Vu(this.buf,this.pos)+Fm(this.buf,this.pos+4)*md;return this.pos+=8,o},readFloat:function(){var o=Bm(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Bm(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var s,c,d=this.buf;return s=127&(c=d[this.pos++]),c<128?s:(s|=(127&(c=d[this.pos++]))<<7,c<128?s:(s|=(127&(c=d[this.pos++]))<<14,c<128?s:(s|=(127&(c=d[this.pos++]))<<21,c<128?s:function(_,v,x){var I,T,M=x.buf;if(I=(112&(T=M[x.pos++]))>>4,T<128||(I|=(127&(T=M[x.pos++]))<<3,T<128)||(I|=(127&(T=M[x.pos++]))<<10,T<128)||(I|=(127&(T=M[x.pos++]))<<17,T<128)||(I|=(127&(T=M[x.pos++]))<<24,T<128)||(I|=(1&(T=M[x.pos++]))<<31,T<128))return Ka(_,I,v);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(c=d[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,s=this.pos;return this.pos=o,o-s>=12&&Cm?function(c,d,_){return Cm.decode(c.subarray(d,_))}(this.buf,s,o):function(c,d,_){for(var v="",x=d;x<_;){var I,T,M,z=c[x],K=null,X=z>239?4:z>223?3:z>191?2:1;if(x+X>_)break;X===1?z<128&&(K=z):X===2?(192&(I=c[x+1]))==128&&(K=(31&z)<<6|63&I)<=127&&(K=null):X===3?(T=c[x+2],(192&(I=c[x+1]))==128&&(192&T)==128&&((K=(15&z)<<12|(63&I)<<6|63&T)<=2047||K>=55296&&K<=57343)&&(K=null)):X===4&&(T=c[x+2],M=c[x+3],(192&(I=c[x+1]))==128&&(192&T)==128&&(192&M)==128&&((K=(15&z)<<18|(63&I)<<12|(63&T)<<6|63&M)<=65535||K>=1114112)&&(K=null)),K===null?(K=65533,X=1):K>65535&&(K-=65536,v+=String.fromCharCode(K>>>10&1023|55296),K=56320|1023&K),v+=String.fromCharCode(K),x+=X}return v}(this.buf,s,o)},readBytes:function(){var o=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,o);return this.pos=o,s},readPackedVarint:function(o,s){if(this.type!==ii.Bytes)return o.push(this.readVarint(s));var c=kA(this);for(o=o||[];this.pos<c;)o.push(this.readVarint(s));return o},readPackedSVarint:function(o){if(this.type!==ii.Bytes)return o.push(this.readSVarint());var s=kA(this);for(o=o||[];this.pos<s;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==ii.Bytes)return o.push(this.readBoolean());var s=kA(this);for(o=o||[];this.pos<s;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==ii.Bytes)return o.push(this.readFloat());var s=kA(this);for(o=o||[];this.pos<s;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==ii.Bytes)return o.push(this.readDouble());var s=kA(this);for(o=o||[];this.pos<s;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==ii.Bytes)return o.push(this.readFixed32());var s=kA(this);for(o=o||[];this.pos<s;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==ii.Bytes)return o.push(this.readSFixed32());var s=kA(this);for(o=o||[];this.pos<s;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==ii.Bytes)return o.push(this.readFixed64());var s=kA(this);for(o=o||[];this.pos<s;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==ii.Bytes)return o.push(this.readSFixed64());var s=kA(this);for(o=o||[];this.pos<s;)o.push(this.readSFixed64());return o},skip:function(o){var s=7&o;if(s===ii.Varint)for(;this.buf[this.pos++]>127;);else if(s===ii.Bytes)this.pos=this.readVarint()+this.pos;else if(s===ii.Fixed32)this.pos+=4;else{if(s!==ii.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(o,s){this.writeVarint(o<<3|s)},realloc:function(o){for(var s=this.length||16;s<this.pos+o;)s*=2;if(s!==this.length){var c=new Uint8Array(s);c.set(this.buf),this.buf=c,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Na(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Na(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Na(this.buf,-1&o,this.pos),Na(this.buf,Math.floor(o*bm),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Na(this.buf,-1&o,this.pos),Na(this.buf,Math.floor(o*bm),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(s,c){var d,_;if(s>=0?(d=s%4294967296|0,_=s/4294967296|0):(_=~(-s/4294967296),4294967295^(d=~(-s%4294967296))?d=d+1|0:(d=0,_=_+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),function(v,x,I){I.buf[I.pos++]=127&v|128,v>>>=7,I.buf[I.pos++]=127&v|128,v>>>=7,I.buf[I.pos++]=127&v|128,v>>>=7,I.buf[I.pos++]=127&v|128,I.buf[I.pos]=127&(v>>>=7)}(d,0,c),function(v,x){var I=(7&v)<<4;x.buf[x.pos++]|=I|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(_,c)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var s=this.pos;this.pos=function(d,_,v){for(var x,I,T=0;T<_.length;T++){if((x=_.charCodeAt(T))>55295&&x<57344){if(!I){x>56319||T+1===_.length?(d[v++]=239,d[v++]=191,d[v++]=189):I=x;continue}if(x<56320){d[v++]=239,d[v++]=191,d[v++]=189,I=x;continue}x=I-55296<<10|x-56320|65536,I=null}else I&&(d[v++]=239,d[v++]=191,d[v++]=189,I=null);x<128?d[v++]=x:(x<2048?d[v++]=x>>6|192:(x<65536?d[v++]=x>>12|224:(d[v++]=x>>18|240,d[v++]=x>>12&63|128),d[v++]=x>>6&63|128),d[v++]=63&x|128)}return v}(this.buf,o,this.pos);var c=this.pos-s;c>=128&&Em(s,c,this),this.pos=s-1,this.writeVarint(c),this.pos+=c},writeFloat:function(o){this.realloc(4),xm(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),xm(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var s=o.length;this.writeVarint(s),this.realloc(s);for(var c=0;c<s;c++)this.buf[this.pos++]=o[c]},writeRawMessage:function(o,s){this.pos++;var c=this.pos;o(s,this);var d=this.pos-c;d>=128&&Em(c,d,this),this.pos=c-1,this.writeVarint(d),this.pos+=d},writeMessage:function(o,s,c){this.writeTag(o,ii.Bytes),this.writeRawMessage(s,c)},writePackedVarint:function(o,s){s.length&&this.writeMessage(o,Ux,s)},writePackedSVarint:function(o,s){s.length&&this.writeMessage(o,Qx,s)},writePackedBoolean:function(o,s){s.length&&this.writeMessage(o,Sx,s)},writePackedFloat:function(o,s){s.length&&this.writeMessage(o,Ix,s)},writePackedDouble:function(o,s){s.length&&this.writeMessage(o,Tx,s)},writePackedFixed32:function(o,s){s.length&&this.writeMessage(o,kx,s)},writePackedSFixed32:function(o,s){s.length&&this.writeMessage(o,Mx,s)},writePackedFixed64:function(o,s){s.length&&this.writeMessage(o,Dx,s)},writePackedSFixed64:function(o,s){s.length&&this.writeMessage(o,Lx,s)},writeBytesField:function(o,s){this.writeTag(o,ii.Bytes),this.writeBytes(s)},writeFixed32Field:function(o,s){this.writeTag(o,ii.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(o,s){this.writeTag(o,ii.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(o,s){this.writeTag(o,ii.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(o,s){this.writeTag(o,ii.Fixed64),this.writeSFixed64(s)},writeVarintField:function(o,s){this.writeTag(o,ii.Varint),this.writeVarint(s)},writeSVarintField:function(o,s){this.writeTag(o,ii.Varint),this.writeSVarint(s)},writeStringField:function(o,s){this.writeTag(o,ii.Bytes),this.writeString(s)},writeFloatField:function(o,s){this.writeTag(o,ii.Fixed32),this.writeFloat(s)},writeDoubleField:function(o,s){this.writeTag(o,ii.Fixed64),this.writeDouble(s)},writeBooleanField:function(o,s){this.writeVarintField(o,!!s)}};class _d{constructor(s,{pixelRatio:c,version:d,stretchX:_,stretchY:v,content:x}){this.paddedRect=s,this.pixelRatio=c,this.stretchX=_,this.stretchY=v,this.content=x,this.version=d}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Qm{constructor(s,c){const d={},_={};this.haveRenderCallbacks=[];const v=[];this.addImages(s,d,v),this.addImages(c,_,v);const{w:x,h:I}=Um(v),T=new cs({width:x||1,height:I||1});for(const M in s){const z=s[M],K=d[M].paddedRect;cs.copy(z.data,T,{x:0,y:0},{x:K.x+1,y:K.y+1},z.data)}for(const M in c){const z=c[M],K=_[M].paddedRect,X=K.x+1,W=K.y+1,q=z.data.width,pe=z.data.height;cs.copy(z.data,T,{x:0,y:0},{x:X,y:W},z.data),cs.copy(z.data,T,{x:0,y:pe-1},{x:X,y:W-1},{width:q,height:1}),cs.copy(z.data,T,{x:0,y:0},{x:X,y:W+pe},{width:q,height:1}),cs.copy(z.data,T,{x:q-1,y:0},{x:X-1,y:W},{width:1,height:pe}),cs.copy(z.data,T,{x:0,y:0},{x:X+q,y:W},{width:1,height:pe})}this.image=T,this.iconPositions=d,this.patternPositions=_}addImages(s,c,d){for(const _ in s){const v=s[_],x={x:0,y:0,w:v.data.width+2,h:v.data.height+2};d.push(x),c[_]=new _d(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(s,c){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in s.updatedImages)this.patchUpdatedImage(this.iconPositions[d],s.getImage(d),c),this.patchUpdatedImage(this.patternPositions[d],s.getImage(d),c)}patchUpdatedImage(s,c,d){if(!s||!c||s.version===c.version)return;s.version=c.version;const[_,v]=s.tl;d.update(c.data,void 0,{x:_,y:v})}}zt("ImagePosition",_d),zt("ImageAtlas",Qm),a.WritingMode=void 0,(ho=a.WritingMode||(a.WritingMode={}))[ho.none=0]="none",ho[ho.horizontal=1]="horizontal",ho[ho.vertical=2]="vertical",ho[ho.horizontalOnly=3]="horizontalOnly";const Gu=-17;class nc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,c){const d=new nc;return d.scale=s||1,d.fontStack=c,d}static forImage(s){const c=new nc;return c.imageName=s,c}}class Va{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,c){const d=new Va;for(let _=0;_<s.sections.length;_++){const v=s.sections[_];v.image?d.addImageSection(v):d.addTextSection(v,c)}return d}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let c="";for(let d=0;d<s.length;d++){const _=s.charCodeAt(d+1)||null,v=s.charCodeAt(d-1)||null;c+=_&&Cu(_)&&!ic[s[d+1]]||v&&Cu(v)&&!ic[s[d-1]]||!ic[s[d]]?s[d]:ic[s[d]]}return c}(this.text)}trim(){let s=0;for(let d=0;d<this.text.length&&Zu[this.text.charCodeAt(d)];d++)s++;let c=this.text.length;for(let d=this.text.length-1;d>=0&&d>=s&&Zu[this.text.charCodeAt(d)];d--)c--;this.text=this.text.substring(s,c),this.sectionIndex=this.sectionIndex.slice(s,c)}substring(s,c){const d=new Va;return d.text=this.text.substring(s,c),d.sectionIndex=this.sectionIndex.slice(s,c),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,c)=>Math.max(s,this.sections[c].scale),0)}addTextSection(s,c){this.text+=s.text,this.sections.push(nc.forText(s.scale,s.fontStack||c));const d=this.sections.length-1;for(let _=0;_<s.text.length;++_)this.sectionIndex.push(d)}addImageSection(s){const c=s.image?s.image.name:"";if(c.length===0)return void le("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(nc.forImage(c)),this.sectionIndex.push(this.sections.length-1)):le("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Xu(o,s,c,d,_,v,x,I,T,M,z,K,X,W,q,pe){const fe=Va.fromFeature(o,_);let ke;K===a.WritingMode.vertical&&fe.verticalizePunctuation();const{processBidirectionalText:Ne,processStyledBidirectionalText:Se}=qn;if(Ne&&fe.sections.length===1){ke=[];const st=Ne(fe.toString(),yd(fe,M,v,s,d,W,q));for(const Mt of st){const Nt=new Va;Nt.text=Mt,Nt.sections=fe.sections;for(let Qt=0;Qt<Mt.length;Qt++)Nt.sectionIndex.push(0);ke.push(Nt)}}else if(Se){ke=[];const st=Se(fe.text,fe.sectionIndex,yd(fe,M,v,s,d,W,q));for(const Mt of st){const Nt=new Va;Nt.text=Mt[0],Nt.sectionIndex=Mt[1],Nt.sections=fe.sections,ke.push(Nt)}}else ke=function(st,Mt){const Nt=[],Qt=st.text;let xt=0;for(const yt of Mt)Nt.push(st.substring(xt,yt)),xt=yt;return xt<Qt.length&&Nt.push(st.substring(xt,Qt.length)),Nt}(fe,yd(fe,M,v,s,d,W,q));const ze=[],ot={positionedLines:ze,text:fe.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:K,iconsInText:!1,verticalizable:!1};return function(st,Mt,Nt,Qt,xt,yt,It,Ct,gt,Yt,Wt,ur){let pi=0,xi=Gu,Ki=0,hs=0;const on=Ct==="right"?1:Ct==="left"?0:.5;let Hi=0;for(const Pi of xt){Pi.trim();const ln=Pi.getMaxScale(),mn=(ln-1)*nn,Fn={positionedGlyphs:[],lineOffset:0};st.positionedLines[Hi]=Fn;const Hn=Fn.positionedGlyphs;let Pn=0;if(!Pi.length()){xi+=yt,++Hi;continue}for(let Ji=0;Ji<Pi.length();Ji++){const pr=Pi.getSection(Ji),Yn=Pi.getSectionIndex(Ji),cn=Pi.getCharCode(Ji);let _n=0,vs=null,Ks=null,Ns=null,DA=nn;const Bs=!(gt===a.WritingMode.horizontal||!Wt&&!Hl(cn)||Wt&&(Zu[cn]||(ji=cn,Ut.Arabic(ji)||Ut["Arabic Supplement"](ji)||Ut["Arabic Extended-A"](ji)||Ut["Arabic Presentation Forms-A"](ji)||Ut["Arabic Presentation Forms-B"](ji))));if(pr.imageName){const fs=Qt[pr.imageName];if(!fs)continue;Ns=pr.imageName,st.iconsInText=st.iconsInText||!0,Ks=fs.paddedRect;const zn=fs.displaySize;pr.scale=pr.scale*nn/ur,vs={width:zn[0],height:zn[1],left:1,top:-3,advance:Bs?zn[1]:zn[0]},_n=mn+(nn-zn[1]*pr.scale),DA=vs.advance;const LA=Bs?zn[0]*pr.scale-nn*ln:zn[1]*pr.scale-nn*ln;LA>0&&LA>Pn&&(Pn=LA)}else{const fs=Nt[pr.fontStack],zn=fs&&fs[cn];if(zn&&zn.rect)Ks=zn.rect,vs=zn.metrics;else{const LA=Mt[pr.fontStack],oc=LA&&LA[cn];if(!oc)continue;vs=oc.metrics}_n=(ln-pr.scale)*nn}Bs?(st.verticalizable=!0,Hn.push({glyph:cn,imageName:Ns,x:pi,y:xi+_n,vertical:Bs,scale:pr.scale,fontStack:pr.fontStack,sectionIndex:Yn,metrics:vs,rect:Ks}),pi+=DA*pr.scale+Yt):(Hn.push({glyph:cn,imageName:Ns,x:pi,y:xi+_n,vertical:Bs,scale:pr.scale,fontStack:pr.fontStack,sectionIndex:Yn,metrics:vs,rect:Ks}),pi+=vs.advance*pr.scale+Yt)}Hn.length!==0&&(Ki=Math.max(pi-Yt,Ki),Kx(Hn,0,Hn.length-1,on,Pn)),pi=0;const Ei=yt*ln+Pn;Fn.lineOffset=Math.max(Pn,mn),xi+=Ei,hs=Math.max(Ei,hs),++Hi}var ji;const an=xi-Gu,{horizontalAlign:gn,verticalAlign:Ln}=wd(It);(function(Pi,ln,mn,Fn,Hn,Pn,Ei,Ji,pr){const Yn=(ln-mn)*Hn;let cn=0;cn=Pn!==Ei?-Ji*Fn-Gu:(-Fn*pr+.5)*Ei;for(const _n of Pi)for(const vs of _n.positionedGlyphs)vs.x+=Yn,vs.y+=cn})(st.positionedLines,on,gn,Ln,Ki,hs,yt,an,xt.length),st.top+=-Ln*an,st.bottom=st.top+an,st.left+=-gn*Ki,st.right=st.left+Ki}(ot,s,c,d,ke,x,I,T,K,M,X,pe),!function(st){for(const Mt of st)if(Mt.positionedGlyphs.length!==0)return!1;return!0}(ze)&&ot}const Zu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Rx={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Im(o,s,c,d,_,v){if(s.imageName){const x=d[s.imageName];return x?x.displaySize[0]*s.scale*nn/v+_:0}{const x=c[s.fontStack],I=x&&x[o];return I?I.metrics.advance*s.scale+_:0}}function Tm(o,s,c,d){const _=Math.pow(o-s,2);return d?o<s?_/2:2*_:_+Math.abs(c)*c}function Ox(o,s,c){let d=0;return o===10&&(d-=1e4),c&&(d+=150),o!==40&&o!==65288||(d+=50),s!==41&&s!==65289||(d+=50),d}function Sm(o,s,c,d,_,v){let x=null,I=Tm(s,c,_,v);for(const T of d){const M=Tm(s-T.x,c,_,v)+T.badness;M<=I&&(x=T,I=M)}return{index:o,x:s,priorBreak:x,badness:I}}function km(o){return o?km(o.priorBreak).concat(o.index):[]}function yd(o,s,c,d,_,v,x){if(v!=="point")return[];if(!o)return[];const I=[],T=function(X,W,q,pe,fe,ke){let Ne=0;for(let Se=0;Se<X.length();Se++){const ze=X.getSection(Se);Ne+=Im(X.getCharCode(Se),ze,pe,fe,W,ke)}return Ne/Math.max(1,Math.ceil(Ne/q))}(o,s,c,d,_,x),M=o.text.indexOf("")>=0;let z=0;for(let X=0;X<o.length();X++){const W=o.getSection(X),q=o.getCharCode(X);if(Zu[q]||(z+=Im(q,W,d,_,s,x)),X<o.length()-1){const pe=!((K=q)<11904||!(Ut["Bopomofo Extended"](K)||Ut.Bopomofo(K)||Ut["CJK Compatibility Forms"](K)||Ut["CJK Compatibility Ideographs"](K)||Ut["CJK Compatibility"](K)||Ut["CJK Radicals Supplement"](K)||Ut["CJK Strokes"](K)||Ut["CJK Symbols and Punctuation"](K)||Ut["CJK Unified Ideographs Extension A"](K)||Ut["CJK Unified Ideographs"](K)||Ut["Enclosed CJK Letters and Months"](K)||Ut["Halfwidth and Fullwidth Forms"](K)||Ut.Hiragana(K)||Ut["Ideographic Description Characters"](K)||Ut["Kangxi Radicals"](K)||Ut["Katakana Phonetic Extensions"](K)||Ut.Katakana(K)||Ut["Vertical Forms"](K)||Ut["Yi Radicals"](K)||Ut["Yi Syllables"](K)));(Rx[q]||pe||W.imageName)&&I.push(Sm(X+1,z,T,I,Ox(q,o.getCharCode(X+1),pe&&M),!1))}}var K;return km(Sm(o.length(),z,T,I,0,!0))}function wd(o){let s=.5,c=.5;switch(o){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:s,verticalAlign:c}}function Kx(o,s,c,d,_){if(!d&&!_)return;const v=o[c],x=(o[c].x+v.metrics.advance*v.scale)*d;for(let I=s;I<=c;I++)o[I].x-=x,o[I].y+=_}function Nx(o,s,c){const{horizontalAlign:d,verticalAlign:_}=wd(c),v=s[0]-o.displaySize[0]*d,x=s[1]-o.displaySize[1]*_;return{image:o,top:x,bottom:x+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function Mm(o,s,c,d,_,v){const x=o.image;let I;if(x.content){const fe=x.content,ke=x.pixelRatio||1;I=[fe[0]/ke,fe[1]/ke,x.displaySize[0]-fe[2]/ke,x.displaySize[1]-fe[3]/ke]}const T=s.left*v,M=s.right*v;let z,K,X,W;c==="width"||c==="both"?(W=_[0]+T-d[3],K=_[0]+M+d[1]):(W=_[0]+(T+M-x.displaySize[0])/2,K=W+x.displaySize[0]);const q=s.top*v,pe=s.bottom*v;return c==="height"||c==="both"?(z=_[1]+q-d[0],X=_[1]+pe+d[2]):(z=_[1]+(q+pe-x.displaySize[1])/2,X=z+x.displaySize[1]),{image:x,top:z,right:K,bottom:X,left:W,collisionPadding:I}}const MA=128;function Dm(o,s){const{expression:c}=s;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new vi(o+1))};if(c.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:_}=c;let v=0;for(;v<d.length&&d[v]<=o;)v++;v=Math.max(0,v-1);let x=v;for(;x<d.length&&d[x]<o+1;)x++;x=Math.min(d.length-1,x);const I=d[v],T=d[x];return c.kind==="composite"?{kind:"composite",minZoom:I,maxZoom:T,interpolationType:_}:{kind:"camera",minZoom:I,maxZoom:T,minSize:c.evaluate(new vi(I)),maxSize:c.evaluate(new vi(T)),interpolationType:_}}}class fo extends Me{constructor(s,c,d,_){super(s,c),this.angle=d,_!==void 0&&(this.segment=_)}clone(){return new fo(this.x,this.y,this.angle,this.segment)}}function Lm(o,s,c,d,_){if(s.segment===void 0)return!0;let v=s,x=s.segment+1,I=0;for(;I>-c/2;){if(x--,x<0)return!1;I-=o[x].dist(v),v=o[x]}I+=o[x].dist(o[x+1]),x++;const T=[];let M=0;for(;I<c/2;){const z=o[x],K=o[x+1];if(!K)return!1;let X=o[x-1].angleTo(z)-z.angleTo(K);for(X=Math.abs((X+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:I,angleDelta:X}),M+=X;I-T[0].distance>d;)M-=T.shift().angleDelta;if(M>_)return!1;x++,I+=z.dist(K)}return!0}function Hm(o){let s=0;for(let c=0;c<o.length-1;c++)s+=o[c].dist(o[c+1]);return s}function Pm(o,s,c){return o?.6*s*c:0}function zm(o,s){return Math.max(o?o.right-o.left:0,s?s.right-s.left:0)}function Vx(o,s,c,d,_,v){const x=Pm(c,_,v),I=zm(c,d)*v;let T=0;const M=Hm(o)/2;for(let z=0;z<o.length-1;z++){const K=o[z],X=o[z+1],W=K.dist(X);if(T+W>M){const q=(M-T)/W,pe=Fr(K.x,X.x,q),fe=Fr(K.y,X.y,q),ke=new fo(pe,fe,X.angleTo(K),z);return ke._round(),!x||Lm(o,ke,I,x,s)?ke:void 0}T+=W}}function Gx(o,s,c,d,_,v,x,I,T){const M=Pm(d,v,x),z=zm(d,_),K=z*x,X=o[0].x===0||o[0].x===T||o[0].y===0||o[0].y===T;return s-K<s/4&&(s=K+s/4),Rm(o,X?s/2*I%s:(z/2+2*v)*x*I%s,s,M,c,K,X,!1,T)}function Rm(o,s,c,d,_,v,x,I,T){const M=v/2,z=Hm(o);let K=0,X=s-c,W=[];for(let q=0;q<o.length-1;q++){const pe=o[q],fe=o[q+1],ke=pe.dist(fe),Ne=fe.angleTo(pe);for(;X+c<K+ke;){X+=c;const Se=(X-K)/ke,ze=Fr(pe.x,fe.x,Se),ot=Fr(pe.y,fe.y,Se);if(ze>=0&&ze<T&&ot>=0&&ot<T&&X-M>=0&&X+M<=z){const st=new fo(ze,ot,Ne,q);st._round(),d&&!Lm(o,st,v,d,_)||W.push(st)}}K+=ke}return I||W.length||x||(W=Rm(o,K/2,c,d,_,v,x,!0,T)),W}function Om(o,s,c,d,_){const v=[];for(let x=0;x<o.length;x++){const I=o[x];let T;for(let M=0;M<I.length-1;M++){let z=I[M],K=I[M+1];z.x<s&&K.x<s||(z.x<s?z=new Me(s,z.y+(s-z.x)/(K.x-z.x)*(K.y-z.y))._round():K.x<s&&(K=new Me(s,z.y+(s-z.x)/(K.x-z.x)*(K.y-z.y))._round()),z.y<c&&K.y<c||(z.y<c?z=new Me(z.x+(c-z.y)/(K.y-z.y)*(K.x-z.x),c)._round():K.y<c&&(K=new Me(z.x+(c-z.y)/(K.y-z.y)*(K.x-z.x),c)._round()),z.x>=d&&K.x>=d||(z.x>=d?z=new Me(d,z.y+(d-z.x)/(K.x-z.x)*(K.y-z.y))._round():K.x>=d&&(K=new Me(d,z.y+(d-z.x)/(K.x-z.x)*(K.y-z.y))._round()),z.y>=_&&K.y>=_||(z.y>=_?z=new Me(z.x+(_-z.y)/(K.y-z.y)*(K.x-z.x),_)._round():K.y>=_&&(K=new Me(z.x+(_-z.y)/(K.y-z.y)*(K.x-z.x),_)._round()),T&&z.equals(T[T.length-1])||(T=[z],v.push(T)),T.push(K)))))}}return v}function Km(o,s,c,d){const _=[],v=o.image,x=v.pixelRatio,I=v.paddedRect.w-2,T=v.paddedRect.h-2,M=o.right-o.left,z=o.bottom-o.top,K=v.stretchX||[[0,I]],X=v.stretchY||[[0,T]],W=(yt,It)=>yt+It[1]-It[0],q=K.reduce(W,0),pe=X.reduce(W,0),fe=I-q,ke=T-pe;let Ne=0,Se=q,ze=0,ot=pe,st=0,Mt=fe,Nt=0,Qt=ke;if(v.content&&d){const yt=v.content;Ne=Wu(K,0,yt[0]),ze=Wu(X,0,yt[1]),Se=Wu(K,yt[0],yt[2]),ot=Wu(X,yt[1],yt[3]),st=yt[0]-Ne,Nt=yt[1]-ze,Mt=yt[2]-yt[0]-Se,Qt=yt[3]-yt[1]-ot}const xt=(yt,It,Ct,gt)=>{const Yt=qu(yt.stretch-Ne,Se,M,o.left),Wt=ju(yt.fixed-st,Mt,yt.stretch,q),ur=qu(It.stretch-ze,ot,z,o.top),pi=ju(It.fixed-Nt,Qt,It.stretch,pe),xi=qu(Ct.stretch-Ne,Se,M,o.left),Ki=ju(Ct.fixed-st,Mt,Ct.stretch,q),hs=qu(gt.stretch-ze,ot,z,o.top),on=ju(gt.fixed-Nt,Qt,gt.stretch,pe),Hi=new Me(Yt,ur),ji=new Me(xi,ur),an=new Me(xi,hs),gn=new Me(Yt,hs),Ln=new Me(Wt/x,pi/x),Pi=new Me(Ki/x,on/x),ln=s*Math.PI/180;if(ln){const Hn=Math.sin(ln),Pn=Math.cos(ln),Ei=[Pn,-Hn,Hn,Pn];Hi._matMult(Ei),ji._matMult(Ei),gn._matMult(Ei),an._matMult(Ei)}const mn=yt.stretch+yt.fixed,Fn=It.stretch+It.fixed;return{tl:Hi,tr:ji,bl:gn,br:an,tex:{x:v.paddedRect.x+1+mn,y:v.paddedRect.y+1+Fn,w:Ct.stretch+Ct.fixed-mn,h:gt.stretch+gt.fixed-Fn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ln,pixelOffsetBR:Pi,minFontScaleX:Mt/x/M,minFontScaleY:Qt/x/z,isSDF:c}};if(d&&(v.stretchX||v.stretchY)){const yt=Nm(K,fe,q),It=Nm(X,ke,pe);for(let Ct=0;Ct<yt.length-1;Ct++){const gt=yt[Ct],Yt=yt[Ct+1];for(let Wt=0;Wt<It.length-1;Wt++)_.push(xt(gt,It[Wt],Yt,It[Wt+1]))}}else _.push(xt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:I+1},{fixed:0,stretch:T+1}));return _}function Wu(o,s,c){let d=0;for(const _ of o)d+=Math.max(s,Math.min(c,_[1]))-Math.max(s,Math.min(c,_[0]));return d}function Nm(o,s,c){const d=[{fixed:-1,stretch:0}];for(const[_,v]of o){const x=d[d.length-1];d.push({fixed:_-x.stretch,stretch:x.stretch}),d.push({fixed:_-x.stretch,stretch:x.stretch+(v-_)})}return d.push({fixed:s+1,stretch:c}),d}function qu(o,s,c,d){return o/s*c+d}function ju(o,s,c,d){return o-s*c/d}zt("Anchor",fo);class Ju{constructor(s,c,d,_,v,x,I,T,M,z){if(this.boxStartIndex=s.length,M){let K=x.top,X=x.bottom;const W=x.collisionPadding;W&&(K-=W[1],X+=W[3]);let q=X-K;q>0&&(q=Math.max(10,q),this.circleDiameter=q)}else{let K=x.top*I-T[0],X=x.bottom*I+T[2],W=x.left*I-T[3],q=x.right*I+T[1];const pe=x.collisionPadding;if(pe&&(W-=pe[0]*I,K-=pe[1]*I,q+=pe[2]*I,X+=pe[3]*I),z){const fe=new Me(W,K),ke=new Me(q,K),Ne=new Me(W,X),Se=new Me(q,X),ze=z*Math.PI/180;fe._rotate(ze),ke._rotate(ze),Ne._rotate(ze),Se._rotate(ze),W=Math.min(fe.x,ke.x,Ne.x,Se.x),q=Math.max(fe.x,ke.x,Ne.x,Se.x),K=Math.min(fe.y,ke.y,Ne.y,Se.y),X=Math.max(fe.y,ke.y,Ne.y,Se.y)}s.emplaceBack(c.x,c.y,W,K,q,X,d,_,v)}this.boxEndIndex=s.length}}class Xx{constructor(s=[],c=Zx){if(this.data=s,this.length=this.data.length,this.compare=c,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(s){this.data.push(s),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const s=this.data[0],c=this.data.pop();return this.length--,this.length>0&&(this.data[0]=c,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:c,compare:d}=this,_=c[s];for(;s>0;){const v=s-1>>1,x=c[v];if(d(_,x)>=0)break;c[s]=x,s=v}c[s]=_}_down(s){const{data:c,compare:d}=this,_=this.length>>1,v=c[s];for(;s<_;){let x=1+(s<<1),I=c[x];const T=x+1;if(T<this.length&&d(c[T],I)<0&&(x=T,I=c[T]),d(I,v)>=0)break;c[s]=I,s=x}c[s]=v}}function Zx(o,s){return o<s?-1:o>s?1:0}function Wx(o,s=1,c=!1){let d=1/0,_=1/0,v=-1/0,x=-1/0;const I=o[0];for(let W=0;W<I.length;W++){const q=I[W];(!W||q.x<d)&&(d=q.x),(!W||q.y<_)&&(_=q.y),(!W||q.x>v)&&(v=q.x),(!W||q.y>x)&&(x=q.y)}const T=Math.min(v-d,x-_);let M=T/2;const z=new Xx([],qx);if(T===0)return new Me(d,_);for(let W=d;W<v;W+=T)for(let q=_;q<x;q+=T)z.push(new Ga(W+M,q+M,M,o));let K=function(W){let q=0,pe=0,fe=0;const ke=W[0];for(let Ne=0,Se=ke.length,ze=Se-1;Ne<Se;ze=Ne++){const ot=ke[Ne],st=ke[ze],Mt=ot.x*st.y-st.x*ot.y;pe+=(ot.x+st.x)*Mt,fe+=(ot.y+st.y)*Mt,q+=3*Mt}return new Ga(pe/q,fe/q,0,W)}(o),X=z.length;for(;z.length;){const W=z.pop();(W.d>K.d||!K.d)&&(K=W,c&&console.log("found best %d after %d probes",Math.round(1e4*W.d)/1e4,X)),W.max-K.d<=s||(M=W.h/2,z.push(new Ga(W.p.x-M,W.p.y-M,M,o)),z.push(new Ga(W.p.x+M,W.p.y-M,M,o)),z.push(new Ga(W.p.x-M,W.p.y+M,M,o)),z.push(new Ga(W.p.x+M,W.p.y+M,M,o)),X+=4)}return c&&(console.log(`num probes: ${X}`),console.log(`best distance: ${K.d}`)),K.p}function qx(o,s){return s.max-o.max}function Ga(o,s,c,d){this.p=new Me(o,s),this.h=c,this.d=function(_,v){let x=!1,I=1/0;for(let T=0;T<v.length;T++){const M=v[T];for(let z=0,K=M.length,X=K-1;z<K;X=z++){const W=M[z],q=M[X];W.y>_.y!=q.y>_.y&&_.x<(q.x-W.x)*(_.y-W.y)/(q.y-W.y)+W.x&&(x=!x),I=Math.min(I,Jg(_,W,q))}}return(x?1:-1)*Math.sqrt(I)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}const vd=Number.POSITIVE_INFINITY;function Vm(o,s){return s[1]!==vd?function(c,d,_){let v=0,x=0;switch(d=Math.abs(d),_=Math.abs(_),c){case"top-right":case"top-left":case"top":x=_-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-_}switch(c){case"top-right":case"bottom-right":case"right":v=-d;break;case"top-left":case"bottom-left":case"left":v=d}return[v,x]}(o,s[0],s[1]):function(c,d){let _=0,v=0;d<0&&(d=0);const x=d/Math.sqrt(2);switch(c){case"top-right":case"top-left":v=x-7;break;case"bottom-right":case"bottom-left":v=7-x;break;case"bottom":v=7-d;break;case"top":v=d-7}switch(c){case"top-right":case"bottom-right":_=-x;break;case"top-left":case"bottom-left":_=x;break;case"left":_=d;break;case"right":_=-d}return[_,v]}(o,s[0])}function Bd(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function jx(o,s,c,d,_,v,x,I,T,M,z){let K=v.textMaxSize.evaluate(s,{});K===void 0&&(K=x);const X=o.layers[0].layout,W=X.get("icon-offset").evaluate(s,{},z),q=Xm(c.horizontal),pe=x/24,fe=o.tilePixelRatio*pe,ke=o.tilePixelRatio*K/24,Ne=o.tilePixelRatio*I,Se=o.tilePixelRatio*X.get("symbol-spacing"),ze=X.get("text-padding")*o.tilePixelRatio,ot=function(gt,Yt,Wt,ur=1){const pi=gt.get("icon-padding").evaluate(Yt,{},Wt),xi=pi&&pi.values;return[xi[0]*ur,xi[1]*ur,xi[2]*ur,xi[3]*ur]}(X,s,z,o.tilePixelRatio),st=X.get("text-max-angle")/180*Math.PI,Mt=X.get("text-rotation-alignment")!=="viewport"&&X.get("symbol-placement")!=="point",Nt=X.get("icon-rotation-alignment")==="map"&&X.get("symbol-placement")!=="point",Qt=X.get("symbol-placement"),xt=Se/2,yt=X.get("icon-text-fit");let It;d&&yt!=="none"&&(o.allowVerticalPlacement&&c.vertical&&(It=Mm(d,c.vertical,yt,X.get("icon-text-fit-padding"),W,pe)),q&&(d=Mm(d,q,yt,X.get("icon-text-fit-padding"),W,pe)));const Ct=(gt,Yt)=>{Yt.x<0||Yt.x>=Oi||Yt.y<0||Yt.y>=Oi||function(Wt,ur,pi,xi,Ki,hs,on,Hi,ji,an,gn,Ln,Pi,ln,mn,Fn,Hn,Pn,Ei,Ji,pr,Yn,cn,_n,vs){const Ks=Wt.addToLineVertexArray(ur,pi);let Ns,DA,Bs,fs,zn=0,LA=0,oc=0,a0=0,Sd=-1,kd=-1;const HA={};let l0=qi.exports(""),Md=0,Dd=0;if(Hi._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Md,Dd]=Hi.layout.get("text-offset").evaluate(pr,{},_n).map(Rn=>Rn*nn):(Md=Hi.layout.get("text-radial-offset").evaluate(pr,{},_n)*nn,Dd=vd),Wt.allowVerticalPlacement&&xi.vertical){const Rn=Hi.layout.get("text-rotate").evaluate(pr,{},_n)+90;Bs=new Ju(ji,ur,an,gn,Ln,xi.vertical,Pi,ln,mn,Rn),on&&(fs=new Ju(ji,ur,an,gn,Ln,on,Hn,Pn,mn,Rn))}if(Ki){const Rn=Hi.layout.get("icon-rotate").evaluate(pr,{}),fA=Hi.layout.get("icon-text-fit")!=="none",ac=Km(Ki,Rn,cn,fA),lc=on?Km(on,Rn,cn,fA):void 0;DA=new Ju(ji,ur,an,gn,Ln,Ki,Hn,Pn,!1,Rn),zn=4*ac.length;const h0=Wt.iconSizeData;let ia=null;h0.kind==="source"?(ia=[MA*Hi.layout.get("icon-size").evaluate(pr,{})],ia[0]>po&&le(`${Wt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):h0.kind==="composite"&&(ia=[MA*Yn.compositeIconSizes[0].evaluate(pr,{},_n),MA*Yn.compositeIconSizes[1].evaluate(pr,{},_n)],(ia[0]>po||ia[1]>po)&&le(`${Wt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Wt.addSymbols(Wt.icon,ac,ia,Ji,Ei,pr,a.WritingMode.none,ur,Ks.lineStartIndex,Ks.lineLength,-1,_n),Sd=Wt.icon.placedSymbolArray.length-1,lc&&(LA=4*lc.length,Wt.addSymbols(Wt.icon,lc,ia,Ji,Ei,pr,a.WritingMode.vertical,ur,Ks.lineStartIndex,Ks.lineLength,-1,_n),kd=Wt.icon.placedSymbolArray.length-1)}const c0=Object.keys(xi.horizontal);for(const Rn of c0){const fA=xi.horizontal[Rn];if(!Ns){l0=qi.exports(fA.text);const lc=Hi.layout.get("text-rotate").evaluate(pr,{},_n);Ns=new Ju(ji,ur,an,gn,Ln,fA,Pi,ln,mn,lc)}const ac=fA.positionedLines.length===1;if(oc+=Gm(Wt,ur,fA,hs,Hi,mn,pr,Fn,Ks,xi.vertical?a.WritingMode.horizontal:a.WritingMode.horizontalOnly,ac?c0:[Rn],HA,Sd,Yn,_n),ac)break}xi.vertical&&(a0+=Gm(Wt,ur,xi.vertical,hs,Hi,mn,pr,Fn,Ks,a.WritingMode.vertical,["vertical"],HA,kd,Yn,_n));const lb=Ns?Ns.boxStartIndex:Wt.collisionBoxArray.length,cb=Ns?Ns.boxEndIndex:Wt.collisionBoxArray.length,ub=Bs?Bs.boxStartIndex:Wt.collisionBoxArray.length,hb=Bs?Bs.boxEndIndex:Wt.collisionBoxArray.length,fb=DA?DA.boxStartIndex:Wt.collisionBoxArray.length,db=DA?DA.boxEndIndex:Wt.collisionBoxArray.length,pb=fs?fs.boxStartIndex:Wt.collisionBoxArray.length,gb=fs?fs.boxEndIndex:Wt.collisionBoxArray.length;let Vs=-1;const rh=(Rn,fA)=>Rn&&Rn.circleDiameter?Math.max(Rn.circleDiameter,fA):fA;Vs=rh(Ns,Vs),Vs=rh(Bs,Vs),Vs=rh(DA,Vs),Vs=rh(fs,Vs);const u0=Vs>-1?1:0;u0&&(Vs*=vs/nn),Wt.glyphOffsetArray.length>=Xa.MAX_GLYPHS&&le("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),pr.sortKey!==void 0&&Wt.addToSortKeyRanges(Wt.symbolInstances.length,pr.sortKey),Wt.symbolInstances.emplaceBack(ur.x,ur.y,HA.right>=0?HA.right:-1,HA.center>=0?HA.center:-1,HA.left>=0?HA.left:-1,HA.vertical||-1,Sd,kd,l0,lb,cb,ub,hb,fb,db,pb,gb,an,oc,a0,zn,LA,u0,0,Pi,Md,Dd,Vs)}(o,Yt,gt,c,d,_,It,o.layers[0],o.collisionBoxArray,s.index,s.sourceLayerIndex,o.index,fe,[ze,ze,ze,ze],Mt,T,Ne,ot,Nt,W,s,v,M,z,x)};if(Qt==="line")for(const gt of Om(s.geometry,0,0,Oi,Oi)){const Yt=Gx(gt,Se,st,c.vertical||q,d,24,ke,o.overscaling,Oi);for(const Wt of Yt){const ur=q;ur&&Jx(o,ur.text,xt,Wt)||Ct(gt,Wt)}}else if(Qt==="line-center"){for(const gt of s.geometry)if(gt.length>1){const Yt=Vx(gt,st,c.vertical||q,d,24,ke);Yt&&Ct(gt,Yt)}}else if(s.type==="Polygon")for(const gt of ld(s.geometry,0)){const Yt=Wx(gt,16);Ct(gt[0],new fo(Yt.x,Yt.y,0))}else if(s.type==="LineString")for(const gt of s.geometry)Ct(gt,new fo(gt[0].x,gt[0].y,0));else if(s.type==="Point")for(const gt of s.geometry)for(const Yt of gt)Ct([Yt],new fo(Yt.x,Yt.y,0))}const po=32640;function Gm(o,s,c,d,_,v,x,I,T,M,z,K,X,W,q){const pe=function(Ne,Se,ze,ot,st,Mt,Nt,Qt){const xt=ot.layout.get("text-rotate").evaluate(Mt,{})*Math.PI/180,yt=[];for(const It of Se.positionedLines)for(const Ct of It.positionedGlyphs){if(!Ct.rect)continue;const gt=Ct.rect||{};let Yt=4,Wt=!0,ur=1,pi=0;const xi=(st||Qt)&&Ct.vertical,Ki=Ct.metrics.advance*Ct.scale/2;if(Qt&&Se.verticalizable){const Ei=(Ct.scale-1)*nn,Ji=(nn-Ct.metrics.width*Ct.scale)/2;pi=It.lineOffset/2-(Ct.imageName?-Ji:Ei)}if(Ct.imageName){const Ei=Nt[Ct.imageName];Wt=Ei.sdf,ur=Ei.pixelRatio,Yt=1/ur}const hs=st?[Ct.x+Ki,Ct.y]:[0,0];let on=st?[0,0]:[Ct.x+Ki+ze[0],Ct.y+ze[1]-pi],Hi=[0,0];xi&&(Hi=on,on=[0,0]);const ji=(Ct.metrics.left-Yt)*Ct.scale-Ki+on[0],an=(-Ct.metrics.top-Yt)*Ct.scale+on[1],gn=ji+gt.w*Ct.scale/ur,Ln=an+gt.h*Ct.scale/ur,Pi=new Me(ji,an),ln=new Me(gn,an),mn=new Me(ji,Ln),Fn=new Me(gn,Ln);if(xi){const Ei=new Me(-Ki,Ki-Gu),Ji=-Math.PI/2,pr=12-Ki,Yn=new Me(22-pr,-(Ct.imageName?pr:0)),cn=new Me(...Hi);Pi._rotateAround(Ji,Ei)._add(Yn)._add(cn),ln._rotateAround(Ji,Ei)._add(Yn)._add(cn),mn._rotateAround(Ji,Ei)._add(Yn)._add(cn),Fn._rotateAround(Ji,Ei)._add(Yn)._add(cn)}if(xt){const Ei=Math.sin(xt),Ji=Math.cos(xt),pr=[Ji,-Ei,Ei,Ji];Pi._matMult(pr),ln._matMult(pr),mn._matMult(pr),Fn._matMult(pr)}const Hn=new Me(0,0),Pn=new Me(0,0);yt.push({tl:Pi,tr:ln,bl:mn,br:Fn,tex:gt,writingMode:Se.writingMode,glyphOffset:hs,sectionIndex:Ct.sectionIndex,isSDF:Wt,pixelOffsetTL:Hn,pixelOffsetBR:Pn,minFontScaleX:0,minFontScaleY:0})}return yt}(0,c,I,_,v,x,d,o.allowVerticalPlacement),fe=o.textSizeData;let ke=null;fe.kind==="source"?(ke=[MA*_.layout.get("text-size").evaluate(x,{})],ke[0]>po&&le(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):fe.kind==="composite"&&(ke=[MA*W.compositeTextSizes[0].evaluate(x,{},q),MA*W.compositeTextSizes[1].evaluate(x,{},q)],(ke[0]>po||ke[1]>po)&&le(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,pe,ke,I,v,x,M,s,T.lineStartIndex,T.lineLength,X,q);for(const Ne of z)K[Ne]=o.text.placedSymbolArray.length-1;return 4*pe.length}function Xm(o){for(const s in o)return o[s];return null}function Jx(o,s,c,d){const _=o.compareText;if(s in _){const v=_[s];for(let x=v.length-1;x>=0;x--)if(d.dist(v[x])<c)return!0}else _[s]=[];return _[s].push(d),!1}const Yx=uo.VectorTileFeature.types,$x=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Yu(o,s,c,d,_,v,x,I,T,M,z,K,X){const W=I?Math.min(po,Math.round(I[0])):0,q=I?Math.min(po,Math.round(I[1])):0;o.emplaceBack(s,c,Math.round(32*d),Math.round(32*_),v,x,(W<<1)+(T?1:0),q,16*M,16*z,256*K,256*X)}function xd(o,s,c){o.emplaceBack(s.x,s.y,c),o.emplaceBack(s.x,s.y,c),o.emplaceBack(s.x,s.y,c),o.emplaceBack(s.x,s.y,c)}function eb(o){for(const s of o.sections)if(Fu(s.text))return!0;return!1}class bd{constructor(s){this.layoutVertexArray=new ys,this.indexArray=new bn,this.programConfigurations=s,this.segments=new dr,this.dynamicLayoutVertexArray=new ls,this.opacityVertexArray=new ws,this.placedSymbolArray=new pt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,c,d,_){this.isEmpty()||(d&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,xx.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,bx.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,$x,!0),this.opacityVertexBuffer.itemSize=1),(d||_)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}zt("SymbolBuffers",bd);class Cd{constructor(s,c,d){this.layoutVertexArray=new s,this.layoutAttributes=c,this.indexArray=new d,this.segments=new dr,this.collisionVertexArray=new jn}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,Cx.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}zt("CollisionBuffers",Cd);class Xa{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(x=>x.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=id([]),this.placementViewportMatrix=id([]);const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Dm(this.zoom,c["text-size"]),this.iconSizeData=Dm(this.zoom,c["icon-size"]);const d=this.layers[0].layout,_=d.get("symbol-sort-key"),v=d.get("symbol-z-order");this.canOverlap=Fd(d,"text-overlap","text-allow-overlap")!=="never"||Fd(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(x=>a.WritingMode[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=s.sourceID}createArrays(){this.text=new bd(new Yo(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new bd(new Yo(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new Bt,this.lineVertexArray=new kt,this.symbolInstances=new St}calculateGlyphDependencies(s,c,d,_,v){for(let x=0;x<s.length;x++)if(c[s.charCodeAt(x)]=!0,(d||_)&&v){const I=ic[s.charAt(x)];I&&(c[I.charCodeAt(0)]=!0)}}populate(s,c,d){const _=this.layers[0],v=_.layout,x=v.get("text-font"),I=v.get("text-field"),T=v.get("icon-image"),M=(I.value.kind!=="constant"||I.value.value instanceof ye&&!I.value.value.isEmpty()||I.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),z=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,K=v.get("symbol-sort-key");if(this.features=[],!M&&!z)return;const X=c.iconDependencies,W=c.glyphDependencies,q=c.availableImages,pe=new vi(this.zoom);for(const{feature:fe,id:ke,index:Ne,sourceLayerIndex:Se}of s){const ze=_._featureFilter.needGeometry,ot=ea(fe,ze);if(!_._featureFilter.filter(pe,ot,d))continue;let st,Mt;if(ze||(ot.geometry=$o(fe)),M){const Qt=_.getValueAndResolveTokens("text-field",ot,d,q),xt=ye.factory(Qt);eb(xt)&&(this.hasRTLText=!0),(!this.hasRTLText||qo()==="unavailable"||this.hasRTLText&&qn.isParsed())&&(st=Fx(xt,_,ot))}if(z){const Qt=_.getValueAndResolveTokens("icon-image",ot,d,q);Mt=Qt instanceof Ue?Qt:Ue.fromString(Qt)}if(!st&&!Mt)continue;const Nt=this.sortFeaturesByKey?K.evaluate(ot,{},d):void 0;if(this.features.push({id:ke,text:st,icon:Mt,index:Ne,sourceLayerIndex:Se,geometry:ot.geometry,properties:fe.properties,type:Yx[fe.type],sortKey:Nt}),Mt&&(X[Mt.name]=!0),st){const Qt=x.evaluate(ot,{},d).join(","),xt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.WritingMode.vertical)>=0;for(const yt of st.sections)if(yt.image)X[yt.image.name]=!0;else{const It=Ma(st.toString()),Ct=yt.fontStack||Qt,gt=W[Ct]=W[Ct]||{};this.calculateGlyphDependencies(yt.text,gt,xt,this.allowVerticalPlacement,It)}}}v.get("symbol-placement")==="line"&&(this.features=function(fe){const ke={},Ne={},Se=[];let ze=0;function ot(Qt){Se.push(fe[Qt]),ze++}function st(Qt,xt,yt){const It=Ne[Qt];return delete Ne[Qt],Ne[xt]=It,Se[It].geometry[0].pop(),Se[It].geometry[0]=Se[It].geometry[0].concat(yt[0]),It}function Mt(Qt,xt,yt){const It=ke[xt];return delete ke[xt],ke[Qt]=It,Se[It].geometry[0].shift(),Se[It].geometry[0]=yt[0].concat(Se[It].geometry[0]),It}function Nt(Qt,xt,yt){const It=yt?xt[0][xt[0].length-1]:xt[0][0];return`${Qt}:${It.x}:${It.y}`}for(let Qt=0;Qt<fe.length;Qt++){const xt=fe[Qt],yt=xt.geometry,It=xt.text?xt.text.toString():null;if(!It){ot(Qt);continue}const Ct=Nt(It,yt),gt=Nt(It,yt,!0);if(Ct in Ne&&gt in ke&&Ne[Ct]!==ke[gt]){const Yt=Mt(Ct,gt,yt),Wt=st(Ct,gt,Se[Yt].geometry);delete ke[Ct],delete Ne[gt],Ne[Nt(It,Se[Wt].geometry,!0)]=Wt,Se[Yt].geometry=null}else Ct in Ne?st(Ct,gt,yt):gt in ke?Mt(Ct,gt,yt):(ot(Qt),ke[Ct]=ze-1,Ne[gt]=ze-1)}return Se.filter(Qt=>Qt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((fe,ke)=>fe.sortKey-ke.sortKey)}update(s,c,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,c,this.layers,d),this.icon.programConfigurations.updatePaintArrays(s,c,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,c){const d=this.lineVertexArray.length;if(s.segment!==void 0){let _=s.dist(c[s.segment+1]),v=s.dist(c[s.segment]);const x={};for(let I=s.segment+1;I<c.length;I++)x[I]={x:c[I].x,y:c[I].y,tileUnitDistanceFromAnchor:_},I<c.length-1&&(_+=c[I+1].dist(c[I]));for(let I=s.segment||0;I>=0;I--)x[I]={x:c[I].x,y:c[I].y,tileUnitDistanceFromAnchor:v},I>0&&(v+=c[I-1].dist(c[I]));for(let I=0;I<c.length;I++){const T=x[I];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(s,c,d,_,v,x,I,T,M,z,K,X){const W=s.indexArray,q=s.layoutVertexArray,pe=s.segments.prepareSegment(4*c.length,q,W,this.canOverlap?x.sortKey:void 0),fe=this.glyphOffsetArray.length,ke=pe.vertexLength,Ne=this.allowVerticalPlacement&&I===a.WritingMode.vertical?Math.PI/2:0,Se=x.text&&x.text.sections;for(let ze=0;ze<c.length;ze++){const{tl:ot,tr:st,bl:Mt,br:Nt,tex:Qt,pixelOffsetTL:xt,pixelOffsetBR:yt,minFontScaleX:It,minFontScaleY:Ct,glyphOffset:gt,isSDF:Yt,sectionIndex:Wt}=c[ze],ur=pe.vertexLength,pi=gt[1];Yu(q,T.x,T.y,ot.x,pi+ot.y,Qt.x,Qt.y,d,Yt,xt.x,xt.y,It,Ct),Yu(q,T.x,T.y,st.x,pi+st.y,Qt.x+Qt.w,Qt.y,d,Yt,yt.x,xt.y,It,Ct),Yu(q,T.x,T.y,Mt.x,pi+Mt.y,Qt.x,Qt.y+Qt.h,d,Yt,xt.x,yt.y,It,Ct),Yu(q,T.x,T.y,Nt.x,pi+Nt.y,Qt.x+Qt.w,Qt.y+Qt.h,d,Yt,yt.x,yt.y,It,Ct),xd(s.dynamicLayoutVertexArray,T,Ne),W.emplaceBack(ur,ur+1,ur+2),W.emplaceBack(ur+1,ur+2,ur+3),pe.vertexLength+=4,pe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(gt[0]),ze!==c.length-1&&Wt===c[ze+1].sectionIndex||s.programConfigurations.populatePaintArrays(q.length,x,x.index,{},X,Se&&Se[Wt])}s.placedSymbolArray.emplaceBack(T.x,T.y,fe,this.glyphOffsetArray.length-fe,ke,M,z,T.segment,d?d[0]:0,d?d[1]:0,_[0],_[1],I,0,!1,0,K)}_addCollisionDebugVertex(s,c,d,_,v,x){return c.emplaceBack(0,0),s.emplaceBack(d.x,d.y,_,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(s,c,d,_,v,x,I){const T=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),M=T.vertexLength,z=v.layoutVertexArray,K=v.collisionVertexArray,X=I.anchorX,W=I.anchorY;this._addCollisionDebugVertex(z,K,x,X,W,new Me(s,c)),this._addCollisionDebugVertex(z,K,x,X,W,new Me(d,c)),this._addCollisionDebugVertex(z,K,x,X,W,new Me(d,_)),this._addCollisionDebugVertex(z,K,x,X,W,new Me(s,_)),T.vertexLength+=4;const q=v.indexArray;q.emplaceBack(M,M+1),q.emplaceBack(M+1,M+2),q.emplaceBack(M+2,M+3),q.emplaceBack(M+3,M),T.primitiveLength+=4}addDebugCollisionBoxes(s,c,d,_){for(let v=s;v<c;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,_?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Cd(uA,vm.members,Rs),this.iconCollisionBox=new Cd(uA,vm.members,Rs);for(let s=0;s<this.symbolInstances.length;s++){const c=this.symbolInstances.get(s);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(s,c,d,_,v,x,I,T,M){const z={};for(let K=c;K<d;K++){const X=s.get(K);z.textBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},z.textFeatureIndex=X.featureIndex;break}for(let K=_;K<v;K++){const X=s.get(K);z.verticalTextBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},z.verticalTextFeatureIndex=X.featureIndex;break}for(let K=x;K<I;K++){const X=s.get(K);z.iconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},z.iconFeatureIndex=X.featureIndex;break}for(let K=T;K<M;K++){const X=s.get(K);z.verticalIconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},z.verticalIconFeatureIndex=X.featureIndex;break}return z}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const d=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,c){const d=s.placedSymbolArray.get(c),_=d.vertexStartIndex+4*d.numGlyphs;for(let v=d.vertexStartIndex;v<_;v+=4)s.indexArray.emplaceBack(v,v+1,v+2),s.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const c=Math.sin(s),d=Math.cos(s),_=[],v=[],x=[];for(let I=0;I<this.symbolInstances.length;++I){x.push(I);const T=this.symbolInstances.get(I);_.push(0|Math.round(c*T.anchorX+d*T.anchorY)),v.push(T.featureIndex)}return x.sort((I,T)=>_[I]-_[T]||v[T]-v[I]),x}addToSortKeyRanges(s,c){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===c?d.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const d=this.symbolInstances.get(c);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((_,v,x)=>{_>=0&&x.indexOf(_)===v&&this.addIndicesForPlacedSymbol(this.text,_)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}zt("SymbolBucket",Xa,{omit:["layers","collisionBoxArray","features","compareText"]}),Xa.MAX_GLYPHS=65535,Xa.addDynamicAttributes=xd;const tb=new rn({"symbol-placement":new Xt(Ze.layout_symbol["symbol-placement"]),"symbol-spacing":new Xt(Ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Xt(Ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ir(Ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Xt(Ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Xt(Ze.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Xt(Ze.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Xt(Ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new Xt(Ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Xt(Ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new ir(Ze.layout_symbol["icon-size"]),"icon-text-fit":new Xt(Ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Xt(Ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new ir(Ze.layout_symbol["icon-image"]),"icon-rotate":new ir(Ze.layout_symbol["icon-rotate"]),"icon-padding":new ir(Ze.layout_symbol["icon-padding"]),"icon-keep-upright":new Xt(Ze.layout_symbol["icon-keep-upright"]),"icon-offset":new ir(Ze.layout_symbol["icon-offset"]),"icon-anchor":new ir(Ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Xt(Ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Xt(Ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Xt(Ze.layout_symbol["text-rotation-alignment"]),"text-field":new ir(Ze.layout_symbol["text-field"]),"text-font":new ir(Ze.layout_symbol["text-font"]),"text-size":new ir(Ze.layout_symbol["text-size"]),"text-max-width":new ir(Ze.layout_symbol["text-max-width"]),"text-line-height":new Xt(Ze.layout_symbol["text-line-height"]),"text-letter-spacing":new ir(Ze.layout_symbol["text-letter-spacing"]),"text-justify":new ir(Ze.layout_symbol["text-justify"]),"text-radial-offset":new ir(Ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Xt(Ze.layout_symbol["text-variable-anchor"]),"text-anchor":new ir(Ze.layout_symbol["text-anchor"]),"text-max-angle":new Xt(Ze.layout_symbol["text-max-angle"]),"text-writing-mode":new Xt(Ze.layout_symbol["text-writing-mode"]),"text-rotate":new ir(Ze.layout_symbol["text-rotate"]),"text-padding":new Xt(Ze.layout_symbol["text-padding"]),"text-keep-upright":new Xt(Ze.layout_symbol["text-keep-upright"]),"text-transform":new ir(Ze.layout_symbol["text-transform"]),"text-offset":new ir(Ze.layout_symbol["text-offset"]),"text-allow-overlap":new Xt(Ze.layout_symbol["text-allow-overlap"]),"text-overlap":new Xt(Ze.layout_symbol["text-overlap"]),"text-ignore-placement":new Xt(Ze.layout_symbol["text-ignore-placement"]),"text-optional":new Xt(Ze.layout_symbol["text-optional"])});var Ed={paint:new rn({"icon-opacity":new ir(Ze.paint_symbol["icon-opacity"]),"icon-color":new ir(Ze.paint_symbol["icon-color"]),"icon-halo-color":new ir(Ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new ir(Ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ir(Ze.paint_symbol["icon-halo-blur"]),"icon-translate":new Xt(Ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new Xt(Ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new ir(Ze.paint_symbol["text-opacity"]),"text-color":new ir(Ze.paint_symbol["text-color"],{runtimeType:Ir,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new ir(Ze.paint_symbol["text-halo-color"]),"text-halo-width":new ir(Ze.paint_symbol["text-halo-width"]),"text-halo-blur":new ir(Ze.paint_symbol["text-halo-blur"]),"text-translate":new Xt(Ze.paint_symbol["text-translate"]),"text-translate-anchor":new Xt(Ze.paint_symbol["text-translate-anchor"])}),layout:tb};class Zm{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:Gr,this.defaultValue=s}evaluate(s){if(s.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(s.formattedSection))return c.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}zt("FormatSectionOverride",Zm,{omit:["defaultValue"]});class $u extends _s{constructor(s){super(s,Ed)}recalculate(s,c){if(super.recalculate(s,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const _=[];for(const v of d)_.indexOf(v)<0&&_.push(v);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,c,d,_){const v=this.layout.get(s).evaluate(c,{},d,_),x=this._unevaluatedLayout._values[s];return x.isDataDriven()||Lo(x.value)||!v?v:function(I,T){return T.replace(/{([^{}]+)}/g,(M,z)=>z in I?String(I[z]):"")}(c.properties,v)}createBucket(s){return new Xa(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of Ed.paint.overridableProperties){if(!$u.hasPaintOverride(this.layout,s))continue;const c=this.paint.get(s),d=new Zm(c),_=new Ua(d,c.property.specification);let v=null;v=c.value.kind==="constant"||c.value.kind==="source"?new Po("source",_):new Tl("composite",_,c.value.zoomStops),this.paint._values[s]=new ms(c.property,v,c.parameters)}}_handleOverridablePaintPropertyUpdate(s,c,d){return!(!this.layout||c.isDataDriven()||d.isDataDriven())&&$u.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,c){const d=s.get("text-field"),_=Ed.paint.properties[c];let v=!1;const x=I=>{for(const T of I)if(_.overrides&&_.overrides.hasOverride(T))return void(v=!0)};if(d.value.kind==="constant"&&d.value.value instanceof ye)x(d.value.value.sections);else if(d.value.kind==="source"){const I=M=>{v||(M instanceof Lt&&We(M.value)===kr?x(M.value.sections):M instanceof Ea?x(M.sections):M.eachChild(I))},T=d.value;T._styleExpression&&I(T._styleExpression.expression)}return v}}function Fd(o,s,c){let d="never";const _=o.get(s);return _?d=_:o.get(c)&&(d="always"),d}var rb={paint:new rn({"background-color":new Xt(Ze.paint_background["background-color"]),"background-pattern":new Nl(Ze.paint_background["background-pattern"]),"background-opacity":new Xt(Ze.paint_background["background-opacity"])})},ib={paint:new rn({"raster-opacity":new Xt(Ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new Xt(Ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Xt(Ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Xt(Ze.paint_raster["raster-brightness-max"]),"raster-saturation":new Xt(Ze.paint_raster["raster-saturation"]),"raster-contrast":new Xt(Ze.paint_raster["raster-contrast"]),"raster-resampling":new Xt(Ze.paint_raster["raster-resampling"]),"raster-fade-duration":new Xt(Ze.paint_raster["raster-fade-duration"])})};class nb extends _s{constructor(s){super(s,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const sb={circle:class extends _s{constructor(o){super(o,LB)}createBucket(o){return new ed(o)}queryRadius(o){const s=o;return Wl("circle-radius",this,s)+Wl("circle-stroke-width",this,s)+Lu(this.paint.get("circle-translate"))}queryIntersectsFeature(o,s,c,d,_,v,x,I){const T=Hu(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,x),M=this.paint.get("circle-radius").evaluate(s,c)+this.paint.get("circle-stroke-width").evaluate(s,c),z=this.paint.get("circle-pitch-alignment")==="map",K=z?T:function(W,q){return W.map(pe=>nm(pe,q))}(T,I),X=z?M*x:M;for(const W of d)for(const q of W){const pe=z?q:nm(q,I);let fe=X;const ke=Pu([],[q.x,q.y,0,1],I);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?fe*=ke[3]/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(fe*=v.cameraToCenterDistance/ke[3]),TB(K,pe,fe))return!0}return!1}},heatmap:class extends _s{constructor(o){super(o,PB),this._updateColorRamp()}createBucket(o){return new sm(o)}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=om({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends _s{constructor(o){super(o,zB)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends _s{constructor(o){super(o,tx)}recalculate(o,s){super.recalculate(o,s);const c=this.paint._values["fill-outline-color"];c.value.kind==="constant"&&c.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new hd(o)}queryRadius(){return Lu(this.paint.get("fill-translate"))}queryIntersectsFeature(o,s,c,d,_,v,x){return jg(Hu(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,x),d)}isTileClipped(){return!0}},"fill-extrusion":class extends _s{constructor(o){super(o,px)}createBucket(o){return new dd(o)}queryRadius(){return Lu(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,s,c,d,_,v,x,I){const T=Hu(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,x),M=this.paint.get("fill-extrusion-height").evaluate(s,c),z=this.paint.get("fill-extrusion-base").evaluate(s,c),K=function(W,q,pe,fe){const ke=[];for(const Ne of W){const Se=[Ne.x,Ne.y,0,1];Pu(Se,Se,q),ke.push(new Me(Se[0]/Se[3],Se[1]/Se[3]))}return ke}(T,I),X=function(W,q,pe,fe){const ke=[],Ne=[],Se=fe[8]*q,ze=fe[9]*q,ot=fe[10]*q,st=fe[11]*q,Mt=fe[8]*pe,Nt=fe[9]*pe,Qt=fe[10]*pe,xt=fe[11]*pe;for(const yt of W){const It=[],Ct=[];for(const gt of yt){const Yt=gt.x,Wt=gt.y,ur=fe[0]*Yt+fe[4]*Wt+fe[12],pi=fe[1]*Yt+fe[5]*Wt+fe[13],xi=fe[2]*Yt+fe[6]*Wt+fe[14],Ki=fe[3]*Yt+fe[7]*Wt+fe[15],hs=xi+ot,on=Ki+st,Hi=ur+Mt,ji=pi+Nt,an=xi+Qt,gn=Ki+xt,Ln=new Me((ur+Se)/on,(pi+ze)/on);Ln.z=hs/on,It.push(Ln);const Pi=new Me(Hi/gn,ji/gn);Pi.z=an/gn,Ct.push(Pi)}ke.push(It),Ne.push(Ct)}return[ke,Ne]}(d,z,M,I);return function(W,q,pe){let fe=1/0;jg(pe,q)&&(fe=gm(pe,q[0]));for(let ke=0;ke<q.length;ke++){const Ne=q[ke],Se=W[ke];for(let ze=0;ze<Ne.length-1;ze++){const ot=Ne[ze],st=[ot,Ne[ze+1],Se[ze+1],Se[ze],ot];qg(pe,st)&&(fe=Math.min(fe,gm(pe,st)))}}return fe!==1/0&&fe}(X[0],X[1],K)}},line:class extends _s{constructor(o){super(o,_m),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){o==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof vn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,s){super.recalculate(o,s),this.paint._values["line-floorwidth"]=ym.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new pd(o)}queryRadius(o){const s=o,c=wm(Wl("line-width",this,s),Wl("line-gap-width",this,s)),d=Wl("line-offset",this,s);return c/2+Math.abs(d)+Lu(this.paint.get("line-translate"))}queryIntersectsFeature(o,s,c,d,_,v,x){const I=Hu(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,x),T=x/2*wm(this.paint.get("line-width").evaluate(s,c),this.paint.get("line-gap-width").evaluate(s,c)),M=this.paint.get("line-offset").evaluate(s,c);return M&&(d=function(z,K){const X=[];for(let W=0;W<z.length;W++){const q=z[W],pe=[];for(let fe=0;fe<q.length;fe++){const ke=q[fe-1],Ne=q[fe],Se=q[fe+1],ze=fe===0?new Me(0,0):Ne.sub(ke)._unit()._perp(),ot=fe===q.length-1?new Me(0,0):Se.sub(Ne)._unit()._perp(),st=ze._add(ot)._unit(),Mt=st.x*ot.x+st.y*ot.y;Mt!==0&&st._mult(1/Mt),pe.push(st._mult(K)._add(Ne))}X.push(pe)}return X}(d,M*x)),function(z,K,X){for(let W=0;W<K.length;W++){const q=K[W];if(z.length>=3){for(let pe=0;pe<q.length;pe++)if(za(z,q[pe]))return!0}if(SB(z,q,X))return!0}return!1}(I,d,T)}isTileClipped(){return!0}},symbol:$u,background:class extends _s{constructor(o){super(o,rb)}},raster:class extends _s{constructor(o){super(o,ib)}}};class Ab{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Wm=63710088e-1;class Ti{constructor(s,c){if(isNaN(s)||isNaN(c))throw new Error(`Invalid LngLat object: (${s}, ${c})`);if(this.lng=+s,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ti(H(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const c=Math.PI/180,d=this.lat*c,_=s.lat*c,v=Math.sin(d)*Math.sin(_)+Math.cos(d)*Math.cos(_)*Math.cos((s.lng-this.lng)*c);return Wm*Math.acos(Math.min(v,1))}toBounds(s=0){const c=360*s/40075017,d=c/Math.cos(Math.PI/180*this.lat);return new ra(new Ti(this.lng-d,this.lat-c),new Ti(this.lng+d,this.lat+c))}static convert(s){if(s instanceof Ti)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new Ti(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new Ti(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class ra{constructor(s,c){s&&(c?this.setSouthWest(s).setNorthEast(c):s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1]))}setNorthEast(s){return this._ne=s instanceof Ti?new Ti(s.lng,s.lat):Ti.convert(s),this}setSouthWest(s){return this._sw=s instanceof Ti?new Ti(s.lng,s.lat):Ti.convert(s),this}extend(s){const c=this._sw,d=this._ne;let _,v;if(s instanceof Ti)_=s,v=s;else{if(!(s instanceof ra))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(ra.convert(s)):this.extend(Ti.convert(s)):this;if(_=s._sw,v=s._ne,!_||!v)return this}return c||d?(c.lng=Math.min(_.lng,c.lng),c.lat=Math.min(_.lat,c.lat),d.lng=Math.max(v.lng,d.lng),d.lat=Math.max(v.lat,d.lat)):(this._sw=new Ti(_.lng,_.lat),this._ne=new Ti(v.lng,v.lat)),this}getCenter(){return new Ti((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ti(this.getWest(),this.getNorth())}getSouthEast(){return new Ti(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:c,lat:d}=Ti.convert(s);let _=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&_}static convert(s){return s instanceof ra?s:s&&new ra(s)}}const qm=2*Math.PI*Wm;function jm(o){return qm*Math.cos(o*Math.PI/180)}function Jm(o){return(180+o)/360}function Ym(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function $m(o,s){return o/jm(s)}function Ud(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class eh{constructor(s,c,d=0){this.x=+s,this.y=+c,this.z=+d}static fromLngLat(s,c=0){const d=Ti.convert(s);return new eh(Jm(d.lng),Ym(d.lat),$m(c,d.lat))}toLngLat(){return new Ti(360*this.x-180,Ud(this.y))}toAltitude(){return this.z*jm(Ud(this.y))}meterInMercatorCoordinateUnits(){return 1/qm*(s=Ud(this.y),1/Math.cos(s*Math.PI/180));var s}}function e0(o,s,c){var d=2*Math.PI*6378137/256/Math.pow(2,c);return[o*d-2*Math.PI*6378137/2,s*d-2*Math.PI*6378137/2]}class Qd{constructor(s,c,d){if(s<0||s>25||d<0||d>=Math.pow(2,s)||c<0||c>=Math.pow(2,s))throw new Error(`x=${c}, y=${d}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=c,this.y=d,this.key=sc(0,s,s,c,d)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,c,d){const _=(x=this.y,I=this.z,T=e0(256*(v=this.x),256*(x=Math.pow(2,I)-x-1),I),M=e0(256*(v+1),256*(x+1),I),T[0]+","+T[1]+","+M[0]+","+M[1]);var v,x,I,T,M;const z=function(K,X,W){let q,pe="";for(let fe=K;fe>0;fe--)q=1<<fe-1,pe+=(X&q?1:0)+(W&q?2:0);return pe}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,z).replace(/{bbox-epsg-3857}/g,_)}isChildOf(s){const c=this.z-s.z;return c>0&&s.x===this.x>>c&&s.y===this.y>>c}getTilePoint(s){const c=Math.pow(2,this.z);return new Me((s.x*c-this.x)*Oi,(s.y*c-this.y)*Oi)}toString(){return`${this.z}/${this.x}/${this.y}`}}class t0{constructor(s,c){this.wrap=s,this.canonical=c,this.key=sc(s,c.z,c.z,c.x,c.y)}}class us{constructor(s,c,d,_,v){if(s<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${d}`);this.overscaledZ=s,this.wrap=c,this.canonical=new Qd(d,+_,+v),this.key=sc(c,s,d,_,v)}clone(){return new us(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-s;return s>this.canonical.z?new us(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new us(s,this.wrap,s,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(s,c){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-s;return s>this.canonical.z?sc(this.wrap*+c,s,this.canonical.z,this.canonical.x,this.canonical.y):sc(this.wrap*+c,s,s,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(s){if(s.wrap!==this.wrap)return!1;const c=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>c&&s.canonical.y===this.canonical.y>>c}children(s){if(this.overscaledZ>=s)return[new us(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,d=2*this.canonical.x,_=2*this.canonical.y;return[new us(c,this.wrap,c,d,_),new us(c,this.wrap,c,d+1,_),new us(c,this.wrap,c,d,_+1),new us(c,this.wrap,c,d+1,_+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new us(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new us(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new t0(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new eh(s.x-this.wrap,s.y))}}function sc(o,s,c,d,_){(o*=2)<0&&(o=-1*o-1);const v=1<<c;return(v*v*o+v*_+d).toString(36)+c.toString(36)+s.toString(36)}zt("CanonicalTileID",Qd),zt("OverscaledTileID",us,{omit:["posMatrix"]});class r0{constructor(s,c,d){if(this.uid=s,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(d&&d!=="mapbox"&&d!=="terrarium")return void le(`"${d}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=c.height;const _=this.dim=c.height-2;this.data=new Uint32Array(c.data.buffer),this.encoding=d||"mapbox";for(let v=0;v<_;v++)this.data[this._idx(-1,v)]=this.data[this._idx(0,v)],this.data[this._idx(_,v)]=this.data[this._idx(_-1,v)],this.data[this._idx(v,-1)]=this.data[this._idx(v,0)],this.data[this._idx(v,_)]=this.data[this._idx(v,_-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(_,-1)]=this.data[this._idx(_-1,0)],this.data[this._idx(-1,_)]=this.data[this._idx(0,_-1)],this.data[this._idx(_,_)]=this.data[this._idx(_-1,_-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let v=0;v<_;v++)for(let x=0;x<_;x++){const I=this.get(v,x);I>this.max&&(this.max=I),I<this.min&&(this.min=I)}}get(s,c){const d=new Uint8Array(this.data.buffer),_=4*this._idx(s,c);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(d[_],d[_+1],d[_+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(s,c){if(s<-1||s>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(s+1)}_unpackMapbox(s,c,d){return(256*s*256+256*c+d)/10-1e4}_unpackTerrarium(s,c,d){return 256*s+c+d/256-32768}getPixels(){return new cs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,c,d){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let _=c*this.dim,v=c*this.dim+this.dim,x=d*this.dim,I=d*this.dim+this.dim;switch(c){case-1:_=v-1;break;case 1:v=_+1}switch(d){case-1:x=I-1;break;case 1:I=x+1}const T=-c*this.dim,M=-d*this.dim;for(let z=x;z<I;z++)for(let K=_;K<v;K++)this.data[this._idx(K,z)]=s.data[this._idx(K+T,z+M)]}}zt("DEMData",r0);class i0{constructor(s){this._stringToNumber={},this._numberToString=[];for(let c=0;c<s.length;c++){const d=s[c];this._stringToNumber[d]=c,this._numberToString[c]=d}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class n0{constructor(s,c,d,_,v){this.type="Feature",this._vectorTileFeature=s,s._z=c,s._x=d,s._y=_,this.properties=s.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(s[c]=this[c]);return s}}class s0{constructor(s,c){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Wo(Oi,16,0),this.grid3D=new Wo(Oi,16,0),this.featureIndexArray=new cr,this.promoteId=c}insert(s,c,d,_,v,x){const I=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,_,v);const T=x?this.grid3D:this.grid;for(let M=0;M<c.length;M++){const z=c[M],K=[1/0,1/0,-1/0,-1/0];for(let X=0;X<z.length;X++){const W=z[X];K[0]=Math.min(K[0],W.x),K[1]=Math.min(K[1],W.y),K[2]=Math.max(K[2],W.x),K[3]=Math.max(K[3],W.y)}K[0]<Oi&&K[1]<Oi&&K[2]>=0&&K[3]>=0&&T.insert(I,K[0],K[1],K[2],K[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new uo.VectorTile(new gd(this.rawTileData)).layers,this.sourceLayerCoder=new i0(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,c,d,_){this.loadVTLayers();const v=s.params||{},x=Oi/s.tileSize/s.scale,I=Ta(v.filter),T=s.queryGeometry,M=s.queryPadding*x,z=o0(T),K=this.grid.query(z.minX-M,z.minY-M,z.maxX+M,z.maxY+M),X=o0(s.cameraQueryGeometry),W=this.grid3D.query(X.minX-M,X.minY-M,X.maxX+M,X.maxY+M,(fe,ke,Ne,Se)=>function(ze,ot,st,Mt,Nt){for(const xt of ze)if(ot<=xt.x&&st<=xt.y&&Mt>=xt.x&&Nt>=xt.y)return!0;const Qt=[new Me(ot,st),new Me(ot,Nt),new Me(Mt,Nt),new Me(Mt,st)];if(ze.length>2){for(const xt of Qt)if(za(ze,xt))return!0}for(let xt=0;xt<ze.length-1;xt++)if(MB(ze[xt],ze[xt+1],Qt))return!0;return!1}(s.cameraQueryGeometry,fe-M,ke-M,Ne+M,Se+M));for(const fe of W)K.push(fe);K.sort(ob);const q={};let pe;for(let fe=0;fe<K.length;fe++){const ke=K[fe];if(ke===pe)continue;pe=ke;const Ne=this.featureIndexArray.get(ke);let Se=null;this.loadMatchingFeature(q,Ne.bucketIndex,Ne.sourceLayerIndex,Ne.featureIndex,I,v.layers,v.availableImages,c,d,_,(ze,ot,st)=>(Se||(Se=$o(ze)),ot.queryIntersectsFeature(T,ze,st,Se,this.z,s.transform,x,s.pixelPosMatrix)))}return q}loadMatchingFeature(s,c,d,_,v,x,I,T,M,z,K){const X=this.bucketLayerIDs[c];if(x&&!function(fe,ke){for(let Ne=0;Ne<fe.length;Ne++)if(ke.indexOf(fe[Ne])>=0)return!0;return!1}(x,X))return;const W=this.sourceLayerCoder.decode(d),q=this.vtLayers[W].feature(_);if(v.needGeometry){const fe=ea(q,!0);if(!v.filter(new vi(this.tileID.overscaledZ),fe,this.tileID.canonical))return}else if(!v.filter(new vi(this.tileID.overscaledZ),q))return;const pe=this.getId(q,W);for(let fe=0;fe<X.length;fe++){const ke=X[fe];if(x&&x.indexOf(ke)<0)continue;const Ne=T[ke];if(!Ne)continue;let Se={};pe&&z&&(Se=z.getState(Ne.sourceLayer||"_geojsonTileLayer",pe));const ze=P({},M[ke]);ze.paint=A0(ze.paint,Ne.paint,q,Se,I),ze.layout=A0(ze.layout,Ne.layout,q,Se,I);const ot=!K||K(q,Ne,Se);if(!ot)continue;const st=new n0(q,this.z,this.x,this.y,pe);st.layer=ze;let Mt=s[ke];Mt===void 0&&(Mt=s[ke]=[]),Mt.push({featureIndex:_,feature:st,intersectionZ:ot})}}lookupSymbolFeatures(s,c,d,_,v,x,I,T){const M={};this.loadVTLayers();const z=Ta(v);for(const K of s)this.loadMatchingFeature(M,d,_,K,z,x,I,T,c);return M}hasLayer(s){for(const c of this.bucketLayerIDs)for(const d of c)if(s===d)return!0;return!1}getId(s,c){let d=s.id;return this.promoteId&&(d=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof d=="boolean"&&(d=Number(d))),d}}function A0(o,s,c,d,_){return Y(o,(v,x)=>{const I=s instanceof Jo?s.get(x):null;return I&&I.evaluate?I.evaluate(c,d,_):I})}function o0(o){let s=1/0,c=1/0,d=-1/0,_=-1/0;for(const v of o)s=Math.min(s,v.x),c=Math.min(c,v.y),d=Math.max(d,v.x),_=Math.max(_,v.y);return{minX:s,minY:c,maxX:d,maxY:_}}function ob(o,s){return s-o}var Id;zt("FeatureIndex",s0,{omit:["rawTileData","sourceLayerCoder"]}),a.PerformanceMarkers=void 0,(Id=a.PerformanceMarkers||(a.PerformanceMarkers={})).create="create",Id.load="load",Id.fullLoad="fullLoad";let th=null,Ac=[];const Td=1e3/30,ab={mark(o){performance.mark(o)},frame(o){const s=o;th!=null&&Ac.push(s-th),th=s},clearMetrics(){th=null,Ac=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const o in a.PerformanceMarkers)performance.clearMarks(a.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure("loadTime",a.PerformanceMarkers.create,a.PerformanceMarkers.load),performance.measure("fullLoadTime",a.PerformanceMarkers.create,a.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName("loadTime")[0].duration,s=performance.getEntriesByName("fullLoadTime")[0].duration,c=Ac.length,d=1/(Ac.reduce((v,x)=>v+x,0)/c/1e3),_=Ac.filter(v=>v>Td).reduce((v,x)=>v+(x-Td)/Td,0);return{loadTime:o,fullLoadTime:s,fps:d,percentDroppedFrames:_/(c+_)*100}}};a.AJAXError=Gt,a.ARRAY_TYPE=En,a.Actor=class{constructor(o,s,c){this.target=o,this.parent=s,this.mapId=c,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},j(["receive","process"],this),this.invoker=new Ab(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ae()?o:window}send(o,s,c,d,_=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);c&&(this.callbacks[v]=c);const x=Re(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:o,hasCallback:!!c,targetMapId:d,mustQueue:_,sourceMapId:this.mapId,data:FA(s,x)},x),{cancel:()=>{c&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}receive(o){const s=o.data,c=s.id;if(c&&(!s.targetMapId||this.mapId===s.targetMapId))if(s.type==="<cancel>"){delete this.tasks[c];const d=this.cancelCallbacks[c];delete this.cancelCallbacks[c],d&&d()}else Ae()||s.mustQueue?(this.tasks[c]=s,this.taskQueue.push(c),this.invoker.trigger()):this.processTask(c,s)}process(){if(!this.taskQueue.length)return;const o=this.taskQueue.shift(),s=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),s&&this.processTask(o,s)}processTask(o,s){if(s.type==="<response>"){const c=this.callbacks[o];delete this.callbacks[o],c&&(s.error?c(AA(s.error)):c(null,AA(s.data)))}else{let c=!1;const d=Re(this.globalScope)?void 0:[],_=s.hasCallback?(I,T)=>{c=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:I?FA(I):null,data:FA(T,d)},d)}:I=>{c=!0};let v=null;const x=AA(s.data);if(this.parent[s.type])v=this.parent[s.type](s.sourceMapId,x,_);else if(this.parent.getWorkerSource){const I=s.type.split(".");v=this.parent.getWorkerSource(s.sourceMapId,I[0],x.source)[I[1]](x,_)}else _(new Error(`Could not find function ${s.type}`));!c&&v&&v.cancel&&(this.cancelCallbacks[o]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.AlphaImage=jl,a.CanonicalTileID=Qd,a.CollisionBoxArray=et,a.CollisionCircleLayoutArray=class extends O{},a.Color=$,a.DEMData=r0,a.DataConstantProperty=Xt,a.DictionaryCoder=i0,a.EXTENT=Oi,a.ErrorEvent=fi,a.EvaluationParameters=vi,a.Event=ai,a.Evented=li,a.FeatureIndex=s0,a.FillBucket=hd,a.FillExtrusionBucket=dd,a.GeoJSONFeature=n0,a.ImageAtlas=Qm,a.ImagePosition=_d,a.LineBucket=pd,a.LineStripIndexArray=class extends he{},a.LngLat=Ti,a.LngLatBounds=ra,a.MercatorCoordinate=eh,a.ONE_EM=nn,a.OverscaledTileID=us,a.PerformanceUtils=ab,a.PosArray=Jt,a.Properties=rn,a.QuadTriangleArray=class extends Z{},a.RGBAImage=cs,a.RasterBoundsArray=class extends m{},a.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},a.ResourceType=qe,a.SegmentVector=dr,a.SymbolBucket=Xa,a.Transitionable=Iu,a.TriangleIndexArray=bn,a.Uniform1f=TA,a.Uniform1i=class extends IA{constructor(o,s){super(o,s),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},a.Uniform2f=class extends IA{constructor(o,s){super(o,s),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},a.Uniform3f=class extends IA{constructor(o,s){super(o,s),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},a.Uniform4f=Ha,a.UniformColor=Gg,a.UniformMatrix4f=class extends IA{constructor(o,s){super(o,s),this.current=QB}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let s=1;s<16;s++)if(o[s]!==this.current[s]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},a.UnwrappedTileID=t0,a.ValidationError=mt,a.ZoomHistory=Dl,a.add=function(o,s,c){return o[0]=s[0]+c[0],o[1]=s[1]+c[1],o[2]=s[2]+c[2],o},a.addDynamicAttributes=xd,a.asyncAll=function(o,s,c){if(!o.length)return c(null,[]);let d=o.length;const _=new Array(o.length);let v=null;o.forEach((x,I)=>{s(x,(T,M)=>{T&&(v=T),_[I]=M,--d==0&&c(v,_)})})},a.bezier=F,a.bindAll=j,a.cacheEntryPossiblyAdded=function(o){Et++,Et>ut&&(o.getActor().send("enforceCacheSizeLimit",Je),Et=0)},a.clamp=U,a.clearTileCache=function(o){const s=caches.delete(nt);o&&s.catch(o).then(()=>o())},a.clipLine=Om,a.clone=function(o){var s=new En(16);return s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s[4]=o[4],s[5]=o[5],s[6]=o[6],s[7]=o[7],s[8]=o[8],s[9]=o[9],s[10]=o[10],s[11]=o[11],s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15],s},a.clone$1=ce,a.clone$2=function(o){var s=new En(3);return s[0]=o[0],s[1]=o[1],s[2]=o[2],s},a.collisionCircleLayout=Ex,a.config=wt,a.copy=function(o,s){return o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],o[4]=s[4],o[5]=s[5],o[6]=s[6],o[7]=s[7],o[8]=s[8],o[9]=s[9],o[10]=s[10],o[11]=s[11],o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15],o},a.create=function(){var o=new En(16);return En!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},a.create$1=$g,a.createExpression=Ho,a.createFilter=Ta,a.createLayout=Li,a.createStyleLayer=function(o){return o.type==="custom"?new nb(o):new sb[o.type](o)},a.cross=function(o,s,c){var d=s[0],_=s[1],v=s[2],x=c[0],I=c[1],T=c[2];return o[0]=_*T-v*I,o[1]=v*x-d*T,o[2]=d*I-_*x,o},a.dot=function(o,s){return o[0]*s[0]+o[1]*s[1]+o[2]*s[2]},a.dot$1=function(o,s){return o[0]*s[0]+o[1]*s[1]+o[2]*s[2]+o[3]*s[3]},a.ease=E,a.emitValidationErrors=ka,a.enforceCacheSizeLimit=function(o){At(),He&&He.then(s=>{s.keys().then(c=>{for(let d=0;d<c.length-o;d++)s.delete(c[d])})})},a.equals=function(o,s){var c=o[0],d=o[1],_=o[2],v=o[3],x=o[4],I=o[5],T=o[6],M=o[7],z=o[8],K=o[9],X=o[10],W=o[11],q=o[12],pe=o[13],fe=o[14],ke=o[15],Ne=s[0],Se=s[1],ze=s[2],ot=s[3],st=s[4],Mt=s[5],Nt=s[6],Qt=s[7],xt=s[8],yt=s[9],It=s[10],Ct=s[11],gt=s[12],Yt=s[13],Wt=s[14],ur=s[15];return Math.abs(c-Ne)<=Cn*Math.max(1,Math.abs(c),Math.abs(Ne))&&Math.abs(d-Se)<=Cn*Math.max(1,Math.abs(d),Math.abs(Se))&&Math.abs(_-ze)<=Cn*Math.max(1,Math.abs(_),Math.abs(ze))&&Math.abs(v-ot)<=Cn*Math.max(1,Math.abs(v),Math.abs(ot))&&Math.abs(x-st)<=Cn*Math.max(1,Math.abs(x),Math.abs(st))&&Math.abs(I-Mt)<=Cn*Math.max(1,Math.abs(I),Math.abs(Mt))&&Math.abs(T-Nt)<=Cn*Math.max(1,Math.abs(T),Math.abs(Nt))&&Math.abs(M-Qt)<=Cn*Math.max(1,Math.abs(M),Math.abs(Qt))&&Math.abs(z-xt)<=Cn*Math.max(1,Math.abs(z),Math.abs(xt))&&Math.abs(K-yt)<=Cn*Math.max(1,Math.abs(K),Math.abs(yt))&&Math.abs(X-It)<=Cn*Math.max(1,Math.abs(X),Math.abs(It))&&Math.abs(W-Ct)<=Cn*Math.max(1,Math.abs(W),Math.abs(Ct))&&Math.abs(q-gt)<=Cn*Math.max(1,Math.abs(q),Math.abs(gt))&&Math.abs(pe-Yt)<=Cn*Math.max(1,Math.abs(pe),Math.abs(Yt))&&Math.abs(fe-Wt)<=Cn*Math.max(1,Math.abs(fe),Math.abs(Wt))&&Math.abs(ke-ur)<=Cn*Math.max(1,Math.abs(ke),Math.abs(ur))},a.evaluateSizeForFeature=function(o,{uSize:s,uSizeT:c},{lowerSize:d,upperSize:_}){return o.kind==="source"?d/MA:o.kind==="composite"?Fr(d/MA,_/MA,c):s},a.evaluateSizeForZoom=function(o,s){let c=0,d=0;if(o.kind==="constant")d=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:_,minZoom:v,maxZoom:x}=o,I=_?U(dn.interpolationFactor(_,s,v,x),0,1):0;o.kind==="camera"?d=Fr(o.minSize,o.maxSize,I):c=I}return{uSizeT:c,uSize:d}},a.evaluateVariableOffset=Vm,a.evented=Kl,a.exported=_t,a.exported$1=qt,a.extend=P,a.filterObject=ee,a.fromRotation=function(o,s){var c=Math.sin(s),d=Math.cos(s);return o[0]=d,o[1]=c,o[2]=0,o[3]=-c,o[4]=d,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},a.fromScaling=function(o,s){return o[0]=s[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=s[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=s[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},a.getAnchorAlignment=wd,a.getAnchorJustification=Bd,a.getArrayBuffer=mr,a.getImage=Ai,a.getJSON=function(o,s){return nr(P(o,{type:"json"}),s)},a.getOverlapMode=Fd,a.getRTLTextPluginStatus=qo,a.getReferrer=xe,a.getVideo=function(o,s){const c=window.document.createElement("video");c.muted=!0,c.onloadstart=function(){s(null,c)};for(let d=0;d<o.length;d++){const _=window.document.createElement("source");ti(o[d])||(c.crossOrigin="Anonymous"),_.src=o[d],c.appendChild(_)}return{cancel:()=>{}}},a.identity=id,a.invert=function(o,s){var c=s[0],d=s[1],_=s[2],v=s[3],x=s[4],I=s[5],T=s[6],M=s[7],z=s[8],K=s[9],X=s[10],W=s[11],q=s[12],pe=s[13],fe=s[14],ke=s[15],Ne=c*I-d*x,Se=c*T-_*x,ze=c*M-v*x,ot=d*T-_*I,st=d*M-v*I,Mt=_*M-v*T,Nt=z*pe-K*q,Qt=z*fe-X*q,xt=z*ke-W*q,yt=K*fe-X*pe,It=K*ke-W*pe,Ct=X*ke-W*fe,gt=Ne*Ct-Se*It+ze*yt+ot*xt-st*Qt+Mt*Nt;return gt?(o[0]=(I*Ct-T*It+M*yt)*(gt=1/gt),o[1]=(_*It-d*Ct-v*yt)*gt,o[2]=(pe*Mt-fe*st+ke*ot)*gt,o[3]=(X*st-K*Mt-W*ot)*gt,o[4]=(T*xt-x*Ct-M*Qt)*gt,o[5]=(c*Ct-_*xt+v*Qt)*gt,o[6]=(fe*ze-q*Mt-ke*Se)*gt,o[7]=(z*Mt-X*ze+W*Se)*gt,o[8]=(x*It-I*xt+M*Nt)*gt,o[9]=(d*xt-c*It-v*Nt)*gt,o[10]=(q*st-pe*ze+ke*Ne)*gt,o[11]=(K*ze-z*st-W*Ne)*gt,o[12]=(I*Qt-x*yt-T*Nt)*gt,o[13]=(c*yt-d*Qt+_*Nt)*gt,o[14]=(pe*Se-q*ot-fe*Ne)*gt,o[15]=(z*ot-K*Se+X*Ne)*gt,o):null},a.isImageBitmap=ht,a.isSafari=Re,a.isWorker=Ae,a.keysDifference=function(o,s){const c=[];for(const d in o)d in s||c.push(d);return c},a.lazyLoadRTLTextPlugin=function(){qn.isLoading()||qn.isLoaded()||qo()!=="deferred"||Qu()},a.makeRequest=nr,a.mapObject=Y,a.mercatorXfromLng=Jm,a.mercatorYfromLat=Ym,a.mercatorZfromAltitude=$m,a.mul=HB,a.mul$1=function(o,s,c){return o[0]=s[0]*c[0],o[1]=s[1]*c[1],o[2]=s[2]*c[2],o[3]=s[3]*c[3],o},a.multiply=em,a.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},a.normalize=function(o,s){var c=s[0],d=s[1],_=s[2],v=c*c+d*d+_*_;return v>0&&(v=1/Math.sqrt(v)),o[0]=s[0]*v,o[1]=s[1]*v,o[2]=s[2]*v,o},a.number=Fr,a.ortho=function(o,s,c,d,_,v,x){var I=1/(s-c),T=1/(d-_),M=1/(v-x);return o[0]=-2*I,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*T,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*M,o[11]=0,o[12]=(s+c)*I,o[13]=(_+d)*T,o[14]=(x+v)*M,o[15]=1,o},a.parseCacheControl=R,a.parseGlyphPbf=function(o){return new gd(o).readFields(Hx,[])},a.pbf=gd,a.performSymbolLayout=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Oi/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const s=o.bucket.layers[0].layout,c=o.bucket.layers[0]._unevaluatedLayout._values,d={layoutIconSize:c["icon-size"].possiblyEvaluate(new vi(o.bucket.zoom+1),o.canonical),layoutTextSize:c["text-size"].possiblyEvaluate(new vi(o.bucket.zoom+1),o.canonical),textMaxSize:c["text-size"].possiblyEvaluate(new vi(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:T,maxZoom:M}=o.bucket.textSizeData;d.compositeTextSizes=[c["text-size"].possiblyEvaluate(new vi(T),o.canonical),c["text-size"].possiblyEvaluate(new vi(M),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:T,maxZoom:M}=o.bucket.iconSizeData;d.compositeIconSizes=[c["icon-size"].possiblyEvaluate(new vi(T),o.canonical),c["icon-size"].possiblyEvaluate(new vi(M),o.canonical)]}const _=s.get("text-line-height")*nn,v=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",x=s.get("text-keep-upright"),I=s.get("text-size");for(const T of o.bucket.features){const M=s.get("text-font").evaluate(T,{},o.canonical).join(","),z=I.evaluate(T,{},o.canonical),K=d.layoutTextSize.evaluate(T,{},o.canonical),X=d.layoutIconSize.evaluate(T,{},o.canonical),W={horizontal:{},vertical:void 0},q=T.text;let pe,fe=[0,0];if(q){const Se=q.toString(),ze=s.get("text-letter-spacing").evaluate(T,{},o.canonical)*nn,ot=qf(Se)?ze:0,st=s.get("text-anchor").evaluate(T,{},o.canonical),Mt=s.get("text-variable-anchor");if(!Mt){const It=s.get("text-radial-offset").evaluate(T,{},o.canonical);fe=It?Vm(st,[It*nn,vd]):s.get("text-offset").evaluate(T,{},o.canonical).map(Ct=>Ct*nn)}let Nt=v?"center":s.get("text-justify").evaluate(T,{},o.canonical);const Qt=s.get("symbol-placement"),xt=Qt==="point"?s.get("text-max-width").evaluate(T,{},o.canonical)*nn:0,yt=()=>{o.bucket.allowVerticalPlacement&&Ma(Se)&&(W.vertical=Xu(q,o.glyphMap,o.glyphPositions,o.imagePositions,M,xt,_,st,"left",ot,fe,a.WritingMode.vertical,!0,Qt,K,z))};if(!v&&Mt){const It=Nt==="auto"?Mt.map(gt=>Bd(gt)):[Nt];let Ct=!1;for(let gt=0;gt<It.length;gt++){const Yt=It[gt];if(!W.horizontal[Yt])if(Ct)W.horizontal[Yt]=W.horizontal[0];else{const Wt=Xu(q,o.glyphMap,o.glyphPositions,o.imagePositions,M,xt,_,"center",Yt,ot,fe,a.WritingMode.horizontal,!1,Qt,K,z);Wt&&(W.horizontal[Yt]=Wt,Ct=Wt.positionedLines.length===1)}}yt()}else{Nt==="auto"&&(Nt=Bd(st));const It=Xu(q,o.glyphMap,o.glyphPositions,o.imagePositions,M,xt,_,st,Nt,ot,fe,a.WritingMode.horizontal,!1,Qt,K,z);It&&(W.horizontal[Nt]=It),yt(),Ma(Se)&&v&&x&&(W.vertical=Xu(q,o.glyphMap,o.glyphPositions,o.imagePositions,M,xt,_,st,Nt,ot,fe,a.WritingMode.vertical,!1,Qt,K,z))}}let ke=!1;if(T.icon&&T.icon.name){const Se=o.imageMap[T.icon.name];Se&&(pe=Nx(o.imagePositions[T.icon.name],s.get("icon-offset").evaluate(T,{},o.canonical),s.get("icon-anchor").evaluate(T,{},o.canonical)),ke=!!Se.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=ke:o.bucket.sdfIcons!==ke&&le("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Se.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Ne=Xm(W.horizontal)||W.vertical;o.bucket.iconsInText=!!Ne&&Ne.iconsInText,(Ne||pe)&&jx(o.bucket,T,W,pe,o.imageMap,d,K,X,fe,ke,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},a.perspective=function(o,s,c,d,_){var v,x=1/Math.tan(s/2);return o[0]=x/c,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,_!=null&&_!==1/0?(o[10]=(_+d)*(v=1/(d-_)),o[14]=2*_*d*v):(o[10]=-1,o[14]=-2*d),o},a.pick=function(o,s){const c={};for(let d=0;d<s.length;d++){const _=s[d];_ in o&&(c[_]=o[_])}return c},a.plugin=qn,a.pointGeometry=Me,a.polygonIntersectsPolygon=qg,a.potpack=Um,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=zt,a.registerForPluginStateChange=function(o){return o({pluginStatus:xn,pluginURL:oA}),Kl.on("pluginStateChange",o),o},a.renderColorRamp=om,a.rotateX=function(o,s,c){var d=Math.sin(c),_=Math.cos(c),v=s[4],x=s[5],I=s[6],T=s[7],M=s[8],z=s[9],K=s[10],X=s[11];return s!==o&&(o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15]),o[4]=v*_+M*d,o[5]=x*_+z*d,o[6]=I*_+K*d,o[7]=T*_+X*d,o[8]=M*_-v*d,o[9]=z*_-x*d,o[10]=K*_-I*d,o[11]=X*_-T*d,o},a.rotateZ=function(o,s,c){var d=Math.sin(c),_=Math.cos(c),v=s[0],x=s[1],I=s[2],T=s[3],M=s[4],z=s[5],K=s[6],X=s[7];return s!==o&&(o[8]=s[8],o[9]=s[9],o[10]=s[10],o[11]=s[11],o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15]),o[0]=v*_+M*d,o[1]=x*_+z*d,o[2]=I*_+K*d,o[3]=T*_+X*d,o[4]=M*_-v*d,o[5]=z*_-x*d,o[6]=K*_-I*d,o[7]=X*_-T*d,o},a.scale=function(o,s,c){var d=c[0],_=c[1],v=c[2];return o[0]=s[0]*d,o[1]=s[1]*d,o[2]=s[2]*d,o[3]=s[3]*d,o[4]=s[4]*_,o[5]=s[5]*_,o[6]=s[6]*_,o[7]=s[7]*_,o[8]=s[8]*v,o[9]=s[9]*v,o[10]=s[10]*v,o[11]=s[11]*v,o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15],o},a.scale$1=function(o,s,c){return o[0]=s[0]*c,o[1]=s[1]*c,o[2]=s[2]*c,o},a.setCacheLimits=function(o,s){Je=o,ut=s},a.setRTLTextPlugin=function(o,s,c=!1){if(xn===Pl||xn===zl||xn===Rl)throw new Error("setRTLTextPlugin cannot be called multiple times.");oA=_t.resolveURL(o),xn=Pl,Ol=s,oo(),c||Qu()},a.spec=Ze,a.sphericalToCartesian=function([o,s,c]){return s+=90,s*=Math.PI/180,c*=Math.PI/180,{x:o*Math.cos(s)*Math.sin(c),y:o*Math.sin(s)*Math.sin(c),z:o*Math.cos(c)}},a.sqrLen=function(o){var s=o[0],c=o[1];return s*s+c*c},a.sub=function(o,s,c){return o[0]=s[0]-c[0],o[1]=s[1]-c[1],o[2]=s[2]-c[2],o},a.toEvaluationFeature=ea,a.transformMat3=function(o,s,c){var d=s[0],_=s[1],v=s[2];return o[0]=d*c[0]+_*c[3]+v*c[6],o[1]=d*c[1]+_*c[4]+v*c[7],o[2]=d*c[2]+_*c[5]+v*c[8],o},a.transformMat4=Pu,a.transformMat4$1=function(o,s,c){var d=s[0],_=s[1];return o[0]=c[0]*d+c[4]*_+c[12],o[1]=c[1]*d+c[5]*_+c[13],o},a.translate=function(o,s,c){var d,_,v,x,I,T,M,z,K,X,W,q,pe=c[0],fe=c[1],ke=c[2];return s===o?(o[12]=s[0]*pe+s[4]*fe+s[8]*ke+s[12],o[13]=s[1]*pe+s[5]*fe+s[9]*ke+s[13],o[14]=s[2]*pe+s[6]*fe+s[10]*ke+s[14],o[15]=s[3]*pe+s[7]*fe+s[11]*ke+s[15]):(_=s[1],v=s[2],x=s[3],I=s[4],T=s[5],M=s[6],z=s[7],K=s[8],X=s[9],W=s[10],q=s[11],o[0]=d=s[0],o[1]=_,o[2]=v,o[3]=x,o[4]=I,o[5]=T,o[6]=M,o[7]=z,o[8]=K,o[9]=X,o[10]=W,o[11]=q,o[12]=d*pe+I*fe+K*ke+s[12],o[13]=_*pe+T*fe+X*ke+s[13],o[14]=v*pe+M*fe+W*ke+s[14],o[15]=x*pe+z*fe+q*ke+s[15]),o},a.triggerPluginCompletionEvent=Uu,a.unicodeBlockLookup=Ut,a.uniqueId=function(){return V++},a.validateCustomStyleLayer=function(o){const s=[],c=o.id;return c===void 0&&s.push({message:`layers.${c}: missing required property "id"`}),o.render===void 0&&s.push({message:`layers.${c}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&s.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),s},a.validateLight=Ml,a.validateStyle=Zo,a.vectorTile=uo,a.warnOnce=le,a.wrap=H}),u(["./shared"],function(a){function w(te){const L=typeof te;if(L==="number"||L==="boolean"||L==="string"||te==null)return JSON.stringify(te);if(Array.isArray(te)){let $="[";for(const ge of te)$+=`${w(ge)},`;return`${$}]`}const N=Object.keys(te).sort();let J="{";for(let $=0;$<N.length;$++)J+=`${JSON.stringify(N[$])}:${w(te[N[$]])},`;return`${J}}`}function C(te){let L="";for(const N of a.refProperties)L+=`/${w(te[N])}`;return L}class F{constructor(L){this.keyCache={},L&&this.replace(L)}replace(L){this._layerConfigs={},this._layers={},this.update(L,[])}update(L,N){for(const $ of L){this._layerConfigs[$.id]=$;const ge=this._layers[$.id]=a.createStyleLayer($);ge._featureFilter=a.createFilter(ge.filter),this.keyCache[$.id]&&delete this.keyCache[$.id]}for(const $ of N)delete this.keyCache[$],delete this._layerConfigs[$],delete this._layers[$];this.familiesBySource={};const J=function($,ge){const _e={};for(let de=0;de<$.length;de++){const Ue=ge&&ge[$[de].id]||C($[de]);ge&&(ge[$[de].id]=Ue);let je=_e[Ue];je||(je=_e[Ue]=[]),je.push($[de])}const ye=[];for(const de in _e)ye.push(_e[de]);return ye}(Object.values(this._layerConfigs),this.keyCache);for(const $ of J){const ge=$.map(lt=>this._layers[lt.id]),_e=ge[0];if(_e.visibility==="none")continue;const ye=_e.source||"";let de=this.familiesBySource[ye];de||(de=this.familiesBySource[ye]={});const Ue=_e.sourceLayer||"_geojsonTileLayer";let je=de[Ue];je||(je=de[Ue]=[]),je.push(ge)}}}class E{constructor(L){const N={},J=[];for(const ye in L){const de=L[ye],Ue=N[ye]={};for(const je in de){const lt=de[+je];if(!lt||lt.bitmap.width===0||lt.bitmap.height===0)continue;const We={x:0,y:0,w:lt.bitmap.width+2,h:lt.bitmap.height+2};J.push(We),Ue[je]={rect:We,metrics:lt.metrics}}}const{w:$,h:ge}=a.potpack(J),_e=new a.AlphaImage({width:$||1,height:ge||1});for(const ye in L){const de=L[ye];for(const Ue in de){const je=de[+Ue];if(!je||je.bitmap.width===0||je.bitmap.height===0)continue;const lt=N[ye][Ue].rect;a.AlphaImage.copy(je.bitmap,_e,{x:0,y:0},{x:lt.x+1,y:lt.y+1},je.bitmap)}}this.image=_e,this.positions=N}}a.register("GlyphAtlas",E);class U{constructor(L){this.tileID=new a.OverscaledTileID(L.tileID.overscaledZ,L.tileID.wrap,L.tileID.canonical.z,L.tileID.canonical.x,L.tileID.canonical.y),this.uid=L.uid,this.zoom=L.zoom,this.pixelRatio=L.pixelRatio,this.tileSize=L.tileSize,this.source=L.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=L.showCollisionBoxes,this.collectResourceTiming=!!L.collectResourceTiming,this.returnDependencies=!!L.returnDependencies,this.promoteId=L.promoteId}parse(L,N,J,$,ge){this.status="parsing",this.data=L,this.collisionBoxArray=new a.CollisionBoxArray;const _e=new a.DictionaryCoder(Object.keys(L.layers).sort()),ye=new a.FeatureIndex(this.tileID,this.promoteId);ye.bucketLayerIDs=[];const de={},Ue={featureIndex:ye,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:J},je=N.familiesBySource[this.source];for(const sr in je){const or=L.layers[sr];if(!or)continue;or.version===1&&a.warnOnce(`Vector tile source "${this.source}" layer "${sr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const fr=_e.encode(sr),Cr=[];for(let Ci=0;Ci<or.length;Ci++){const Xr=or.feature(Ci),Ui=ye.getId(Xr,sr);Cr.push({feature:Xr,id:Ui,index:Ci,sourceLayerIndex:fr})}for(const Ci of je[sr]){const Xr=Ci[0];Xr.source!==this.source&&a.warnOnce(`layer.source = ${Xr.source} does not equal this.source = ${this.source}`),Xr.minzoom&&this.zoom<Math.floor(Xr.minzoom)||Xr.maxzoom&&this.zoom>=Xr.maxzoom||Xr.visibility!=="none"&&(H(Ci,this.zoom,J),(de[Xr.id]=Xr.createBucket({index:ye.bucketLayerIDs.length,layers:Ci,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:fr,sourceID:this.source})).populate(Cr,Ue,this.tileID.canonical),ye.bucketLayerIDs.push(Ci.map(Ui=>Ui.id)))}}let lt,We,Dt,Lt;const vt=a.mapObject(Ue.glyphDependencies,sr=>Object.keys(sr).map(Number));Object.keys(vt).length?$.send("getGlyphs",{uid:this.uid,stacks:vt},(sr,or)=>{lt||(lt=sr,We=or,hr.call(this))}):We={};const jt=Object.keys(Ue.iconDependencies);jt.length?$.send("getImages",{icons:jt,source:this.source,tileID:this.tileID,type:"icons"},(sr,or)=>{lt||(lt=sr,Dt=or,hr.call(this))}):Dt={};const $t=Object.keys(Ue.patternDependencies);function hr(){if(lt)return ge(lt);if(We&&Dt&&Lt){const sr=new E(We),or=new a.ImageAtlas(Dt,Lt);for(const fr in de){const Cr=de[fr];Cr instanceof a.SymbolBucket?(H(Cr.layers,this.zoom,J),a.performSymbolLayout({bucket:Cr,glyphMap:We,glyphPositions:sr.positions,imageMap:Dt,imagePositions:or.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Cr.hasPattern&&(Cr instanceof a.LineBucket||Cr instanceof a.FillBucket||Cr instanceof a.FillExtrusionBucket)&&(H(Cr.layers,this.zoom,J),Cr.addFeatures(Ue,this.tileID.canonical,or.patternPositions))}this.status="done",ge(null,{buckets:Object.values(de).filter(fr=>!fr.isEmpty()),featureIndex:ye,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:sr.image,imageAtlas:or,glyphMap:this.returnDependencies?We:null,iconMap:this.returnDependencies?Dt:null,glyphPositions:this.returnDependencies?sr.positions:null})}}$t.length?$.send("getImages",{icons:$t,source:this.source,tileID:this.tileID,type:"patterns"},(sr,or)=>{lt||(lt=sr,Lt=or,hr.call(this))}):Lt={},hr.call(this)}}function H(te,L,N){const J=new a.EvaluationParameters(L);for(const $ of te)$.recalculate(J,N)}function P(te,L){const N=a.getArrayBuffer(te.request,(J,$,ge,_e)=>{J?L(J):$&&L(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf($)),rawData:$,cacheControl:ge,expires:_e})});return()=>{N.cancel(),L()}}class V{constructor(L,N,J,$){this.actor=L,this.layerIndex=N,this.availableImages=J,this.loadVectorData=$||P,this.loading={},this.loaded={}}loadTile(L,N){const J=L.uid;this.loading||(this.loading={});const $=!!(L&&L.request&&L.request.collectResourceTiming)&&new a.RequestPerformance(L.request),ge=this.loading[J]=new U(L);ge.abort=this.loadVectorData(L,(_e,ye)=>{if(delete this.loading[J],_e||!ye)return ge.status="done",this.loaded[J]=ge,N(_e);const de=ye.rawData,Ue={};ye.expires&&(Ue.expires=ye.expires),ye.cacheControl&&(Ue.cacheControl=ye.cacheControl);const je={};if($){const lt=$.finish();lt&&(je.resourceTiming=JSON.parse(JSON.stringify(lt)))}ge.vectorTile=ye.vectorTile,ge.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor,(lt,We)=>{if(lt||!We)return N(lt);N(null,a.extend({rawTileData:de.slice(0)},We,Ue,je))}),this.loaded=this.loaded||{},this.loaded[J]=ge})}reloadTile(L,N){const J=this.loaded,$=L.uid,ge=this;if(J&&J[$]){const _e=J[$];_e.showCollisionBoxes=L.showCollisionBoxes;const ye=(de,Ue)=>{const je=_e.reloadCallback;je&&(delete _e.reloadCallback,_e.parse(_e.vectorTile,ge.layerIndex,this.availableImages,ge.actor,je)),N(de,Ue)};_e.status==="parsing"?_e.reloadCallback=ye:_e.status==="done"&&(_e.vectorTile?_e.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor,ye):ye())}}abortTile(L,N){const J=this.loading,$=L.uid;J&&J[$]&&J[$].abort&&(J[$].abort(),delete J[$]),N()}removeTile(L,N){const J=this.loaded,$=L.uid;J&&J[$]&&delete J[$],N()}}class j{constructor(){this.loaded={}}loadTile(L,N){const{uid:J,encoding:$,rawImageData:ge}=L,_e=a.isImageBitmap(ge)?this.getImageData(ge):ge,ye=new a.DEMData(J,_e,$);this.loaded=this.loaded||{},this.loaded[J]=ye,N(null,ye)}getImageData(L){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(L.width,L.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=L.width,this.offscreenCanvas.height=L.height,this.offscreenCanvasContext.drawImage(L,0,0,L.width,L.height);const N=this.offscreenCanvasContext.getImageData(-1,-1,L.width+2,L.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:N.width,height:N.height},N.data)}removeTile(L){const N=this.loaded,J=L.uid;N&&N[J]&&delete N[J]}}var Y=function te(L,N){var J,$=L&&L.type;if($==="FeatureCollection")for(J=0;J<L.features.length;J++)te(L.features[J],N);else if($==="GeometryCollection")for(J=0;J<L.geometries.length;J++)te(L.geometries[J],N);else if($==="Feature")te(L.geometry,N);else if($==="Polygon")ee(L.coordinates,N);else if($==="MultiPolygon")for(J=0;J<L.coordinates.length;J++)ee(L.coordinates[J],N);return L};function ee(te,L){if(te.length!==0){ce(te[0],L);for(var N=1;N<te.length;N++)ce(te[N],!L)}}function ce(te,L){for(var N=0,J=0,$=0,ge=te.length,_e=ge-1;$<ge;_e=$++){var ye=(te[$][0]-te[_e][0])*(te[_e][1]+te[$][1]),de=N+ye;J+=Math.abs(N)>=Math.abs(ye)?N-de+ye:ye-de+N,N=de}N+J>=0!=!!L&&te.reverse()}const Qe=a.vectorTile.VectorTileFeature.prototype.toGeoJSON;class le{constructor(L){this._feature=L,this.extent=a.EXTENT,this.type=L.type,this.properties=L.tags,"id"in L&&!isNaN(L.id)&&(this.id=parseInt(L.id,10))}loadGeometry(){if(this._feature.type===1){const L=[];for(const N of this._feature.geometry)L.push([new a.pointGeometry(N[0],N[1])]);return L}{const L=[];for(const N of this._feature.geometry){const J=[];for(const $ of N)J.push(new a.pointGeometry($[0],$[1]));L.push(J)}return L}}toGeoJSON(L,N,J){return Qe.call(this,L,N,J)}}class re{constructor(L){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=L.length,this._features=L}feature(L){return new le(this._features[L])}}var we={exports:{}},Ae=a.pointGeometry,R=a.vectorTile.VectorTileFeature,ie=se;function se(te,L){this.options=L||{},this.features=te,this.length=te.length}function Be(te,L){this.id=typeof te.id=="number"?te.id:void 0,this.type=te.type,this.rawGeometry=te.type===1?[te.geometry]:te.geometry,this.properties=te.tags,this.extent=L||4096}se.prototype.feature=function(te){return new Be(this.features[te],this.options.extent)},Be.prototype.loadGeometry=function(){var te=this.rawGeometry;this.geometry=[];for(var L=0;L<te.length;L++){for(var N=te[L],J=[],$=0;$<N.length;$++)J.push(new Ae(N[$][0],N[$][1]));this.geometry.push(J)}return this.geometry},Be.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var te=this.geometry,L=1/0,N=-1/0,J=1/0,$=-1/0,ge=0;ge<te.length;ge++)for(var _e=te[ge],ye=0;ye<_e.length;ye++){var de=_e[ye];L=Math.min(L,de.x),N=Math.max(N,de.x),J=Math.min(J,de.y),$=Math.max($,de.y)}return[L,J,N,$]},Be.prototype.toGeoJSON=R.prototype.toGeoJSON;var Re=a.pbf,ht=ie;function _t(te){var L=new Re;return function(N,J){for(var $ in N.layers)J.writeMessage(3,Me,N.layers[$])}(te,L),L.finish()}function Me(te,L){var N;L.writeVarintField(15,te.version||1),L.writeStringField(1,te.name||""),L.writeVarintField(5,te.extent||4096);var J={keys:[],values:[],keycache:{},valuecache:{}};for(N=0;N<te.length;N++)J.feature=te.feature(N),L.writeMessage(2,at,J);var $=J.keys;for(N=0;N<$.length;N++)L.writeStringField(3,$[N]);var ge=J.values;for(N=0;N<ge.length;N++)L.writeMessage(4,Je,ge[N])}function at(te,L){var N=te.feature;N.id!==void 0&&L.writeVarintField(1,N.id),L.writeMessage(2,wt,te),L.writeVarintField(3,N.type),L.writeMessage(4,tt,N)}function wt(te,L){var N=te.feature,J=te.keys,$=te.values,ge=te.keycache,_e=te.valuecache;for(var ye in N.properties){var de=N.properties[ye],Ue=ge[ye];if(de!==null){Ue===void 0&&(J.push(ye),ge[ye]=Ue=J.length-1),L.writeVarint(Ue);var je=typeof de;je!=="string"&&je!=="boolean"&&je!=="number"&&(de=JSON.stringify(de));var lt=je+":"+de,We=_e[lt];We===void 0&&($.push(de),_e[lt]=We=$.length-1),L.writeVarint(We)}}}function nt(te,L){return(L<<3)+(7&te)}function He(te){return te<<1^te>>31}function tt(te,L){for(var N=te.loadGeometry(),J=te.type,$=0,ge=0,_e=N.length,ye=0;ye<_e;ye++){var de=N[ye],Ue=1;J===1&&(Ue=de.length),L.writeVarint(nt(1,Ue));for(var je=J===3?de.length-1:de.length,lt=0;lt<je;lt++){lt===1&&J!==1&&L.writeVarint(nt(2,je-1));var We=de[lt].x-$,Dt=de[lt].y-ge;L.writeVarint(He(We)),L.writeVarint(He(Dt)),$+=We,ge+=Dt}J===3&&L.writeVarint(nt(7,1))}}function Je(te,L){var N=typeof te;N==="string"?L.writeStringField(1,te):N==="boolean"?L.writeBooleanField(7,te):N==="number"&&(te%1!=0?L.writeDoubleField(3,te):te<0?L.writeSVarintField(6,te):L.writeVarintField(5,te))}function ut(te,L,N,J,$,ge){if($-J<=N)return;const _e=J+$>>1;At(te,L,_e,J,$,ge%2),ut(te,L,N,J,_e-1,ge+1),ut(te,L,N,_e+1,$,ge+1)}function At(te,L,N,J,$,ge){for(;$>J;){if($-J>600){const Ue=$-J+1,je=N-J+1,lt=Math.log(Ue),We=.5*Math.exp(2*lt/3),Dt=.5*Math.sqrt(lt*We*(Ue-We)/Ue)*(je-Ue/2<0?-1:1);At(te,L,N,Math.max(J,Math.floor(N-je*We/Ue+Dt)),Math.min($,Math.floor(N+(Ue-je)*We/Ue+Dt)),ge)}const _e=L[2*N+ge];let ye=J,de=$;for(Et(te,L,J,N),L[2*$+ge]>_e&&Et(te,L,J,$);ye<de;){for(Et(te,L,ye,de),ye++,de--;L[2*ye+ge]<_e;)ye++;for(;L[2*de+ge]>_e;)de--}L[2*J+ge]===_e?Et(te,L,J,de):(de++,Et(te,L,de,$)),de<=N&&(J=de+1),N<=de&&($=de-1)}}function Et(te,L,N,J){qt(te,N,J),qt(L,2*N,2*J),qt(L,2*N+1,2*J+1)}function qt(te,L,N){const J=te[L];te[L]=te[N],te[N]=J}function Tt(te,L,N,J){const $=te-N,ge=L-J;return $*$+ge*ge}we.exports=_t,we.exports.fromVectorTileJs=_t,we.exports.fromGeojsonVt=function(te,L){L=L||{};var N={};for(var J in te)N[J]=new ht(te[J].features,L),N[J].name=J,N[J].version=L.version,N[J].extent=L.extent;return _t({layers:N})},we.exports.GeoJSONWrapper=ht;const tr=te=>te[0],ve=te=>te[1];class ft{constructor(L,N=tr,J=ve,$=64,ge=Float64Array){this.nodeSize=$,this.points=L;const _e=L.length<65536?Uint16Array:Uint32Array,ye=this.ids=new _e(L.length),de=this.coords=new ge(2*L.length);for(let Ue=0;Ue<L.length;Ue++)ye[Ue]=Ue,de[2*Ue]=N(L[Ue]),de[2*Ue+1]=J(L[Ue]);ut(ye,de,$,0,ye.length-1,0)}range(L,N,J,$){return function(ge,_e,ye,de,Ue,je,lt){const We=[0,ge.length-1,0],Dt=[];let Lt,vt;for(;We.length;){const jt=We.pop(),$t=We.pop(),hr=We.pop();if($t-hr<=lt){for(let fr=hr;fr<=$t;fr++)Lt=_e[2*fr],vt=_e[2*fr+1],Lt>=ye&&Lt<=Ue&&vt>=de&&vt<=je&&Dt.push(ge[fr]);continue}const sr=Math.floor((hr+$t)/2);Lt=_e[2*sr],vt=_e[2*sr+1],Lt>=ye&&Lt<=Ue&&vt>=de&&vt<=je&&Dt.push(ge[sr]);const or=(jt+1)%2;(jt===0?ye<=Lt:de<=vt)&&(We.push(hr),We.push(sr-1),We.push(or)),(jt===0?Ue>=Lt:je>=vt)&&(We.push(sr+1),We.push($t),We.push(or))}return Dt}(this.ids,this.coords,L,N,J,$,this.nodeSize)}within(L,N,J){return function($,ge,_e,ye,de,Ue){const je=[0,$.length-1,0],lt=[],We=de*de;for(;je.length;){const Dt=je.pop(),Lt=je.pop(),vt=je.pop();if(Lt-vt<=Ue){for(let or=vt;or<=Lt;or++)Tt(ge[2*or],ge[2*or+1],_e,ye)<=We&&lt.push($[or]);continue}const jt=Math.floor((vt+Lt)/2),$t=ge[2*jt],hr=ge[2*jt+1];Tt($t,hr,_e,ye)<=We&&lt.push($[jt]);const sr=(Dt+1)%2;(Dt===0?_e-de<=$t:ye-de<=hr)&&(je.push(vt),je.push(jt-1),je.push(sr)),(Dt===0?_e+de>=$t:ye+de>=hr)&&(je.push(jt+1),je.push(Lt),je.push(sr))}return lt}(this.ids,this.coords,L,N,J,this.nodeSize)}}const Ft={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:te=>te},qe=Math.fround||(Gt=new Float32Array(1),te=>(Gt[0]=+te,Gt[0]));var Gt;class xe{constructor(L){this.options=Ai(Object.create(Ft),L),this.trees=new Array(this.options.maxZoom+1)}load(L){const{log:N,minZoom:J,maxZoom:$,nodeSize:ge}=this.options;N&&console.time("total time");const _e=`prepare ${L.length} points`;N&&console.time(_e),this.points=L;let ye=[];for(let de=0;de<L.length;de++)L[de].geometry&&ye.push(nr(L[de],de));this.trees[$+1]=new ft(ye,mi,oi,ge,Float32Array),N&&console.timeEnd(_e);for(let de=$;de>=J;de--){const Ue=+Date.now();ye=this._cluster(ye,de),this.trees[de]=new ft(ye,mi,oi,ge,Float32Array),N&&console.log("z%d: %d clusters in %dms",de,ye.length,+Date.now()-Ue)}return N&&console.timeEnd("total time"),this}getClusters(L,N){let J=((L[0]+180)%360+360)%360-180;const $=Math.max(-90,Math.min(90,L[1]));let ge=L[2]===180?180:((L[2]+180)%360+360)%360-180;const _e=Math.max(-90,Math.min(90,L[3]));if(L[2]-L[0]>=360)J=-180,ge=180;else if(J>ge){const je=this.getClusters([J,$,180,_e],N),lt=this.getClusters([-180,$,ge,_e],N);return je.concat(lt)}const ye=this.trees[this._limitZoom(N)],de=ye.range(er(J),Vr(_e),er(ge),Vr($)),Ue=[];for(const je of de){const lt=ye.points[je];Ue.push(lt.numPoints?mr(lt):this.points[lt.index])}return Ue}getChildren(L){const N=this._getOriginId(L),J=this._getOriginZoom(L),$="No cluster with the specified id.",ge=this.trees[J];if(!ge)throw new Error($);const _e=ge.points[N];if(!_e)throw new Error($);const ye=this.options.radius/(this.options.extent*Math.pow(2,J-1)),de=ge.within(_e.x,_e.y,ye),Ue=[];for(const je of de){const lt=ge.points[je];lt.parentId===L&&Ue.push(lt.numPoints?mr(lt):this.points[lt.index])}if(Ue.length===0)throw new Error($);return Ue}getLeaves(L,N,J){const $=[];return this._appendLeaves($,L,N=N||10,J=J||0,0),$}getTile(L,N,J){const $=this.trees[this._limitZoom(L)],ge=Math.pow(2,L),{extent:_e,radius:ye}=this.options,de=ye/_e,Ue=(J-de)/ge,je=(J+1+de)/ge,lt={features:[]};return this._addTileFeatures($.range((N-de)/ge,Ue,(N+1+de)/ge,je),$.points,N,J,ge,lt),N===0&&this._addTileFeatures($.range(1-de/ge,Ue,1,je),$.points,ge,J,ge,lt),N===ge-1&&this._addTileFeatures($.range(0,Ue,de/ge,je),$.points,-1,J,ge,lt),lt.features.length?lt:null}getClusterExpansionZoom(L){let N=this._getOriginZoom(L)-1;for(;N<=this.options.maxZoom;){const J=this.getChildren(L);if(N++,J.length!==1)break;L=J[0].properties.cluster_id}return N}_appendLeaves(L,N,J,$,ge){const _e=this.getChildren(N);for(const ye of _e){const de=ye.properties;if(de&&de.cluster?ge+de.point_count<=$?ge+=de.point_count:ge=this._appendLeaves(L,de.cluster_id,J,$,ge):ge<$?ge++:L.push(ye),L.length===J)break}return ge}_addTileFeatures(L,N,J,$,ge,_e){for(const ye of L){const de=N[ye],Ue=de.numPoints;let je,lt,We;if(Ue)je=ti(de),lt=de.x,We=de.y;else{const vt=this.points[de.index];je=vt.properties,lt=er(vt.geometry.coordinates[0]),We=Vr(vt.geometry.coordinates[1])}const Dt={type:1,geometry:[[Math.round(this.options.extent*(lt*ge-J)),Math.round(this.options.extent*(We*ge-$))]],tags:je};let Lt;Ue?Lt=de.id:this.options.generateId?Lt=de.index:this.points[de.index].id&&(Lt=this.points[de.index].id),Lt!==void 0&&(Dt.id=Lt),_e.features.push(Dt)}}_limitZoom(L){return Math.max(this.options.minZoom,Math.min(Math.floor(+L),this.options.maxZoom+1))}_cluster(L,N){const J=[],{radius:$,extent:ge,reduce:_e,minPoints:ye}=this.options,de=$/(ge*Math.pow(2,N));for(let Ue=0;Ue<L.length;Ue++){const je=L[Ue];if(je.zoom<=N)continue;je.zoom=N;const lt=this.trees[N+1],We=lt.within(je.x,je.y,de),Dt=je.numPoints||1;let Lt=Dt;for(const vt of We){const jt=lt.points[vt];jt.zoom>N&&(Lt+=jt.numPoints||1)}if(Lt>Dt&&Lt>=ye){let vt=je.x*Dt,jt=je.y*Dt,$t=_e&&Dt>1?this._map(je,!0):null;const hr=(Ue<<5)+(N+1)+this.points.length;for(const sr of We){const or=lt.points[sr];if(or.zoom<=N)continue;or.zoom=N;const fr=or.numPoints||1;vt+=or.x*fr,jt+=or.y*fr,or.parentId=hr,_e&&($t||($t=this._map(je,!0)),_e($t,this._map(or)))}je.parentId=hr,J.push(Ge(vt/Lt,jt/Lt,hr,Lt,$t))}else if(J.push(je),Lt>1)for(const vt of We){const jt=lt.points[vt];jt.zoom<=N||(jt.zoom=N,J.push(jt))}}return J}_getOriginId(L){return L-this.points.length>>5}_getOriginZoom(L){return(L-this.points.length)%32}_map(L,N){if(L.numPoints)return N?Ai({},L.properties):L.properties;const J=this.points[L.index].properties,$=this.options.map(J);return N&&$===J?Ai({},$):$}}function Ge(te,L,N,J,$){return{x:qe(te),y:qe(L),zoom:1/0,id:N,parentId:-1,numPoints:J,properties:$}}function nr(te,L){const[N,J]=te.geometry.coordinates;return{x:qe(er(N)),y:qe(Vr(J)),zoom:1/0,index:L,parentId:-1}}function mr(te){return{type:"Feature",id:te.id,properties:ti(te),geometry:{type:"Point",coordinates:[(L=te.x,360*(L-.5)),bi(te.y)]}};var L}function ti(te){const L=te.numPoints,N=L>=1e4?`${Math.round(L/1e3)}k`:L>=1e3?Math.round(L/100)/10+"k":L;return Ai(Ai({},te.properties),{cluster:!0,cluster_id:te.id,point_count:L,point_count_abbreviated:N})}function er(te){return te/360+.5}function Vr(te){const L=Math.sin(te*Math.PI/180),N=.5-.25*Math.log((1+L)/(1-L))/Math.PI;return N<0?0:N>1?1:N}function bi(te){const L=(180-360*te)*Math.PI/180;return 360*Math.atan(Math.exp(L))/Math.PI-90}function Ai(te,L){for(const N in L)te[N]=L[N];return te}function mi(te){return te.x}function oi(te){return te.y}function ai(te,L,N,J){for(var $,ge=J,_e=N-L>>1,ye=N-L,de=te[L],Ue=te[L+1],je=te[N],lt=te[N+1],We=L+3;We<N;We+=3){var Dt=fi(te[We],te[We+1],de,Ue,je,lt);if(Dt>ge)$=We,ge=Dt;else if(Dt===ge){var Lt=Math.abs(We-_e);Lt<ye&&($=We,ye=Lt)}}ge>J&&($-L>3&&ai(te,L,$,J),te[$+2]=ge,N-$>3&&ai(te,$,N,J))}function fi(te,L,N,J,$,ge){var _e=$-N,ye=ge-J;if(_e!==0||ye!==0){var de=((te-N)*_e+(L-J)*ye)/(_e*_e+ye*ye);de>1?(N=$,J=ge):de>0&&(N+=_e*de,J+=ye*de)}return(_e=te-N)*_e+(ye=L-J)*ye}function li(te,L,N,J){var $={id:te===void 0?null:te,type:L,geometry:N,tags:J,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ge){var _e=ge.geometry,ye=ge.type;if(ye==="Point"||ye==="MultiPoint"||ye==="LineString")Ze(ge,_e);else if(ye==="Polygon"||ye==="MultiLineString")for(var de=0;de<_e.length;de++)Ze(ge,_e[de]);else if(ye==="MultiPolygon")for(de=0;de<_e.length;de++)for(var Ue=0;Ue<_e[de].length;Ue++)Ze(ge,_e[de][Ue])}($),$}function Ze(te,L){for(var N=0;N<L.length;N+=3)te.minX=Math.min(te.minX,L[N]),te.minY=Math.min(te.minY,L[N+1]),te.maxX=Math.max(te.maxX,L[N]),te.maxY=Math.max(te.maxY,L[N+1])}function mt(te,L,N,J){if(L.geometry){var $=L.geometry.coordinates,ge=L.geometry.type,_e=Math.pow(N.tolerance/((1<<N.maxZoom)*N.extent),2),ye=[],de=L.id;if(N.promoteId?de=L.properties[N.promoteId]:N.generateId&&(de=J||0),ge==="Point")_i($,ye);else if(ge==="MultiPoint")for(var Ue=0;Ue<$.length;Ue++)_i($[Ue],ye);else if(ge==="LineString")ci($,ye,_e,!1);else if(ge==="MultiLineString"){if(N.lineMetrics){for(Ue=0;Ue<$.length;Ue++)ci($[Ue],ye=[],_e,!1),te.push(li(de,"LineString",ye,L.properties));return}Ar($,ye,_e,!1)}else if(ge==="Polygon")Ar($,ye,_e,!0);else{if(ge!=="MultiPolygon"){if(ge==="GeometryCollection"){for(Ue=0;Ue<L.geometry.geometries.length;Ue++)mt(te,{id:de,geometry:L.geometry.geometries[Ue],properties:L.properties},N,J);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ue=0;Ue<$.length;Ue++){var je=[];Ar($[Ue],je,_e,!0),ye.push(je)}}te.push(li(de,ge,ye,L.properties))}}function _i(te,L){L.push(yi(te[0])),L.push(Xe(te[1])),L.push(0)}function ci(te,L,N,J){for(var $,ge,_e=0,ye=0;ye<te.length;ye++){var de=yi(te[ye][0]),Ue=Xe(te[ye][1]);L.push(de),L.push(Ue),L.push(0),ye>0&&(_e+=J?($*Ue-de*ge)/2:Math.sqrt(Math.pow(de-$,2)+Math.pow(Ue-ge,2))),$=de,ge=Ue}var je=L.length-3;L[2]=1,ai(L,0,je,N),L[je+2]=1,L.size=Math.abs(_e),L.start=0,L.end=L.size}function Ar(te,L,N,J){for(var $=0;$<te.length;$++){var ge=[];ci(te[$],ge,N,J),L.push(ge)}}function yi(te){return te/360+.5}function Xe(te){var L=Math.sin(te*Math.PI/180),N=.5-.25*Math.log((1+L)/(1-L))/Math.PI;return N<0?0:N>1?1:N}function Hr(te,L,N,J,$,ge,_e,ye){if(J/=L,ge>=(N/=L)&&_e<J)return te;if(_e<N||ge>=J)return null;for(var de=[],Ue=0;Ue<te.length;Ue++){var je=te[Ue],lt=je.geometry,We=je.type,Dt=$===0?je.minX:je.minY,Lt=$===0?je.maxX:je.maxY;if(Dt>=N&&Lt<J)de.push(je);else if(!(Lt<N||Dt>=J)){var vt=[];if(We==="Point"||We==="MultiPoint")Gr(lt,vt,N,J,$);else if(We==="LineString")me(lt,vt,N,J,$,!1,ye.lineMetrics);else if(We==="MultiLineString")Kt(lt,vt,N,J,$,!1);else if(We==="Polygon")Kt(lt,vt,N,J,$,!0);else if(We==="MultiPolygon")for(var jt=0;jt<lt.length;jt++){var $t=[];Kt(lt[jt],$t,N,J,$,!0),$t.length&&vt.push($t)}if(vt.length){if(ye.lineMetrics&&We==="LineString"){for(jt=0;jt<vt.length;jt++)de.push(li(je.id,We,vt[jt],je.tags));continue}We!=="LineString"&&We!=="MultiLineString"||(vt.length===1?(We="LineString",vt=vt[0]):We="MultiLineString"),We!=="Point"&&We!=="MultiPoint"||(We=vt.length===3?"Point":"MultiPoint"),de.push(li(je.id,We,vt,je.tags))}}}return de.length?de:null}function Gr(te,L,N,J,$){for(var ge=0;ge<te.length;ge+=3){var _e=te[ge+$];_e>=N&&_e<=J&&(L.push(te[ge]),L.push(te[ge+1]),L.push(te[ge+2]))}}function me(te,L,N,J,$,ge,_e){for(var ye,de,Ue=Ot(te),je=$===0?wr:rr,lt=te.start,We=0;We<te.length-3;We+=3){var Dt=te[We],Lt=te[We+1],vt=te[We+2],jt=te[We+3],$t=te[We+4],hr=$===0?Dt:Lt,sr=$===0?jt:$t,or=!1;_e&&(ye=Math.sqrt(Math.pow(Dt-jt,2)+Math.pow(Lt-$t,2))),hr<N?sr>N&&(de=je(Ue,Dt,Lt,jt,$t,N),_e&&(Ue.start=lt+ye*de)):hr>J?sr<J&&(de=je(Ue,Dt,Lt,jt,$t,J),_e&&(Ue.start=lt+ye*de)):Ir(Ue,Dt,Lt,vt),sr<N&&hr>=N&&(de=je(Ue,Dt,Lt,jt,$t,N),or=!0),sr>J&&hr<=J&&(de=je(Ue,Dt,Lt,jt,$t,J),or=!0),!ge&&or&&(_e&&(Ue.end=lt+ye*de),L.push(Ue),Ue=Ot(te)),_e&&(lt+=ye)}var fr=te.length-3;Dt=te[fr],Lt=te[fr+1],vt=te[fr+2],(hr=$===0?Dt:Lt)>=N&&hr<=J&&Ir(Ue,Dt,Lt,vt),fr=Ue.length-3,ge&&fr>=3&&(Ue[fr]!==Ue[0]||Ue[fr+1]!==Ue[1])&&Ir(Ue,Ue[0],Ue[1],Ue[2]),Ue.length&&L.push(Ue)}function Ot(te){var L=[];return L.size=te.size,L.start=te.start,L.end=te.end,L}function Kt(te,L,N,J,$,ge){for(var _e=0;_e<te.length;_e++)me(te[_e],L,N,J,$,ge,!1)}function Ir(te,L,N,J){te.push(L),te.push(N),te.push(J)}function wr(te,L,N,J,$,ge){var _e=(ge-L)/(J-L);return te.push(ge),te.push(N+($-N)*_e),te.push(1),_e}function rr(te,L,N,J,$,ge){var _e=(ge-N)/($-N);return te.push(L+(J-L)*_e),te.push(ge),te.push(1),_e}function Oe(te,L){for(var N=[],J=0;J<te.length;J++){var $,ge=te[J],_e=ge.type;if(_e==="Point"||_e==="MultiPoint"||_e==="LineString")$=kr(ge.geometry,L);else if(_e==="MultiLineString"||_e==="Polygon"){$=[];for(var ye=0;ye<ge.geometry.length;ye++)$.push(kr(ge.geometry[ye],L))}else if(_e==="MultiPolygon")for($=[],ye=0;ye<ge.geometry.length;ye++){for(var de=[],Ue=0;Ue<ge.geometry[ye].length;Ue++)de.push(kr(ge.geometry[ye][Ue],L));$.push(de)}N.push(li(ge.id,_e,$,ge.tags))}return N}function kr(te,L){var N=[];N.size=te.size,te.start!==void 0&&(N.start=te.start,N.end=te.end);for(var J=0;J<te.length;J+=3)N.push(te[J]+L,te[J+1],te[J+2]);return N}function en(te,L){if(te.transformed)return te;var N,J,$,ge=1<<te.z,_e=te.x,ye=te.y;for(N=0;N<te.features.length;N++){var de=te.features[N],Ue=de.geometry,je=de.type;if(de.geometry=[],je===1)for(J=0;J<Ue.length;J+=2)de.geometry.push(ri(Ue[J],Ue[J+1],L,ge,_e,ye));else for(J=0;J<Ue.length;J++){var lt=[];for($=0;$<Ue[J].length;$+=2)lt.push(ri(Ue[J][$],Ue[J][$+1],L,ge,_e,ye));de.geometry.push(lt)}}return te.transformed=!0,te}function ri(te,L,N,J,$,ge){return[Math.round(N*(te*J-$)),Math.round(N*(L*J-ge))]}function Pr(te,L,N,J,$){for(var ge=L===$.maxZoom?0:$.tolerance/((1<<L)*$.extent),_e={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:N,y:J,z:L,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ye=0;ye<te.length;ye++){_e.numFeatures++,vr(_e,te[ye],ge,$);var de=te[ye].minX,Ue=te[ye].minY,je=te[ye].maxX,lt=te[ye].maxY;de<_e.minX&&(_e.minX=de),Ue<_e.minY&&(_e.minY=Ue),je>_e.maxX&&(_e.maxX=je),lt>_e.maxY&&(_e.maxY=lt)}return _e}function vr(te,L,N,J){var $=L.geometry,ge=L.type,_e=[];if(ge==="Point"||ge==="MultiPoint")for(var ye=0;ye<$.length;ye+=3)_e.push($[ye]),_e.push($[ye+1]),te.numPoints++,te.numSimplified++;else if(ge==="LineString")Tn(_e,$,te,N,!1,!1);else if(ge==="MultiLineString"||ge==="Polygon")for(ye=0;ye<$.length;ye++)Tn(_e,$[ye],te,N,ge==="Polygon",ye===0);else if(ge==="MultiPolygon")for(var de=0;de<$.length;de++){var Ue=$[de];for(ye=0;ye<Ue.length;ye++)Tn(_e,Ue[ye],te,N,!0,ye===0)}if(_e.length){var je=L.tags||null;if(ge==="LineString"&&J.lineMetrics){for(var lt in je={},L.tags)je[lt]=L.tags[lt];je.mapbox_clip_start=$.start/$.size,je.mapbox_clip_end=$.end/$.size}var We={geometry:_e,type:ge==="Polygon"||ge==="MultiPolygon"?3:ge==="LineString"||ge==="MultiLineString"?2:1,tags:je};L.id!==null&&(We.id=L.id),te.features.push(We)}}function Tn(te,L,N,J,$,ge){var _e=J*J;if(J>0&&L.size<($?_e:J))N.numPoints+=L.length/3;else{for(var ye=[],de=0;de<L.length;de+=3)(J===0||L[de+2]>_e)&&(N.numSimplified++,ye.push(L[de]),ye.push(L[de+1])),N.numPoints++;$&&function(Ue,je){for(var lt=0,We=0,Dt=Ue.length,Lt=Dt-2;We<Dt;Lt=We,We+=2)lt+=(Ue[We]-Ue[Lt])*(Ue[We+1]+Ue[Lt+1]);if(lt>0===je)for(We=0,Dt=Ue.length;We<Dt/2;We+=2){var vt=Ue[We],jt=Ue[We+1];Ue[We]=Ue[Dt-2-We],Ue[We+1]=Ue[Dt-1-We],Ue[Dt-2-We]=vt,Ue[Dt-1-We]=jt}}(ye,ge),te.push(ye)}}function tn(te,L){var N=(L=this.options=function($,ge){for(var _e in ge)$[_e]=ge[_e];return $}(Object.create(this.options),L)).debug;if(N&&console.time("preprocess data"),L.maxZoom<0||L.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(L.promoteId&&L.generateId)throw new Error("promoteId and generateId cannot be used together.");var J=function($,ge){var _e=[];if($.type==="FeatureCollection")for(var ye=0;ye<$.features.length;ye++)mt(_e,$.features[ye],ge,ye);else mt(_e,$.type==="Feature"?$:{geometry:$},ge);return _e}(te,L);this.tiles={},this.tileCoords=[],N&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",L.indexMaxZoom,L.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),J=function($,ge){var _e=ge.buffer/ge.extent,ye=$,de=Hr($,1,-1-_e,_e,0,-1,2,ge),Ue=Hr($,1,1-_e,2+_e,0,-1,2,ge);return(de||Ue)&&(ye=Hr($,1,-_e,1+_e,0,-1,2,ge)||[],de&&(ye=Oe(de,1).concat(ye)),Ue&&(ye=ye.concat(Oe(Ue,-1)))),ye}(J,L),J.length&&this.splitTile(J,0,0,0),N&&(J.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Gn(te,L,N){return 32*((1<<te)*N+L)+te}function Xn(te,L){const N=te.tileID.canonical;if(!this._geoJSONIndex)return L(null,null);const J=this._geoJSONIndex.getTile(N.z,N.x,N.y);if(!J)return L(null,null);const $=new re(J.features);let ge=we.exports($);ge.byteOffset===0&&ge.byteLength===ge.buffer.byteLength||(ge=new Uint8Array(ge)),L(null,{vectorTile:$,rawData:ge.buffer})}tn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},tn.prototype.splitTile=function(te,L,N,J,$,ge,_e){for(var ye=[te,L,N,J],de=this.options,Ue=de.debug;ye.length;){J=ye.pop(),N=ye.pop(),L=ye.pop(),te=ye.pop();var je=1<<L,lt=Gn(L,N,J),We=this.tiles[lt];if(!We&&(Ue>1&&console.time("creation"),We=this.tiles[lt]=Pr(te,L,N,J,de),this.tileCoords.push({z:L,x:N,y:J}),Ue)){Ue>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",L,N,J,We.numFeatures,We.numPoints,We.numSimplified),console.timeEnd("creation"));var Dt="z"+L;this.stats[Dt]=(this.stats[Dt]||0)+1,this.total++}if(We.source=te,$){if(L===de.maxZoom||L===$)continue;var Lt=1<<$-L;if(N!==Math.floor(ge/Lt)||J!==Math.floor(_e/Lt))continue}else if(L===de.indexMaxZoom||We.numPoints<=de.indexMaxPoints)continue;if(We.source=null,te.length!==0){Ue>1&&console.time("clipping");var vt,jt,$t,hr,sr,or,fr=.5*de.buffer/de.extent,Cr=.5-fr,Ci=.5+fr,Xr=1+fr;vt=jt=$t=hr=null,sr=Hr(te,je,N-fr,N+Ci,0,We.minX,We.maxX,de),or=Hr(te,je,N+Cr,N+Xr,0,We.minX,We.maxX,de),te=null,sr&&(vt=Hr(sr,je,J-fr,J+Ci,1,We.minY,We.maxY,de),jt=Hr(sr,je,J+Cr,J+Xr,1,We.minY,We.maxY,de),sr=null),or&&($t=Hr(or,je,J-fr,J+Ci,1,We.minY,We.maxY,de),hr=Hr(or,je,J+Cr,J+Xr,1,We.minY,We.maxY,de),or=null),Ue>1&&console.timeEnd("clipping"),ye.push(vt||[],L+1,2*N,2*J),ye.push(jt||[],L+1,2*N,2*J+1),ye.push($t||[],L+1,2*N+1,2*J),ye.push(hr||[],L+1,2*N+1,2*J+1)}}},tn.prototype.getTile=function(te,L,N){var J=this.options,$=J.extent,ge=J.debug;if(te<0||te>24)return null;var _e=1<<te,ye=Gn(te,L=(L%_e+_e)%_e,N);if(this.tiles[ye])return en(this.tiles[ye],$);ge>1&&console.log("drilling down to z%d-%d-%d",te,L,N);for(var de,Ue=te,je=L,lt=N;!de&&Ue>0;)Ue--,je=Math.floor(je/2),lt=Math.floor(lt/2),de=this.tiles[Gn(Ue,je,lt)];return de&&de.source?(ge>1&&console.log("found parent tile z%d-%d-%d",Ue,je,lt),ge>1&&console.time("drilling down"),this.splitTile(de.source,Ue,je,lt,te,L,N),ge>1&&console.timeEnd("drilling down"),this.tiles[ye]?en(this.tiles[ye],$):null):null};class is extends V{constructor(L,N,J,$){super(L,N,J,Xn),$&&(this.loadGeoJSON=$)}loadData(L,N){var J;(J=this._pendingRequest)===null||J===void 0||J.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const $=!!(L&&L.request&&L.request.collectResourceTiming)&&new a.RequestPerformance(L.request);this._pendingCallback=N,this._pendingRequest=this.loadGeoJSON(L,(ge,_e)=>{if(delete this._pendingCallback,delete this._pendingRequest,ge||!_e)return N(ge);if(typeof _e!="object")return N(new Error(`Input data given to '${L.source}' is not a valid GeoJSON object.`));{Y(_e,!0);try{if(L.filter){const de=a.createExpression(L.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(de.result==="error")throw new Error(de.value.map(je=>`${je.key}: ${je.message}`).join(", "));_e={type:"FeatureCollection",features:_e.features.filter(je=>de.value.evaluate({zoom:0},je))}}this._geoJSONIndex=L.cluster?new xe(function({superclusterOptions:de,clusterProperties:Ue}){if(!Ue||!de)return de;const je={},lt={},We={accumulated:null,zoom:0},Dt={properties:null},Lt=Object.keys(Ue);for(const vt of Lt){const[jt,$t]=Ue[vt],hr=a.createExpression($t),sr=a.createExpression(typeof jt=="string"?[jt,["accumulated"],["get",vt]]:jt);je[vt]=hr.value,lt[vt]=sr.value}return de.map=vt=>{Dt.properties=vt;const jt={};for(const $t of Lt)jt[$t]=je[$t].evaluate(We,Dt);return jt},de.reduce=(vt,jt)=>{Dt.properties=jt;for(const $t of Lt)We.accumulated=vt[$t],vt[$t]=lt[$t].evaluate(We,Dt)},de}(L)).load(_e.features):function(de,Ue){return new tn(de,Ue)}(_e,L.geojsonVtOptions)}catch(de){return N(de)}this.loaded={};const ye={};if($){const de=$.finish();de&&(ye.resourceTiming={},ye.resourceTiming[L.source]=JSON.parse(JSON.stringify(de)))}N(null,ye)}})}reloadTile(L,N){const J=this.loaded;return J&&J[L.uid]?super.reloadTile(L,N):this.loadTile(L,N)}loadGeoJSON(L,N){if(L.request)return a.getJSON(L.request,N);if(typeof L.data=="string")try{N(null,JSON.parse(L.data))}catch{N(new Error(`Input data given to '${L.source}' is not a valid GeoJSON object.`))}else N(new Error(`Input data given to '${L.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(L,N){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),N()}getClusterExpansionZoom(L,N){try{N(null,this._geoJSONIndex.getClusterExpansionZoom(L.clusterId))}catch(J){N(J)}}getClusterChildren(L,N){try{N(null,this._geoJSONIndex.getChildren(L.clusterId))}catch(J){N(J)}}getClusterLeaves(L,N){try{N(null,this._geoJSONIndex.getLeaves(L.clusterId,L.limit,L.offset))}catch(J){N(J)}}}class Zn{constructor(L){this.self=L,this.actor=new a.Actor(L,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:V,geojson:is},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(N,J)=>{if(this.workerSourceTypes[N])throw new Error(`Worker source with name "${N}" already registered.`);this.workerSourceTypes[N]=J},this.self.registerRTLTextPlugin=N=>{if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=N.applyArabicShaping,a.plugin.processBidirectionalText=N.processBidirectionalText,a.plugin.processStyledBidirectionalText=N.processStyledBidirectionalText}}setReferrer(L,N){this.referrer=N}setImages(L,N,J){this.availableImages[L]=N;for(const $ in this.workerSources[L]){const ge=this.workerSources[L][$];for(const _e in ge)ge[_e].availableImages=N}J()}setLayers(L,N,J){this.getLayerIndex(L).replace(N),J()}updateLayers(L,N,J){this.getLayerIndex(L).update(N.layers,N.removedIds),J()}loadTile(L,N,J){this.getWorkerSource(L,N.type,N.source).loadTile(N,J)}loadDEMTile(L,N,J){this.getDEMWorkerSource(L,N.source).loadTile(N,J)}reloadTile(L,N,J){this.getWorkerSource(L,N.type,N.source).reloadTile(N,J)}abortTile(L,N,J){this.getWorkerSource(L,N.type,N.source).abortTile(N,J)}removeTile(L,N,J){this.getWorkerSource(L,N.type,N.source).removeTile(N,J)}removeDEMTile(L,N){this.getDEMWorkerSource(L,N.source).removeTile(N)}removeSource(L,N,J){if(!this.workerSources[L]||!this.workerSources[L][N.type]||!this.workerSources[L][N.type][N.source])return;const $=this.workerSources[L][N.type][N.source];delete this.workerSources[L][N.type][N.source],$.removeSource!==void 0?$.removeSource(N,J):J()}loadWorkerSource(L,N,J){try{this.self.importScripts(N.url),J()}catch($){J($.toString())}}syncRTLPluginState(L,N,J){try{a.plugin.setState(N);const $=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&$!=null){this.self.importScripts($);const ge=a.plugin.isParsed();J(ge?void 0:new Error(`RTL Text Plugin failed to import scripts from ${$}`),ge)}}catch($){J($.toString())}}getAvailableImages(L){let N=this.availableImages[L];return N||(N=[]),N}getLayerIndex(L){let N=this.layerIndexes[L];return N||(N=this.layerIndexes[L]=new F),N}getWorkerSource(L,N,J){if(this.workerSources[L]||(this.workerSources[L]={}),this.workerSources[L][N]||(this.workerSources[L][N]={}),!this.workerSources[L][N][J]){const $={send:(ge,_e,ye)=>{this.actor.send(ge,_e,ye,L)}};this.workerSources[L][N][J]=new this.workerSourceTypes[N]($,this.getLayerIndex(L),this.getAvailableImages(L))}return this.workerSources[L][N][J]}getDEMWorkerSource(L,N){return this.demWorkerSources[L]||(this.demWorkerSources[L]={}),this.demWorkerSources[L][N]||(this.demWorkerSources[L][N]=new j),this.demWorkerSources[L][N]}enforceCacheSizeLimit(L,N){a.enforceCacheSizeLimit(N)}}return a.isWorker()&&(self.worker=new Zn(self)),Zn}),u(["./shared"],function(a){var w=C;function C(m){return!function(A){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var p,y,B=new Blob([""],{type:"text/javascript"}),Q=URL.createObjectURL(B);try{y=new Worker(Q),p=!0}catch{p=!1}return y&&y.terminate(),URL.revokeObjectURL(Q),p}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var p=document.createElement("canvas");p.width=p.height=1;var y=p.getContext("2d");if(!y)return!1;var B=y.getImageData(0,0,1,1);return B&&B.width===p.width}()?(F[h=A&&A.failIfMajorPerformanceCaveat]===void 0&&(F[h]=function(p){var y,B=function(Q){var S=document.createElement("canvas"),k=Object.create(C.webGLContextAttributes);return k.failIfMajorPerformanceCaveat=Q,S.getContext("webgl",k)||S.getContext("experimental-webgl",k)}(p);if(!B)return!1;try{y=B.createShader(B.VERTEX_SHADER)}catch{return!1}return!(!y||B.isContextLost())&&(B.shaderSource(y,"void main() {}"),B.compileShader(y),B.getShaderParameter(y,B.COMPILE_STATUS)===!0)}(h)),F[h]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var h}(m)}var F={};function E(m,A){if(Array.isArray(m)){if(!Array.isArray(A)||m.length!==A.length)return!1;for(let h=0;h<m.length;h++)if(!E(m[h],A[h]))return!1;return!0}if(typeof m=="object"&&m!==null&&A!==null){if(typeof A!="object"||Object.keys(m).length!==Object.keys(A).length)return!1;for(const h in m)if(!E(m[h],A[h]))return!1;return!0}return m===A}C.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class U{static testProp(A){if(!U.docStyle)return A[0];for(let h=0;h<A.length;h++)if(A[h]in U.docStyle)return A[h];return A[0]}static create(A,h,p){const y=window.document.createElement(A);return h!==void 0&&(y.className=h),p&&p.appendChild(y),y}static createNS(A,h){return window.document.createElementNS(A,h)}static disableDrag(){U.docStyle&&U.selectProp&&(U.userSelect=U.docStyle[U.selectProp],U.docStyle[U.selectProp]="none")}static enableDrag(){U.docStyle&&U.selectProp&&(U.docStyle[U.selectProp]=U.userSelect)}static setTransform(A,h){A.style[U.transformProp]=h}static addEventListener(A,h,p,y={}){A.addEventListener(h,p,"passive"in y?y:y.capture)}static removeEventListener(A,h,p,y={}){A.removeEventListener(h,p,"passive"in y?y:y.capture)}static suppressClickInternal(A){A.preventDefault(),A.stopPropagation(),window.removeEventListener("click",U.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",U.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",U.suppressClickInternal,!0)},0)}static mousePos(A,h){const p=A.getBoundingClientRect();return new a.pointGeometry(h.clientX-p.left-A.clientLeft,h.clientY-p.top-A.clientTop)}static touchPos(A,h){const p=A.getBoundingClientRect(),y=[];for(let B=0;B<h.length;B++)y.push(new a.pointGeometry(h[B].clientX-p.left-A.clientLeft,h[B].clientY-p.top-A.clientTop));return y}static mouseButton(A){return A.button}static remove(A){A.parentNode&&A.parentNode.removeChild(A)}}U.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,U.selectProp=U.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),U.transformProp=U.testProp(["transform","WebkitTransform"]);class H{constructor(A){this._transformRequestFn=A}transformRequest(A,h){return this._transformRequestFn&&this._transformRequestFn(A,h)||{url:A}}normalizeSpriteURL(A,h,p){const y=function(B){const Q=B.match(P);if(!Q)throw new Error(`Unable to parse URL "${B}"`);return{protocol:Q[1],authority:Q[2],path:Q[3]||"/",params:Q[4]?Q[4].split("&"):[]}}(A);return y.path+=`${h}${p}`,function(B){const Q=B.params.length?`?${B.params.join("&")}`:"";return`${B.protocol}://${B.authority}${B.path}${Q}`}(y)}setTransformRequest(A){this._transformRequestFn=A}}const P=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class V{constructor(A,h,p,y){this.context=A,this.format=p,this.texture=A.gl.createTexture(),this.update(h,y)}update(A,h,p){const{width:y,height:B}=A,Q=!(this.size&&this.size[0]===y&&this.size[1]===B||p),{context:S}=this,{gl:k}=S;if(this.useMipmap=!!(h&&h.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),S.pixelStoreUnpackFlipY.set(!1),S.pixelStoreUnpack.set(1),S.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!h||h.premultiply!==!1)),Q)this.size=[y,B],A instanceof HTMLImageElement||A instanceof HTMLCanvasElement||A instanceof HTMLVideoElement||A instanceof ImageData||a.isImageBitmap(A)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,A):k.texImage2D(k.TEXTURE_2D,0,this.format,y,B,0,this.format,k.UNSIGNED_BYTE,A.data);else{const{x:D,y:O}=p||{x:0,y:0};A instanceof HTMLImageElement||A instanceof HTMLCanvasElement||A instanceof HTMLVideoElement||A instanceof ImageData||a.isImageBitmap(A)?k.texSubImage2D(k.TEXTURE_2D,0,D,O,k.RGBA,k.UNSIGNED_BYTE,A):k.texSubImage2D(k.TEXTURE_2D,0,D,O,y,B,k.RGBA,k.UNSIGNED_BYTE,A.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D)}bind(A,h,p){const{context:y}=this,{gl:B}=y;B.bindTexture(B.TEXTURE_2D,this.texture),p!==B.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=B.LINEAR),A!==this.filter&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,A),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,p||A),this.filter=A),h!==this.wrap&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,h),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:A}=this.context;A.deleteTexture(this.texture),this.texture=null}}function j(m){const{userImage:A}=m;return!!(A&&A.render&&A.render())&&(m.data.replace(new Uint8Array(A.data.buffer)),!0)}class Y extends a.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(A){if(this.loaded!==A&&(this.loaded=A,A)){for(const{ids:h,callback:p}of this.requestors)this._notify(h,p);this.requestors=[]}}getImage(A){return this.images[A]}addImage(A,h){if(this.images[A])throw new Error(`Image id ${A} already exist, use updateImage instead`);this._validate(A,h)&&(this.images[A]=h)}_validate(A,h){let p=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new a.ErrorEvent(new Error(`Image "${A}" has invalid "stretchX" value`))),p=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new a.ErrorEvent(new Error(`Image "${A}" has invalid "stretchY" value`))),p=!1),this._validateContent(h.content,h)||(this.fire(new a.ErrorEvent(new Error(`Image "${A}" has invalid "content" value`))),p=!1),p}_validateStretch(A,h){if(!A)return!0;let p=0;for(const y of A){if(y[0]<p||y[1]<y[0]||h<y[1])return!1;p=y[1]}return!0}_validateContent(A,h){return!(A&&(A.length!==4||A[0]<0||h.data.width<A[0]||A[1]<0||h.data.height<A[1]||A[2]<0||h.data.width<A[2]||A[3]<0||h.data.height<A[3]||A[2]<A[0]||A[3]<A[1]))}updateImage(A,h){const p=this.images[A];if(p.data.width!==h.data.width||p.data.height!==h.data.height)throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=p.version+1,this.images[A]=h,this.updatedImages[A]=!0}removeImage(A){const h=this.images[A];delete this.images[A],delete this.patterns[A],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(A,h){let p=!0;if(!this.isLoaded())for(const y of A)this.images[y]||(p=!1);this.isLoaded()||p?this._notify(A,h):this.requestors.push({ids:A,callback:h})}_notify(A,h){const p={};for(const y of A){this.images[y]||this.fire(new a.Event("styleimagemissing",{id:y}));const B=this.images[y];B?p[y]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:!!(B.userImage&&B.userImage.render)}:a.warnOnce(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,p)}getPixelSize(){const{width:A,height:h}=this.atlasImage;return{width:A,height:h}}getPattern(A){const h=this.patterns[A],p=this.getImage(A);if(!p)return null;if(h&&h.position.version===p.version)return h.position;if(h)h.position.version=p.version;else{const y={w:p.data.width+2,h:p.data.height+2,x:0,y:0},B=new a.ImagePosition(y,p);this.patterns[A]={bin:y,position:B}}return this._updatePatternAtlas(),this.patterns[A].position}bind(A){const h=A.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new V(A,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const A=[];for(const B in this.patterns)A.push(this.patterns[B].bin);const{w:h,h:p}=a.potpack(A),y=this.atlasImage;y.resize({width:h||1,height:p||1});for(const B in this.patterns){const{bin:Q}=this.patterns[B],S=Q.x+1,k=Q.y+1,D=this.images[B].data,O=D.width,G=D.height;a.RGBAImage.copy(D,y,{x:0,y:0},{x:S,y:k},{width:O,height:G}),a.RGBAImage.copy(D,y,{x:0,y:G-1},{x:S,y:k-1},{width:O,height:1}),a.RGBAImage.copy(D,y,{x:0,y:0},{x:S,y:k+G},{width:O,height:1}),a.RGBAImage.copy(D,y,{x:O-1,y:0},{x:S-1,y:k},{width:1,height:G}),a.RGBAImage.copy(D,y,{x:0,y:0},{x:S+O,y:k},{width:1,height:G})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(A){for(const h of A){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const p=this.images[h];p||a.warnOnce(`Image with ID: "${h}" was not found`),j(p)&&this.updateImage(h,p)}}}const ee=1e20;function ce(m,A,h,p,y,B,Q,S,k){for(let D=A;D<A+p;D++)Qe(m,h*B+D,B,y,Q,S,k);for(let D=h;D<h+y;D++)Qe(m,D*B+A,1,p,Q,S,k)}function Qe(m,A,h,p,y,B,Q){B[0]=0,Q[0]=-ee,Q[1]=ee,y[0]=m[A];for(let S=1,k=0,D=0;S<p;S++){y[S]=m[A+S*h];const O=S*S;do{const G=B[k];D=(y[S]-y[G]+O-G*G)/(S-G)/2}while(D<=Q[k]&&--k>-1);k++,B[k]=S,Q[k]=D,Q[k+1]=ee}for(let S=0,k=0;S<p;S++){for(;Q[k+1]<S;)k++;const D=B[k],O=S-D;m[A+S*h]=y[D]+O*O}}class le{constructor(A,h){this.requestManager=A,this.localIdeographFontFamily=h,this.entries={}}setURL(A){this.url=A}getGlyphs(A,h){const p=[];for(const y in A)for(const B of A[y])p.push({stack:y,id:B});a.asyncAll(p,({stack:y,id:B},Q)=>{let S=this.entries[y];S||(S=this.entries[y]={glyphs:{},requests:{},ranges:{}});let k=S.glyphs[B];if(k!==void 0)return void Q(null,{stack:y,id:B,glyph:k});if(k=this._tinySDF(S,y,B),k)return S.glyphs[B]=k,void Q(null,{stack:y,id:B,glyph:k});const D=Math.floor(B/256);if(256*D>65535)return void Q(new Error("glyphs > 65535 not supported"));if(S.ranges[D])return void Q(null,{stack:y,id:B,glyph:k});let O=S.requests[D];O||(O=S.requests[D]=[],le.loadGlyphRange(y,D,this.url,this.requestManager,(G,Z)=>{if(Z){for(const ae in Z)this._doesCharSupportLocalGlyph(+ae)||(S.glyphs[+ae]=Z[+ae]);S.ranges[D]=!0}for(const ae of O)ae(G,Z);delete S.requests[D]})),O.push((G,Z)=>{G?Q(G):Z&&Q(null,{stack:y,id:B,glyph:Z[B]||null})})},(y,B)=>{if(y)h(y);else if(B){const Q={};for(const{stack:S,id:k,glyph:D}of B)(Q[S]||(Q[S]={}))[k]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};h(null,Q)}})}_doesCharSupportLocalGlyph(A){return!!this.localIdeographFontFamily&&(a.unicodeBlockLookup["CJK Unified Ideographs"](A)||a.unicodeBlockLookup["Hangul Syllables"](A)||a.unicodeBlockLookup.Hiragana(A)||a.unicodeBlockLookup.Katakana(A))}_tinySDF(A,h,p){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(p))return;let B=A.tinySDF;if(!B){let S="400";/bold/i.test(h)?S="900":/medium/i.test(h)?S="500":/light/i.test(h)&&(S="200"),B=A.tinySDF=new le.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:y,fontWeight:S})}const Q=B.draw(String.fromCharCode(p));return{id:p,bitmap:new a.AlphaImage({width:Q.width||30,height:Q.height||30},Q.data),metrics:{width:Q.glyphWidth||24,height:Q.glyphHeight||24,left:Q.glyphLeft||0,top:Q.glyphTop-27||-8,advance:Q.glyphAdvance||24}}}}le.loadGlyphRange=function(m,A,h,p,y){const B=256*A,Q=B+255,S=p.transformRequest(h.replace("{fontstack}",m).replace("{range}",`${B}-${Q}`),a.ResourceType.Glyphs);a.getArrayBuffer(S,(k,D)=>{if(k)y(k);else if(D){const O={};for(const G of a.parseGlyphPbf(D))O[G.id]=G;y(null,O)}})},le.TinySDF=class{constructor({fontSize:m=24,buffer:A=3,radius:h=8,cutoff:p=.25,fontFamily:y="sans-serif",fontWeight:B="normal",fontStyle:Q="normal"}={}){this.buffer=A,this.cutoff=p,this.radius=h;const S=this.size=m+4*A,k=this._createCanvas(S),D=this.ctx=k.getContext("2d",{willReadFrequently:!0});D.font=`${Q} ${B} ${m}px ${y}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(S*S),this.gridInner=new Float64Array(S*S),this.f=new Float64Array(S),this.z=new Float64Array(S+1),this.v=new Uint16Array(S)}_createCanvas(m){const A=document.createElement("canvas");return A.width=A.height=m,A}draw(m){const{width:A,actualBoundingBoxAscent:h,actualBoundingBoxDescent:p,actualBoundingBoxLeft:y,actualBoundingBoxRight:B}=this.ctx.measureText(m),Q=Math.ceil(h),S=Math.min(this.size-this.buffer,Math.ceil(B-y)),k=Math.min(this.size-this.buffer,Q+Math.ceil(p)),D=S+2*this.buffer,O=k+2*this.buffer,G=Math.max(D*O,0),Z=new Uint8ClampedArray(G),ae={data:Z,width:D,height:O,glyphWidth:S,glyphHeight:k,glyphTop:Q,glyphLeft:0,glyphAdvance:A};if(S===0||k===0)return ae;const{ctx:ne,buffer:oe,gridInner:be,gridOuter:Te}=this;ne.clearRect(oe,oe,S,k),ne.fillText(m,oe,oe+Q);const Le=ne.getImageData(oe,oe,S,k);Te.fill(ee,0,G),be.fill(0,0,G);for(let he=0;he<k;he++)for(let Ke=0;Ke<S;Ke++){const Pe=Le.data[4*(he*S+Ke)+3]/255;if(Pe===0)continue;const et=(he+oe)*D+Ke+oe;if(Pe===1)Te[et]=0,be[et]=ee;else{const rt=.5-Pe;Te[et]=rt>0?rt*rt:0,be[et]=rt<0?rt*rt:0}}ce(Te,0,0,D,O,D,this.f,this.v,this.z),ce(be,oe,oe,S,k,D,this.f,this.v,this.z);for(let he=0;he<G;he++){const Ke=Math.sqrt(Te[he])-Math.sqrt(be[he]);Z[he]=Math.round(255-255*(Ke/this.radius+this.cutoff))}return ae}};const re=new a.Properties({anchor:new a.DataConstantProperty(a.spec.light.anchor),position:new class{constructor(){this.specification=a.spec.light.position}possiblyEvaluate(m,A){return a.sphericalToCartesian(m.expression.evaluate(A))}interpolate(m,A,h){return{x:a.number(m.x,A.x,h),y:a.number(m.y,A.y,h),z:a.number(m.z,A.z,h)}}},color:new a.DataConstantProperty(a.spec.light.color),intensity:new a.DataConstantProperty(a.spec.light.intensity)}),we="-transition";class Ae extends a.Evented{constructor(A){super(),this._transitionable=new a.Transitionable(re),this.setLight(A),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(A,h={}){if(!this._validate(a.validateLight,A,h))for(const p in A){const y=A[p];p.endsWith(we)?this._transitionable.setTransition(p.slice(0,-we.length),y):this._transitionable.setValue(p,y)}}updateTransitions(A){this._transitioning=this._transitionable.transitioned(A,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(A){this.properties=this._transitioning.possiblyEvaluate(A)}_validate(A,h,p){return(!p||p.validate!==!1)&&a.emitValidationErrors(this,A.call(a.validateStyle,a.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}class R{constructor(A,h){this.width=A,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(A,h){const p=A.join(",")+String(h);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(A,h)),this.dashEntry[p]}getDashRanges(A,h,p){const y=[];let B=A.length%2==1?-A[A.length-1]*p:0,Q=A[0]*p,S=!0;y.push({left:B,right:Q,isDash:S,zeroLength:A[0]===0});let k=A[0];for(let D=1;D<A.length;D++){S=!S;const O=A[D];B=k*p,k+=O,Q=k*p,y.push({left:B,right:Q,isDash:S,zeroLength:O===0})}return y}addRoundDash(A,h,p){const y=h/2;for(let B=-p;B<=p;B++){const Q=this.width*(this.nextRow+p+B);let S=0,k=A[S];for(let D=0;D<this.width;D++){D/k.right>1&&(k=A[++S]);const O=Math.abs(D-k.left),G=Math.abs(D-k.right),Z=Math.min(O,G);let ae;const ne=B/p*(y+1);if(k.isDash){const oe=y-Math.abs(ne);ae=Math.sqrt(Z*Z+oe*oe)}else ae=y-Math.sqrt(Z*Z+ne*ne);this.data[Q+D]=Math.max(0,Math.min(255,ae+128))}}}addRegularDash(A){for(let S=A.length-1;S>=0;--S){const k=A[S],D=A[S+1];k.zeroLength?A.splice(S,1):D&&D.isDash===k.isDash&&(D.left=k.left,A.splice(S,1))}const h=A[0],p=A[A.length-1];h.isDash===p.isDash&&(h.left=p.left-this.width,p.right=h.right+this.width);const y=this.width*this.nextRow;let B=0,Q=A[B];for(let S=0;S<this.width;S++){S/Q.right>1&&(Q=A[++B]);const k=Math.abs(S-Q.left),D=Math.abs(S-Q.right),O=Math.min(k,D);this.data[y+S]=Math.max(0,Math.min(255,(Q.isDash?O:-O)+128))}}addDash(A,h){const p=h?7:0,y=2*p+1;if(this.nextRow+y>this.height)return a.warnOnce("LineAtlas out of space"),null;let B=0;for(let S=0;S<A.length;S++)B+=A[S];if(B!==0){const S=this.width/B,k=this.getDashRanges(A,this.width,S);h?this.addRoundDash(k,S,p):this.addRegularDash(k)}const Q={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:B};return this.nextRow+=y,this.dirty=!0,Q}bind(A){const h=A.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}class ie{constructor(A,h){this.workerPool=A,this.actors=[],this.currentActor=0,this.id=a.uniqueId();const p=this.workerPool.acquire(this.id);for(let y=0;y<p.length;y++){const B=new ie.Actor(p[y],h,this.id);B.name=`Worker ${y}`,this.actors.push(B)}if(!this.actors.length)throw new Error("No actors found")}broadcast(A,h,p){a.asyncAll(this.actors,(y,B)=>{y.send(A,h,B)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(A=>{A.remove()}),this.actors=[],this.workerPool.release(this.id)}}function se(m,A,h){const p=function(y,B){if(y)return h(y);if(B){const Q=a.pick(a.extend(B,m),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);B.vector_layers&&(Q.vectorLayers=B.vector_layers,Q.vectorLayerIds=Q.vectorLayers.map(S=>S.id)),h(null,Q)}};return m.url?a.getJSON(A.transformRequest(m.url,a.ResourceType.Source),p):a.exported.frame(()=>p(null,m))}ie.Actor=a.Actor;class Be{constructor(A,h,p){this.bounds=a.LngLatBounds.convert(this.validateBounds(A)),this.minzoom=h||0,this.maxzoom=p||24}validateBounds(A){return Array.isArray(A)&&A.length===4?[Math.max(-180,A[0]),Math.max(-90,A[1]),Math.min(180,A[2]),Math.min(90,A[3])]:[-180,-90,180,90]}contains(A){const h=Math.pow(2,A.z),p=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*h),y=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*h),B=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*h),Q=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*h);return A.x>=p&&A.x<B&&A.y>=y&&A.y<Q}}class Re extends a.Evented{constructor(A,h,p,y){if(super(),this.id=A,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(h,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=se(this._options,this.map._requestManager,(A,h)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),A?this.fire(new a.ErrorEvent(A)):h&&(a.extend(this,h),h.bounds&&(this.tileBounds=new Be(h.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(A){return!this.tileBounds||this.tileBounds.contains(A.canonical)}onAdd(A){this.map=A,this.load()}setSourceProperty(A){this._tileJSONRequest&&this._tileJSONRequest.cancel(),A(),this.load()}setTiles(A){return this.setSourceProperty(()=>{this._options.tiles=A}),this}setUrl(A){return this.setSourceProperty(()=>{this.url=A,this._options.url=A}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}loadTile(A,h){const p=A.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(p,a.ResourceType.Tile),uid:A.uid,tileID:A.tileID,zoom:A.tileID.overscaledZ,tileSize:this.tileSize*A.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function B(Q,S){return delete A.request,A.aborted?h(null):Q&&Q.status!==404?h(Q):(S&&S.resourceTiming&&(A.resourceTiming=S.resourceTiming),this.map._refreshExpiredTiles&&S&&A.setExpiryData(S),A.loadVectorData(S,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),h(null),void(A.reloadCallback&&(this.loadTile(A,A.reloadCallback),A.reloadCallback=null)))}y.request.collectResourceTiming=this._collectResourceTiming,A.actor&&A.state!=="expired"?A.state==="loading"?A.reloadCallback=h:A.request=A.actor.send("reloadTile",y,B.bind(this)):(A.actor=this.dispatcher.getActor(),A.request=A.actor.send("loadTile",y,B.bind(this)))}abortTile(A){A.request&&(A.request.cancel(),delete A.request),A.actor&&A.actor.send("abortTile",{uid:A.uid,type:this.type,source:this.id},void 0)}unloadTile(A){A.unloadVectorData(),A.actor&&A.actor.send("removeTile",{uid:A.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class ht extends a.Evented{constructor(A,h,p,y){super(),this.id=A,this.dispatcher=p,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},h),a.extend(this,a.pick(h,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=se(this._options,this.map._requestManager,(A,h)=>{this._tileJSONRequest=null,this._loaded=!0,A?this.fire(new a.ErrorEvent(A)):h&&(a.extend(this,h),h.bounds&&(this.tileBounds=new Be(h.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(A){this.map=A,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}hasTile(A){return!this.tileBounds||this.tileBounds.contains(A.canonical)}loadTile(A,h){const p=A.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);A.request=a.getImage(this.map._requestManager.transformRequest(p,a.ResourceType.Tile),(y,B,Q)=>{if(delete A.request,A.aborted)A.state="unloaded",h(null);else if(y)A.state="errored",h(y);else if(B){this.map._refreshExpiredTiles&&A.setExpiryData(Q);const S=this.map.painter.context,k=S.gl;A.texture=this.map.painter.getTileTexture(B.width),A.texture?A.texture.update(B,{useMipmap:!0}):(A.texture=new V(S,B,k.RGBA,{useMipmap:!0}),A.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),S.extTextureFilterAnisotropic&&k.texParameterf(k.TEXTURE_2D,S.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,S.extTextureFilterAnisotropicMax)),A.state="loaded",a.cacheEntryPossiblyAdded(this.dispatcher),h(null)}})}abortTile(A,h){A.request&&(A.request.cancel(),delete A.request),h()}unloadTile(A,h){A.texture&&this.map.painter.saveTileTexture(A.texture),h()}hasTransition(){return!1}}let _t;class Me extends ht{constructor(A,h,p,y){super(A,h,p,y),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(A,h){const p=A.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function y(B,Q){B&&(A.state="errored",h(B)),Q&&(A.dem=Q,A.needsHillshadePrepare=!0,A.needsTerrainPrepare=!0,A.state="loaded",h(null))}A.request=a.getImage(this.map._requestManager.transformRequest(p,a.ResourceType.Tile),function(B,Q){if(delete A.request,A.aborted)A.state="unloaded",h(null);else if(B)A.state="errored",h(B);else if(Q){this.map._refreshExpiredTiles&&A.setExpiryData(Q),delete Q.cacheControl,delete Q.expires;const S=a.isImageBitmap(Q)&&(_t==null&&(_t=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),_t)?Q:a.exported.getImageData(Q,1),k={uid:A.uid,coord:A.tileID,source:this.id,rawImageData:S,encoding:this.encoding};A.actor&&A.state!=="expired"||(A.actor=this.dispatcher.getActor(),A.actor.send("loadDEMTile",k,y.bind(this)))}}.bind(this)),A.neighboringTiles=this._getNeighboringTiles(A.tileID)}_getNeighboringTiles(A){const h=A.canonical,p=Math.pow(2,h.z),y=(h.x-1+p)%p,B=h.x===0?A.wrap-1:A.wrap,Q=(h.x+1+p)%p,S=h.x+1===p?A.wrap+1:A.wrap,k={};return k[new a.OverscaledTileID(A.overscaledZ,B,h.z,y,h.y).key]={backfilled:!1},k[new a.OverscaledTileID(A.overscaledZ,S,h.z,Q,h.y).key]={backfilled:!1},h.y>0&&(k[new a.OverscaledTileID(A.overscaledZ,B,h.z,y,h.y-1).key]={backfilled:!1},k[new a.OverscaledTileID(A.overscaledZ,A.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},k[new a.OverscaledTileID(A.overscaledZ,S,h.z,Q,h.y-1).key]={backfilled:!1}),h.y+1<p&&(k[new a.OverscaledTileID(A.overscaledZ,B,h.z,y,h.y+1).key]={backfilled:!1},k[new a.OverscaledTileID(A.overscaledZ,A.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},k[new a.OverscaledTileID(A.overscaledZ,S,h.z,Q,h.y+1).key]={backfilled:!1}),k}unloadTile(A){A.demTexture&&this.map.painter.saveTileTexture(A.demTexture),A.fbo&&(A.fbo.destroy(),delete A.fbo),A.dem&&delete A.dem,delete A.neighboringTiles,A.state="unloaded",A.actor&&A.actor.send("removeDEMTile",{uid:A.uid,source:this.id})}}class at extends a.Evented{constructor(A,h,p,y){super(),this.id=A,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(y),this._data=h.data,this._options=a.extend({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;const B=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(h.buffer!==void 0?h.buffer:128)*B,tolerance:(h.tolerance!==void 0?h.tolerance:.375)*B,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:h.clusterMaxZoom!==void 0?h.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:a.EXTENT,radius:(h.clusterRadius||50)*B,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(A){this.map=A,this.load()}setData(A){return this._data=A,this._updateWorkerData("content"),this}getClusterExpansionZoom(A,h){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:A,source:this.id},h),this}getClusterChildren(A,h){return this.actor.send("geojson.getClusterChildren",{clusterId:A,source:this.id},h),this}getClusterLeaves(A,h,p,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:A,limit:h,offset:p},y),this}_updateWorkerData(A){const h=a.extend({},this.workerOptions),p=this._data;typeof p=="string"?(h.request=this.map._requestManager.transformRequest(a.exported.resolveURL(p),a.ResourceType.Source),h.request.collectResourceTiming=this._collectResourceTiming):h.data=JSON.stringify(p),this._pendingLoads++,this.fire(new a.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,h,(y,B)=>{if(this._pendingLoads--,this._removed||B&&B.abandoned)return void this.fire(new a.Event("dataabort",{dataType:"source",sourceDataType:A}));let Q=null;if(B&&B.resourceTiming&&B.resourceTiming[this.id]&&(Q=B.resourceTiming[this.id].slice(0)),y)return void this.fire(new a.ErrorEvent(y));const S={dataType:"source",sourceDataType:A};this._collectResourceTiming&&Q&&Q.length>0&&a.extend(S,{resourceTiming:Q}),this.fire(new a.Event("data",S))})}loaded(){return this._pendingLoads===0}loadTile(A,h){const p=A.actor?"reloadTile":"loadTile";A.actor=this.actor;const y={type:this.type,uid:A.uid,tileID:A.tileID,zoom:A.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};A.request=this.actor.send(p,y,(B,Q)=>(delete A.request,A.unloadVectorData(),A.aborted?h(null):B?h(B):(A.loadVectorData(Q,this.map.painter,p==="reloadTile"),h(null))))}abortTile(A){A.request&&(A.request.cancel(),delete A.request),A.aborted=!0}unloadTile(A){A.unloadVectorData(),this.actor.send("removeTile",{uid:A.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return a.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var wt=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class nt extends a.Evented{constructor(A,h,p,y){super(),this.id=A,this.dispatcher=p,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=h}load(A,h){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),(p,y)=>{this._loaded=!0,p?this.fire(new a.ErrorEvent(p)):y&&(this.image=y,A&&(this.coordinates=A),h&&h(),this._finishLoading())})}loaded(){return this._loaded}updateImage(A){return this.image&&A.url?(this.options.url=A.url,this.load(A.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(A){this.map=A,this.load()}setCoordinates(A){this.coordinates=A;const h=A.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(y){let B=1/0,Q=1/0,S=-1/0,k=-1/0;for(const Z of y)B=Math.min(B,Z.x),Q=Math.min(Q,Z.y),S=Math.max(S,Z.x),k=Math.max(k,Z.y);const D=Math.max(S-B,k-Q),O=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),G=Math.pow(2,O);return new a.CanonicalTileID(O,Math.floor((B+S)/2*G),Math.floor((Q+k)/2*G))}(h),this.minzoom=this.maxzoom=this.tileID.z;const p=h.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new a.RasterBoundsArray,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(p[2].x,p[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const A=this.map.painter.context,h=A.gl;this.boundsBuffer||(this.boundsBuffer=A.createVertexBuffer(this._boundsArray,wt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new V(A,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));for(const p in this.tiles){const y=this.tiles[p];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}loadTile(A,h){this.tileID&&this.tileID.equals(A.tileID.canonical)?(this.tiles[String(A.tileID.wrap)]=A,A.buckets={},h(null)):(A.state="errored",h(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class He extends nt{constructor(A,h,p,y){super(A,h,p,y),this.roundZoom=!0,this.type="video",this.options=h}load(){this._loaded=!1;const A=this.options;this.urls=[];for(const h of A.urls)this.urls.push(this.map._requestManager.transformRequest(h,a.ResourceType.Source).url);a.getVideo(this.urls,(h,p)=>{this._loaded=!0,h?this.fire(new a.ErrorEvent(h)):p&&(this.video=p,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(A){if(this.video){const h=this.video.seekable;A<h.start(0)||A>h.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=A}}getVideo(){return this.video}onAdd(A){this.map||(this.map=A,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const A=this.map.painter.context,h=A.gl;this.boundsBuffer||(this.boundsBuffer=A.createVertexBuffer(this._boundsArray,wt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new V(A,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));for(const p in this.tiles){const y=this.tiles[p];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class tt extends nt{constructor(A,h,p,y){super(A,h,p,y),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(B=>!Array.isArray(B)||B.length!==2||B.some(Q=>typeof Q!="number"))||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${A}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${A}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${A}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${A}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${A}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(A){this.map=A,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let A=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,A=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,A=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const h=this.map.painter.context,p=h.gl;this.boundsBuffer||(this.boundsBuffer=h.createVertexBuffer(this._boundsArray,wt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(A||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new V(h,this.canvas,p.RGBA,{premultiply:!0});for(const y in this.tiles){const B=this.tiles[y];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const A of[this.canvas.width,this.canvas.height])if(isNaN(A)||A<=0)return!0;return!1}}const Je={vector:Re,raster:ht,"raster-dem":Me,geojson:at,video:He,image:nt,canvas:tt};function ut(m,A){const h=a.create();return a.translate(h,h,[1,1,0]),a.scale(h,h,[.5*m.width,.5*m.height,1]),a.multiply(h,h,m.calculatePosMatrix(A.toUnwrapped()))}function At(m,A,h,p,y,B){const Q=function(G,Z,ae){if(G)for(const ne of G){const oe=Z[ne];if(oe&&oe.source===ae&&oe.type==="fill-extrusion")return!0}else for(const ne in Z){const oe=Z[ne];if(oe.source===ae&&oe.type==="fill-extrusion")return!0}return!1}(y&&y.layers,A,m.id),S=B.maxPitchScaleFactor(),k=m.tilesIn(p,S,Q);k.sort(Et);const D=[];for(const G of k)D.push({wrappedTileID:G.tileID.wrapped().key,queryResults:G.tile.queryRenderedFeatures(A,h,m._state,G.queryGeometry,G.cameraQueryGeometry,G.scale,y,B,S,ut(m.transform,G.tileID))});const O=function(G){const Z={},ae={};for(const ne of G){const oe=ne.queryResults,be=ne.wrappedTileID,Te=ae[be]=ae[be]||{};for(const Le in oe){const he=oe[Le],Ke=Te[Le]=Te[Le]||{},Pe=Z[Le]=Z[Le]||[];for(const et of he)Ke[et.featureIndex]||(Ke[et.featureIndex]=!0,Pe.push(et))}}return Z}(D);for(const G in O)O[G].forEach(Z=>{const ae=Z.feature,ne=m.getFeatureState(ae.layer["source-layer"],ae.id);ae.source=ae.layer.source,ae.layer["source-layer"]&&(ae.sourceLayer=ae.layer["source-layer"]),ae.state=ne});return O}function Et(m,A){const h=m.tileID,p=A.tileID;return h.overscaledZ-p.overscaledZ||h.canonical.y-p.canonical.y||h.wrap-p.wrap||h.canonical.x-p.canonical.x}class qt{constructor(A,h){this.tileID=A,this.uid=a.uniqueId(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(A){const h=A+this.timeAdded;h<a.exported.now()||this.fadeEndTime&&h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(A){this.demTexture&&A.saveTileTexture(this.demTexture),this.textures.forEach(h=>A.saveTileTexture(h)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(A,h,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",A){A.featureIndex&&(this.latestFeatureIndex=A.featureIndex,A.rawTileData?(this.latestRawTileData=A.rawTileData,this.latestFeatureIndex.rawTileData=A.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=A.collisionBoxArray,this.buckets=function(y,B){const Q={};if(!B)return Q;for(const S of y){const k=S.layerIds.map(D=>B.getLayer(D)).filter(Boolean);if(k.length!==0){S.layers=k,S.stateDependentLayerIds&&(S.stateDependentLayers=S.stateDependentLayerIds.map(D=>k.filter(O=>O.id===D)[0]));for(const D of k)Q[D.id]=S}}return Q}(A.buckets,h.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const B=this.buckets[y];if(B instanceof a.SymbolBucket){if(this.hasSymbolBuckets=!0,!p)break;B.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const B=this.buckets[y];if(B instanceof a.SymbolBucket&&B.hasRTLText){this.hasRTLText=!0,a.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const y in this.buckets){const B=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(y).queryRadius(B))}A.imageAtlas&&(this.imageAtlas=A.imageAtlas),A.glyphAtlasImage&&(this.glyphAtlasImage=A.glyphAtlasImage)}else this.collisionBoxArray=new a.CollisionBoxArray}unloadVectorData(){for(const A in this.buckets)this.buckets[A].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(A){return this.buckets[A.id]}upload(A){for(const p in this.buckets){const y=this.buckets[p];y.uploadPending()&&y.upload(A)}const h=A.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new V(A,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new V(A,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(A){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(A,this.imageAtlasTexture)}queryRenderedFeatures(A,h,p,y,B,Q,S,k,D,O){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:B,scale:Q,tileSize:this.tileSize,pixelPosMatrix:O,transform:k,params:S,queryPadding:this.queryPadding*D},A,h,p):{}}querySourceFeatures(A,h){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const y=p.loadVTLayers(),B=h?h.sourceLayer:"",Q=y._geojsonTileLayer||y[B];if(!Q)return;const S=a.createFilter(h&&h.filter),{z:k,x:D,y:O}=this.tileID.canonical,G={z:k,x:D,y:O};for(let Z=0;Z<Q.length;Z++){const ae=Q.feature(Z);if(S.needGeometry){const be=a.toEvaluationFeature(ae,!0);if(!S.filter(new a.EvaluationParameters(this.tileID.overscaledZ),be,this.tileID.canonical))continue}else if(!S.filter(new a.EvaluationParameters(this.tileID.overscaledZ),ae))continue;const ne=p.getId(ae,B),oe=new a.GeoJSONFeature(ae,k,D,O,ne);oe.tile=G,A.push(oe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(A){const h=this.expirationTime;if(A.cacheControl){const p=a.parseCacheControl(A.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else A.expires&&(this.expirationTime=new Date(A.expires).getTime());if(this.expirationTime){const p=Date.now();let y=!1;if(this.expirationTime>p)y=!1;else if(h)if(this.expirationTime<h)y=!0;else{const B=this.expirationTime-h;B?this.expirationTime=p+Math.max(B,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(A,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(A).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!h.style.hasLayer(y))continue;const B=this.buckets[y],Q=B.layers[0].sourceLayer||"_geojsonTileLayer",S=p[Q],k=A[Q];if(!S||!k||Object.keys(k).length===0)continue;B.update(k,S,this.imageAtlas&&this.imageAtlas.patternPositions||{});const D=h&&h.style&&h.style.getLayer(y);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(B)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(A){this.symbolFadeHoldUntil=a.exported.now()+A}setDependencies(A,h){const p={};for(const y of h)p[y]=!0;this.dependencies[A]=p}hasDependency(A,h){for(const p of A){const y=this.dependencies[p];if(y){for(const B of h)if(y[B])return!0}}return!1}}class Tt{constructor(A,h){this.max=A,this.onRemove=h,this.reset()}reset(){for(const A in this.data)for(const h of this.data[A])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(A,h,p){const y=A.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const B={value:h,timeout:void 0};if(p!==void 0&&(B.timeout=setTimeout(()=>{this.remove(A,B)},p)),this.data[y].push(B),this.order.push(y),this.order.length>this.max){const Q=this._getAndRemoveByKey(this.order[0]);Q&&this.onRemove(Q)}return this}has(A){return A.wrapped().key in this.data}getAndRemove(A){return this.has(A)?this._getAndRemoveByKey(A.wrapped().key):null}_getAndRemoveByKey(A){const h=this.data[A].shift();return h.timeout&&clearTimeout(h.timeout),this.data[A].length===0&&delete this.data[A],this.order.splice(this.order.indexOf(A),1),h.value}getByKey(A){const h=this.data[A];return h?h[0].value:null}get(A){return this.has(A)?this.data[A.wrapped().key][0].value:null}remove(A,h){if(!this.has(A))return this;const p=A.wrapped().key,y=h===void 0?0:this.data[p].indexOf(h),B=this.data[p][y];return this.data[p].splice(y,1),B.timeout&&clearTimeout(B.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(B.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(A){for(this.max=A;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(A){const h=[];for(const p in this.data)for(const y of this.data[p])A(y.value)||h.push(y);for(const p of h)this.remove(p.value.tileID,p)}}class tr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(A,h,p){const y=String(h);if(this.stateChanges[A]=this.stateChanges[A]||{},this.stateChanges[A][y]=this.stateChanges[A][y]||{},a.extend(this.stateChanges[A][y],p),this.deletedStates[A]===null){this.deletedStates[A]={};for(const B in this.state[A])B!==y&&(this.deletedStates[A][B]=null)}else if(this.deletedStates[A]&&this.deletedStates[A][y]===null){this.deletedStates[A][y]={};for(const B in this.state[A][y])p[B]||(this.deletedStates[A][y][B]=null)}else for(const B in p)this.deletedStates[A]&&this.deletedStates[A][y]&&this.deletedStates[A][y][B]===null&&delete this.deletedStates[A][y][B]}removeFeatureState(A,h,p){if(this.deletedStates[A]===null)return;const y=String(h);if(this.deletedStates[A]=this.deletedStates[A]||{},p&&h!==void 0)this.deletedStates[A][y]!==null&&(this.deletedStates[A][y]=this.deletedStates[A][y]||{},this.deletedStates[A][y][p]=null);else if(h!==void 0)if(this.stateChanges[A]&&this.stateChanges[A][y])for(p in this.deletedStates[A][y]={},this.stateChanges[A][y])this.deletedStates[A][y][p]=null;else this.deletedStates[A][y]=null;else this.deletedStates[A]=null}getState(A,h){const p=String(h),y=a.extend({},(this.state[A]||{})[p],(this.stateChanges[A]||{})[p]);if(this.deletedStates[A]===null)return{};if(this.deletedStates[A]){const B=this.deletedStates[A][h];if(B===null)return{};for(const Q in B)delete y[Q]}return y}initializeTileState(A,h){A.setFeatureState(this.state,h)}coalesceChanges(A,h){const p={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const B={};for(const Q in this.stateChanges[y])this.state[y][Q]||(this.state[y][Q]={}),a.extend(this.state[y][Q],this.stateChanges[y][Q]),B[Q]=this.state[y][Q];p[y]=B}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const B={};if(this.deletedStates[y]===null)for(const Q in this.state[y])B[Q]={},this.state[y][Q]={};else for(const Q in this.deletedStates[y]){if(this.deletedStates[y][Q]===null)this.state[y][Q]={};else for(const S of Object.keys(this.deletedStates[y][Q]))delete this.state[y][Q][S];B[Q]=this.state[y][Q]}p[y]=p[y]||{},a.extend(p[y],B)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const y in A)A[y].setFeatureState(p,h)}}class ve extends a.Evented{constructor(A,h,p){super(),this.id=A,this.dispatcher=p,this.on("data",y=>{y.dataType==="source"&&y.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&y.dataType==="source"&&y.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(y,B,Q,S){const k=new Je[B.type](y,B,Q,S);if(k.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${k.id}`);return a.bindAll(["load","abort","unload","serialize","prepare"],k),k}(A,h,p,this),this._tiles={},this._cache=new Tt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new tr}onAdd(A){this.map=A,this._maxTileCacheSize=A?A._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(A)}onRemove(A){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(A)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const A in this._tiles){const h=this._tiles[A];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const A=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,A&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(A,h){return this._source.loadTile(A,h)}_unloadTile(A){if(this._source.unloadTile)return this._source.unloadTile(A,()=>{})}_abortTile(A){this._source.abortTile&&this._source.abortTile(A,()=>{}),this._source.fire(new a.Event("dataabort",{tile:A,coord:A.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(A){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const p=this._tiles[h];p.upload(A),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(A=>A.tileID).sort(ft).map(A=>A.key)}getRenderableIds(A){const h=[];for(const p in this._tiles)this._isIdRenderable(p,A)&&h.push(this._tiles[p]);return A?h.sort((p,y)=>{const B=p.tileID,Q=y.tileID,S=new a.pointGeometry(B.canonical.x,B.canonical.y)._rotate(this.transform.angle),k=new a.pointGeometry(Q.canonical.x,Q.canonical.y)._rotate(this.transform.angle);return B.overscaledZ-Q.overscaledZ||k.y-S.y||k.x-S.x}).map(p=>p.tileID.key):h.map(p=>p.tileID).sort(ft).map(p=>p.key)}hasRenderableParent(A){const h=this.findLoadedParent(A,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(A,h){return this._tiles[A]&&this._tiles[A].hasData()&&!this._coveredTiles[A]&&(h||!this._tiles[A].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const A in this._tiles)this._tiles[A].state!=="errored"&&this._reloadTile(A,"reloading")}}_reloadTile(A,h){const p=this._tiles[A];p&&(p.state!=="loading"&&(p.state=h),this._loadTile(p,this._tileLoaded.bind(this,p,A,h)))}_tileLoaded(A,h,p,y){if(y)return A.state="errored",void(y.status!==404?this._source.fire(new a.ErrorEvent(y,{tile:A})):this.update(this.transform,this.terrain));A.timeAdded=a.exported.now(),p==="expired"&&(A.refreshedUponExpiration=!0),this._setTileReloadTimer(h,A),this.getSource().type==="raster-dem"&&A.dem&&this._backfillDEM(A),this._state.initializeTileState(A,this.map?this.map.painter:null),A.aborted||this._source.fire(new a.Event("data",{dataType:"source",tile:A,coord:A.tileID}))}_backfillDEM(A){const h=this.getRenderableIds();for(let y=0;y<h.length;y++){const B=h[y];if(A.neighboringTiles&&A.neighboringTiles[B]){const Q=this.getTileByID(B);p(A,Q),p(Q,A)}}function p(y,B){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let Q=B.tileID.canonical.x-y.tileID.canonical.x;const S=B.tileID.canonical.y-y.tileID.canonical.y,k=Math.pow(2,y.tileID.canonical.z),D=B.tileID.key;Q===0&&S===0||Math.abs(S)>1||(Math.abs(Q)>1&&(Math.abs(Q+k)===1?Q+=k:Math.abs(Q-k)===1&&(Q-=k)),B.dem&&y.dem&&(y.dem.backfillBorder(B.dem,Q,S),y.neighboringTiles&&y.neighboringTiles[D]&&(y.neighboringTiles[D].backfilled=!0)))}}getTile(A){return this.getTileByID(A.key)}getTileByID(A){return this._tiles[A]}_retainLoadedChildren(A,h,p,y){for(const B in this._tiles){let Q=this._tiles[B];if(y[B]||!Q.hasData()||Q.tileID.overscaledZ<=h||Q.tileID.overscaledZ>p)continue;let S=Q.tileID;for(;Q&&Q.tileID.overscaledZ>h+1;){const D=Q.tileID.scaledTo(Q.tileID.overscaledZ-1);Q=this._tiles[D.key],Q&&Q.hasData()&&(S=D)}let k=S;for(;k.overscaledZ>h;)if(k=k.scaledTo(k.overscaledZ-1),A[k.key]){y[S.key]=S;break}}}findLoadedParent(A,h){if(A.key in this._loadedParentTiles){const p=this._loadedParentTiles[A.key];return p&&p.tileID.overscaledZ>=h?p:null}for(let p=A.overscaledZ-1;p>=h;p--){const y=A.scaledTo(p),B=this._getLoadedTile(y);if(B)return B}}_getLoadedTile(A){const h=this._tiles[A.key];return h&&h.hasData()?h:this._cache.getByKey(A.wrapped().key)}updateCacheSize(A){const h=Math.ceil(A.width/this._source.tileSize)+1,p=Math.ceil(A.height/this._source.tileSize)+1,y=Math.floor(h*p*5),B=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(B)}handleWrapJump(A){const h=Math.round((A-(this._prevLng===void 0?A:this._prevLng))/360);if(this._prevLng=A,h){const p={};for(const y in this._tiles){const B=this._tiles[y];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+h),p[B.tileID.key]=B}this._tiles=p;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}update(A,h){if(this.transform=A,this.terrain=h,!this._sourceLoaded||this._paused)return;let p;this.updateCacheSize(A),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=A.getVisibleUnwrappedCoordinates(this._source.tileID).map(D=>new a.OverscaledTileID(D.canonical.z,D.wrap,D.canonical.z,D.canonical.x,D.canonical.y)):(p=A.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h}),this._source.hasTile&&(p=p.filter(D=>this._source.hasTile(D)))):p=[];const y=A.coveringZoomLevel(this._source),B=Math.max(y-ve.maxOverzooming,this._source.minzoom),Q=Math.max(y+ve.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const D={};for(const O of p)if(O.canonical.z>this._source.minzoom){const G=O.scaledTo(O.canonical.z-1);D[G.key]=G;const Z=O.scaledTo(Math.max(this._source.minzoom,Math.min(O.canonical.z,5)));D[Z.key]=Z}p=p.concat(Object.values(D))}const S=this._updateRetainedTiles(p,y);if(Ft(this._source.type)){const D={},O={},G=Object.keys(S);for(const Z of G){const ae=S[Z],ne=this._tiles[Z];if(!ne||ne.fadeEndTime&&ne.fadeEndTime<=a.exported.now())continue;const oe=this.findLoadedParent(ae,B);oe&&(this._addTile(oe.tileID),D[oe.tileID.key]=oe.tileID),O[Z]=ae}this._retainLoadedChildren(O,y,Q,S);for(const Z in D)S[Z]||(this._coveredTiles[Z]=!0,S[Z]=D[Z]);if(h){const Z={},ae={};for(const ne of p)this._tiles[ne.key].hasData()?Z[ne.key]=ne:ae[ne.key]=ne;for(const ne in ae){const oe=ae[ne].children(this._source.maxzoom);this._tiles[oe[0].key]&&this._tiles[oe[1].key]&&this._tiles[oe[2].key]&&this._tiles[oe[3].key]&&(Z[oe[0].key]=S[oe[0].key]=oe[0],Z[oe[1].key]=S[oe[1].key]=oe[1],Z[oe[2].key]=S[oe[2].key]=oe[2],Z[oe[3].key]=S[oe[3].key]=oe[3],delete ae[ne])}for(const ne in ae){const oe=this.findLoadedParent(ae[ne],this._source.minzoom);if(oe){Z[oe.tileID.key]=S[oe.tileID.key]=oe.tileID;for(const be in Z)Z[be].isChildOf(oe.tileID)&&delete Z[be]}}for(const ne in this._tiles)Z[ne]||(this._coveredTiles[ne]=!0)}}for(const D in S)this._tiles[D].clearFadeHold();const k=a.keysDifference(this._tiles,S);for(const D of k){const O=this._tiles[D];O.hasSymbolBuckets&&!O.holdingForFade()?O.setHoldDuration(this.map._fadeDuration):O.hasSymbolBuckets&&!O.symbolFadeFinished()||this._removeTile(D)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const A in this._tiles)this._tiles[A].holdingForFade()&&this._removeTile(A)}_updateRetainedTiles(A,h){const p={},y={},B=Math.max(h-ve.maxOverzooming,this._source.minzoom),Q=Math.max(h+ve.maxUnderzooming,this._source.minzoom),S={};for(const k of A){const D=this._addTile(k);p[k.key]=k,D.hasData()||h<this._source.maxzoom&&(S[k.key]=k)}this._retainLoadedChildren(S,h,Q,p);for(const k of A){let D=this._tiles[k.key];if(D.hasData())continue;if(h+1>this._source.maxzoom){const G=k.children(this._source.maxzoom)[0],Z=this.getTile(G);if(Z&&Z.hasData()){p[G.key]=G;continue}}else{const G=k.children(this._source.maxzoom);if(p[G[0].key]&&p[G[1].key]&&p[G[2].key]&&p[G[3].key])continue}let O=D.wasRequested();for(let G=k.overscaledZ-1;G>=B;--G){const Z=k.scaledTo(G);if(y[Z.key]||(y[Z.key]=!0,D=this.getTile(Z),!D&&O&&(D=this._addTile(Z)),D&&(p[Z.key]=Z,O=D.wasRequested(),D.hasData())))break}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const A in this._tiles){const h=[];let p,y=this._tiles[A].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){p=this._loadedParentTiles[y.key];break}h.push(y.key);const B=y.scaledTo(y.overscaledZ-1);if(p=this._getLoadedTile(B),p)break;y=B}for(const B of h)this._loadedParentTiles[B]=p}}_addTile(A){let h=this._tiles[A.key];if(h)return h;h=this._cache.getAndRemove(A),h&&(this._setTileReloadTimer(A.key,h),h.tileID=A,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[A.key]&&(clearTimeout(this._cacheTimers[A.key]),delete this._cacheTimers[A.key],this._setTileReloadTimer(A.key,h)));const p=h;return h||(h=new qt(A,this._source.tileSize*A.overscaleFactor()),this._loadTile(h,this._tileLoaded.bind(this,h,A.key,h.state))),h.uses++,this._tiles[A.key]=h,p||this._source.fire(new a.Event("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(A,h){A in this._timers&&(clearTimeout(this._timers[A]),delete this._timers[A]);const p=h.getExpiryTimeout();p&&(this._timers[A]=setTimeout(()=>{this._reloadTile(A,"expired"),delete this._timers[A]},p))}_removeTile(A){const h=this._tiles[A];h&&(h.uses--,delete this._tiles[A],this._timers[A]&&(clearTimeout(this._timers[A]),delete this._timers[A]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const A in this._tiles)this._removeTile(A);this._cache.reset()}tilesIn(A,h,p){const y=[],B=this.transform;if(!B)return y;const Q=p?B.getCameraQueryGeometry(A):A,S=A.map(ne=>B.pointCoordinate(ne,this.terrain)),k=Q.map(ne=>B.pointCoordinate(ne,this.terrain)),D=this.getIds();let O=1/0,G=1/0,Z=-1/0,ae=-1/0;for(const ne of k)O=Math.min(O,ne.x),G=Math.min(G,ne.y),Z=Math.max(Z,ne.x),ae=Math.max(ae,ne.y);for(let ne=0;ne<D.length;ne++){const oe=this._tiles[D[ne]];if(oe.holdingForFade())continue;const be=oe.tileID,Te=Math.pow(2,B.zoom-oe.tileID.overscaledZ),Le=h*oe.queryPadding*a.EXTENT/oe.tileSize/Te,he=[be.getTilePoint(new a.MercatorCoordinate(O,G)),be.getTilePoint(new a.MercatorCoordinate(Z,ae))];if(he[0].x-Le<a.EXTENT&&he[0].y-Le<a.EXTENT&&he[1].x+Le>=0&&he[1].y+Le>=0){const Ke=S.map(et=>be.getTilePoint(et)),Pe=k.map(et=>be.getTilePoint(et));y.push({tile:oe,tileID:be,queryGeometry:Ke,cameraQueryGeometry:Pe,scale:Te})}}return y}getVisibleCoordinates(A){const h=this.getRenderableIds(A).map(p=>this._tiles[p].tileID);for(const p of h)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return h}hasTransition(){if(this._source.hasTransition())return!0;if(Ft(this._source.type))for(const A in this._tiles){const h=this._tiles[A];if(h.fadeEndTime!==void 0&&h.fadeEndTime>=a.exported.now())return!0}return!1}setFeatureState(A,h,p){this._state.updateState(A=A||"_geojsonTileLayer",h,p)}removeFeatureState(A,h,p){this._state.removeFeatureState(A=A||"_geojsonTileLayer",h,p)}getFeatureState(A,h){return this._state.getState(A=A||"_geojsonTileLayer",h)}setDependencies(A,h,p){const y=this._tiles[A];y&&y.setDependencies(h,p)}reloadTilesForDependencies(A,h){for(const p in this._tiles)this._tiles[p].hasDependency(A,h)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(A,h))}}function ft(m,A){const h=Math.abs(2*m.wrap)-+(m.wrap<0),p=Math.abs(2*A.wrap)-+(A.wrap<0);return m.overscaledZ-A.overscaledZ||p-h||A.canonical.y-m.canonical.y||A.canonical.x-m.canonical.x}function Ft(m){return m==="raster"||m==="image"||m==="video"}ve.maxOverzooming=10,ve.maxUnderzooming=3;const qe="mapboxgl_preloaded_worker_pool";class Gt{constructor(){this.active={}}acquire(A){if(!this.workers)for(this.workers=[];this.workers.length<Gt.workerCount;)this.workers.push(new Worker(UA.workerUrl));return this.active[A]=!0,this.workers.slice()}release(A){delete this.active[A],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[qe]}numActive(){return Object.keys(this.active).length}}const xe=Math.floor(a.exported.hardwareConcurrency/2);let Ge;function nr(){return Ge||(Ge=new Gt),Ge}function mr(m,A){const h={};for(const p in m)p!=="ref"&&(h[p]=m[p]);return a.refProperties.forEach(p=>{p in A&&(h[p]=A[p])}),h}function ti(m){m=m.slice();const A=Object.create(null);for(let h=0;h<m.length;h++)A[m[h].id]=m[h];for(let h=0;h<m.length;h++)"ref"in m[h]&&(m[h]=mr(m[h],A[m[h].ref]));return m}Gt.workerCount=Math.max(Math.min(xe,6),1);const er={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Vr(m,A,h){h.push({command:er.addSource,args:[m,A[m]]})}function bi(m,A,h){A.push({command:er.removeSource,args:[m]}),h[m]=!0}function Ai(m,A,h,p){bi(m,h,p),Vr(m,A,h)}function mi(m,A,h){let p;for(p in m[h])if(Object.prototype.hasOwnProperty.call(m[h],p)&&p!=="data"&&!E(m[h][p],A[h][p]))return!1;for(p in A[h])if(Object.prototype.hasOwnProperty.call(A[h],p)&&p!=="data"&&!E(m[h][p],A[h][p]))return!1;return!0}function oi(m,A,h,p,y,B){let Q;for(Q in A=A||{},m=m||{})Object.prototype.hasOwnProperty.call(m,Q)&&(E(m[Q],A[Q])||h.push({command:B,args:[p,Q,A[Q],y]}));for(Q in A)Object.prototype.hasOwnProperty.call(A,Q)&&!Object.prototype.hasOwnProperty.call(m,Q)&&(E(m[Q],A[Q])||h.push({command:B,args:[p,Q,A[Q],y]}))}function ai(m){return m.id}function fi(m,A){return m[A.id]=A,m}class li{constructor(A,h){this.reset(A,h)}reset(A,h){this.points=A||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(A){if(this.points.length===1)return this.points[0];A=a.clamp(A,0,1);let h=1,p=this._distances[h];const y=A*this.paddedLength+this.padding;for(;p<y&&h<this._distances.length;)p=this._distances[++h];const B=h-1,Q=this._distances[B],S=p-Q,k=S>0?(y-Q)/S:0;return this.points[B].mult(1-k).add(this.points[h].mult(k))}}function Ze(m,A){let h=!0;return m==="always"||m!=="never"&&A!=="never"||(h=!1),h}class mt{constructor(A,h,p){const y=this.boxCells=[],B=this.circleCells=[];this.xCellCount=Math.ceil(A/p),this.yCellCount=Math.ceil(h/p);for(let Q=0;Q<this.xCellCount*this.yCellCount;Q++)y.push([]),B.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=A,this.height=h,this.xScale=this.xCellCount/A,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(A,h,p,y,B){this._forEachCell(h,p,y,B,this._insertBoxCell,this.boxUid++),this.boxKeys.push(A),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(y),this.bboxes.push(B)}insertCircle(A,h,p,y){this._forEachCell(h-y,p-y,h+y,p+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(A),this.circles.push(h),this.circles.push(p),this.circles.push(y)}_insertBoxCell(A,h,p,y,B,Q){this.boxCells[B].push(Q)}_insertCircleCell(A,h,p,y,B,Q){this.circleCells[B].push(Q)}_query(A,h,p,y,B,Q,S){if(p<0||A>this.width||y<0||h>this.height)return[];const k=[];if(A<=0&&h<=0&&this.width<=p&&this.height<=y){if(B)return[{key:null,x1:A,y1:h,x2:p,y2:y}];for(let D=0;D<this.boxKeys.length;D++)k.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const O=this.circles[3*D],G=this.circles[3*D+1],Z=this.circles[3*D+2];k.push({key:this.circleKeys[D],x1:O-Z,y1:G-Z,x2:O+Z,y2:G+Z})}}else this._forEachCell(A,h,p,y,this._queryCell,k,{hitTest:B,overlapMode:Q,seenUids:{box:{},circle:{}}},S);return k}query(A,h,p,y){return this._query(A,h,p,y,!1,null)}hitTest(A,h,p,y,B,Q){return this._query(A,h,p,y,!0,B,Q).length>0}hitTestCircle(A,h,p,y,B){const Q=A-p,S=A+p,k=h-p,D=h+p;if(S<0||Q>this.width||D<0||k>this.height)return!1;const O=[];return this._forEachCell(Q,k,S,D,this._queryCellCircle,O,{hitTest:!0,overlapMode:y,circle:{x:A,y:h,radius:p},seenUids:{box:{},circle:{}}},B),O.length>0}_queryCell(A,h,p,y,B,Q,S,k){const{seenUids:D,hitTest:O,overlapMode:G}=S,Z=this.boxCells[B];if(Z!==null){const ne=this.bboxes;for(const oe of Z)if(!D.box[oe]){D.box[oe]=!0;const be=4*oe,Te=this.boxKeys[oe];if(A<=ne[be+2]&&h<=ne[be+3]&&p>=ne[be+0]&&y>=ne[be+1]&&(!k||k(Te))&&(!O||!Ze(G,Te.overlapMode))&&(Q.push({key:Te,x1:ne[be],y1:ne[be+1],x2:ne[be+2],y2:ne[be+3]}),O))return!0}}const ae=this.circleCells[B];if(ae!==null){const ne=this.circles;for(const oe of ae)if(!D.circle[oe]){D.circle[oe]=!0;const be=3*oe,Te=this.circleKeys[oe];if(this._circleAndRectCollide(ne[be],ne[be+1],ne[be+2],A,h,p,y)&&(!k||k(Te))&&(!O||!Ze(G,Te.overlapMode))){const Le=ne[be],he=ne[be+1],Ke=ne[be+2];if(Q.push({key:Te,x1:Le-Ke,y1:he-Ke,x2:Le+Ke,y2:he+Ke}),O)return!0}}}return!1}_queryCellCircle(A,h,p,y,B,Q,S,k){const{circle:D,seenUids:O,overlapMode:G}=S,Z=this.boxCells[B];if(Z!==null){const ne=this.bboxes;for(const oe of Z)if(!O.box[oe]){O.box[oe]=!0;const be=4*oe,Te=this.boxKeys[oe];if(this._circleAndRectCollide(D.x,D.y,D.radius,ne[be+0],ne[be+1],ne[be+2],ne[be+3])&&(!k||k(Te))&&!Ze(G,Te.overlapMode))return Q.push(!0),!0}}const ae=this.circleCells[B];if(ae!==null){const ne=this.circles;for(const oe of ae)if(!O.circle[oe]){O.circle[oe]=!0;const be=3*oe,Te=this.circleKeys[oe];if(this._circlesCollide(ne[be],ne[be+1],ne[be+2],D.x,D.y,D.radius)&&(!k||k(Te))&&!Ze(G,Te.overlapMode))return Q.push(!0),!0}}}_forEachCell(A,h,p,y,B,Q,S,k){const D=this._convertToXCellCoord(A),O=this._convertToYCellCoord(h),G=this._convertToXCellCoord(p),Z=this._convertToYCellCoord(y);for(let ae=D;ae<=G;ae++)for(let ne=O;ne<=Z;ne++)if(B.call(this,A,h,p,y,this.xCellCount*ne+ae,Q,S,k))return}_convertToXCellCoord(A){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(A*this.xScale)))}_convertToYCellCoord(A){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(A*this.yScale)))}_circlesCollide(A,h,p,y,B,Q){const S=y-A,k=B-h,D=p+Q;return D*D>S*S+k*k}_circleAndRectCollide(A,h,p,y,B,Q,S){const k=(Q-y)/2,D=Math.abs(A-(y+k));if(D>k+p)return!1;const O=(S-B)/2,G=Math.abs(h-(B+O));if(G>O+p)return!1;if(D<=k||G<=O)return!0;const Z=D-k,ae=G-O;return Z*Z+ae*ae<=p*p}}function _i(m,A,h,p,y){const B=a.create();return A?(a.scale(B,B,[1/y,1/y,1]),h||a.rotateZ(B,B,p.angle)):a.multiply(B,p.labelPlaneMatrix,m),B}function ci(m,A,h,p,y){if(A){const B=a.clone(m);return a.scale(B,B,[y,y,1]),h||a.rotateZ(B,B,-p.angle),B}return p.glCoordMatrix}function Ar(m,A,h){let p;h?(p=[m.x,m.y,h(m.x,m.y),1],a.transformMat4(p,p,A)):(p=[m.x,m.y,0,1],Oe(p,p,A));const y=p[3];return{point:new a.pointGeometry(p[0]/y,p[1]/y),signedDistanceFromCamera:y}}function yi(m,A){return .5+m/A*.5}function Xe(m,A){const h=m[0]/m[3],p=m[1]/m[3];return h>=-A[0]&&h<=A[0]&&p>=-A[1]&&p<=A[1]}function Hr(m,A,h,p,y,B,Q,S,k,D){const O=p?m.textSizeData:m.iconSizeData,G=a.evaluateSizeForZoom(O,h.transform.zoom),Z=[256/h.width*2+1,256/h.height*2+1],ae=p?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;ae.clear();const ne=m.lineVertexArray,oe=p?m.text.placedSymbolArray:m.icon.placedSymbolArray,be=h.transform.width/h.transform.height;let Te=!1;for(let Le=0;Le<oe.length;Le++){const he=oe.get(Le);if(he.hidden||he.writingMode===a.WritingMode.vertical&&!Te){rr(he.numGlyphs,ae);continue}let Ke;if(Te=!1,D?(Ke=[he.anchorX,he.anchorY,D(he.anchorX,he.anchorY),1],a.transformMat4(Ke,Ke,A)):(Ke=[he.anchorX,he.anchorY,0,1],Oe(Ke,Ke,A)),!Xe(Ke,Z)){rr(he.numGlyphs,ae);continue}const Pe=yi(h.transform.cameraToCenterDistance,Ke[3]),et=a.evaluateSizeForFeature(O,G,he),rt=Q?et/Pe:et*Pe,pt=new a.pointGeometry(he.anchorX,he.anchorY),Ye=Ar(pt,y,D).point,St={},Bt=Ot(he,rt,!1,S,A,y,B,m.glyphOffsetArray,ne,ae,Ye,pt,St,be,k,D);Te=Bt.useVertical,(Bt.notEnoughRoom||Te||Bt.needsFlipping&&Ot(he,rt,!0,S,A,y,B,m.glyphOffsetArray,ne,ae,Ye,pt,St,be,k,D).notEnoughRoom)&&rr(he.numGlyphs,ae)}p?m.text.dynamicLayoutVertexBuffer.updateData(ae):m.icon.dynamicLayoutVertexBuffer.updateData(ae)}function Gr(m,A,h,p,y,B,Q,S,k,D,O,G,Z){const ae=S.glyphStartIndex+S.numGlyphs,ne=S.lineStartIndex,oe=S.lineStartIndex+S.lineLength,be=A.getoffsetX(S.glyphStartIndex),Te=A.getoffsetX(ae-1),Le=Ir(m*be,h,p,y,B,Q,S.segment,ne,oe,k,D,O,G,Z);if(!Le)return null;const he=Ir(m*Te,h,p,y,B,Q,S.segment,ne,oe,k,D,O,G,Z);return he?{first:Le,last:he}:null}function me(m,A,h,p){return m===a.WritingMode.horizontal&&Math.abs(h.y-A.y)>Math.abs(h.x-A.x)*p?{useVertical:!0}:(m===a.WritingMode.vertical?A.y<h.y:A.x>h.x)?{needsFlipping:!0}:null}function Ot(m,A,h,p,y,B,Q,S,k,D,O,G,Z,ae,ne,oe){const be=A/24,Te=m.lineOffsetX*be,Le=m.lineOffsetY*be;let he;if(m.numGlyphs>1){const Ke=m.glyphStartIndex+m.numGlyphs,Pe=m.lineStartIndex,et=m.lineStartIndex+m.lineLength,rt=Gr(be,S,Te,Le,h,O,G,m,k,B,Z,ne,oe);if(!rt)return{notEnoughRoom:!0};const pt=Ar(rt.first.point,Q,oe).point,Ye=Ar(rt.last.point,Q,oe).point;if(p&&!h){const St=me(m.writingMode,pt,Ye,ae);if(St)return St}he=[rt.first];for(let St=m.glyphStartIndex+1;St<Ke-1;St++)he.push(Ir(be*S.getoffsetX(St),Te,Le,h,O,G,m.segment,Pe,et,k,B,Z,ne,oe));he.push(rt.last)}else{if(p&&!h){const Pe=Ar(G,y,oe).point,et=m.lineStartIndex+m.segment+1,rt=new a.pointGeometry(k.getx(et),k.gety(et)),pt=Ar(rt,y,oe),Ye=pt.signedDistanceFromCamera>0?pt.point:Kt(G,rt,Pe,1,y,oe),St=me(m.writingMode,Pe,Ye,ae);if(St)return St}const Ke=Ir(be*S.getoffsetX(m.glyphStartIndex),Te,Le,h,O,G,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,k,B,Z,ne,oe);if(!Ke)return{notEnoughRoom:!0};he=[Ke]}for(const Ke of he)a.addDynamicAttributes(D,Ke.point,Ke.angle);return{}}function Kt(m,A,h,p,y,B){const Q=Ar(m.add(m.sub(A)._unit()),y,B).point,S=h.sub(Q);return h.add(S._mult(p/S.mag()))}function Ir(m,A,h,p,y,B,Q,S,k,D,O,G,Z,ae){const ne=p?m-A:m+A;let oe=ne>0?1:-1,be=0;p&&(oe*=-1,be=Math.PI),oe<0&&(be+=Math.PI);let Te=oe>0?S+Q:S+Q+1,Le=y,he=y,Ke=0,Pe=0;const et=Math.abs(ne),rt=[];for(;Ke+Pe<=et;){if(Te+=oe,Te<S||Te>=k)return null;if(he=Le,rt.push(Le),Le=G[Te],Le===void 0){const kt=new a.pointGeometry(D.getx(Te),D.gety(Te)),lr=Ar(kt,O,ae);if(lr.signedDistanceFromCamera>0)Le=G[Te]=lr.point;else{const cr=Te-oe;Le=Kt(Ke===0?B:new a.pointGeometry(D.getx(cr),D.gety(cr)),kt,he,et-Ke+1,O,ae)}}Ke+=Pe,Pe=he.dist(Le)}const pt=(et-Ke)/Pe,Ye=Le.sub(he),St=Ye.mult(pt)._add(he);St._add(Ye._unit()._perp()._mult(h*oe));const Bt=be+Math.atan2(Le.y-he.y,Le.x-he.x);return rt.push(St),{point:St,angle:Z?Bt:0,path:rt}}const wr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function rr(m,A){for(let h=0;h<m;h++){const p=A.length;A.resize(p+4),A.float32.set(wr,3*p)}}function Oe(m,A,h){const p=A[0],y=A[1];return m[0]=h[0]*p+h[4]*y+h[12],m[1]=h[1]*p+h[5]*y+h[13],m[3]=h[3]*p+h[7]*y+h[15],m}const kr=100;class en{constructor(A,h=new mt(A.width+200,A.height+200,25),p=new mt(A.width+200,A.height+200,25)){this.transform=A,this.grid=h,this.ignoredGrid=p,this.pitchfactor=Math.cos(A._pitch)*A.cameraToCenterDistance,this.screenRightBoundary=A.width+kr,this.screenBottomBoundary=A.height+kr,this.gridRightBoundary=A.width+200,this.gridBottomBoundary=A.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(A,h,p,y,B,Q){const S=this.projectAndGetPerspectiveRatio(y,A.anchorPointX,A.anchorPointY,Q),k=p*S.perspectiveRatio,D=A.x1*k+S.point.x,O=A.y1*k+S.point.y,G=A.x2*k+S.point.x,Z=A.y2*k+S.point.y;return!this.isInsideGrid(D,O,G,Z)||h!=="always"&&this.grid.hitTest(D,O,G,Z,h,B)||S.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[D,O,G,Z],offscreen:this.isOffscreen(D,O,G,Z)}}placeCollisionCircles(A,h,p,y,B,Q,S,k,D,O,G,Z,ae,ne){const oe=[],be=new a.pointGeometry(h.anchorX,h.anchorY),Te=Ar(be,Q,ne),Le=yi(this.transform.cameraToCenterDistance,Te.signedDistanceFromCamera),he=(O?B/Le:B*Le)/a.ONE_EM,Ke=Ar(be,S,ne).point,Pe=Gr(he,y,h.lineOffsetX*he,h.lineOffsetY*he,!1,Ke,be,h,p,S,{},!1,ne);let et=!1,rt=!1,pt=!0;if(Pe){const Ye=.5*Z*Le+ae,St=new a.pointGeometry(-100,-100),Bt=new a.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),kt=new li,lr=Pe.first,cr=Pe.last;let Jt=[];for(let Br=lr.path.length-1;Br>=1;Br--)Jt.push(lr.path[Br]);for(let Br=1;Br<cr.path.length;Br++)Jt.push(cr.path[Br]);const Zr=2.5*Ye;if(k){const Br=Jt.map(br=>Ar(br,k,ne));Jt=Br.some(br=>br.signedDistanceFromCamera<=0)?[]:Br.map(br=>br.point)}let Wr=[];if(Jt.length>0){const Br=Jt[0].clone(),br=Jt[0].clone();for(let $r=1;$r<Jt.length;$r++)Br.x=Math.min(Br.x,Jt[$r].x),Br.y=Math.min(Br.y,Jt[$r].y),br.x=Math.max(br.x,Jt[$r].x),br.y=Math.max(br.y,Jt[$r].y);Wr=Br.x>=St.x&&br.x<=Bt.x&&Br.y>=St.y&&br.y<=Bt.y?[Jt]:br.x<St.x||Br.x>Bt.x||br.y<St.y||Br.y>Bt.y?[]:a.clipLine([Jt],St.x,St.y,Bt.x,Bt.y)}for(const Br of Wr){kt.reset(Br,.25*Ye);let br=0;br=kt.length<=.5*Ye?1:Math.ceil(kt.paddedLength/Zr)+1;for(let $r=0;$r<br;$r++){const Zi=$r/Math.max(br-1,1),ys=kt.lerp(Zi),ls=ys.x+kr,ws=ys.y+kr;oe.push(ls,ws,Ye,0);const uA=ls-Ye,jn=ws-Ye,bn=ls+Ye,Rs=ws+Ye;if(pt=pt&&this.isOffscreen(uA,jn,bn,Rs),rt=rt||this.isInsideGrid(uA,jn,bn,Rs),A!=="always"&&this.grid.hitTestCircle(ls,ws,Ye,A,G)&&(et=!0,!D))return{circles:[],offscreen:!1,collisionDetected:et}}}}return{circles:!D&&et||!rt||Le<this.perspectiveRatioCutoff?[]:oe,offscreen:pt,collisionDetected:et}}queryRenderedSymbols(A){if(A.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let p=1/0,y=1/0,B=-1/0,Q=-1/0;for(const O of A){const G=new a.pointGeometry(O.x+kr,O.y+kr);p=Math.min(p,G.x),y=Math.min(y,G.y),B=Math.max(B,G.x),Q=Math.max(Q,G.y),h.push(G)}const S=this.grid.query(p,y,B,Q).concat(this.ignoredGrid.query(p,y,B,Q)),k={},D={};for(const O of S){const G=O.key;if(k[G.bucketInstanceId]===void 0&&(k[G.bucketInstanceId]={}),k[G.bucketInstanceId][G.featureIndex])continue;const Z=[new a.pointGeometry(O.x1,O.y1),new a.pointGeometry(O.x2,O.y1),new a.pointGeometry(O.x2,O.y2),new a.pointGeometry(O.x1,O.y2)];a.polygonIntersectsPolygon(h,Z)&&(k[G.bucketInstanceId][G.featureIndex]=!0,D[G.bucketInstanceId]===void 0&&(D[G.bucketInstanceId]=[]),D[G.bucketInstanceId].push(G.featureIndex))}return D}insertCollisionBox(A,h,p,y,B,Q){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:B,collisionGroupID:Q,overlapMode:h},A[0],A[1],A[2],A[3])}insertCollisionCircles(A,h,p,y,B,Q){const S=p?this.ignoredGrid:this.grid,k={bucketInstanceId:y,featureIndex:B,collisionGroupID:Q,overlapMode:h};for(let D=0;D<A.length;D+=4)S.insertCircle(k,A[D],A[D+1],A[D+2])}projectAndGetPerspectiveRatio(A,h,p,y){let B;return y?(B=[h,p,y(h,p),1],a.transformMat4(B,B,A)):(B=[h,p,0,1],Oe(B,B,A)),{point:new a.pointGeometry((B[0]/B[3]+1)/2*this.transform.width+kr,(-B[1]/B[3]+1)/2*this.transform.height+kr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/B[3]*.5}}isOffscreen(A,h,p,y){return p<kr||A>=this.screenRightBoundary||y<kr||h>this.screenBottomBoundary}isInsideGrid(A,h,p,y){return p>=0&&A<this.gridRightBoundary&&y>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const A=a.identity([]);return a.translate(A,A,[-100,-100,0]),A}}function ri(m,A,h){return A*(a.EXTENT/(m.tileSize*Math.pow(2,h-m.tileID.overscaledZ)))}class Pr{constructor(A,h,p,y){this.opacity=A?Math.max(0,Math.min(1,A.opacity+(A.placed?h:-h))):y&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class vr{constructor(A,h,p,y,B){this.text=new Pr(A?A.text:null,h,p,B),this.icon=new Pr(A?A.icon:null,h,y,B)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Tn{constructor(A,h,p){this.text=A,this.icon=h,this.skipFade=p}}class tn{constructor(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]}}class Gn{constructor(A,h,p,y,B){this.bucketInstanceId=A,this.featureIndex=h,this.sourceLayerIndex=p,this.bucketIndex=y,this.tileID=B}}class Xn{constructor(A){this.crossSourceCollisions=A,this.maxGroupID=0,this.collisionGroups={}}get(A){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[A]){const h=++this.maxGroupID;this.collisionGroups[A]={ID:h,predicate:p=>p.collisionGroupID===h}}return this.collisionGroups[A]}}function is(m,A,h,p,y){const{horizontalAlign:B,verticalAlign:Q}=a.getAnchorAlignment(m),S=-(B-.5)*A,k=-(Q-.5)*h,D=a.evaluateVariableOffset(m,p);return new a.pointGeometry(S+D[0]*y,k+D[1]*y)}function Zn(m,A,h,p,y,B){const{x1:Q,x2:S,y1:k,y2:D,anchorPointX:O,anchorPointY:G}=m,Z=new a.pointGeometry(A,h);return p&&Z._rotate(y?B:-B),{x1:Q+Z.x,y1:k+Z.y,x2:S+Z.x,y2:D+Z.y,anchorPointX:O,anchorPointY:G}}class te{constructor(A,h,p,y,B){this.transform=A.clone(),this.terrain=h,this.collisionIndex=new en(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Xn(y),this.collisionCircleArrays={},this.prevPlacement=B,B&&(B.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(A,h,p,y){const B=p.getBucket(h),Q=p.latestFeatureIndex;if(!B||!Q||h.id!==B.layerIds[0])return;const S=p.collisionBoxArray,k=B.layers[0].layout,D=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),O=p.tileSize/a.EXTENT,G=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),Z=k.get("text-pitch-alignment")==="map",ae=k.get("text-rotation-alignment")==="map",ne=ri(p,1,this.transform.zoom),oe=_i(G,Z,ae,this.transform,ne);let be=null;if(Z){const Le=ci(G,Z,ae,this.transform,ne);be=a.multiply([],this.transform.labelPlaneMatrix,Le)}this.retainedQueryData[B.bucketInstanceId]=new Gn(B.bucketInstanceId,Q,B.sourceLayerIndex,B.index,p.tileID);const Te={bucket:B,layout:k,posMatrix:G,textLabelPlaneMatrix:oe,labelToScreenMatrix:be,scale:D,textPixelRatio:O,holdingForFade:p.holdingForFade(),collisionBoxArray:S,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(B.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(B.sourceID)};if(y)for(const Le of B.sortKeyRanges){const{sortKey:he,symbolInstanceStart:Ke,symbolInstanceEnd:Pe}=Le;A.push({sortKey:he,symbolInstanceStart:Ke,symbolInstanceEnd:Pe,parameters:Te})}else A.push({symbolInstanceStart:0,symbolInstanceEnd:B.symbolInstances.length,parameters:Te})}attemptAnchorPlacement(A,h,p,y,B,Q,S,k,D,O,G,Z,ae,ne,oe,be){const Te=[Z.textOffset0,Z.textOffset1],Le=is(A,p,y,Te,B),he=this.collisionIndex.placeCollisionBox(Zn(h,Le.x,Le.y,Q,S,this.transform.angle),G,k,D,O.predicate,be);if((!oe||this.collisionIndex.placeCollisionBox(Zn(oe,Le.x,Le.y,Q,S,this.transform.angle),G,k,D,O.predicate,be).box.length!==0)&&he.box.length>0){let Ke;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID].text&&(Ke=this.prevPlacement.variableOffsets[Z.crossTileID].anchor),Z.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Z.crossTileID]={textOffset:Te,width:p,height:y,anchor:A,textBoxScale:B,prevAnchor:Ke},this.markUsedJustification(ae,A,Z,ne),ae.allowVerticalPlacement&&(this.markUsedOrientation(ae,ne,Z),this.placedOrientations[Z.crossTileID]=ne),{shift:Le,placedGlyphBoxes:he}}}placeLayerBucketPart(A,h,p){const{bucket:y,layout:B,posMatrix:Q,textLabelPlaneMatrix:S,labelToScreenMatrix:k,textPixelRatio:D,holdingForFade:O,collisionBoxArray:G,partiallyEvaluatedTextSize:Z,collisionGroup:ae}=A.parameters,ne=B.get("text-optional"),oe=B.get("icon-optional"),be=a.getOverlapMode(B,"text-overlap","text-allow-overlap"),Te=be==="always",Le=a.getOverlapMode(B,"icon-overlap","icon-allow-overlap"),he=Le==="always",Ke=B.get("text-rotation-alignment")==="map",Pe=B.get("text-pitch-alignment")==="map",et=B.get("icon-text-fit")!=="none",rt=B.get("symbol-z-order")==="viewport-y",pt=Te&&(he||!y.hasIconData()||oe),Ye=he&&(Te||!y.hasTextData()||ne);!y.collisionArrays&&G&&y.deserializeCollisionBoxes(G);const St=(Bt,kt)=>{if(h[Bt.crossTileID])return;if(O)return void(this.placements[Bt.crossTileID]=new Tn(!1,!1,!1));let lr=!1,cr=!1,Jt=!0,Zr=null,Wr={box:null,offscreen:null},Br={box:null,offscreen:null},br=null,$r=null,Zi=null,ys=0,ls=0,ws=0;kt.textFeatureIndex?ys=kt.textFeatureIndex:Bt.useRuntimeCollisionCircles&&(ys=Bt.featureIndex),kt.verticalTextFeatureIndex&&(ls=kt.verticalTextFeatureIndex);const uA=this.retainedQueryData[y.bucketInstanceId].tileID,jn=this.terrain?(Ri,dr)=>this.terrain.getElevation(uA,Ri,dr):null;for(const Ri of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const dr=kt[Ri];dr&&(dr.elevation=jn?jn(dr.anchorPointX,dr.anchorPointY):0)}const bn=kt.textBox;if(bn){const Ri=zr=>{let Wi=a.WritingMode.horizontal;if(y.allowVerticalPlacement&&!zr&&this.prevPlacement){const qi=this.prevPlacement.placedOrientations[Bt.crossTileID];qi&&(this.placedOrientations[Bt.crossTileID]=qi,Wi=qi,this.markUsedOrientation(y,Wi,Bt))}return Wi},dr=(zr,Wi)=>{if(y.allowVerticalPlacement&&Bt.numVerticalGlyphVertices>0&&kt.verticalTextBox){for(const qi of y.writingModes)if(qi===a.WritingMode.vertical?(Wr=Wi(),Br=Wr):Wr=zr(),Wr&&Wr.box&&Wr.box.length)break}else Wr=zr()};if(B.get("text-variable-anchor")){let zr=B.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Bt.crossTileID]){const Bi=this.prevPlacement.variableOffsets[Bt.crossTileID];zr.indexOf(Bi.anchor)>0&&(zr=zr.filter(Jn=>Jn!==Bi.anchor),zr.unshift(Bi.anchor))}const Wi=(Bi,Jn,QA)=>{const Gl=Bi.x2-Bi.x1,lo=Bi.y2-Bi.y1,Mu=Bt.textBoxScale,Xl=et&&Le==="never"?Jn:null;let hA={box:[],offscreen:!1};const IA=be!=="never"?2*zr.length:zr.length;for(let TA=0;TA<IA;++TA){const Ha=this.attemptAnchorPlacement(zr[TA%zr.length],Bi,Gl,lo,Mu,Ke,Pe,D,Q,ae,TA>=zr.length?be:"never",Bt,y,QA,Xl,jn);if(Ha&&(hA=Ha.placedGlyphBoxes,hA&&hA.box&&hA.box.length)){lr=!0,Zr=Ha.shift;break}}return hA};dr(()=>Wi(bn,kt.iconBox,a.WritingMode.horizontal),()=>{const Bi=kt.verticalTextBox;return y.allowVerticalPlacement&&!(Wr&&Wr.box&&Wr.box.length)&&Bt.numVerticalGlyphVertices>0&&Bi?Wi(Bi,kt.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),Wr&&(lr=Wr.box,Jt=Wr.offscreen);const qi=Ri(Wr&&Wr.box);if(!lr&&this.prevPlacement){const Bi=this.prevPlacement.variableOffsets[Bt.crossTileID];Bi&&(this.variableOffsets[Bt.crossTileID]=Bi,this.markUsedJustification(y,Bi.anchor,Bt,qi))}}else{const zr=(Wi,qi)=>{const Bi=this.collisionIndex.placeCollisionBox(Wi,be,D,Q,ae.predicate,jn);return Bi&&Bi.box&&Bi.box.length&&(this.markUsedOrientation(y,qi,Bt),this.placedOrientations[Bt.crossTileID]=qi),Bi};dr(()=>zr(bn,a.WritingMode.horizontal),()=>{const Wi=kt.verticalTextBox;return y.allowVerticalPlacement&&Bt.numVerticalGlyphVertices>0&&Wi?zr(Wi,a.WritingMode.vertical):{box:null,offscreen:null}}),Ri(Wr&&Wr.box&&Wr.box.length)}}if(br=Wr,lr=br&&br.box&&br.box.length>0,Jt=br&&br.offscreen,Bt.useRuntimeCollisionCircles){const Ri=y.text.placedSymbolArray.get(Bt.centerJustifiedTextSymbolIndex),dr=a.evaluateSizeForFeature(y.textSizeData,Z,Ri),zr=B.get("text-padding");$r=this.collisionIndex.placeCollisionCircles(be,Ri,y.lineVertexArray,y.glyphOffsetArray,dr,Q,S,k,p,Pe,ae.predicate,Bt.collisionCircleDiameter,zr,jn),$r.circles.length&&$r.collisionDetected&&!p&&a.warnOnce("Collisions detected, but collision boxes are not shown"),lr=Te||$r.circles.length>0&&!$r.collisionDetected,Jt=Jt&&$r.offscreen}if(kt.iconFeatureIndex&&(ws=kt.iconFeatureIndex),kt.iconBox){const Ri=dr=>{const zr=et&&Zr?Zn(dr,Zr.x,Zr.y,Ke,Pe,this.transform.angle):dr;return this.collisionIndex.placeCollisionBox(zr,Le,D,Q,ae.predicate,jn)};Br&&Br.box&&Br.box.length&&kt.verticalIconBox?(Zi=Ri(kt.verticalIconBox),cr=Zi.box.length>0):(Zi=Ri(kt.iconBox),cr=Zi.box.length>0),Jt=Jt&&Zi.offscreen}const Rs=ne||Bt.numHorizontalGlyphVertices===0&&Bt.numVerticalGlyphVertices===0,La=oe||Bt.numIconVertices===0;if(Rs||La?La?Rs||(cr=cr&&lr):lr=cr&&lr:cr=lr=cr&&lr,lr&&br&&br.box&&this.collisionIndex.insertCollisionBox(br.box,be,B.get("text-ignore-placement"),y.bucketInstanceId,Br&&Br.box&&ls?ls:ys,ae.ID),cr&&Zi&&this.collisionIndex.insertCollisionBox(Zi.box,Le,B.get("icon-ignore-placement"),y.bucketInstanceId,ws,ae.ID),$r&&(lr&&this.collisionIndex.insertCollisionCircles($r.circles,be,B.get("text-ignore-placement"),y.bucketInstanceId,ys,ae.ID),p)){const Ri=y.bucketInstanceId;let dr=this.collisionCircleArrays[Ri];dr===void 0&&(dr=this.collisionCircleArrays[Ri]=new tn);for(let zr=0;zr<$r.circles.length;zr+=4)dr.circles.push($r.circles[zr+0]),dr.circles.push($r.circles[zr+1]),dr.circles.push($r.circles[zr+2]),dr.circles.push($r.collisionDetected?1:0)}if(Bt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Bt.crossTileID]=new Tn(lr||pt,cr||Ye,Jt||y.justReloaded),h[Bt.crossTileID]=!0};if(rt){if(A.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Bt=y.getSortedSymbolIndexes(this.transform.angle);for(let kt=Bt.length-1;kt>=0;--kt){const lr=Bt[kt];St(y.symbolInstances.get(lr),y.collisionArrays[lr])}}else for(let Bt=A.symbolInstanceStart;Bt<A.symbolInstanceEnd;Bt++)St(y.symbolInstances.get(Bt),y.collisionArrays[Bt]);if(p&&y.bucketInstanceId in this.collisionCircleArrays){const Bt=this.collisionCircleArrays[y.bucketInstanceId];a.invert(Bt.invProjMatrix,Q),Bt.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}markUsedJustification(A,h,p,y){let B;B=y===a.WritingMode.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(h)];const Q=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const S of Q)S>=0&&(A.text.placedSymbolArray.get(S).crossTileID=B>=0&&S!==B?0:p.crossTileID)}markUsedOrientation(A,h,p){const y=h===a.WritingMode.horizontal||h===a.WritingMode.horizontalOnly?h:0,B=h===a.WritingMode.vertical?h:0,Q=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const S of Q)A.text.placedSymbolArray.get(S).placedOrientation=y;p.verticalPlacedTextSymbolIndex&&(A.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=B)}commit(A){this.commitTime=A,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let p=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const y=h?h.symbolFadeChange(A):1,B=h?h.opacities:{},Q=h?h.variableOffsets:{},S=h?h.placedOrientations:{};for(const k in this.placements){const D=this.placements[k],O=B[k];O?(this.opacities[k]=new vr(O,y,D.text,D.icon),p=p||D.text!==O.text.placed||D.icon!==O.icon.placed):(this.opacities[k]=new vr(null,y,D.text,D.icon,D.skipFade),p=p||D.text||D.icon)}for(const k in B){const D=B[k];if(!this.opacities[k]){const O=new vr(D,y,!1,!1);O.isHidden()||(this.opacities[k]=O,p=p||D.text.placed||D.icon.placed)}}for(const k in Q)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=Q[k]);for(const k in S)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=S[k]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=A:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:A)}updateLayerOpacities(A,h){const p={};for(const y of h){const B=y.getBucket(A);B&&y.latestFeatureIndex&&A.id===B.layerIds[0]&&this.updateBucketOpacities(B,p,y.collisionBoxArray)}}updateBucketOpacities(A,h,p){A.hasTextData()&&A.text.opacityVertexArray.clear(),A.hasIconData()&&A.icon.opacityVertexArray.clear(),A.hasIconCollisionBoxData()&&A.iconCollisionBox.collisionVertexArray.clear(),A.hasTextCollisionBoxData()&&A.textCollisionBox.collisionVertexArray.clear();const y=A.layers[0].layout,B=new vr(null,0,!1,!1,!0),Q=y.get("text-allow-overlap"),S=y.get("icon-allow-overlap"),k=y.get("text-variable-anchor"),D=y.get("text-rotation-alignment")==="map",O=y.get("text-pitch-alignment")==="map",G=y.get("icon-text-fit")!=="none",Z=new vr(null,0,Q&&(S||!A.hasIconData()||y.get("icon-optional")),S&&(Q||!A.hasTextData()||y.get("text-optional")),!0);!A.collisionArrays&&p&&(A.hasIconCollisionBoxData()||A.hasTextCollisionBoxData())&&A.deserializeCollisionBoxes(p);const ae=(ne,oe,be)=>{for(let Te=0;Te<oe/4;Te++)ne.opacityVertexArray.emplaceBack(be)};for(let ne=0;ne<A.symbolInstances.length;ne++){const oe=A.symbolInstances.get(ne),{numHorizontalGlyphVertices:be,numVerticalGlyphVertices:Te,crossTileID:Le}=oe;let he=this.opacities[Le];h[Le]?he=B:he||(he=Z,this.opacities[Le]=he),h[Le]=!0;const Ke=oe.numIconVertices>0,Pe=this.placedOrientations[oe.crossTileID],et=Pe===a.WritingMode.vertical,rt=Pe===a.WritingMode.horizontal||Pe===a.WritingMode.horizontalOnly;if(be>0||Te>0){const pt=Ue(he.text);ae(A.text,be,et?je:pt),ae(A.text,Te,rt?je:pt);const Ye=he.text.isHidden();[oe.rightJustifiedTextSymbolIndex,oe.centerJustifiedTextSymbolIndex,oe.leftJustifiedTextSymbolIndex].forEach(kt=>{kt>=0&&(A.text.placedSymbolArray.get(kt).hidden=Ye||et?1:0)}),oe.verticalPlacedTextSymbolIndex>=0&&(A.text.placedSymbolArray.get(oe.verticalPlacedTextSymbolIndex).hidden=Ye||rt?1:0);const St=this.variableOffsets[oe.crossTileID];St&&this.markUsedJustification(A,St.anchor,oe,Pe);const Bt=this.placedOrientations[oe.crossTileID];Bt&&(this.markUsedJustification(A,"left",oe,Bt),this.markUsedOrientation(A,Bt,oe))}if(Ke){const pt=Ue(he.icon),Ye=!(G&&oe.verticalPlacedIconSymbolIndex&&et);oe.placedIconSymbolIndex>=0&&(ae(A.icon,oe.numIconVertices,Ye?pt:je),A.icon.placedSymbolArray.get(oe.placedIconSymbolIndex).hidden=he.icon.isHidden()),oe.verticalPlacedIconSymbolIndex>=0&&(ae(A.icon,oe.numVerticalIconVertices,Ye?je:pt),A.icon.placedSymbolArray.get(oe.verticalPlacedIconSymbolIndex).hidden=he.icon.isHidden())}if(A.hasIconCollisionBoxData()||A.hasTextCollisionBoxData()){const pt=A.collisionArrays[ne];if(pt){let Ye=new a.pointGeometry(0,0);if(pt.textBox||pt.verticalTextBox){let Bt=!0;if(k){const kt=this.variableOffsets[Le];kt?(Ye=is(kt.anchor,kt.width,kt.height,kt.textOffset,kt.textBoxScale),D&&Ye._rotate(O?this.transform.angle:-this.transform.angle)):Bt=!1}pt.textBox&&L(A.textCollisionBox.collisionVertexArray,he.text.placed,!Bt||et,Ye.x,Ye.y),pt.verticalTextBox&&L(A.textCollisionBox.collisionVertexArray,he.text.placed,!Bt||rt,Ye.x,Ye.y)}const St=!!(!rt&&pt.verticalIconBox);pt.iconBox&&L(A.iconCollisionBox.collisionVertexArray,he.icon.placed,St,G?Ye.x:0,G?Ye.y:0),pt.verticalIconBox&&L(A.iconCollisionBox.collisionVertexArray,he.icon.placed,!St,G?Ye.x:0,G?Ye.y:0)}}}if(A.sortFeatures(this.transform.angle),this.retainedQueryData[A.bucketInstanceId]&&(this.retainedQueryData[A.bucketInstanceId].featureSortOrder=A.featureSortOrder),A.hasTextData()&&A.text.opacityVertexBuffer&&A.text.opacityVertexBuffer.updateData(A.text.opacityVertexArray),A.hasIconData()&&A.icon.opacityVertexBuffer&&A.icon.opacityVertexBuffer.updateData(A.icon.opacityVertexArray),A.hasIconCollisionBoxData()&&A.iconCollisionBox.collisionVertexBuffer&&A.iconCollisionBox.collisionVertexBuffer.updateData(A.iconCollisionBox.collisionVertexArray),A.hasTextCollisionBoxData()&&A.textCollisionBox.collisionVertexBuffer&&A.textCollisionBox.collisionVertexBuffer.updateData(A.textCollisionBox.collisionVertexArray),A.text.opacityVertexArray.length!==A.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${A.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${A.text.layoutVertexArray.length}) / 4`);if(A.icon.opacityVertexArray.length!==A.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${A.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${A.icon.layoutVertexArray.length}) / 4`);if(A.bucketInstanceId in this.collisionCircleArrays){const ne=this.collisionCircleArrays[A.bucketInstanceId];A.placementInvProjMatrix=ne.invProjMatrix,A.placementViewportMatrix=ne.viewportMatrix,A.collisionCircleArray=ne.circles,delete this.collisionCircleArrays[A.bucketInstanceId]}}symbolFadeChange(A){return this.fadeDuration===0?1:(A-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(A){return Math.max(0,(this.transform.zoom-A)/1.5)}hasTransitions(A){return this.stale||A-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(A,h){const p=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*p>A}setStale(){this.stale=!0}}function L(m,A,h,p,y){m.emplaceBack(A?1:0,h?1:0,p||0,y||0),m.emplaceBack(A?1:0,h?1:0,p||0,y||0),m.emplaceBack(A?1:0,h?1:0,p||0,y||0),m.emplaceBack(A?1:0,h?1:0,p||0,y||0)}const N=Math.pow(2,25),J=Math.pow(2,24),$=Math.pow(2,17),ge=Math.pow(2,16),_e=Math.pow(2,9),ye=Math.pow(2,8),de=Math.pow(2,1);function Ue(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const A=m.placed?1:0,h=Math.floor(127*m.opacity);return h*N+A*J+h*$+A*ge+h*_e+A*ye+h*de+A}const je=0;class lt{constructor(A){this._sortAcrossTiles=A.layout.get("symbol-z-order")!=="viewport-y"&&!A.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(A,h,p,y,B){const Q=this._bucketParts;for(;this._currentTileIndex<A.length;)if(h.getBucketParts(Q,y,A[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,B())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Q.sort((S,k)=>S.sortKey-k.sortKey));this._currentPartIndex<Q.length;)if(h.placeLayerBucketPart(Q[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,B())return!0;return!1}}class We{constructor(A,h,p,y,B,Q,S,k){this.placement=new te(A,h,Q,S,k),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=B,this._done=!1}isDone(){return this._done}continuePlacement(A,h,p){const y=a.exported.now(),B=()=>{const Q=a.exported.now()-y;return!this._forceFullPlacement&&Q>2};for(;this._currentPlacementIndex>=0;){const Q=h[A[this._currentPlacementIndex]],S=this.placement.collisionIndex.transform.zoom;if(Q.type==="symbol"&&(!Q.minzoom||Q.minzoom<=S)&&(!Q.maxzoom||Q.maxzoom>S)){if(this._inProgressLayer||(this._inProgressLayer=new lt(Q)),this._inProgressLayer.continuePlacement(p[Q.source],this.placement,this._showCollisionBoxes,Q,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(A){return this.placement.commit(A),this.placement}}const Dt=512/a.EXTENT/2;class Lt{constructor(A,h,p){this.tileID=A,this.indexedSymbolInstances={},this.bucketInstanceId=p;for(let y=0;y<h.length;y++){const B=h.get(y),Q=B.key;this.indexedSymbolInstances[Q]||(this.indexedSymbolInstances[Q]=[]),this.indexedSymbolInstances[Q].push({crossTileID:B.crossTileID,coord:this.getScaledCoordinates(B,A)})}}getScaledCoordinates(A,h){const p=Dt/Math.pow(2,h.canonical.z-this.tileID.canonical.z);return{x:Math.floor((h.canonical.x*a.EXTENT+A.anchorX)*p),y:Math.floor((h.canonical.y*a.EXTENT+A.anchorY)*p)}}findMatches(A,h,p){const y=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let B=0;B<A.length;B++){const Q=A.get(B);if(Q.crossTileID)continue;const S=this.indexedSymbolInstances[Q.key];if(!S)continue;const k=this.getScaledCoordinates(Q,h);for(const D of S)if(Math.abs(D.coord.x-k.x)<=y&&Math.abs(D.coord.y-k.y)<=y&&!p[D.crossTileID]){p[D.crossTileID]=!0,Q.crossTileID=D.crossTileID;break}}}}class vt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class jt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(A){const h=Math.round((A-this.lng)/360);if(h!==0)for(const p in this.indexes){const y=this.indexes[p],B={};for(const Q in y){const S=y[Q];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+h),B[S.tileID.key]=S}this.indexes[p]=B}this.lng=A}addBucket(A,h,p){if(this.indexes[A.overscaledZ]&&this.indexes[A.overscaledZ][A.key]){if(this.indexes[A.overscaledZ][A.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(A.overscaledZ,this.indexes[A.overscaledZ][A.key])}for(let B=0;B<h.symbolInstances.length;B++)h.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[A.overscaledZ]||(this.usedCrossTileIDs[A.overscaledZ]={});const y=this.usedCrossTileIDs[A.overscaledZ];for(const B in this.indexes){const Q=this.indexes[B];if(Number(B)>A.overscaledZ)for(const S in Q){const k=Q[S];k.tileID.isChildOf(A)&&k.findMatches(h.symbolInstances,A,y)}else{const S=Q[A.scaledTo(Number(B)).key];S&&S.findMatches(h.symbolInstances,A,y)}}for(let B=0;B<h.symbolInstances.length;B++){const Q=h.symbolInstances.get(B);Q.crossTileID||(Q.crossTileID=p.generate(),y[Q.crossTileID]=!0)}return this.indexes[A.overscaledZ]===void 0&&(this.indexes[A.overscaledZ]={}),this.indexes[A.overscaledZ][A.key]=new Lt(A,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(A,h){for(const p in h.indexedSymbolInstances)for(const y of h.indexedSymbolInstances[p])delete this.usedCrossTileIDs[A][y.crossTileID]}removeStaleBuckets(A){let h=!1;for(const p in this.indexes){const y=this.indexes[p];for(const B in y)A[y[B].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,y[B]),delete y[B],h=!0)}return h}}class $t{constructor(){this.layerIndexes={},this.crossTileIDs=new vt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(A,h,p){let y=this.layerIndexes[A.id];y===void 0&&(y=this.layerIndexes[A.id]=new jt);let B=!1;const Q={};y.handleWrapJump(p);for(const S of h){const k=S.getBucket(A);k&&A.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(S.tileID,k,this.crossTileIDs)&&(B=!0),Q[k.bucketInstanceId]=!0)}return y.removeStaleBuckets(Q)&&(B=!0),B}pruneUnusedLayers(A){const h={};A.forEach(p=>{h[p]=!0});for(const p in this.layerIndexes)h[p]||delete this.layerIndexes[p]}}var hr=a.createLayout([{name:"a_pos",type:"Int16",components:2}]);class sr extends a.Evented{constructor(A){super(),this.sourceCache=A,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=A._cache.max,A.usedForTerrain=!0,A.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const A in this._tiles){const h=this._tiles[A];h.textures.forEach(p=>p.destroy()),h.textures=[]}}update(A,h){this.sourceCache.update(A,h),this._renderableTilesKeys=[];for(const p of A.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h}))this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.posMatrix=new Float64Array(16),a.ortho(p.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),this._tiles[p.key]=new qt(p,this.tileSize))}removeOutdated(A){const h={};this.renderHistory=this.renderHistory.filter((p,y)=>this.renderHistory.indexOf(p)===y).slice(0,this.renderHistorySize);for(const p of this._renderableTilesKeys)h[p]=!0;for(const p of this.renderHistory)h[p]=!0;for(const p in this._tiles)h[p]||(this._tiles[p].clearTextures(A),delete this._tiles[p])}getRenderableTiles(){return this._renderableTilesKeys.map(A=>this.getTileByID(A))}getTileByID(A){return this._tiles[A]}getTerrainCoords(A){const h={};for(const p of this._renderableTilesKeys){const y=this._tiles[p].tileID;if(y.canonical.equals(A.canonical)){const B=A.clone();B.posMatrix=new Float64Array(16),a.ortho(B.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),h[p]=B}else if(y.canonical.isChildOf(A.canonical)){const B=A.clone();B.posMatrix=new Float64Array(16);const Q=y.canonical.z-A.canonical.z,S=y.canonical.x-(y.canonical.x>>Q<<Q),k=y.canonical.y-(y.canonical.y>>Q<<Q),D=a.EXTENT>>Q;a.ortho(B.posMatrix,0,D,0,D,0,1),a.translate(B.posMatrix,B.posMatrix,[-S*D,-k*D,0]),h[p]=B}else if(A.canonical.isChildOf(y.canonical)){const B=A.clone();B.posMatrix=new Float64Array(16);const Q=A.canonical.z-y.canonical.z,S=A.canonical.x-(A.canonical.x>>Q<<Q),k=A.canonical.y-(A.canonical.y>>Q<<Q),D=a.EXTENT>>Q;a.ortho(B.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),a.translate(B.posMatrix,B.posMatrix,[S*D,k*D,0]),a.scale(B.posMatrix,B.posMatrix,[1/2**Q,1/2**Q,0]),h[p]=B}}return h}getSourceTile(A,h){const p=this.sourceCache._source;let y=A.overscaledZ-this.deltaZoom;if(y>p.maxzoom&&(y=p.maxzoom),y<p.minzoom)return null;this._sourceTileCache[A.key]||(this._sourceTileCache[A.key]=A.scaledTo(y).key);let B=this.sourceCache.getTileByID(this._sourceTileCache[A.key]);if((!B||!B.dem)&&h)for(;y>=p.minzoom&&(!B||!B.dem);)B=this.sourceCache.getTileByID(A.scaledTo(y--).key);return B}tilesAfterTime(A=Date.now()){return Object.values(this._tiles).filter(h=>h.timeLoaded>=A)}}class or{constructor(A,h,p){this.style=A,this.sourceCache=new sr(h),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.elevationOffset=typeof p.elevationOffset=="number"?p.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(A,h,p,y=a.EXTENT){if(!(h>=0&&h<y&&p>=0&&p<y))return this.elevationOffset;let B=0;const Q=this.getTerrainData(A);if(Q.tile&&Q.tile.dem){const S=a.transformMat4$1([],[h/y*a.EXTENT,p/y*a.EXTENT],Q.u_terrain_matrix),k=[S[0]*Q.tile.dem.dim,S[1]*Q.tile.dem.dim],D=[Math.floor(k[0]),Math.floor(k[1])],O=Q.tile.dem.get(D[0],D[1]),G=Q.tile.dem.get(D[0],D[1]+1),Z=Q.tile.dem.get(D[0]+1,D[1]),ae=Q.tile.dem.get(D[0]+1,D[1]+1);B=a.number(a.number(O,G,k[0]-D[0]),a.number(Z,ae,k[0]-D[0]),k[1]-D[1])}return B}rememberForRerender(A,h){for(const p in this.sourceCache._tiles){const y=this.sourceCache._tiles[p];(y.tileID.equals(h)||y.tileID.isChildOf(h))&&(A===this.sourceCache.sourceCache.id&&(y.timeLoaded=Date.now()),this._rerender[A]=this._rerender[A]||{},this._rerender[A][y.tileID.key]=!0)}}needsRerender(A,h){return this._rerender[A]&&this._rerender[A][h.key]}clearRerenderCache(){this._rerender={}}getElevation(A,h,p,y=a.EXTENT){return(this.getDEMElevation(A,h,p,y)+this.elevationOffset)*this.exaggeration}getTerrainData(A){if(!this._emptyDemTexture){const y=this.style.map.painter.context,B=new a.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new V(y,B,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new V(y,new a.RGBAImage({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.identity([])}const h=this.sourceCache.getSourceTile(A,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){const y=this.style.map.painter.context;h.demTexture=this.style.map.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new V(y,h.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),h.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}const p=h&&h+h.tileID.key+A.key;if(p&&!this._demMatrixCache[p]){const y=this.sourceCache.sourceCache._source.maxzoom;let B=A.canonical.z-h.tileID.canonical.z;A.overscaledZ>A.canonical.z&&(A.canonical.z>=y?B=A.canonical.z-y:a.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const Q=A.canonical.x-(A.canonical.x>>B<<B),S=A.canonical.y-(A.canonical.y>>B<<B),k=a.fromScaling(new Float64Array(16),[1/(a.EXTENT<<B),1/(a.EXTENT<<B),0]);a.translate(k,k,[Q*a.EXTENT,S*a.EXTENT,0]),this._demMatrixCache[A.key]={matrix:k,coord:A}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[A.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getRTTFramebuffer(){const A=this.style.map.painter;if(!this._rttFramebuffer){const h=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=A.context.createFramebuffer(h,h,!0),this._rttFramebuffer.depthAttachment.set(A.context.createRenderbuffer(A.context.gl.DEPTH_COMPONENT16,h,h))}return this._rttFramebuffer}getFramebuffer(A){const h=this.style.map.painter,p=h.width/devicePixelRatio,y=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new V(h.context,{width:p,height:y,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new V(h.context,{width:p,height:y,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(p,y,!0),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,p,y))),this._fbo.colorAttachment.set(A==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const A=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let B=0,Q=0;B<this._coordsTextureSize;B++)for(let S=0;S<this._coordsTextureSize;S++,Q+=4)h[Q+0]=255&S,h[Q+1]=255&B,h[Q+2]=S>>8<<4|B>>8,h[Q+3]=0;const p=new a.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),y=new V(A,p,A.gl.RGBA,{premultiply:!1});return y.bind(A.gl.NEAREST,A.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(A){const h=new Uint8Array(4),p=this.style.map.painter,y=p.context,B=y.gl;y.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),B.readPixels(A.x,p.height/devicePixelRatio-A.y-1,1,1,B.RGBA,B.UNSIGNED_BYTE,h),y.bindFramebuffer.set(null);const Q=h[0]+(h[2]>>4<<8),S=h[1]+((15&h[2])<<8),k=this.coordsIndex[255-h[3]],D=k&&this.sourceCache.getTileByID(k);if(!D)return null;const O=this._coordsTextureSize,G=(1<<D.tileID.canonical.z)*O;return new a.MercatorCoordinate((D.tileID.canonical.x*O+Q)/G,(D.tileID.canonical.y*O+S)/G,this.getElevation(D.tileID,Q,S,O))}getTerrainMesh(){if(this._mesh)return this._mesh;const A=this.style.map.painter.context,h=new a.PosArray,p=new a.TriangleIndexArray,y=this.meshSize,B=a.EXTENT/y,Q=y*y;for(let S=0;S<=y;S++)for(let k=0;k<=y;k++)h.emplaceBack(k*B,S*B);for(let S=0;S<Q;S+=y+1)for(let k=0;k<y;k++)p.emplaceBack(k+S,y+k+S+1,y+k+S+2),p.emplaceBack(k+S,y+k+S+2,k+S+1);return this._mesh={indexBuffer:A.createIndexBuffer(p),vertexBuffer:A.createVertexBuffer(h,hr.members),segments:a.SegmentVector.simpleSegment(0,0,h.length,p.length)},this._mesh}getMinMaxElevation(A){const h=this.getTerrainData(A).tile,p={minElevation:null,maxElevation:null};return h&&h.dem&&(p.minElevation=(h.dem.min+this.elevationOffset)*this.exaggeration,p.maxElevation=(h.dem.max+this.elevationOffset)*this.exaggeration),p}}const fr=(m,A)=>a.emitValidationErrors(m,A&&A.filter(h=>h.identifier!=="source.canvas")),Cr=a.pick(er,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ci=a.pick(er,["setCenter","setZoom","setBearing","setPitch"]),Xr=function(){const m={},A=a.spec.$version;for(const h in a.spec.$root){const p=a.spec.$root[h];if(p.required){let y=null;y=h==="version"?A:p.type==="array"?[]:{},y!=null&&(m[h]=y)}}return m}();class Ui extends a.Evented{constructor(A,h={}){super(),this.map=A,this.dispatcher=new ie(nr(),this),this.imageManager=new Y,this.imageManager.setEventedParent(this),this.glyphManager=new le(A._requestManager,h.localIdeographFontFamily),this.lineAtlas=new R(256,512),this.crossTileSymbolIndex=new $t,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());const p=this;this._rtlTextPluginCallback=Ui.registerForPluginStateChange(y=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:y.pluginStatus,pluginURL:y.pluginURL},(B,Q)=>{if(a.triggerPluginCompletionEvent(B),Q&&Q.every(S=>S))for(const S in p.sourceCaches)p.sourceCaches[S].reload()})}),this.on("data",y=>{if(y.dataType!=="source"||y.sourceDataType!=="metadata")return;const B=this.sourceCaches[y.sourceId];if(!B)return;const Q=B.getSource();if(Q&&Q.vectorLayerIds)for(const S in this._layers){const k=this._layers[S];k.source===Q.id&&this._validateLayer(k)}})}loadURL(A,h={}){this.fire(new a.Event("dataloading",{dataType:"style"}));const p=typeof h.validate!="boolean"||h.validate,y=this.map._requestManager.transformRequest(A,a.ResourceType.Style);this._request=a.getJSON(y,(B,Q)=>{this._request=null,B?this.fire(new a.ErrorEvent(B)):Q&&this._load(Q,p)})}loadJSON(A,h={}){this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.exported.frame(()=>{this._request=null,this._load(A,h.validate!==!1)})}loadEmpty(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(Xr,!1)}_load(A,h){if(h&&fr(this,a.validateStyle(A)))return;this._loaded=!0,this.stylesheet=A;for(const y in A.sources)this.addSource(y,A.sources[y],{validate:!1});A.sprite?this._loadSprite(A.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(A.glyphs);const p=ti(this.stylesheet.layers);this._order=p.map(y=>y.id),this._layers={},this._serializedLayers={};for(let y of p)y=a.createStyleLayer(y),y.setEventedParent(this,{layer:{id:y.id}}),this._layers[y.id]=y,this._serializedLayers[y.id]=y.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ae(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}_loadSprite(A){this._spriteRequest=function(h,p,y,B){let Q,S,k;const D=y>1?"@2x":"";let O=a.getJSON(p.transformRequest(p.normalizeSpriteURL(h,D,".json"),a.ResourceType.SpriteJSON),(ae,ne)=>{O=null,k||(k=ae,Q=ne,Z())}),G=a.getImage(p.transformRequest(p.normalizeSpriteURL(h,D,".png"),a.ResourceType.SpriteImage),(ae,ne)=>{G=null,k||(k=ae,S=ne,Z())});function Z(){if(k)B(k);else if(Q&&S){const ae=a.exported.getImageData(S),ne={};for(const oe in Q){const{width:be,height:Te,x:Le,y:he,sdf:Ke,pixelRatio:Pe,stretchX:et,stretchY:rt,content:pt}=Q[oe],Ye=new a.RGBAImage({width:be,height:Te});a.RGBAImage.copy(ae,Ye,{x:Le,y:he},{x:0,y:0},{width:be,height:Te}),ne[oe]={data:Ye,pixelRatio:Pe,sdf:Ke,stretchX:et,stretchY:rt,content:pt}}B(null,ne)}}return{cancel(){O&&(O.cancel(),O=null),G&&(G.cancel(),G=null)}}}(A,this.map._requestManager,this.map.getPixelRatio(),(h,p)=>{if(this._spriteRequest=null,h)this.fire(new a.ErrorEvent(h));else if(p)for(const y in p)this.imageManager.addImage(y,p[y]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))})}_validateLayer(A){const h=this.sourceCaches[A.source];if(!h)return;const p=A.sourceLayer;if(!p)return;const y=h.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(p)===-1)&&this.fire(new a.ErrorEvent(new Error(`Source layer "${p}" does not exist on source "${y.id}" as specified by style layer "${A.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const A in this.sourceCaches)if(!this.sourceCaches[A].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(A){const h=[];for(const p of A){const y=this._layers[p];y.type!=="custom"&&h.push(y.serialize())}return h}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const A in this.sourceCaches)if(this.sourceCaches[A].hasTransition())return!0;for(const A in this._layers)if(this._layers[A].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(A){if(!this._loaded)return;const h=this._changed;if(this._changed){const y=Object.keys(this._updatedLayers),B=Object.keys(this._removedLayers);(y.length||B.length)&&this._updateWorkerLayers(y,B);for(const Q in this._updatedSources){const S=this._updatedSources[Q];if(S==="reload")this._reloadSource(Q);else{if(S!=="clear")throw new Error(`Invalid action ${S}`);this._clearSource(Q)}}this._updateTilesForChangedImages();for(const Q in this._updatedPaintProps)this._layers[Q].updateTransitions(A);this.light.updateTransitions(A),this._resetUpdates()}const p={};for(const y in this.sourceCaches){const B=this.sourceCaches[y];p[y]=B.used,B.used=!1}for(const y of this._order){const B=this._layers[y];B.recalculate(A,this._availableImages),!B.isHidden(A.zoom)&&B.source&&(this.sourceCaches[B.source].used=!0)}for(const y in p){const B=this.sourceCaches[y];p[y]!==B.used&&B.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(A),this.z=A.zoom,h&&this.fire(new a.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const A=Object.keys(this._changedImages);if(A.length){for(const h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],A);this._changedImages={}}}_updateWorkerLayers(A,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(A),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(A){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),A){const h=this.sourceCaches[A.source];if(!h)throw new Error(`cannot load terrain, because there exists no source with ID: ${A.source}`);this.terrain=new or(this,h,A),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=p=>{p.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=p=>{p.tile&&(p.sourceId===A.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(p.sourceId,p.tile.tileID)):p.source.type==="geojson"&&this.terrain.rememberForRerender(p.sourceId,p.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new a.Event("terrain",{terrain:A}))}setState(A){if(this._checkLoaded(),fr(this,a.validateStyle(A)))return!1;(A=a.clone$1(A)).layers=ti(A.layers);const h=function(y,B){if(!y)return[{command:er.setStyle,args:[B]}];let Q=[];try{if(!E(y.version,B.version))return[{command:er.setStyle,args:[B]}];E(y.center,B.center)||Q.push({command:er.setCenter,args:[B.center]}),E(y.zoom,B.zoom)||Q.push({command:er.setZoom,args:[B.zoom]}),E(y.bearing,B.bearing)||Q.push({command:er.setBearing,args:[B.bearing]}),E(y.pitch,B.pitch)||Q.push({command:er.setPitch,args:[B.pitch]}),E(y.sprite,B.sprite)||Q.push({command:er.setSprite,args:[B.sprite]}),E(y.glyphs,B.glyphs)||Q.push({command:er.setGlyphs,args:[B.glyphs]}),E(y.transition,B.transition)||Q.push({command:er.setTransition,args:[B.transition]}),E(y.light,B.light)||Q.push({command:er.setLight,args:[B.light]});const S={},k=[];(function(O,G,Z,ae){let ne;for(ne in G=G||{},O=O||{})Object.prototype.hasOwnProperty.call(O,ne)&&(Object.prototype.hasOwnProperty.call(G,ne)||bi(ne,Z,ae));for(ne in G)Object.prototype.hasOwnProperty.call(G,ne)&&(Object.prototype.hasOwnProperty.call(O,ne)?E(O[ne],G[ne])||(O[ne].type==="geojson"&&G[ne].type==="geojson"&&mi(O,G,ne)?Z.push({command:er.setGeoJSONSourceData,args:[ne,G[ne].data]}):Ai(ne,G,Z,ae)):Vr(ne,G,Z))})(y.sources,B.sources,k,S);const D=[];y.layers&&y.layers.forEach(O=>{S[O.source]?Q.push({command:er.removeLayer,args:[O.id]}):D.push(O)}),Q=Q.concat(k),function(O,G,Z){G=G||[];const ae=(O=O||[]).map(ai),ne=G.map(ai),oe=O.reduce(fi,{}),be=G.reduce(fi,{}),Te=ae.slice(),Le=Object.create(null);let he,Ke,Pe,et,rt,pt,Ye;for(he=0,Ke=0;he<ae.length;he++)Pe=ae[he],Object.prototype.hasOwnProperty.call(be,Pe)?Ke++:(Z.push({command:er.removeLayer,args:[Pe]}),Te.splice(Te.indexOf(Pe,Ke),1));for(he=0,Ke=0;he<ne.length;he++)Pe=ne[ne.length-1-he],Te[Te.length-1-he]!==Pe&&(Object.prototype.hasOwnProperty.call(oe,Pe)?(Z.push({command:er.removeLayer,args:[Pe]}),Te.splice(Te.lastIndexOf(Pe,Te.length-Ke),1)):Ke++,pt=Te[Te.length-he],Z.push({command:er.addLayer,args:[be[Pe],pt]}),Te.splice(Te.length-he,0,Pe),Le[Pe]=!0);for(he=0;he<ne.length;he++)if(Pe=ne[he],et=oe[Pe],rt=be[Pe],!Le[Pe]&&!E(et,rt))if(E(et.source,rt.source)&&E(et["source-layer"],rt["source-layer"])&&E(et.type,rt.type)){for(Ye in oi(et.layout,rt.layout,Z,Pe,null,er.setLayoutProperty),oi(et.paint,rt.paint,Z,Pe,null,er.setPaintProperty),E(et.filter,rt.filter)||Z.push({command:er.setFilter,args:[Pe,rt.filter]}),E(et.minzoom,rt.minzoom)&&E(et.maxzoom,rt.maxzoom)||Z.push({command:er.setLayerZoomRange,args:[Pe,rt.minzoom,rt.maxzoom]}),et)Object.prototype.hasOwnProperty.call(et,Ye)&&Ye!=="layout"&&Ye!=="paint"&&Ye!=="filter"&&Ye!=="metadata"&&Ye!=="minzoom"&&Ye!=="maxzoom"&&(Ye.indexOf("paint.")===0?oi(et[Ye],rt[Ye],Z,Pe,Ye.slice(6),er.setPaintProperty):E(et[Ye],rt[Ye])||Z.push({command:er.setLayerProperty,args:[Pe,Ye,rt[Ye]]}));for(Ye in rt)Object.prototype.hasOwnProperty.call(rt,Ye)&&!Object.prototype.hasOwnProperty.call(et,Ye)&&Ye!=="layout"&&Ye!=="paint"&&Ye!=="filter"&&Ye!=="metadata"&&Ye!=="minzoom"&&Ye!=="maxzoom"&&(Ye.indexOf("paint.")===0?oi(et[Ye],rt[Ye],Z,Pe,Ye.slice(6),er.setPaintProperty):E(et[Ye],rt[Ye])||Z.push({command:er.setLayerProperty,args:[Pe,Ye,rt[Ye]]}))}else Z.push({command:er.removeLayer,args:[Pe]}),pt=Te[Te.lastIndexOf(Pe)+1],Z.push({command:er.addLayer,args:[rt,pt]})}(D,B.layers,Q)}catch(S){console.warn("Unable to compute style diff:",S),Q=[{command:er.setStyle,args:[B]}]}return Q}(this.serialize(),A).filter(y=>!(y.command in Ci));if(h.length===0)return!1;const p=h.filter(y=>!(y.command in Cr));if(p.length>0)throw new Error(`Unimplemented: ${p.map(y=>y.command).join(", ")}.`);return h.forEach(y=>{y.command!=="setTransition"&&this[y.command].apply(this,y.args)}),this.stylesheet=A,!0}addImage(A,h){if(this.getImage(A))return this.fire(new a.ErrorEvent(new Error(`An image named "${A}" already exists.`)));this.imageManager.addImage(A,h),this._afterImageUpdated(A)}updateImage(A,h){this.imageManager.updateImage(A,h)}getImage(A){return this.imageManager.getImage(A)}removeImage(A){if(!this.getImage(A))return this.fire(new a.ErrorEvent(new Error(`An image named "${A}" does not exist.`)));this.imageManager.removeImage(A),this._afterImageUpdated(A)}_afterImageUpdated(A){this._availableImages=this.imageManager.listImages(),this._changedImages[A]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(A,h,p={}){if(this._checkLoaded(),this.sourceCaches[A]!==void 0)throw new Error(`Source "${A}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(a.validateStyle.source,`sources.${A}`,h,null,p))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const y=this.sourceCaches[A]=new ve(A,h,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:y.serialize(),sourceId:A})),y.onAdd(this.map),this._changed=!0}removeSource(A){if(this._checkLoaded(),this.sourceCaches[A]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===A)return this.fire(new a.ErrorEvent(new Error(`Source "${A}" cannot be removed while layer "${p}" is using it.`)));const h=this.sourceCaches[A];delete this.sourceCaches[A],delete this._updatedSources[A],h.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:A})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(A,h){if(this._checkLoaded(),this.sourceCaches[A]===void 0)throw new Error(`There is no source with this ID=${A}`);const p=this.sourceCaches[A].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(h),this._changed=!0}getSource(A){return this.sourceCaches[A]&&this.sourceCaches[A].getSource()}addLayer(A,h,p={}){this._checkLoaded();const y=A.id;if(this.getLayer(y))return void this.fire(new a.ErrorEvent(new Error(`Layer "${y}" already exists on this map.`)));let B;if(A.type==="custom"){if(fr(this,a.validateCustomStyleLayer(A)))return;B=a.createStyleLayer(A)}else{if(typeof A.source=="object"&&(this.addSource(y,A.source),A=a.clone$1(A),A=a.extend(A,{source:y})),this._validate(a.validateStyle.layer,`layers.${y}`,A,{arrayIndex:-1},p))return;B=a.createStyleLayer(A),this._validateLayer(B),B.setEventedParent(this,{layer:{id:y}}),this._serializedLayers[B.id]=B.serialize()}const Q=h?this._order.indexOf(h):this._order.length;if(h&&Q===-1)this.fire(new a.ErrorEvent(new Error(`Cannot add layer "${y}" before non-existing layer "${h}".`)));else{if(this._order.splice(Q,0,y),this._layerOrderChanged=!0,this._layers[y]=B,this._removedLayers[y]&&B.source&&B.type!=="custom"){const S=this._removedLayers[y];delete this._removedLayers[y],S.type!==B.type?this._updatedSources[B.source]="clear":(this._updatedSources[B.source]="reload",this.sourceCaches[B.source].pause())}this._updateLayer(B),B.onAdd&&B.onAdd(this.map)}}moveLayer(A,h){if(this._checkLoaded(),this._changed=!0,!this._layers[A])return void this.fire(new a.ErrorEvent(new Error(`The layer '${A}' does not exist in the map's style and cannot be moved.`)));if(A===h)return;const p=this._order.indexOf(A);this._order.splice(p,1);const y=h?this._order.indexOf(h):this._order.length;h&&y===-1?this.fire(new a.ErrorEvent(new Error(`Cannot move layer "${A}" before non-existing layer "${h}".`))):(this._order.splice(y,0,A),this._layerOrderChanged=!0)}removeLayer(A){this._checkLoaded();const h=this._layers[A];if(!h)return void this.fire(new a.ErrorEvent(new Error(`Cannot remove non-existing layer "${A}".`)));h.setEventedParent(null);const p=this._order.indexOf(A);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[A]=h,delete this._layers[A],delete this._serializedLayers[A],delete this._updatedLayers[A],delete this._updatedPaintProps[A],h.onRemove&&h.onRemove(this.map)}getLayer(A){return this._layers[A]}hasLayer(A){return A in this._layers}setLayerZoomRange(A,h,p){this._checkLoaded();const y=this.getLayer(A);y?y.minzoom===h&&y.maxzoom===p||(h!=null&&(y.minzoom=h),p!=null&&(y.maxzoom=p),this._updateLayer(y)):this.fire(new a.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${A}".`)))}setFilter(A,h,p={}){this._checkLoaded();const y=this.getLayer(A);if(y){if(!E(y.filter,h))return h==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(a.validateStyle.filter,`layers.${y.id}.filter`,h,null,p)||(y.filter=a.clone$1(h),this._updateLayer(y)))}else this.fire(new a.ErrorEvent(new Error(`Cannot filter non-existing layer "${A}".`)))}getFilter(A){return a.clone$1(this.getLayer(A).filter)}setLayoutProperty(A,h,p,y={}){this._checkLoaded();const B=this.getLayer(A);B?E(B.getLayoutProperty(h),p)||(B.setLayoutProperty(h,p,y),this._updateLayer(B)):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${A}".`)))}getLayoutProperty(A,h){const p=this.getLayer(A);if(p)return p.getLayoutProperty(h);this.fire(new a.ErrorEvent(new Error(`Cannot get style of non-existing layer "${A}".`)))}setPaintProperty(A,h,p,y={}){this._checkLoaded();const B=this.getLayer(A);B?E(B.getPaintProperty(h),p)||(B.setPaintProperty(h,p,y)&&this._updateLayer(B),this._changed=!0,this._updatedPaintProps[A]=!0):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${A}".`)))}getPaintProperty(A,h){return this.getLayer(A).getPaintProperty(h)}setFeatureState(A,h){this._checkLoaded();const p=A.source,y=A.sourceLayer,B=this.sourceCaches[p];if(B===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const Q=B.getSource().type;Q==="geojson"&&y?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):Q!=="vector"||y?(A.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),B.setFeatureState(y,A.id,h)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(A,h){this._checkLoaded();const p=A.source,y=this.sourceCaches[p];if(y===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const B=y.getSource().type,Q=B==="vector"?A.sourceLayer:void 0;B!=="vector"||Q?h&&typeof A.id!="string"&&typeof A.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(Q,A.id,h):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(A){this._checkLoaded();const h=A.source,p=A.sourceLayer,y=this.sourceCaches[h];if(y!==void 0)return y.getSource().type!=="vector"||p?(A.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),y.getFeatureState(p,A.id)):void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,A=>A.serialize()),layers:this._serializeLayers(this._order)},A=>A!==void 0)}_updateLayer(A){this._updatedLayers[A.id]=!0,A.source&&!this._updatedSources[A.source]&&this.sourceCaches[A.source].getSource().type!=="raster"&&(this._updatedSources[A.source]="reload",this.sourceCaches[A.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(A){const h=Q=>this._layers[Q].type==="fill-extrusion",p={},y=[];for(let Q=this._order.length-1;Q>=0;Q--){const S=this._order[Q];if(h(S)){p[S]=Q;for(const k of A){const D=k[S];if(D)for(const O of D)y.push(O)}}}y.sort((Q,S)=>S.intersectionZ-Q.intersectionZ);const B=[];for(let Q=this._order.length-1;Q>=0;Q--){const S=this._order[Q];if(h(S))for(let k=y.length-1;k>=0;k--){const D=y[k].feature;if(p[D.layer.id]<Q)break;B.push(D),y.pop()}else for(const k of A){const D=k[S];if(D)for(const O of D)B.push(O.feature)}}return B}queryRenderedFeatures(A,h,p){h&&h.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",h.filter,null,h);const y={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const Q of h.layers){const S=this._layers[Q];if(!S)return this.fire(new a.ErrorEvent(new Error(`The layer '${Q}' does not exist in the map's style and cannot be queried for features.`))),[];y[S.source]=!0}}const B=[];h.availableImages=this._availableImages;for(const Q in this.sourceCaches)h.layers&&!y[Q]||B.push(At(this.sourceCaches[Q],this._layers,this._serializedLayers,A,h,p));return this.placement&&B.push(function(Q,S,k,D,O,G,Z){const ae={},ne=G.queryRenderedSymbols(D),oe=[];for(const be of Object.keys(ne).map(Number))oe.push(Z[be]);oe.sort(Et);for(const be of oe){const Te=be.featureIndex.lookupSymbolFeatures(ne[be.bucketInstanceId],S,be.bucketIndex,be.sourceLayerIndex,O.filter,O.layers,O.availableImages,Q);for(const Le in Te){const he=ae[Le]=ae[Le]||[],Ke=Te[Le];Ke.sort((Pe,et)=>{const rt=be.featureSortOrder;if(rt){const pt=rt.indexOf(Pe.featureIndex);return rt.indexOf(et.featureIndex)-pt}return et.featureIndex-Pe.featureIndex});for(const Pe of Ke)he.push(Pe)}}for(const be in ae)ae[be].forEach(Te=>{const Le=Te.feature,he=k[Q[be].source].getFeatureState(Le.layer["source-layer"],Le.id);Le.source=Le.layer.source,Le.layer["source-layer"]&&(Le.sourceLayer=Le.layer["source-layer"]),Le.state=he});return ae}(this._layers,this._serializedLayers,this.sourceCaches,A,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(B)}querySourceFeatures(A,h){h&&h.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",h.filter,null,h);const p=this.sourceCaches[A];return p?function(y,B){const Q=y.getRenderableIds().map(D=>y.getTileByID(D)),S=[],k={};for(let D=0;D<Q.length;D++){const O=Q[D],G=O.tileID.canonical.key;k[G]||(k[G]=!0,O.querySourceFeatures(S,B))}return S}(p,h):[]}addSourceType(A,h,p){return Ui.getSourceType(A)?p(new Error(`A source type called "${A}" already exists.`)):(Ui.setSourceType(A,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:A,url:h.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(A,h={}){this._checkLoaded();const p=this.light.getLight();let y=!1;for(const Q in A)if(!E(A[Q],p[Q])){y=!0;break}if(!y)return;const B={now:a.exported.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(A,h),this.light.updateTransitions(B)}_validate(A,h,p,y,B={}){return(!B||B.validate!==!1)&&fr(this,A.call(a.validateStyle,a.extend({key:h,style:this.serialize(),value:p,styleSpec:a.spec},y)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const A in this._layers)this._layers[A].setEventedParent(null);for(const A in this.sourceCaches){const h=this.sourceCaches[A];h.setEventedParent(null),h.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(A){this.sourceCaches[A].clearTiles()}_reloadSource(A){this.sourceCaches[A].resume(),this.sourceCaches[A].reload()}_updateSources(A){for(const h in this.sourceCaches)this.sourceCaches[h].update(A,this.terrain)}_generateCollisionBoxes(){for(const A in this.sourceCaches)this._reloadSource(A)}_updatePlacement(A,h,p,y,B=!1){let Q=!1,S=!1;const k={};for(const D of this._order){const O=this._layers[D];if(O.type!=="symbol")continue;if(!k[O.source]){const Z=this.sourceCaches[O.source];k[O.source]=Z.getRenderableIds(!0).map(ae=>Z.getTileByID(ae)).sort((ae,ne)=>ne.tileID.overscaledZ-ae.tileID.overscaledZ||(ae.tileID.isLessThan(ne.tileID)?-1:1))}const G=this.crossTileSymbolIndex.addLayer(O,k[O.source],A.center.lng);Q=Q||G}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((B=B||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.exported.now(),A.zoom))&&(this.pauseablePlacement=new We(A,this.terrain,this._order,B,h,p,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.exported.now()),S=!0),Q&&this.pauseablePlacement.placement.setStale()),S||Q)for(const D of this._order){const O=this._layers[D];O.type==="symbol"&&this.placement.updateLayerOpacities(O,k[O.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.exported.now())}_releaseSymbolFadeTiles(){for(const A in this.sourceCaches)this.sourceCaches[A].releaseSymbolFadeTiles()}getImages(A,h,p){this.imageManager.getImages(h.icons,p),this._updateTilesForChangedImages();const y=this.sourceCaches[h.source];y&&y.setDependencies(h.tileID.key,h.type,h.icons)}getGlyphs(A,h,p){this.glyphManager.getGlyphs(h.stacks,p)}getResource(A,h,p){return a.makeRequest(h,p)}}Ui.getSourceType=function(m){return Je[m]},Ui.setSourceType=function(m,A){Je[m]=A},Ui.registerForPluginStateChange=a.registerForPluginStateChange;var Wn="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const ns={prelude:Er(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Er(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Er(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Er(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Er("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Er(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Er(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Er("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Er("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Er("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Er(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Er(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Er(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Er(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Er(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Er(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Er(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Er(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Er(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Er(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Er(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Er(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Er(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Er(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Er(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Er(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Er("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Wn),terrainDepth:Er("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Wn),terrainCoords:Er("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Wn)};function Er(m,A){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=A.match(/attribute ([\w]+) ([\w]+)/g),y=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=A.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Q=B?B.concat(y):y,S={};return{fragmentSource:m=m.replace(h,(k,D,O,G,Z)=>(S[Z]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
varying ${O} ${G} ${Z};
#else
uniform ${O} ${G} u_${Z};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Z}
    ${O} ${G} ${Z} = u_${Z};
#endif
`)),vertexSource:A=A.replace(h,(k,D,O,G,Z)=>{const ae=G==="float"?"vec2":"vec4",ne=Z.match(/color/)?"color":ae;return S[Z]?D==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
attribute ${O} ${ae} a_${Z};
varying ${O} ${G} ${Z};
#else
uniform ${O} ${G} u_${Z};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = a_${Z};
#else
    ${O} ${G} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = unpack_mix_${ne}(a_${Z}, u_${Z}_t);
#else
    ${O} ${G} ${Z} = u_${Z};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
attribute ${O} ${ae} a_${Z};
#else
uniform ${O} ${G} u_${Z};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${O} ${G} ${Z} = a_${Z};
#else
    ${O} ${G} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${O} ${G} ${Z} = unpack_mix_${ne}(a_${Z}, u_${Z}_t);
#else
    ${O} ${G} ${Z} = u_${Z};
#endif
`}),staticAttributes:p,staticUniforms:Q}}class Us{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(A,h,p,y,B,Q,S,k,D){this.context=A;let O=this.boundPaintVertexBuffers.length!==y.length;for(let G=0;!O&&G<y.length;G++)this.boundPaintVertexBuffers[G]!==y[G]&&(O=!0);A.extVertexArrayObject&&this.vao&&this.boundProgram===h&&this.boundLayoutVertexBuffer===p&&!O&&this.boundIndexBuffer===B&&this.boundVertexOffset===Q&&this.boundDynamicVertexBuffer===S&&this.boundDynamicVertexBuffer2===k&&this.boundDynamicVertexBuffer3===D?(A.bindVertexArrayOES.set(this.vao),S&&S.bind(),B&&B.dynamicDraw&&B.bind(),k&&k.bind(),D&&D.bind()):this.freshBind(h,p,y,B,Q,S,k,D)}freshBind(A,h,p,y,B,Q,S,k){let D;const O=A.numAttributes,G=this.context,Z=G.gl;if(G.extVertexArrayObject)this.vao&&this.destroy(),this.vao=G.extVertexArrayObject.createVertexArrayOES(),G.bindVertexArrayOES.set(this.vao),D=0,this.boundProgram=A,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=y,this.boundVertexOffset=B,this.boundDynamicVertexBuffer=Q,this.boundDynamicVertexBuffer2=S,this.boundDynamicVertexBuffer3=k;else{D=G.currentNumAttributes||0;for(let ae=O;ae<D;ae++)Z.disableVertexAttribArray(ae)}h.enableAttributes(Z,A);for(const ae of p)ae.enableAttributes(Z,A);Q&&Q.enableAttributes(Z,A),S&&S.enableAttributes(Z,A),k&&k.enableAttributes(Z,A),h.bind(),h.setVertexAttribPointers(Z,A,B);for(const ae of p)ae.bind(),ae.setVertexAttribPointers(Z,A,B);Q&&(Q.bind(),Q.setVertexAttribPointers(Z,A,B)),y&&y.bind(),S&&(S.bind(),S.setVertexAttribPointers(Z,A,B)),k&&(k.bind(),k.setVertexAttribPointers(Z,A,B)),G.currentNumAttributes=O}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Qs(m){const A=[];for(let h=0;h<m.length;h++){if(m[h]===null)continue;const p=m[h].split(" ");A.push(p.pop())}return A}class Js{constructor(A,h,p,y,B,Q,S){const k=A.gl;this.program=k.createProgram();const D=Qs(p.staticAttributes),O=y?y.getBinderAttributes():[],G=D.concat(O),Z=ns.prelude.staticUniforms?Qs(ns.prelude.staticUniforms):[],ae=p.staticUniforms?Qs(p.staticUniforms):[],ne=y?y.getBinderUniforms():[],oe=Z.concat(ae).concat(ne),be=[];for(const rt of oe)be.indexOf(rt)<0&&be.push(rt);const Te=y?y.defines():[];Q&&Te.push("#define OVERDRAW_INSPECTOR;"),S&&Te.push("#define TERRAIN3D;");const Le=Te.concat(ns.prelude.fragmentSource,p.fragmentSource).join(`
`),he=Te.concat(ns.prelude.vertexSource,p.vertexSource).join(`
`),Ke=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(Ke,Le),k.compileShader(Ke),k.attachShader(this.program,Ke);const Pe=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(Pe,he),k.compileShader(Pe),k.attachShader(this.program,Pe),this.attributes={};const et={};this.numAttributes=G.length;for(let rt=0;rt<this.numAttributes;rt++)G[rt]&&(k.bindAttribLocation(this.program,rt,G[rt]),this.attributes[G[rt]]=rt);k.linkProgram(this.program),k.deleteShader(Pe),k.deleteShader(Ke);for(let rt=0;rt<be.length;rt++){const pt=be[rt];if(pt&&!et[pt]){const Ye=k.getUniformLocation(this.program,pt);Ye&&(et[pt]=Ye)}}this.fixedUniforms=B(A,et),this.terrainUniforms=((rt,pt)=>({u_depth:new a.Uniform1i(rt,pt.u_depth),u_terrain:new a.Uniform1i(rt,pt.u_terrain),u_terrain_dim:new a.Uniform1f(rt,pt.u_terrain_dim),u_terrain_matrix:new a.UniformMatrix4f(rt,pt.u_terrain_matrix),u_terrain_unpack:new a.Uniform4f(rt,pt.u_terrain_unpack),u_terrain_offset:new a.Uniform1f(rt,pt.u_terrain_offset),u_terrain_exaggeration:new a.Uniform1f(rt,pt.u_terrain_exaggeration)}))(A,et),this.binderUniforms=y?y.getUniforms(A,et):[]}draw(A,h,p,y,B,Q,S,k,D,O,G,Z,ae,ne,oe,be,Te,Le){const he=A.gl;if(this.failedToCreate)return;if(A.program.set(this.program),A.setDepthMode(p),A.setStencilMode(y),A.setColorMode(B),A.setCullFace(Q),k){A.activeTexture.set(he.TEXTURE2),he.bindTexture(he.TEXTURE_2D,k.depthTexture),A.activeTexture.set(he.TEXTURE3),he.bindTexture(he.TEXTURE_2D,k.texture);for(const Pe in this.terrainUniforms)this.terrainUniforms[Pe].set(k[Pe])}for(const Pe in this.fixedUniforms)this.fixedUniforms[Pe].set(S[Pe]);oe&&oe.setUniforms(A,this.binderUniforms,ae,{zoom:ne});let Ke=0;switch(h){case he.LINES:Ke=2;break;case he.TRIANGLES:Ke=3;break;case he.LINE_STRIP:Ke=1}for(const Pe of Z.get()){const et=Pe.vaos||(Pe.vaos={});(et[D]||(et[D]=new Us)).bind(A,this,O,oe?oe.getPaintVertexBuffers():[],G,Pe.vertexOffset,be,Te,Le),he.drawElements(h,Pe.primitiveLength*Ke,he.UNSIGNED_SHORT,Pe.primitiveOffset*Ke*2)}}}function Ys(m,A,h){const p=1/ri(h,1,A.transform.tileZoom),y=Math.pow(2,h.tileID.overscaledZ),B=h.tileSize*Math.pow(2,A.transform.tileZoom)/y,Q=B*(h.tileID.canonical.x+h.tileID.wrap*y),S=B*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[p,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[Q>>16,S>>16],u_pixel_coord_lower:[65535&Q,65535&S]}}const Is=(m,A,h,p)=>{const y=A.style.light,B=y.properties.get("position"),Q=[B.x,B.y,B.z],S=a.create$1();y.properties.get("anchor")==="viewport"&&a.fromRotation(S,-A.transform.angle),a.transformMat3(Q,Q,S);const k=y.properties.get("color");return{u_matrix:m,u_lightpos:Q,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+h,u_opacity:p}},jA=(m,A,h,p,y,B,Q)=>a.extend(Is(m,A,h,p),Ys(B,A,Q),{u_height_factor:-Math.pow(2,y.overscaledZ)/Q.tileSize/8}),Ts=m=>({u_matrix:m}),$s=(m,A,h,p)=>a.extend(Ts(m),Ys(h,A,p)),BA=(m,A)=>({u_matrix:m,u_world:A}),eA=(m,A,h,p,y)=>a.extend($s(m,A,h,p),{u_world:y}),tA=(m,A,h,p)=>{const y=m.transform;let B,Q;if(p.paint.get("circle-pitch-alignment")==="map"){const S=ri(h,1,y.zoom);B=!0,Q=[S,S]}else B=!1,Q=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:m.translatePosMatrix(A.posMatrix,h,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+B,u_device_pixel_ratio:m.pixelRatio,u_extrude_scale:Q}},Sn=(m,A,h)=>{const p=ri(h,1,A.zoom),y=Math.pow(2,A.zoom-h.tileID.overscaledZ),B=h.tileID.overscaleFactor();return{u_matrix:m,u_camera_to_center_distance:A.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[A.pixelsToGLUnits[0]/(p*y),A.pixelsToGLUnits[1]/(p*y)],u_overscale_factor:B}},ss=(m,A,h=1)=>({u_matrix:m,u_color:A,u_overlay:0,u_overlay_scale:h}),As=m=>({u_matrix:m}),Ss=(m,A,h,p)=>({u_matrix:m,u_extrude_scale:ri(A,1,h),u_intensity:p});function ks(m,A){const h=Math.pow(2,A.canonical.z),p=A.canonical.y;return[new a.MercatorCoordinate(0,p/h).toLngLat().lat,new a.MercatorCoordinate(0,(p+1)/h).toLngLat().lat]}const Ms=(m,A,h,p)=>{const y=m.transform;return{u_matrix:iA(m,A,h,p),u_ratio:1/ri(A,1,y.zoom),u_device_pixel_ratio:m.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},rA=(m,A,h,p,y)=>a.extend(Ms(m,A,h,y),{u_image:0,u_image_height:p}),kn=(m,A,h,p,y)=>{const B=m.transform,Q=Fr(A,B);return{u_matrix:iA(m,A,h,y),u_texsize:A.imageAtlasTexture.size,u_ratio:1/ri(A,1,B.zoom),u_device_pixel_ratio:m.pixelRatio,u_image:0,u_scale:[Q,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]]}},vn=(m,A,h,p,y,B)=>{const Q=m.lineAtlas,S=Fr(A,m.transform),k=h.layout.get("line-cap")==="round",D=Q.getDash(p.from,k),O=Q.getDash(p.to,k),G=D.width*y.fromScale,Z=O.width*y.toScale;return a.extend(Ms(m,A,h,B),{u_patternscale_a:[S/G,-D.height/2],u_patternscale_b:[S/Z,-O.height/2],u_sdfgamma:Q.width/(256*Math.min(G,Z)*m.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:O.y,u_mix:y.t})};function Fr(m,A){return 1/ri(m,1,A.tileZoom)}function iA(m,A,h,p){return m.translatePosMatrix(p?p.posMatrix:A.tileID.posMatrix,A,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const Qo=(m,A,h,p,y)=>{return{u_matrix:m,u_tl_parent:A,u_scale_parent:h,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(Q=y.paint.get("raster-saturation"),Q>0?1-1/(1.001-Q):-Q),u_contrast_factor:(B=y.paint.get("raster-contrast"),B>0?1/(1-B):1+B),u_spin_weights:Io(y.paint.get("raster-hue-rotate"))};var B,Q};function Io(m){m*=Math.PI/180;const A=Math.sin(m),h=Math.cos(m);return[(2*h+1)/3,(-Math.sqrt(3)*A-h+1)/3,(Math.sqrt(3)*A-h+1)/3]}const JA=(m,A,h,p,y,B,Q,S,k,D)=>{const O=y.transform;return{u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:A?A.uSizeT:0,u_size:A?A.uSize:0,u_camera_to_center_distance:O.cameraToCenterDistance,u_pitch:O.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:O.width/O.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:Q,u_coord_matrix:S,u_is_text:+k,u_pitch_with_map:+p,u_texsize:D,u_texture:0}},gs=(m,A,h,p,y,B,Q,S,k,D,O)=>{const G=y.transform;return a.extend(JA(m,A,h,p,y,B,Q,S,k,D),{u_gamma_scale:p?Math.cos(G._pitch)*G.cameraToCenterDistance:1,u_device_pixel_ratio:y.pixelRatio,u_is_halo:+O})},Ba=(m,A,h,p,y,B,Q,S,k,D)=>a.extend(gs(m,A,h,p,y,B,Q,S,!0,k,!0),{u_texsize_icon:D,u_texture_icon:1}),xA=(m,A,h)=>({u_matrix:m,u_opacity:A,u_color:h}),El=(m,A,h,p,y,B)=>a.extend(function(Q,S,k,D){const O=k.imageManager.getPattern(Q.from.toString()),G=k.imageManager.getPattern(Q.to.toString()),{width:Z,height:ae}=k.imageManager.getPixelSize(),ne=Math.pow(2,D.tileID.overscaledZ),oe=D.tileSize*Math.pow(2,k.transform.tileZoom)/ne,be=oe*(D.tileID.canonical.x+D.tileID.wrap*ne),Te=oe*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:O.tl,u_pattern_br_a:O.br,u_pattern_tl_b:G.tl,u_pattern_br_b:G.br,u_texsize:[Z,ae],u_mix:S.t,u_pattern_size_a:O.displaySize,u_pattern_size_b:G.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/ri(D,1,k.transform.tileZoom),u_pixel_coord_upper:[be>>16,Te>>16],u_pixel_coord_lower:[65535&be,65535&Te]}}(p,B,h,y),{u_matrix:m,u_opacity:A}),Ds={fillExtrusion:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_lightpos:new a.Uniform3f(m,A.u_lightpos),u_lightintensity:new a.Uniform1f(m,A.u_lightintensity),u_lightcolor:new a.Uniform3f(m,A.u_lightcolor),u_vertical_gradient:new a.Uniform1f(m,A.u_vertical_gradient),u_opacity:new a.Uniform1f(m,A.u_opacity)}),fillExtrusionPattern:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_lightpos:new a.Uniform3f(m,A.u_lightpos),u_lightintensity:new a.Uniform1f(m,A.u_lightintensity),u_lightcolor:new a.Uniform3f(m,A.u_lightcolor),u_vertical_gradient:new a.Uniform1f(m,A.u_vertical_gradient),u_height_factor:new a.Uniform1f(m,A.u_height_factor),u_image:new a.Uniform1i(m,A.u_image),u_texsize:new a.Uniform2f(m,A.u_texsize),u_pixel_coord_upper:new a.Uniform2f(m,A.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(m,A.u_pixel_coord_lower),u_scale:new a.Uniform3f(m,A.u_scale),u_fade:new a.Uniform1f(m,A.u_fade),u_opacity:new a.Uniform1f(m,A.u_opacity)}),fill:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix)}),fillPattern:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_image:new a.Uniform1i(m,A.u_image),u_texsize:new a.Uniform2f(m,A.u_texsize),u_pixel_coord_upper:new a.Uniform2f(m,A.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(m,A.u_pixel_coord_lower),u_scale:new a.Uniform3f(m,A.u_scale),u_fade:new a.Uniform1f(m,A.u_fade)}),fillOutline:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_world:new a.Uniform2f(m,A.u_world)}),fillOutlinePattern:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_world:new a.Uniform2f(m,A.u_world),u_image:new a.Uniform1i(m,A.u_image),u_texsize:new a.Uniform2f(m,A.u_texsize),u_pixel_coord_upper:new a.Uniform2f(m,A.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(m,A.u_pixel_coord_lower),u_scale:new a.Uniform3f(m,A.u_scale),u_fade:new a.Uniform1f(m,A.u_fade)}),circle:(m,A)=>({u_camera_to_center_distance:new a.Uniform1f(m,A.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(m,A.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(m,A.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(m,A.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(m,A.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(m,A.u_matrix)}),collisionBox:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_camera_to_center_distance:new a.Uniform1f(m,A.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(m,A.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(m,A.u_extrude_scale),u_overscale_factor:new a.Uniform1f(m,A.u_overscale_factor)}),collisionCircle:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_inv_matrix:new a.UniformMatrix4f(m,A.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(m,A.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(m,A.u_viewport_size)}),debug:(m,A)=>({u_color:new a.UniformColor(m,A.u_color),u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_overlay:new a.Uniform1i(m,A.u_overlay),u_overlay_scale:new a.Uniform1f(m,A.u_overlay_scale)}),clippingMask:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix)}),heatmap:(m,A)=>({u_extrude_scale:new a.Uniform1f(m,A.u_extrude_scale),u_intensity:new a.Uniform1f(m,A.u_intensity),u_matrix:new a.UniformMatrix4f(m,A.u_matrix)}),heatmapTexture:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_world:new a.Uniform2f(m,A.u_world),u_image:new a.Uniform1i(m,A.u_image),u_color_ramp:new a.Uniform1i(m,A.u_color_ramp),u_opacity:new a.Uniform1f(m,A.u_opacity)}),hillshade:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_image:new a.Uniform1i(m,A.u_image),u_latrange:new a.Uniform2f(m,A.u_latrange),u_light:new a.Uniform2f(m,A.u_light),u_shadow:new a.UniformColor(m,A.u_shadow),u_highlight:new a.UniformColor(m,A.u_highlight),u_accent:new a.UniformColor(m,A.u_accent)}),hillshadePrepare:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_image:new a.Uniform1i(m,A.u_image),u_dimension:new a.Uniform2f(m,A.u_dimension),u_zoom:new a.Uniform1f(m,A.u_zoom),u_unpack:new a.Uniform4f(m,A.u_unpack)}),line:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_ratio:new a.Uniform1f(m,A.u_ratio),u_device_pixel_ratio:new a.Uniform1f(m,A.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(m,A.u_units_to_pixels)}),lineGradient:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_ratio:new a.Uniform1f(m,A.u_ratio),u_device_pixel_ratio:new a.Uniform1f(m,A.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(m,A.u_units_to_pixels),u_image:new a.Uniform1i(m,A.u_image),u_image_height:new a.Uniform1f(m,A.u_image_height)}),linePattern:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_texsize:new a.Uniform2f(m,A.u_texsize),u_ratio:new a.Uniform1f(m,A.u_ratio),u_device_pixel_ratio:new a.Uniform1f(m,A.u_device_pixel_ratio),u_image:new a.Uniform1i(m,A.u_image),u_units_to_pixels:new a.Uniform2f(m,A.u_units_to_pixels),u_scale:new a.Uniform3f(m,A.u_scale),u_fade:new a.Uniform1f(m,A.u_fade)}),lineSDF:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_ratio:new a.Uniform1f(m,A.u_ratio),u_device_pixel_ratio:new a.Uniform1f(m,A.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(m,A.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(m,A.u_patternscale_a),u_patternscale_b:new a.Uniform2f(m,A.u_patternscale_b),u_sdfgamma:new a.Uniform1f(m,A.u_sdfgamma),u_image:new a.Uniform1i(m,A.u_image),u_tex_y_a:new a.Uniform1f(m,A.u_tex_y_a),u_tex_y_b:new a.Uniform1f(m,A.u_tex_y_b),u_mix:new a.Uniform1f(m,A.u_mix)}),raster:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_tl_parent:new a.Uniform2f(m,A.u_tl_parent),u_scale_parent:new a.Uniform1f(m,A.u_scale_parent),u_buffer_scale:new a.Uniform1f(m,A.u_buffer_scale),u_fade_t:new a.Uniform1f(m,A.u_fade_t),u_opacity:new a.Uniform1f(m,A.u_opacity),u_image0:new a.Uniform1i(m,A.u_image0),u_image1:new a.Uniform1i(m,A.u_image1),u_brightness_low:new a.Uniform1f(m,A.u_brightness_low),u_brightness_high:new a.Uniform1f(m,A.u_brightness_high),u_saturation_factor:new a.Uniform1f(m,A.u_saturation_factor),u_contrast_factor:new a.Uniform1f(m,A.u_contrast_factor),u_spin_weights:new a.Uniform3f(m,A.u_spin_weights)}),symbolIcon:(m,A)=>({u_is_size_zoom_constant:new a.Uniform1i(m,A.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(m,A.u_is_size_feature_constant),u_size_t:new a.Uniform1f(m,A.u_size_t),u_size:new a.Uniform1f(m,A.u_size),u_camera_to_center_distance:new a.Uniform1f(m,A.u_camera_to_center_distance),u_pitch:new a.Uniform1f(m,A.u_pitch),u_rotate_symbol:new a.Uniform1i(m,A.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(m,A.u_aspect_ratio),u_fade_change:new a.Uniform1f(m,A.u_fade_change),u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(m,A.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(m,A.u_coord_matrix),u_is_text:new a.Uniform1i(m,A.u_is_text),u_pitch_with_map:new a.Uniform1i(m,A.u_pitch_with_map),u_texsize:new a.Uniform2f(m,A.u_texsize),u_texture:new a.Uniform1i(m,A.u_texture)}),symbolSDF:(m,A)=>({u_is_size_zoom_constant:new a.Uniform1i(m,A.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(m,A.u_is_size_feature_constant),u_size_t:new a.Uniform1f(m,A.u_size_t),u_size:new a.Uniform1f(m,A.u_size),u_camera_to_center_distance:new a.Uniform1f(m,A.u_camera_to_center_distance),u_pitch:new a.Uniform1f(m,A.u_pitch),u_rotate_symbol:new a.Uniform1i(m,A.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(m,A.u_aspect_ratio),u_fade_change:new a.Uniform1f(m,A.u_fade_change),u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(m,A.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(m,A.u_coord_matrix),u_is_text:new a.Uniform1i(m,A.u_is_text),u_pitch_with_map:new a.Uniform1i(m,A.u_pitch_with_map),u_texsize:new a.Uniform2f(m,A.u_texsize),u_texture:new a.Uniform1i(m,A.u_texture),u_gamma_scale:new a.Uniform1f(m,A.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(m,A.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(m,A.u_is_halo)}),symbolTextAndIcon:(m,A)=>({u_is_size_zoom_constant:new a.Uniform1i(m,A.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(m,A.u_is_size_feature_constant),u_size_t:new a.Uniform1f(m,A.u_size_t),u_size:new a.Uniform1f(m,A.u_size),u_camera_to_center_distance:new a.Uniform1f(m,A.u_camera_to_center_distance),u_pitch:new a.Uniform1f(m,A.u_pitch),u_rotate_symbol:new a.Uniform1i(m,A.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(m,A.u_aspect_ratio),u_fade_change:new a.Uniform1f(m,A.u_fade_change),u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(m,A.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(m,A.u_coord_matrix),u_is_text:new a.Uniform1i(m,A.u_is_text),u_pitch_with_map:new a.Uniform1i(m,A.u_pitch_with_map),u_texsize:new a.Uniform2f(m,A.u_texsize),u_texsize_icon:new a.Uniform2f(m,A.u_texsize_icon),u_texture:new a.Uniform1i(m,A.u_texture),u_texture_icon:new a.Uniform1i(m,A.u_texture_icon),u_gamma_scale:new a.Uniform1f(m,A.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(m,A.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(m,A.u_is_halo)}),background:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_opacity:new a.Uniform1f(m,A.u_opacity),u_color:new a.UniformColor(m,A.u_color)}),backgroundPattern:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_opacity:new a.Uniform1f(m,A.u_opacity),u_image:new a.Uniform1i(m,A.u_image),u_pattern_tl_a:new a.Uniform2f(m,A.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(m,A.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(m,A.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(m,A.u_pattern_br_b),u_texsize:new a.Uniform2f(m,A.u_texsize),u_mix:new a.Uniform1f(m,A.u_mix),u_pattern_size_a:new a.Uniform2f(m,A.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(m,A.u_pattern_size_b),u_scale_a:new a.Uniform1f(m,A.u_scale_a),u_scale_b:new a.Uniform1f(m,A.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(m,A.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(m,A.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(m,A.u_tile_units_to_pixels)}),terrain:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_texture:new a.Uniform1i(m,A.u_texture)}),terrainDepth:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix)}),terrainCoords:(m,A)=>({u_matrix:new a.UniformMatrix4f(m,A.u_matrix),u_texture:new a.Uniform1i(m,A.u_texture),u_terrain_coords_id:new a.Uniform1f(m,A.u_terrain_coords_id)})};class To{constructor(A,h,p){this.context=A;const y=A.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),A.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(A){const h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,A.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ls={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class So{constructor(A,h,p,y){this.length=h.length,this.attributes=p,this.itemSize=h.bytesPerElement,this.dynamicDraw=y,this.context=A;const B=A.gl;this.buffer=B.createBuffer(),A.bindVertexBuffer.set(this.buffer),B.bufferData(B.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?B.DYNAMIC_DRAW:B.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(A){if(A.length!==this.length)throw new Error(`Length of new data is ${A.length}, which doesn't match current length of ${this.length}`);const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,A.arrayBuffer)}enableAttributes(A,h){for(let p=0;p<this.attributes.length;p++){const y=h.attributes[this.attributes[p].name];y!==void 0&&A.enableVertexAttribArray(y)}}setVertexAttribPointers(A,h,p){for(let y=0;y<this.attributes.length;y++){const B=this.attributes[y],Q=h.attributes[B.name];Q!==void 0&&A.vertexAttribPointer(Q,B.components,A[Ls[B.type]],!1,this.itemSize,B.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ur{constructor(A){this.gl=A.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(A){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class xa extends Ur{getDefault(){return a.Color.transparent}set(A){const h=this.current;(A.r!==h.r||A.g!==h.g||A.b!==h.b||A.a!==h.a||this.dirty)&&(this.gl.clearColor(A.r,A.g,A.b,A.a),this.current=A,this.dirty=!1)}}class Fl extends Ur{getDefault(){return 1}set(A){(A!==this.current||this.dirty)&&(this.gl.clearDepth(A),this.current=A,this.dirty=!1)}}class bA extends Ur{getDefault(){return 0}set(A){(A!==this.current||this.dirty)&&(this.gl.clearStencil(A),this.current=A,this.dirty=!1)}}class Hs extends Ur{getDefault(){return[!0,!0,!0,!0]}set(A){const h=this.current;(A[0]!==h[0]||A[1]!==h[1]||A[2]!==h[2]||A[3]!==h[3]||this.dirty)&&(this.gl.colorMask(A[0],A[1],A[2],A[3]),this.current=A,this.dirty=!1)}}class ba extends Ur{getDefault(){return!0}set(A){(A!==this.current||this.dirty)&&(this.gl.depthMask(A),this.current=A,this.dirty=!1)}}class dn extends Ur{getDefault(){return 255}set(A){(A!==this.current||this.dirty)&&(this.gl.stencilMask(A),this.current=A,this.dirty=!1)}}class Ie extends Ur{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(A){const h=this.current;(A.func!==h.func||A.ref!==h.ref||A.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(A.func,A.ref,A.mask),this.current=A,this.dirty=!1)}}class Bn extends Ur{getDefault(){const A=this.gl;return[A.KEEP,A.KEEP,A.KEEP]}set(A){const h=this.current;(A[0]!==h[0]||A[1]!==h[1]||A[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(A[0],A[1],A[2]),this.current=A,this.dirty=!1)}}class pn extends Ur{getDefault(){return!1}set(A){if(A===this.current&&!this.dirty)return;const h=this.gl;A?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=A,this.dirty=!1}}class Qi extends Ur{getDefault(){return[0,1]}set(A){const h=this.current;(A[0]!==h[0]||A[1]!==h[1]||this.dirty)&&(this.gl.depthRange(A[0],A[1]),this.current=A,this.dirty=!1)}}class os extends Ur{getDefault(){return!1}set(A){if(A===this.current&&!this.dirty)return;const h=this.gl;A?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=A,this.dirty=!1}}class YA extends Ur{getDefault(){return this.gl.LESS}set(A){(A!==this.current||this.dirty)&&(this.gl.depthFunc(A),this.current=A,this.dirty=!1)}}class ko extends Ur{getDefault(){return!1}set(A){if(A===this.current&&!this.dirty)return;const h=this.gl;A?h.enable(h.BLEND):h.disable(h.BLEND),this.current=A,this.dirty=!1}}class Mo extends Ur{getDefault(){const A=this.gl;return[A.ONE,A.ZERO]}set(A){const h=this.current;(A[0]!==h[0]||A[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(A[0],A[1]),this.current=A,this.dirty=!1)}}class nA extends Ur{getDefault(){return a.Color.transparent}set(A){const h=this.current;(A.r!==h.r||A.g!==h.g||A.b!==h.b||A.a!==h.a||this.dirty)&&(this.gl.blendColor(A.r,A.g,A.b,A.a),this.current=A,this.dirty=!1)}}class Ca extends Ur{getDefault(){return this.gl.FUNC_ADD}set(A){(A!==this.current||this.dirty)&&(this.gl.blendEquation(A),this.current=A,this.dirty=!1)}}class $A extends Ur{getDefault(){return!1}set(A){if(A===this.current&&!this.dirty)return;const h=this.gl;A?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=A,this.dirty=!1}}class eo extends Ur{getDefault(){return this.gl.BACK}set(A){(A!==this.current||this.dirty)&&(this.gl.cullFace(A),this.current=A,this.dirty=!1)}}class Lf extends Ur{getDefault(){return this.gl.CCW}set(A){(A!==this.current||this.dirty)&&(this.gl.frontFace(A),this.current=A,this.dirty=!1)}}class Hf extends Ur{getDefault(){return null}set(A){(A!==this.current||this.dirty)&&(this.gl.useProgram(A),this.current=A,this.dirty=!1)}}class Pf extends Ur{getDefault(){return this.gl.TEXTURE0}set(A){(A!==this.current||this.dirty)&&(this.gl.activeTexture(A),this.current=A,this.dirty=!1)}}class zf extends Ur{getDefault(){const A=this.gl;return[0,0,A.drawingBufferWidth,A.drawingBufferHeight]}set(A){const h=this.current;(A[0]!==h[0]||A[1]!==h[1]||A[2]!==h[2]||A[3]!==h[3]||this.dirty)&&(this.gl.viewport(A[0],A[1],A[2],A[3]),this.current=A,this.dirty=!1)}}class Rf extends Ur{getDefault(){return null}set(A){if(A===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,A),this.current=A,this.dirty=!1}}class Of extends Ur{getDefault(){return null}set(A){if(A===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,A),this.current=A,this.dirty=!1}}class Ul extends Ur{getDefault(){return null}set(A){if(A===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,A),this.current=A,this.dirty=!1}}class Ea extends Ur{getDefault(){return null}set(A){if(A===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,A),this.current=A,this.dirty=!1}}class Ql extends Ur{getDefault(){return null}set(A){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,A),this.current=A,this.dirty=!1}}class Il extends Ur{constructor(A){super(A),this.vao=A.extVertexArrayObject}getDefault(){return null}set(A){this.vao&&(A!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(A),this.current=A,this.dirty=!1)}}class to extends Ur{getDefault(){return 4}set(A){if(A===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,A),this.current=A,this.dirty=!1}}class au extends Ur{getDefault(){return!1}set(A){if(A===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,A),this.current=A,this.dirty=!1}}class lu extends Ur{getDefault(){return!1}set(A){if(A===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,A),this.current=A,this.dirty=!1}}class Fa extends Ur{constructor(A,h){super(A),this.context=A,this.parent=h}getDefault(){return null}}class CA extends Fa{setDirty(){this.dirty=!0}set(A){if(A===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,A,0),this.current=A,this.dirty=!1}}class cu extends Fa{set(A){if(A===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,A),this.current=A,this.dirty=!1}}class ro{constructor(A,h,p,y){this.context=A,this.width=h,this.height=p;const B=A.gl,Q=this.framebuffer=B.createFramebuffer();if(this.colorAttachment=new CA(A,Q),y&&(this.depthAttachment=new cu(A,Q)),B.checkFramebufferStatus(B.FRAMEBUFFER)!==B.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const A=this.context.gl,h=this.colorAttachment.get();if(h&&A.deleteTexture(h),this.depthAttachment){const p=this.depthAttachment.get();p&&A.deleteRenderbuffer(p)}A.deleteFramebuffer(this.framebuffer)}}class di{constructor(A,h,p){this.blendFunction=A,this.blendColor=h,this.mask=p}}di.Replace=[1,0],di.disabled=new di(di.Replace,a.Color.transparent,[!1,!1,!1,!1]),di.unblended=new di(di.Replace,a.Color.transparent,[!0,!0,!0,!0]),di.alphaBlended=new di([1,771],a.Color.transparent,[!0,!0,!0,!0]);class uu{constructor(A){this.gl=A,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new xa(this),this.clearDepth=new Fl(this),this.clearStencil=new bA(this),this.colorMask=new Hs(this),this.depthMask=new ba(this),this.stencilMask=new dn(this),this.stencilFunc=new Ie(this),this.stencilOp=new Bn(this),this.stencilTest=new pn(this),this.depthRange=new Qi(this),this.depthTest=new os(this),this.depthFunc=new YA(this),this.blend=new ko(this),this.blendFunc=new Mo(this),this.blendColor=new nA(this),this.blendEquation=new Ca(this),this.cullFace=new $A(this),this.cullFaceSide=new eo(this),this.frontFace=new Lf(this),this.program=new Hf(this),this.activeTexture=new Pf(this),this.viewport=new zf(this),this.bindFramebuffer=new Rf(this),this.bindRenderbuffer=new Of(this),this.bindTexture=new Ul(this),this.bindVertexBuffer=new Ea(this),this.bindElementBuffer=new Ql(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Il(this),this.pixelStoreUnpack=new to(this),this.pixelStoreUnpackPremultiplyAlpha=new au(this),this.pixelStoreUnpackFlipY=new lu(this),this.extTextureFilterAnisotropic=A.getExtension("EXT_texture_filter_anisotropic")||A.getExtension("MOZ_EXT_texture_filter_anisotropic")||A.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=A.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=A.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(A.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=A.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=A.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=A.getParameter(A.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(A,h){return new To(this,A,h)}createVertexBuffer(A,h,p){return new So(this,A,h,p)}createRenderbuffer(A,h,p){const y=this.gl,B=y.createRenderbuffer();return this.bindRenderbuffer.set(B),y.renderbufferStorage(y.RENDERBUFFER,A,h,p),this.bindRenderbuffer.set(null),B}createFramebuffer(A,h,p){return new ro(this,A,h,p)}clear({color:A,depth:h}){const p=this.gl;let y=0;A&&(y|=p.COLOR_BUFFER_BIT,this.clearColor.set(A),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(y|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),p.clear(y)}setCullFace(A){A.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(A.mode),this.frontFace.set(A.frontFace))}setDepthMode(A){A.func!==this.gl.ALWAYS||A.mask?(this.depthTest.set(!0),this.depthFunc.set(A.func),this.depthMask.set(A.mask),this.depthRange.set(A.range)):this.depthTest.set(!1)}setStencilMode(A){A.test.func!==this.gl.ALWAYS||A.mask?(this.stencilTest.set(!0),this.stencilMask.set(A.mask),this.stencilOp.set([A.fail,A.depthFail,A.pass]),this.stencilFunc.set({func:A.test.func,ref:A.ref,mask:A.test.mask})):this.stencilTest.set(!1)}setColorMode(A){E(A.blendFunction,di.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(A.blendFunction),this.blendColor.set(A.blendColor)),this.colorMask.set(A.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class gr{constructor(A,h,p){this.func=A,this.mask=h,this.range=p}}gr.ReadOnly=!1,gr.ReadWrite=!0,gr.disabled=new gr(519,gr.ReadOnly,[0,1]);const Mr=7680;class ui{constructor(A,h,p,y,B,Q){this.test=A,this.ref=h,this.mask=p,this.fail=y,this.depthFail=B,this.pass=Q}}ui.disabled=new ui({func:519,mask:0},0,0,Mr,Mr,Mr);class wi{constructor(A,h,p){this.enable=A,this.mode=h,this.frontFace=p}}let Do;function io(m,A,h,p,y,B,Q){const S=m.context,k=S.gl,D=m.useProgram("collisionBox"),O=[];let G=0,Z=0;for(let he=0;he<p.length;he++){const Ke=p[he],Pe=A.getTile(Ke),et=Pe.getBucket(h);if(!et)continue;let rt=Ke.posMatrix;y[0]===0&&y[1]===0||(rt=m.translatePosMatrix(Ke.posMatrix,Pe,y,B));const pt=Q?et.textCollisionBox:et.iconCollisionBox,Ye=et.collisionCircleArray;if(Ye.length>0){const St=a.create(),Bt=rt;a.mul(St,et.placementInvProjMatrix,m.transform.glCoordMatrix),a.mul(St,St,et.placementViewportMatrix),O.push({circleArray:Ye,circleOffset:Z,transform:Bt,invTransform:St,coord:Ke}),G+=Ye.length/4,Z=G}pt&&D.draw(S,k.LINES,gr.disabled,ui.disabled,m.colorModeForRenderPass(),wi.disabled,Sn(rt,m.transform,Pe),m.style.terrain&&m.style.terrain.getTerrainData(Ke),h.id,pt.layoutVertexBuffer,pt.indexBuffer,pt.segments,null,m.transform.zoom,null,null,pt.collisionVertexBuffer)}if(!Q||!O.length)return;const ae=m.useProgram("collisionCircle"),ne=new a.CollisionCircleLayoutArray;ne.resize(4*G),ne._trim();let oe=0;for(const he of O)for(let Ke=0;Ke<he.circleArray.length/4;Ke++){const Pe=4*Ke,et=he.circleArray[Pe+0],rt=he.circleArray[Pe+1],pt=he.circleArray[Pe+2],Ye=he.circleArray[Pe+3];ne.emplace(oe++,et,rt,pt,Ye,0),ne.emplace(oe++,et,rt,pt,Ye,1),ne.emplace(oe++,et,rt,pt,Ye,2),ne.emplace(oe++,et,rt,pt,Ye,3)}(!Do||Do.length<2*G)&&(Do=function(he){const Ke=2*he,Pe=new a.QuadTriangleArray;Pe.resize(Ke),Pe._trim();for(let et=0;et<Ke;et++){const rt=6*et;Pe.uint16[rt+0]=4*et+0,Pe.uint16[rt+1]=4*et+1,Pe.uint16[rt+2]=4*et+2,Pe.uint16[rt+3]=4*et+2,Pe.uint16[rt+4]=4*et+3,Pe.uint16[rt+5]=4*et+0}return Pe}(G));const be=S.createIndexBuffer(Do,!0),Te=S.createVertexBuffer(ne,a.collisionCircleLayout.members,!0);for(const he of O){const Ke={u_matrix:he.transform,u_inv_matrix:he.invTransform,u_camera_to_center_distance:(Le=m.transform).cameraToCenterDistance,u_viewport_size:[Le.width,Le.height]};ae.draw(S,k.TRIANGLES,gr.disabled,ui.disabled,m.colorModeForRenderPass(),wi.disabled,Ke,m.style.terrain&&m.style.terrain.getTerrainData(he.coord),h.id,Te,be,a.SegmentVector.simpleSegment(0,2*he.circleOffset,he.circleArray.length,he.circleArray.length/2),null,m.transform.zoom,null,null,null)}var Le;Te.destroy(),be.destroy()}wi.disabled=new wi(!1,1029,2305),wi.backCCW=new wi(!0,1029,2305);const Kf=a.identity(new Float32Array(16));function Nf(m,A,h,p,y,B){const{horizontalAlign:Q,verticalAlign:S}=a.getAnchorAlignment(m),k=-(Q-.5)*A,D=-(S-.5)*h,O=a.evaluateVariableOffset(m,p);return new a.pointGeometry((k/y+O[0])*B,(D/y+O[1])*B)}function hu(m,A,h,p,y,B,Q,S,k,D,O){const G=m.text.placedSymbolArray,Z=m.text.dynamicLayoutVertexArray,ae=m.icon.dynamicLayoutVertexArray,ne={};Z.clear();for(let oe=0;oe<G.length;oe++){const be=G.get(oe),Te=m.allowVerticalPlacement&&!be.placedOrientation,Le=be.hidden||!be.crossTileID||Te?null:p[be.crossTileID];if(Le){const he=new a.pointGeometry(be.anchorX,be.anchorY),Ke=Ar(he,h?Q:B,O),Pe=yi(y.cameraToCenterDistance,Ke.signedDistanceFromCamera);let et=a.evaluateSizeForFeature(m.textSizeData,k,be)*Pe/a.ONE_EM;h&&(et*=m.tilePixelRatio/S);const{width:rt,height:pt,anchor:Ye,textOffset:St,textBoxScale:Bt}=Le,kt=Nf(Ye,rt,pt,St,Bt,et),lr=h?Ar(he.add(kt),B,O).point:Ke.point.add(A?kt.rotate(-y.angle):kt),cr=m.allowVerticalPlacement&&be.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(let Jt=0;Jt<be.numGlyphs;Jt++)a.addDynamicAttributes(Z,lr,cr);D&&be.associatedIconIndex>=0&&(ne[be.associatedIconIndex]={shiftedAnchor:lr,angle:cr})}else rr(be.numGlyphs,Z)}if(D){ae.clear();const oe=m.icon.placedSymbolArray;for(let be=0;be<oe.length;be++){const Te=oe.get(be);if(Te.hidden)rr(Te.numGlyphs,ae);else{const Le=ne[be];if(Le)for(let he=0;he<Te.numGlyphs;he++)a.addDynamicAttributes(ae,Le.shiftedAnchor,Le.angle);else rr(Te.numGlyphs,ae)}}m.icon.dynamicLayoutVertexBuffer.updateData(ae)}m.text.dynamicLayoutVertexBuffer.updateData(Z)}function Vf(m,A,h){return h.iconsInText&&A?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function Ua(m,A,h,p,y,B,Q,S,k,D,O,G){const Z=m.context,ae=Z.gl,ne=m.transform,oe=S==="map",be=k==="map",Te=S!=="viewport"&&h.layout.get("symbol-placement")!=="point",Le=oe&&!be&&!Te,he=!h.layout.get("symbol-sort-key").isConstant();let Ke=!1;const Pe=m.depthModeForSublayer(0,gr.ReadOnly),et=h.layout.get("text-variable-anchor"),rt=[];for(const pt of p){const Ye=A.getTile(pt),St=Ye.getBucket(h);if(!St)continue;const Bt=y?St.text:St.icon;if(!Bt||!Bt.segments.get().length)continue;const kt=Bt.programConfigurations.get(h.id),lr=y||St.sdfIcons,cr=y?St.textSizeData:St.iconSizeData,Jt=be||ne.pitch!==0,Zr=m.useProgram(Vf(lr,y,St),kt),Wr=a.evaluateSizeForZoom(cr,ne.zoom),Br=m.style.terrain&&m.style.terrain.getTerrainData(pt);let br,$r,Zi,ys,ls=[0,0],ws=null;if(y){if($r=Ye.glyphAtlasTexture,Zi=ae.LINEAR,br=Ye.glyphAtlasTexture.size,St.iconsInText){ls=Ye.imageAtlasTexture.size,ws=Ye.imageAtlasTexture;const Jn=cr.kind==="composite"||cr.kind==="camera";ys=Jt||m.options.rotating||m.options.zooming||Jn?ae.LINEAR:ae.NEAREST}}else{const Jn=h.layout.get("icon-size").constantOr(0)!==1||St.iconsNeedLinear;$r=Ye.imageAtlasTexture,Zi=lr||m.options.rotating||m.options.zooming||Jn||Jt?ae.LINEAR:ae.NEAREST,br=Ye.imageAtlasTexture.size}const uA=ri(Ye,1,m.transform.zoom),jn=_i(pt.posMatrix,be,oe,m.transform,uA),bn=ci(pt.posMatrix,be,oe,m.transform,uA),Rs=et&&St.hasTextData(),La=h.layout.get("icon-text-fit")!=="none"&&Rs&&St.hasIconData();if(Te){const Jn=m.style.terrain?(Gl,lo)=>m.style.terrain.getElevation(pt,Gl,lo):null,QA=h.layout.get("text-rotation-alignment")==="map";Hr(St,pt.posMatrix,m,y,jn,bn,be,D,QA,Jn)}const Ri=m.translatePosMatrix(pt.posMatrix,Ye,B,Q),dr=Te||y&&et||La?Kf:jn,zr=m.translatePosMatrix(bn,Ye,B,Q,!0),Wi=lr&&h.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let qi;qi=lr?St.iconsInText?Ba(cr.kind,Wr,Le,be,m,Ri,dr,zr,br,ls):gs(cr.kind,Wr,Le,be,m,Ri,dr,zr,y,br,!0):JA(cr.kind,Wr,Le,be,m,Ri,dr,zr,y,br);const Bi={program:Zr,buffers:Bt,uniformValues:qi,atlasTexture:$r,atlasTextureIcon:ws,atlasInterpolation:Zi,atlasInterpolationIcon:ys,isSDF:lr,hasHalo:Wi};if(he&&St.canOverlap){Ke=!0;const Jn=Bt.segments.get();for(const QA of Jn)rt.push({segments:new a.SegmentVector([QA]),sortKey:QA.sortKey,state:Bi,terrainData:Br})}else rt.push({segments:Bt.segments,sortKey:0,state:Bi,terrainData:Br})}Ke&&rt.sort((pt,Ye)=>pt.sortKey-Ye.sortKey);for(const pt of rt){const Ye=pt.state;if(Z.activeTexture.set(ae.TEXTURE0),Ye.atlasTexture.bind(Ye.atlasInterpolation,ae.CLAMP_TO_EDGE),Ye.atlasTextureIcon&&(Z.activeTexture.set(ae.TEXTURE1),Ye.atlasTextureIcon&&Ye.atlasTextureIcon.bind(Ye.atlasInterpolationIcon,ae.CLAMP_TO_EDGE)),Ye.isSDF){const St=Ye.uniformValues;Ye.hasHalo&&(St.u_is_halo=1,Lo(Ye.buffers,pt.segments,h,m,Ye.program,Pe,O,G,St,pt.terrainData)),St.u_is_halo=0}Lo(Ye.buffers,pt.segments,h,m,Ye.program,Pe,O,G,Ye.uniformValues,pt.terrainData)}}function Lo(m,A,h,p,y,B,Q,S,k,D){const O=p.context;y.draw(O,O.gl.TRIANGLES,B,Q,S,wi.disabled,k,D,h.id,m.layoutVertexBuffer,m.indexBuffer,A,h.paint,p.transform.zoom,m.programConfigurations.get(h.id),m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer)}function Ho(m,A,h,p,y,B,Q){const S=m.context.gl,k=h.paint.get("fill-pattern"),D=k&&k.constantOr(1),O=h.getCrossfadeParameters();let G,Z,ae,ne,oe;Q?(Z=D&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",G=S.LINES):(Z=D?"fillPattern":"fill",G=S.TRIANGLES);for(const be of p){const Te=A.getTile(be);if(D&&!Te.patternsLoaded())continue;const Le=Te.getBucket(h);if(!Le)continue;const he=Le.programConfigurations.get(h.id),Ke=m.useProgram(Z,he),Pe=m.style.terrain&&m.style.terrain.getTerrainData(be);D&&(m.context.activeTexture.set(S.TEXTURE0),Te.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),he.updatePaintBuffers(O));const et=k.constantOr(null);if(et&&Te.imageAtlas){const Ye=Te.imageAtlas,St=Ye.patternPositions[et.to.toString()],Bt=Ye.patternPositions[et.from.toString()];St&&Bt&&he.setConstantPatternPositions(St,Bt)}const rt=Pe?be:null,pt=m.translatePosMatrix(rt?rt.posMatrix:be.posMatrix,Te,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(Q){ne=Le.indexBuffer2,oe=Le.segments2;const Ye=[S.drawingBufferWidth,S.drawingBufferHeight];ae=Z==="fillOutlinePattern"&&D?eA(pt,m,O,Te,Ye):BA(pt,Ye)}else ne=Le.indexBuffer,oe=Le.segments,ae=D?$s(pt,m,O,Te):Ts(pt);Ke.draw(m.context,G,y,m.stencilModeForClipping(be),B,wi.disabled,ae,Pe,h.id,Le.layoutVertexBuffer,ne,oe,h.paint,m.transform.zoom,he)}}function Po(m,A,h,p,y,B,Q){const S=m.context,k=S.gl,D=h.paint.get("fill-extrusion-pattern"),O=D.constantOr(1),G=h.getCrossfadeParameters(),Z=h.paint.get("fill-extrusion-opacity");for(const ae of p){const ne=A.getTile(ae),oe=ne.getBucket(h);if(!oe)continue;const be=m.style.terrain&&m.style.terrain.getTerrainData(ae),Te=oe.programConfigurations.get(h.id),Le=m.useProgram(O?"fillExtrusionPattern":"fillExtrusion",Te);O&&(m.context.activeTexture.set(k.TEXTURE0),ne.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),Te.updatePaintBuffers(G));const he=D.constantOr(null);if(he&&ne.imageAtlas){const rt=ne.imageAtlas,pt=rt.patternPositions[he.to.toString()],Ye=rt.patternPositions[he.from.toString()];pt&&Ye&&Te.setConstantPatternPositions(pt,Ye)}const Ke=m.translatePosMatrix(ae.posMatrix,ne,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Pe=h.paint.get("fill-extrusion-vertical-gradient"),et=O?jA(Ke,m,Pe,Z,ae,G,ne):Is(Ke,m,Pe,Z);Le.draw(S,S.gl.TRIANGLES,y,B,Q,wi.backCCW,et,be,h.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,h.paint,m.transform.zoom,Te,m.style.terrain&&oe.centroidVertexBuffer)}}function Tl(m,A,h,p,y,B,Q){const S=m.context,k=S.gl,D=h.fbo;if(!D)return;const O=m.useProgram("hillshade"),G=m.style.terrain&&m.style.terrain.getTerrainData(A);S.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,D.colorAttachment.get()),O.draw(S,k.TRIANGLES,y,B,Q,wi.disabled,((Z,ae,ne,oe)=>{const be=ne.paint.get("hillshade-shadow-color"),Te=ne.paint.get("hillshade-highlight-color"),Le=ne.paint.get("hillshade-accent-color");let he=ne.paint.get("hillshade-illumination-direction")*(Math.PI/180);ne.paint.get("hillshade-illumination-anchor")==="viewport"&&(he-=Z.transform.angle);const Ke=!Z.options.moving;return{u_matrix:oe?oe.posMatrix:Z.transform.calculatePosMatrix(ae.tileID.toUnwrapped(),Ke),u_image:0,u_latrange:ks(0,ae.tileID),u_light:[ne.paint.get("hillshade-exaggeration"),he],u_shadow:be,u_highlight:Te,u_accent:Le}})(m,h,p,G?A:null),G,p.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}function fu(m,A,h,p,y,B){const Q=m.context,S=Q.gl,k=A.dem;if(k&&k.data){const D=k.dim,O=k.stride,G=k.getPixels();if(Q.activeTexture.set(S.TEXTURE1),Q.pixelStoreUnpackPremultiplyAlpha.set(!1),A.demTexture=A.demTexture||m.getTileTexture(O),A.demTexture){const ae=A.demTexture;ae.update(G,{premultiply:!1}),ae.bind(S.NEAREST,S.CLAMP_TO_EDGE)}else A.demTexture=new V(Q,G,S.RGBA,{premultiply:!1}),A.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);Q.activeTexture.set(S.TEXTURE0);let Z=A.fbo;if(!Z){const ae=new V(Q,{width:D,height:D,data:null},S.RGBA);ae.bind(S.LINEAR,S.CLAMP_TO_EDGE),Z=A.fbo=Q.createFramebuffer(D,D,!0),Z.colorAttachment.set(ae.texture)}Q.bindFramebuffer.set(Z.framebuffer),Q.viewport.set([0,0,D,D]),m.useProgram("hillshadePrepare").draw(Q,S.TRIANGLES,p,y,B,wi.disabled,((ae,ne)=>{const oe=ne.stride,be=a.create();return a.ortho(be,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(be,be,[0,-a.EXTENT,0]),{u_matrix:be,u_image:1,u_dimension:[oe,oe],u_zoom:ae.overscaledZ,u_unpack:ne.getUnpackVector()}})(A.tileID,k),null,h.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments),A.needsHillshadePrepare=!1}}function Qa(m,A,h,p,y,B){const Q=p.paint.get("raster-fade-duration");if(!B&&Q>0){const S=a.exported.now(),k=(S-m.timeAdded)/Q,D=A?(S-A.timeAdded)/Q:-1,O=h.getSource(),G=y.coveringZoomLevel({tileSize:O.tileSize,roundZoom:O.roundZoom}),Z=!A||Math.abs(A.tileID.overscaledZ-G)>Math.abs(m.tileID.overscaledZ-G),ae=Z&&m.refreshedUponExpiration?1:a.clamp(Z?k:1-D,0,1);return m.refreshedUponExpiration&&k>=1&&(m.refreshedUponExpiration=!1),A?{opacity:1,mix:1-ae}:{opacity:ae,mix:0}}return{opacity:1,mix:0}}const Ia=new a.Color(1,0,0,1),as=new a.Color(0,1,0,1),du=new a.Color(0,0,1,1),Sl=new a.Color(1,0,1,1),pu=new a.Color(0,1,1,1);function EA(m,A,h,p){no(m,0,A+h/2,m.transform.width,h,p)}function zo(m,A,h,p){no(m,A-h/2,0,h,m.transform.height,p)}function no(m,A,h,p,y,B){const Q=m.context,S=Q.gl;S.enable(S.SCISSOR_TEST),S.scissor(A*m.pixelRatio,h*m.pixelRatio,p*m.pixelRatio,y*m.pixelRatio),Q.clear({color:B}),S.disable(S.SCISSOR_TEST)}function Gf(m,A,h){const p=m.context,y=p.gl,B=h.posMatrix,Q=m.useProgram("debug"),S=gr.disabled,k=ui.disabled,D=m.colorModeForRenderPass(),O="$debug",G=m.style.terrain&&m.style.terrain.getTerrainData(h);p.activeTexture.set(y.TEXTURE0),m.emptyTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE);const Z=A.getTileByID(h.key).latestRawTileData,ae=Math.floor((Z&&Z.byteLength||0)/1024),ne=A.getTile(h).tileSize,oe=512/Math.min(ne,512)*(h.overscaledZ/m.transform.zoom)*.5;let be=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(be+=` => ${h.overscaledZ}`),function(Te,Le){Te.initDebugOverlayCanvas();const he=Te.debugOverlayCanvas,Ke=Te.context.gl,Pe=Te.debugOverlayCanvas.getContext("2d");Pe.clearRect(0,0,he.width,he.height),Pe.shadowColor="white",Pe.shadowBlur=2,Pe.lineWidth=1.5,Pe.strokeStyle="white",Pe.textBaseline="top",Pe.font="bold 36px Open Sans, sans-serif",Pe.fillText(Le,5,5),Pe.strokeText(Le,5,5),Te.debugOverlayTexture.update(he),Te.debugOverlayTexture.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE)}(m,`${be} ${ae}kB`),Q.draw(p,y.TRIANGLES,S,k,di.alphaBlended,wi.disabled,ss(B,a.Color.transparent,oe),null,O,m.debugBuffer,m.quadTriangleIndexBuffer,m.debugSegments),Q.draw(p,y.LINE_STRIP,S,k,D,wi.disabled,ss(B,a.Color.red),G,O,m.debugBuffer,m.tileBorderIndexBuffer,m.debugSegments)}function Ta(m,A,h){const p=m.context,y=p.gl,B=m.colorModeForRenderPass(),Q=new gr(y.LEQUAL,gr.ReadWrite,m.depthRangeFor3D),S=m.useProgram("terrain"),k=A.getTerrainMesh(),D=A.getTerrainData(h.tileID);p.bindFramebuffer.set(null),p.viewport.set([0,0,m.width,m.height]),p.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,A.getRTTFramebuffer().colorAttachment.get());const O=m.transform.calculatePosMatrix(h.tileID.toUnwrapped());S.draw(p,y.TRIANGLES,Q,ui.disabled,B,wi.backCCW,{u_matrix:O,u_texture:0},D,"terrain",k.vertexBuffer,k.indexBuffer,k.segments)}function gu(m,A,h,p){const y=m.context,B=h.tileSize*A.qualityFactor;h.textures[p]||(h.textures[p]=m.getTileTexture(B)||new V(y,{width:B,height:B,data:null},y.gl.RGBA),h.textures[p].bind(y.gl.LINEAR,y.gl.CLAMP_TO_EDGE),p===0&&A.sourceCache.renderHistory.unshift(h.tileID.key));const Q=A.getRTTFramebuffer();Q.colorAttachment.set(h.textures[p].texture),y.bindFramebuffer.set(Q.framebuffer),y.viewport.set([0,0,B,B])}class mu{constructor(A){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=A,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=A.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const A=this.painter.style,h=A.terrain;for(const p in A.sourceCaches){this._coordsDescendingInv[p]={};const y=A.sourceCaches[p].getVisibleCoordinates();for(const B of y){const Q=h.sourceCache.getTerrainCoords(B);for(const S in Q)this._coordsDescendingInv[p][S]||(this._coordsDescendingInv[p][S]=[]),this._coordsDescendingInv[p][S].push(Q[S])}}for(const p of A._order){const y=A._layers[p],B=y.source;if(this._renderToTexture[y.type]&&!this._coordsDescendingInvStr[B]){this._coordsDescendingInvStr[B]={};for(const Q in this._coordsDescendingInv[B])this._coordsDescendingInvStr[B][Q]=this._coordsDescendingInv[B][Q].map(S=>S.key).sort().join()}}return this._renderableTiles.forEach(p=>{for(const y in this._coordsDescendingInvStr){const B=this._coordsDescendingInvStr[y][p.tileID.key];B&&B!==p.textureCoords[y]&&p.clearTextures(this.painter),h.needsRerender(y,p.tileID)&&p.clearTextures(this.painter)}this._rerender[p.tileID.key]=!p.textures.length}),h.clearRerenderCache(),h.sourceCache.removeOutdated(this.painter),this}renderLayer(A){const h=A.type,p=this.painter,y=p.style._order,B=p.currentLayer,Q=B+1===y.length;if(this._renderToTexture[h]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=h,this._stacks[this._stacks.length-1].push(y[B]),!Q))return!0;if(this._renderToTexture[this._prevType]||h==="hillshade"||this._renderToTexture[h]&&Q){this._prevType=h;const S=this._stacks.length-1,k=this._stacks[S]||[];for(const D of this._renderableTiles){if(gu(p,p.style.terrain,D,S),this._rerender[D.tileID.key]){p.context.clear({color:a.Color.transparent});for(let O=0;O<k.length;O++){const G=p.style._layers[k[O]],Z=G.source?this._coordsDescendingInv[G.source][D.tileID.key]:[D.tileID];p._renderTileClippingMasks(G,Z),p.renderLayer(p,p.style.sourceCaches[G.source],G,Z),G.source&&(D.textureCoords[G.source]=this._coordsDescendingInvStr[G.source][D.tileID.key])}}Ta(p,p.style.terrain,D)}if(h==="hillshade"){this._stacks.push([y[B]]);for(const D of this._renderableTiles){const O=this._coordsDescendingInv[A.source][D.tileID.key];gu(p,p.style.terrain,D,this._stacks.length-1),p.context.clear({color:a.Color.transparent}),p._renderTileClippingMasks(A,O),p.renderLayer(p,p.style.sourceCaches[A.source],A,O),Ta(p,p.style.terrain,D)}return!0}return this._renderToTexture[h]}return!1}}const Ro={symbol:function(m,A,h,p,y){if(m.renderPass!=="translucent")return;const B=ui.disabled,Q=m.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(S,k,D,O,G,Z,ae){const ne=k.transform,oe=G==="map",be=Z==="map";for(const Te of S){const Le=O.getTile(Te),he=Le.getBucket(D);if(!he||!he.text||!he.text.segments.get().length)continue;const Ke=a.evaluateSizeForZoom(he.textSizeData,ne.zoom),Pe=ri(Le,1,k.transform.zoom),et=_i(Te.posMatrix,be,oe,k.transform,Pe),rt=D.layout.get("icon-text-fit")!=="none"&&he.hasIconData();if(Ke){const pt=Math.pow(2,ne.zoom-Le.tileID.overscaledZ);hu(he,oe,be,ae,ne,et,Te.posMatrix,pt,Ke,rt,k.style.terrain?(Ye,St)=>k.style.terrain.getElevation(Te,Ye,St):null)}}}(p,m,h,A,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),y),h.paint.get("icon-opacity").constantOr(1)!==0&&Ua(m,A,h,p,!1,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),h.layout.get("icon-rotation-alignment"),h.layout.get("icon-pitch-alignment"),h.layout.get("icon-keep-upright"),B,Q),h.paint.get("text-opacity").constantOr(1)!==0&&Ua(m,A,h,p,!0,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),h.layout.get("text-keep-upright"),B,Q),A.map.showCollisionBoxes&&(io(m,A,h,p,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),io(m,A,h,p,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))},circle:function(m,A,h,p){if(m.renderPass!=="translucent")return;const y=h.paint.get("circle-opacity"),B=h.paint.get("circle-stroke-width"),Q=h.paint.get("circle-stroke-opacity"),S=!h.layout.get("circle-sort-key").isConstant();if(y.constantOr(1)===0&&(B.constantOr(1)===0||Q.constantOr(1)===0))return;const k=m.context,D=k.gl,O=m.depthModeForSublayer(0,gr.ReadOnly),G=ui.disabled,Z=m.colorModeForRenderPass(),ae=[];for(let ne=0;ne<p.length;ne++){const oe=p[ne],be=A.getTile(oe),Te=be.getBucket(h);if(!Te)continue;const Le=Te.programConfigurations.get(h.id),he=m.useProgram("circle",Le),Ke=Te.layoutVertexBuffer,Pe=Te.indexBuffer,et=m.style.terrain&&m.style.terrain.getTerrainData(oe),rt={programConfiguration:Le,program:he,layoutVertexBuffer:Ke,indexBuffer:Pe,uniformValues:tA(m,oe,be,h),terrainData:et};if(S){const pt=Te.segments.get();for(const Ye of pt)ae.push({segments:new a.SegmentVector([Ye]),sortKey:Ye.sortKey,state:rt})}else ae.push({segments:Te.segments,sortKey:0,state:rt})}S&&ae.sort((ne,oe)=>ne.sortKey-oe.sortKey);for(const ne of ae){const{programConfiguration:oe,program:be,layoutVertexBuffer:Te,indexBuffer:Le,uniformValues:he,terrainData:Ke}=ne.state;be.draw(k,D.TRIANGLES,O,G,Z,wi.disabled,he,Ke,h.id,Te,Le,ne.segments,h.paint,m.transform.zoom,oe)}},heatmap:function(m,A,h,p){if(h.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const y=m.context,B=y.gl,Q=ui.disabled,S=new di([B.ONE,B.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(k,D,O){const G=k.gl;k.activeTexture.set(G.TEXTURE1),k.viewport.set([0,0,D.width/4,D.height/4]);let Z=O.heatmapFbo;if(Z)G.bindTexture(G.TEXTURE_2D,Z.colorAttachment.get()),k.bindFramebuffer.set(Z.framebuffer);else{const ae=G.createTexture();G.bindTexture(G.TEXTURE_2D,ae),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.CLAMP_TO_EDGE),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.CLAMP_TO_EDGE),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.LINEAR),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.LINEAR),Z=O.heatmapFbo=k.createFramebuffer(D.width/4,D.height/4,!1),function(ne,oe,be,Te){const Le=ne.gl;Le.texImage2D(Le.TEXTURE_2D,0,Le.RGBA,oe.width/4,oe.height/4,0,Le.RGBA,ne.extRenderToTextureHalfFloat?ne.extTextureHalfFloat.HALF_FLOAT_OES:Le.UNSIGNED_BYTE,null),Te.colorAttachment.set(be)}(k,D,ae,Z)}})(y,m,h),y.clear({color:a.Color.transparent});for(let k=0;k<p.length;k++){const D=p[k];if(A.hasRenderableParent(D))continue;const O=A.getTile(D),G=O.getBucket(h);if(!G)continue;const Z=G.programConfigurations.get(h.id),ae=m.useProgram("heatmap",Z),{zoom:ne}=m.transform;ae.draw(y,B.TRIANGLES,gr.disabled,Q,S,wi.disabled,Ss(D.posMatrix,O,ne,h.paint.get("heatmap-intensity")),null,h.id,G.layoutVertexBuffer,G.indexBuffer,G.segments,h.paint,m.transform.zoom,Z)}y.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(y,B){const Q=y.context,S=Q.gl,k=B.heatmapFbo;if(!k)return;Q.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,k.colorAttachment.get()),Q.activeTexture.set(S.TEXTURE1);let D=B.colorRampTexture;D||(D=B.colorRampTexture=new V(Q,B.colorRamp,S.RGBA)),D.bind(S.LINEAR,S.CLAMP_TO_EDGE),y.useProgram("heatmapTexture").draw(Q,S.TRIANGLES,gr.disabled,ui.disabled,y.colorModeForRenderPass(),wi.disabled,((O,G,Z,ae)=>{const ne=a.create();a.ortho(ne,0,O.width,O.height,0,0,1);const oe=O.context.gl;return{u_matrix:ne,u_world:[oe.drawingBufferWidth,oe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:G.paint.get("heatmap-opacity")}})(y,B),null,B.id,y.viewportBuffer,y.quadTriangleIndexBuffer,y.viewportSegments,B.paint,y.transform.zoom)}(m,h))},line:function(m,A,h,p){if(m.renderPass!=="translucent")return;const y=h.paint.get("line-opacity"),B=h.paint.get("line-width");if(y.constantOr(1)===0||B.constantOr(1)===0)return;const Q=m.depthModeForSublayer(0,gr.ReadOnly),S=m.colorModeForRenderPass(),k=h.paint.get("line-dasharray"),D=h.paint.get("line-pattern"),O=D.constantOr(1),G=h.paint.get("line-gradient"),Z=h.getCrossfadeParameters(),ae=O?"linePattern":k?"lineSDF":G?"lineGradient":"line",ne=m.context,oe=ne.gl;let be=!0;for(const Te of p){const Le=A.getTile(Te);if(O&&!Le.patternsLoaded())continue;const he=Le.getBucket(h);if(!he)continue;const Ke=he.programConfigurations.get(h.id),Pe=m.context.program.get(),et=m.useProgram(ae,Ke),rt=be||et.program!==Pe,pt=m.style.terrain&&m.style.terrain.getTerrainData(Te),Ye=D.constantOr(null);if(Ye&&Le.imageAtlas){const kt=Le.imageAtlas,lr=kt.patternPositions[Ye.to.toString()],cr=kt.patternPositions[Ye.from.toString()];lr&&cr&&Ke.setConstantPatternPositions(lr,cr)}const St=pt?Te:null,Bt=O?kn(m,Le,h,Z,St):k?vn(m,Le,h,k,Z,St):G?rA(m,Le,h,he.lineClipsArray.length,St):Ms(m,Le,h,St);if(O)ne.activeTexture.set(oe.TEXTURE0),Le.imageAtlasTexture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),Ke.updatePaintBuffers(Z);else if(k&&(rt||m.lineAtlas.dirty))ne.activeTexture.set(oe.TEXTURE0),m.lineAtlas.bind(ne);else if(G){const kt=he.gradients[h.id];let lr=kt.texture;if(h.gradientVersion!==kt.version){let cr=256;if(h.stepInterpolant){const Jt=A.getSource().maxzoom,Zr=Te.canonical.z===Jt?Math.ceil(1<<m.transform.maxZoom-Te.canonical.z):1;cr=a.clamp(a.nextPowerOfTwo(he.maxLineLength/a.EXTENT*1024*Zr),256,ne.maxTextureSize)}kt.gradient=a.renderColorRamp({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:cr,image:kt.gradient||void 0,clips:he.lineClipsArray}),kt.texture?kt.texture.update(kt.gradient):kt.texture=new V(ne,kt.gradient,oe.RGBA),kt.version=h.gradientVersion,lr=kt.texture}ne.activeTexture.set(oe.TEXTURE0),lr.bind(h.stepInterpolant?oe.NEAREST:oe.LINEAR,oe.CLAMP_TO_EDGE)}et.draw(ne,oe.TRIANGLES,Q,m.stencilModeForClipping(Te),S,wi.disabled,Bt,pt,h.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,h.paint,m.transform.zoom,Ke,he.layoutVertexBuffer2),be=!1}},fill:function(m,A,h,p){const y=h.paint.get("fill-color"),B=h.paint.get("fill-opacity");if(B.constantOr(1)===0)return;const Q=m.colorModeForRenderPass(),S=h.paint.get("fill-pattern"),k=m.opaquePassEnabledForLayer()&&!S.constantOr(1)&&y.constantOr(a.Color.transparent).a===1&&B.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===k){const D=m.depthModeForSublayer(1,m.renderPass==="opaque"?gr.ReadWrite:gr.ReadOnly);Ho(m,A,h,p,D,Q,!1)}if(m.renderPass==="translucent"&&h.paint.get("fill-antialias")){const D=m.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,gr.ReadOnly);Ho(m,A,h,p,D,Q,!0)}},"fill-extrusion":function(m,A,h,p){const y=h.paint.get("fill-extrusion-opacity");if(y!==0&&m.renderPass==="translucent"){const B=new gr(m.context.gl.LEQUAL,gr.ReadWrite,m.depthRangeFor3D);if(y!==1||h.paint.get("fill-extrusion-pattern").constantOr(1))Po(m,A,h,p,B,ui.disabled,di.disabled),Po(m,A,h,p,B,m.stencilModeFor3D(),m.colorModeForRenderPass());else{const Q=m.colorModeForRenderPass();Po(m,A,h,p,B,ui.disabled,Q)}}},hillshade:function(m,A,h,p){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent")return;const y=m.context,B=m.depthModeForSublayer(0,gr.ReadOnly),Q=m.colorModeForRenderPass(),[S,k]=m.renderPass==="translucent"?m.stencilConfigForOverlap(p):[{},p];for(const D of k){const O=A.getTile(D);O.needsHillshadePrepare!==void 0&&O.needsHillshadePrepare&&m.renderPass==="offscreen"?fu(m,O,h,B,ui.disabled,Q):m.renderPass==="translucent"&&Tl(m,D,O,h,B,S[D.overscaledZ],Q)}y.viewport.set([0,0,m.width,m.height])},raster:function(m,A,h,p){if(m.renderPass!=="translucent"||h.paint.get("raster-opacity")===0||!p.length)return;const y=m.context,B=y.gl,Q=A.getSource(),S=m.useProgram("raster"),k=m.colorModeForRenderPass(),[D,O]=Q instanceof nt?[{},p]:m.stencilConfigForOverlap(p),G=O[O.length-1].overscaledZ,Z=!m.options.moving;for(const ae of O){const ne=m.depthModeForSublayer(ae.overscaledZ-G,h.paint.get("raster-opacity")===1?gr.ReadWrite:gr.ReadOnly,B.LESS),oe=A.getTile(ae);oe.registerFadeDuration(h.paint.get("raster-fade-duration"));const be=A.findLoadedParent(ae,0),Te=Qa(oe,be,A,h,m.transform,m.style.terrain);let Le,he;const Ke=h.paint.get("raster-resampling")==="nearest"?B.NEAREST:B.LINEAR;y.activeTexture.set(B.TEXTURE0),oe.texture.bind(Ke,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),y.activeTexture.set(B.TEXTURE1),be?(be.texture.bind(Ke,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),Le=Math.pow(2,be.tileID.overscaledZ-oe.tileID.overscaledZ),he=[oe.tileID.canonical.x*Le%1,oe.tileID.canonical.y*Le%1]):oe.texture.bind(Ke,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST);const Pe=m.style.terrain&&m.style.terrain.getTerrainData(ae),et=Pe?ae:null,rt=et?et.posMatrix:m.transform.calculatePosMatrix(ae.toUnwrapped(),Z),pt=Qo(rt,he||[0,0],Le||1,Te,h);Q instanceof nt?S.draw(y,B.TRIANGLES,ne,ui.disabled,k,wi.disabled,pt,Pe,h.id,Q.boundsBuffer,m.quadTriangleIndexBuffer,Q.boundsSegments):S.draw(y,B.TRIANGLES,ne,D[ae.overscaledZ],k,wi.disabled,pt,Pe,h.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}},background:function(m,A,h,p){const y=h.paint.get("background-color"),B=h.paint.get("background-opacity");if(B===0)return;const Q=m.context,S=Q.gl,k=m.transform,D=k.tileSize,O=h.paint.get("background-pattern");if(m.isPatternMissing(O))return;const G=!O&&y.a===1&&B===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==G)return;const Z=ui.disabled,ae=m.depthModeForSublayer(0,G==="opaque"?gr.ReadWrite:gr.ReadOnly),ne=m.colorModeForRenderPass(),oe=m.useProgram(O?"backgroundPattern":"background"),be=p||k.coveringTiles({tileSize:D,terrain:m.style.terrain});O&&(Q.activeTexture.set(S.TEXTURE0),m.imageManager.bind(m.context));const Te=h.getCrossfadeParameters();for(const Le of be){const he=p?Le.posMatrix:m.transform.calculatePosMatrix(Le.toUnwrapped()),Ke=O?El(he,B,m,O,{tileID:Le,tileSize:D},Te):xA(he,B,y),Pe=m.style.terrain&&m.style.terrain.getTerrainData(Le);oe.draw(Q,S.TRIANGLES,ae,Z,ne,wi.disabled,Ke,Pe,h.id,m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}},debug:function(m,A,h){for(let p=0;p<h.length;p++)Gf(m,A,h[p])},custom:function(m,A,h){const p=m.context,y=h.implementation;if(m.renderPass==="offscreen"){const B=y.prerender;B&&(m.setCustomLayerDefaults(),p.setColorMode(m.colorModeForRenderPass()),B.call(y,p.gl,m.transform.customLayerMatrix()),p.setDirty(),m.setBaseState())}else if(m.renderPass==="translucent"){m.setCustomLayerDefaults(),p.setColorMode(m.colorModeForRenderPass()),p.setStencilMode(ui.disabled);const B=y.renderingMode==="3d"?new gr(m.context.gl.LEQUAL,gr.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,gr.ReadOnly);p.setDepthMode(B),y.render(p.gl,m.transform.customLayerMatrix()),p.setDirty(),m.setBaseState(),p.bindFramebuffer.set(null)}}};class kl{constructor(A,h){this.context=new uu(A),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.create(),renderTime:0},this.setup(),this.numSublayers=ve.maxUnderzooming+ve.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new $t,this.gpuTimers={}}resize(A,h,p){if(this.width=A*p,this.height=h*p,this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const A=this.context,h=new a.PosArray;h.emplaceBack(0,0),h.emplaceBack(a.EXTENT,0),h.emplaceBack(0,a.EXTENT),h.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=A.createVertexBuffer(h,hr.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);const p=new a.PosArray;p.emplaceBack(0,0),p.emplaceBack(a.EXTENT,0),p.emplaceBack(0,a.EXTENT),p.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=A.createVertexBuffer(p,hr.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);const y=new a.RasterBoundsArray;y.emplaceBack(0,0,0,0),y.emplaceBack(a.EXTENT,0,a.EXTENT,0),y.emplaceBack(0,a.EXTENT,0,a.EXTENT),y.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=A.createVertexBuffer(y,wt.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);const B=new a.PosArray;B.emplaceBack(0,0),B.emplaceBack(1,0),B.emplaceBack(0,1),B.emplaceBack(1,1),this.viewportBuffer=A.createVertexBuffer(B,hr.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);const Q=new a.LineStripIndexArray;Q.emplaceBack(0),Q.emplaceBack(1),Q.emplaceBack(3),Q.emplaceBack(2),Q.emplaceBack(0),this.tileBorderIndexBuffer=A.createIndexBuffer(Q);const S=new a.TriangleIndexArray;S.emplaceBack(0,1,2),S.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=A.createIndexBuffer(S),this.emptyTexture=new V(A,{width:1,height:1,data:new Uint8Array([0,0,0,0])},A.gl.RGBA);const k=this.context.gl;this.stencilClearMode=new ui({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO)}clearStencil(){const A=this.context,h=A.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=a.create();a.ortho(p,0,this.width,this.height,0,0,1),a.scale(p,p,[h.drawingBufferWidth,h.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(A,h.TRIANGLES,gr.disabled,this.stencilClearMode,di.disabled,wi.disabled,As(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(A,h){if(this.currentStencilSource===A.source||!A.isTileClipped()||!h||!h.length)return;this.currentStencilSource=A.source;const p=this.context,y=p.gl;this.nextStencilID+h.length>256&&this.clearStencil(),p.setColorMode(di.disabled),p.setDepthMode(gr.disabled);const B=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const Q of h){const S=this._tileClippingMaskIDs[Q.key]=this.nextStencilID++,k=this.style.terrain&&this.style.terrain.getTerrainData(Q);B.draw(p,y.TRIANGLES,gr.disabled,new ui({func:y.ALWAYS,mask:0},S,255,y.KEEP,y.KEEP,y.REPLACE),di.disabled,wi.disabled,As(Q.posMatrix),k,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const A=this.nextStencilID++,h=this.context.gl;return new ui({func:h.NOTEQUAL,mask:255},A,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(A){const h=this.context.gl;return new ui({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[A.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(A){const h=this.context.gl,p=A.sort((Q,S)=>S.overscaledZ-Q.overscaledZ),y=p[p.length-1].overscaledZ,B=p[0].overscaledZ-y+1;if(B>1){this.currentStencilSource=void 0,this.nextStencilID+B>256&&this.clearStencil();const Q={};for(let S=0;S<B;S++)Q[S+y]=new ui({func:h.GEQUAL,mask:255},S+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=B,[Q,p]}return[{[y]:ui.disabled},p]}colorModeForRenderPass(){const A=this.context.gl;return this._showOverdrawInspector?new di([A.CONSTANT_COLOR,A.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?di.unblended:di.alphaBlended}depthModeForSublayer(A,h,p){if(!this.opaquePassEnabledForLayer())return gr.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+A)*this.depthEpsilon;return new gr(p||this.context.gl.LEQUAL,h,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(A,h){this.style=A,this.options=h,this.lineAtlas=A.lineAtlas,this.imageManager=A.imageManager,this.glyphManager=A.glyphManager,this.symbolFadeChange=A.placement.symbolFadeChange(a.exported.now()),this.imageManager.beginFrame();const p=this.style._order,y=this.style.sourceCaches,B=this.style.terrain&&new mu(this);for(const D in y){const O=y[D];O.used&&O.prepare(this.context)}const Q={},S={},k={};for(const D in y){const O=y[D];Q[D]=O.getVisibleCoordinates(),S[D]=Q[D].slice().reverse(),k[D]=O.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let D=0;D<p.length;D++)if(this.style._layers[p[D]].is3D()){this.opaquePassCutoff=D;break}if(B){this.opaquePassCutoff=0;const D=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!a.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||D.length)&&(a.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(O,G){const Z=O.context,ae=Z.gl,ne=di.unblended,oe=new gr(ae.LEQUAL,gr.ReadWrite,[0,1]),be=G.getTerrainMesh(),Te=G.sourceCache.getRenderableTiles(),Le=O.useProgram("terrainDepth");Z.bindFramebuffer.set(G.getFramebuffer("depth").framebuffer),Z.viewport.set([0,0,O.width/devicePixelRatio,O.height/devicePixelRatio]),Z.clear({color:a.Color.transparent,depth:1});for(const he of Te){const Ke=G.getTerrainData(he.tileID),Pe=O.transform.calculatePosMatrix(he.tileID.toUnwrapped());Le.draw(Z,ae.TRIANGLES,oe,ui.disabled,ne,wi.backCCW,{u_matrix:Pe},Ke,"terrain",be.vertexBuffer,be.indexBuffer,be.segments)}Z.bindFramebuffer.set(null),Z.viewport.set([0,0,O.width,O.height])}(this,this.style.terrain),function(O,G){const Z=O.context,ae=Z.gl,ne=di.unblended,oe=new gr(ae.LEQUAL,gr.ReadWrite,[0,1]),be=G.getTerrainMesh(),Te=G.getCoordsTexture(),Le=G.sourceCache.getRenderableTiles(),he=O.useProgram("terrainCoords");Z.bindFramebuffer.set(G.getFramebuffer("coords").framebuffer),Z.viewport.set([0,0,O.width/devicePixelRatio,O.height/devicePixelRatio]),Z.clear({color:a.Color.transparent,depth:1}),G.coordsIndex=[];for(const Ke of Le){const Pe=G.getTerrainData(Ke.tileID);Z.activeTexture.set(ae.TEXTURE0),ae.bindTexture(ae.TEXTURE_2D,Te.texture);const et=O.transform.calculatePosMatrix(Ke.tileID.toUnwrapped());he.draw(Z,ae.TRIANGLES,oe,ui.disabled,ne,wi.backCCW,{u_matrix:et,u_terrain_coords_id:(255-G.coordsIndex.length)/255,u_texture:0},Pe,"terrain",be.vertexBuffer,be.indexBuffer,be.segments),G.coordsIndex.push(Ke.tileID.key)}Z.bindFramebuffer.set(null),Z.viewport.set([0,0,O.width,O.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const D of p){const O=this.style._layers[D];if(!O.hasOffscreenPass()||O.isHidden(this.transform.zoom))continue;const G=S[O.source];(O.type==="custom"||G.length)&&this.renderLayer(this,y[O.source],O,G)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(A._order.length+2)*this.numSublayers*this.depthEpsilon],!B)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const D=this.style._layers[p[this.currentLayer]],O=y[D.source],G=Q[D.source];this._renderTileClippingMasks(D,G),this.renderLayer(this,O,D,G)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const D=this.style._layers[p[this.currentLayer]],O=y[D.source];if(B&&B.renderLayer(D))continue;const G=(D.type==="symbol"?k:S)[D.source];this._renderTileClippingMasks(D,Q[D.source]),this.renderLayer(this,O,D,G)}if(this.options.showTileBoundaries){let D,O;Object.values(this.style._layers).forEach(G=>{G.source&&!G.isHidden(this.transform.zoom)&&(G.source!==(O&&O.id)&&(O=this.style.sourceCaches[G.source]),(!D||D.getSource().maxzoom<O.getSource().maxzoom)&&(D=O))}),D&&Ro.debug(this,D,D.getVisibleCoordinates())}this.options.showPadding&&function(D){const O=D.transform.padding;EA(D,D.transform.height-(O.top||0),3,Ia),EA(D,O.bottom||0,3,as),zo(D,O.left||0,3,du),zo(D,D.transform.width-(O.right||0),3,Sl);const G=D.transform.centerPoint;(function(Z,ae,ne,oe){no(Z,ae-1,ne-10,2,20,oe),no(Z,ae-10,ne-1,20,2,oe)})(D,G.x,D.transform.height-G.y,pu)}(this),this.context.setDefault()}renderLayer(A,h,p,y){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||(y||[]).length)&&(this.id=p.id,this.gpuTimingStart(p),Ro[p.type](A,h,p,y,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(A){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery;let p=this.gpuTimers[A.id];p||(p=this.gpuTimers[A.id]={calls:0,cpuTime:0,query:h.createQueryEXT()}),p.calls++,h.beginQueryEXT(h.TIME_ELAPSED_EXT,p.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const A=this.context.extTimerQuery;A.endQueryEXT(A.TIME_ELAPSED_EXT)}collectGpuTimers(){const A=this.gpuTimers;return this.gpuTimers={},A}queryGpuTimers(A){const h={};for(const p in A){const y=A[p],B=this.context.extTimerQuery,Q=B.getQueryObjectEXT(y.query,B.QUERY_RESULT_EXT)/1e6;B.deleteQueryEXT(y.query),h[p]=Q}return h}translatePosMatrix(A,h,p,y,B){if(!p[0]&&!p[1])return A;const Q=B?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(Q){const D=Math.sin(Q),O=Math.cos(Q);p=[p[0]*O-p[1]*D,p[0]*D+p[1]*O]}const S=[B?p[0]:ri(h,p[0],this.transform.zoom),B?p[1]:ri(h,p[1],this.transform.zoom),0],k=new Float32Array(16);return a.translate(k,A,S),k}saveTileTexture(A){const h=this._tileTextures[A.size[0]];h?h.push(A):this._tileTextures[A.size[0]]=[A]}getTileTexture(A){const h=this._tileTextures[A];return h&&h.length>0?h.pop():null}isPatternMissing(A){if(!A)return!1;if(!A.from||!A.to)return!0;const h=this.imageManager.getPattern(A.from.toString()),p=this.imageManager.getPattern(A.to.toString());return!h||!p}useProgram(A,h){this.cache=this.cache||{};const p=A+(h?h.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new Js(this.context,A,ns[A],h,Ds[A],this._showOverdrawInspector,this.style.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const A=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(A.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new V(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Sa{constructor(A,h){this.points=A,this.planes=h}static fromInvProjectionMatrix(A,h,p){const y=Math.pow(2,p),B=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(S=>{const k=1/(S=a.transformMat4([],S,A))[3]/h*y;return a.mul$1(S,S,[k,k,1/S[3],k])}),Q=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(S=>{const k=a.sub([],B[S[0]],B[S[1]]),D=a.sub([],B[S[2]],B[S[1]]),O=a.normalize([],a.cross([],k,D)),G=-a.dot(O,B[S[1]]);return O.concat(G)});return new Sa(B,Q)}}class Oo{constructor(A,h){this.min=A,this.max=h,this.center=a.scale$1([],a.add([],this.min,this.max),.5)}quadrant(A){const h=[A%2==0,A<2],p=a.clone$2(this.min),y=a.clone$2(this.max);for(let B=0;B<h.length;B++)p[B]=h[B]?this.min[B]:this.center[B],y[B]=h[B]?this.center[B]:this.max[B];return y[2]=this.max[2],new Oo(p,y)}distanceX(A){return Math.max(Math.min(this.max[0],A[0]),this.min[0])-A[0]}distanceY(A){return Math.max(Math.min(this.max[1],A[1]),this.min[1])-A[1]}intersects(A){const h=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let y=0;y<A.planes.length;y++){const B=A.planes[y];let Q=0;for(let S=0;S<h.length;S++)a.dot$1(B,h[S])>=0&&Q++;if(Q===0)return 0;Q!==h.length&&(p=!1)}if(p)return 2;for(let y=0;y<3;y++){let B=Number.MAX_VALUE,Q=-Number.MAX_VALUE;for(let S=0;S<A.points.length;S++){const k=A.points[S][y]-this.min[y];B=Math.min(B,k),Q=Math.max(Q,k)}if(Q<0||B>this.max[y]-this.min[y])return 0}return 1}}class so{constructor(A=0,h=0,p=0,y=0){if(isNaN(A)||A<0||isNaN(h)||h<0||isNaN(p)||p<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=A,this.bottom=h,this.left=p,this.right=y}interpolate(A,h,p){return h.top!=null&&A.top!=null&&(this.top=a.number(A.top,h.top,p)),h.bottom!=null&&A.bottom!=null&&(this.bottom=a.number(A.bottom,h.bottom,p)),h.left!=null&&A.left!=null&&(this.left=a.number(A.left,h.left,p)),h.right!=null&&A.right!=null&&(this.right=a.number(A.right,h.right,p)),this}getCenter(A,h){const p=a.clamp((this.left+A-this.right)/2,0,A),y=a.clamp((this.top+h-this.bottom)/2,0,h);return new a.pointGeometry(p,y)}equals(A){return this.top===A.top&&this.bottom===A.bottom&&this.left===A.left&&this.right===A.right}clone(){return new so(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Ko{constructor(A,h,p,y,B){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=B===void 0||!!B,this._minZoom=A||0,this._maxZoom=h||22,this._minPitch=p??0,this._maxPitch=y??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new so,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const A=new Ko(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return A.tileSize=this.tileSize,A.latRange=this.latRange,A.width=this.width,A.height=this.height,A._center=this._center,A._elevation=this._elevation,A.zoom=this.zoom,A.angle=this.angle,A._fov=this._fov,A._pitch=this._pitch,A._unmodified=this._unmodified,A._edgeInsets=this._edgeInsets.clone(),A._calcMatrices(),A}get minZoom(){return this._minZoom}set minZoom(A){this._minZoom!==A&&(this._minZoom=A,this.zoom=Math.max(this.zoom,A))}get maxZoom(){return this._maxZoom}set maxZoom(A){this._maxZoom!==A&&(this._maxZoom=A,this.zoom=Math.min(this.zoom,A))}get minPitch(){return this._minPitch}set minPitch(A){this._minPitch!==A&&(this._minPitch=A,this.pitch=Math.max(this.pitch,A))}get maxPitch(){return this._maxPitch}set maxPitch(A){this._maxPitch!==A&&(this._maxPitch=A,this.pitch=Math.min(this.pitch,A))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(A){A===void 0?A=!0:A===null&&(A=!1),this._renderWorldCopies=A}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(A){const h=-a.wrap(A,-180,180)*Math.PI/180;var p;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=(p=new a.ARRAY_TYPE(4),a.ARRAY_TYPE!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p),function(y,B,Q){var S=B[0],k=B[1],D=B[2],O=B[3],G=Math.sin(Q),Z=Math.cos(Q);y[0]=S*Z+D*G,y[1]=k*Z+O*G,y[2]=S*-G+D*Z,y[3]=k*-G+O*Z}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(A){const h=a.clamp(A,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(A){A=Math.max(.01,Math.min(60,A)),this._fov!==A&&(this._unmodified=!1,this._fov=A/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(A){const h=Math.min(Math.max(A,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this.scale=this.zoomScale(h),this.tileZoom=Math.floor(h),this.zoomFraction=h-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(A){A.lat===this._center.lat&&A.lng===this._center.lng||(this._unmodified=!1,this._center=A,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(A){A!==this._elevation&&(this._elevation=A,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(A){this._edgeInsets.equals(A)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,A,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(A){return this._edgeInsets.equals(A)}interpolatePadding(A,h,p){this._unmodified=!1,this._edgeInsets.interpolate(A,h,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(A){const h=(A.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/A.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(A){const h=[new a.UnwrappedTileID(0,A)];if(this._renderWorldCopies){const p=this.pointCoordinate(new a.pointGeometry(0,0)),y=this.pointCoordinate(new a.pointGeometry(this.width,0)),B=this.pointCoordinate(new a.pointGeometry(this.width,this.height)),Q=this.pointCoordinate(new a.pointGeometry(0,this.height)),S=Math.floor(Math.min(p.x,y.x,B.x,Q.x)),k=Math.floor(Math.max(p.x,y.x,B.x,Q.x)),D=1;for(let O=S-D;O<=k+D;O++)O!==0&&h.push(new a.UnwrappedTileID(O,A))}return h}coveringTiles(A){var h,p;let y=this.coveringZoomLevel(A);const B=y;if(A.minzoom!==void 0&&y<A.minzoom)return[];A.maxzoom!==void 0&&y>A.maxzoom&&(y=A.maxzoom);const Q=this.pointCoordinate(this.getCameraPoint()),S=a.MercatorCoordinate.fromLngLat(this.center),k=Math.pow(2,y),D=[k*Q.x,k*Q.y,0],O=[k*S.x,k*S.y,0],G=Sa.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,y);let Z=A.minzoom||0;!A.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Z=y);const ae=A.terrain?2/Math.min(this.tileSize,A.tileSize)*this.tileSize:3,ne=he=>({aabb:new Oo([he*k,0,0],[(he+1)*k,k,0]),zoom:0,x:0,y:0,wrap:he,fullyVisible:!1}),oe=[],be=[],Te=y,Le=A.reparseOverscaled?B:y;if(this._renderWorldCopies)for(let he=1;he<=3;he++)oe.push(ne(-he)),oe.push(ne(he));for(oe.push(ne(0));oe.length>0;){const he=oe.pop(),Ke=he.x,Pe=he.y;let et=he.fullyVisible;if(!et){const kt=he.aabb.intersects(G);if(kt===0)continue;et=kt===2}const rt=A.terrain?D:O,pt=he.aabb.distanceX(rt),Ye=he.aabb.distanceY(rt),St=Math.max(Math.abs(pt),Math.abs(Ye)),Bt=ae+(1<<Te-he.zoom)-2;if(he.zoom===Te||St>Bt&&he.zoom>=Z){const kt=Te-he.zoom,lr=D[0]-.5-(Ke<<kt),cr=D[1]-.5-(Pe<<kt);be.push({tileID:new a.OverscaledTileID(he.zoom===Te?Le:he.zoom,he.wrap,he.zoom,Ke,Pe),distanceSq:a.sqrLen([O[0]-.5-Ke,O[1]-.5-Pe]),tileDistanceToCamera:Math.sqrt(lr*lr+cr*cr)})}else for(let kt=0;kt<4;kt++){const lr=(Ke<<1)+kt%2,cr=(Pe<<1)+(kt>>1),Jt=he.zoom+1;let Zr=he.aabb.quadrant(kt);if(A.terrain){const Wr=new a.OverscaledTileID(Jt,he.wrap,Jt,lr,cr),Br=A.terrain.getMinMaxElevation(Wr),br=(h=Br.minElevation)!==null&&h!==void 0?h:this.elevation,$r=(p=Br.maxElevation)!==null&&p!==void 0?p:this.elevation;Zr=new Oo([Zr.min[0],Zr.min[1],br],[Zr.max[0],Zr.max[1],$r])}oe.push({aabb:Zr,zoom:Jt,x:lr,y:cr,wrap:he.wrap,fullyVisible:et})}}return be.sort((he,Ke)=>he.distanceSq-Ke.distanceSq).map(he=>he.tileID)}resize(A,h){this.width=A,this.height=h,this.pixelsToGLUnits=[2/A,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(A){return Math.pow(2,A)}scaleZoom(A){return Math.log(A)/Math.LN2}project(A){const h=a.clamp(A.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.pointGeometry(a.mercatorXfromLng(A.lng)*this.worldSize,a.mercatorYfromLat(h)*this.worldSize)}unproject(A){return new a.MercatorCoordinate(A.x/this.worldSize,A.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(A){this.freezeElevation||(this.elevation=A?this.getElevation(this._center,A):0)}getElevation(A,h){const p=a.MercatorCoordinate.fromLngLat(A),y=(1<<this.tileZoom)*a.EXTENT,B=p.x*y,Q=p.y*y,S=Math.floor(B/a.EXTENT),k=Math.floor(Q/a.EXTENT),D=new a.OverscaledTileID(this.tileZoom,0,this.tileZoom,S,k);return h.getElevation(D,B%a.EXTENT,Q%a.EXTENT,a.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(A){const h=this.pointLocation(this.centerPoint,A),p=this.getElevation(h,A);if(!(this.elevation-p))return;const y=this.getCameraPosition(),B=a.MercatorCoordinate.fromLngLat(y.lngLat,y.altitude),Q=a.MercatorCoordinate.fromLngLat(h,p),S=B.x-Q.x,k=B.y-Q.y,D=B.z-Q.z,O=Math.sqrt(S*S+k*k+D*D),G=this.scaleZoom(this.cameraToCenterDistance/O/this.tileSize);this._elevation=p,this._center=h,this.zoom=G}setLocationAtPoint(A,h){const p=this.pointCoordinate(h),y=this.pointCoordinate(this.centerPoint),B=this.locationCoordinate(A),Q=new a.MercatorCoordinate(B.x-(p.x-y.x),B.y-(p.y-y.y));this.center=this.coordinateLocation(Q),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(A,h){return h?this.coordinatePoint(this.locationCoordinate(A),this.getElevation(A,h),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(A))}pointLocation(A,h){return this.coordinateLocation(this.pointCoordinate(A,h))}locationCoordinate(A){return a.MercatorCoordinate.fromLngLat(A)}coordinateLocation(A){return A&&A.toLngLat()}pointCoordinate(A,h){if(h){const Z=h.pointCoordinate(A);if(Z!=null)return Z}const p=[A.x,A.y,0,1],y=[A.x,A.y,1,1];a.transformMat4(p,p,this.pixelMatrixInverse),a.transformMat4(y,y,this.pixelMatrixInverse);const B=p[3],Q=y[3],S=p[1]/B,k=y[1]/Q,D=p[2]/B,O=y[2]/Q,G=(0-D)/(O-D);return new a.MercatorCoordinate(a.number(p[0]/B,y[0]/Q,G)/this.worldSize,a.number(S,k,G)/this.worldSize)}coordinatePoint(A,h=0,p=this.pixelMatrix){const y=[A.x*this.worldSize,A.y*this.worldSize,h,1];return a.transformMat4(y,y,p),new a.pointGeometry(y[0]/y[3],y[1]/y[3])}getBounds(){const A=Math.max(0,this.height/2-this.getHorizon());return new a.LngLatBounds().extend(this.pointLocation(new a.pointGeometry(0,A))).extend(this.pointLocation(new a.pointGeometry(this.width,A))).extend(this.pointLocation(new a.pointGeometry(this.width,this.height))).extend(this.pointLocation(new a.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(A){A?(this.lngRange=[A.getWest(),A.getEast()],this.latRange=[A.getSouth(),A.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(A,h=!1){const p=A.key,y=h?this._alignedPosMatrixCache:this._posMatrixCache;if(y[p])return y[p];const B=A.canonical,Q=this.worldSize/this.zoomScale(B.z),S=B.x+Math.pow(2,B.z)*A.wrap,k=a.identity(new Float64Array(16));return a.translate(k,k,[S*Q,B.y*Q,0]),a.scale(k,k,[Q/a.EXTENT,Q/a.EXTENT,1]),a.multiply(k,h?this.alignedProjMatrix:this.projMatrix,k),y[p]=new Float32Array(k),y[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let A,h,p,y,B=-90,Q=90,S=-180,k=180;const D=this.size,O=this._unmodified;if(this.latRange){const ae=this.latRange;B=a.mercatorYfromLat(ae[1])*this.worldSize,Q=a.mercatorYfromLat(ae[0])*this.worldSize,A=Q-B<D.y?D.y/(Q-B):0}if(this.lngRange){const ae=this.lngRange;S=a.wrap(a.mercatorXfromLng(ae[0])*this.worldSize,0,this.worldSize),k=a.wrap(a.mercatorXfromLng(ae[1])*this.worldSize,0,this.worldSize),k<S&&(k+=this.worldSize),h=k-S<D.x?D.x/(k-S):0}const G=this.point,Z=Math.max(h||0,A||0);if(Z)return this.center=this.unproject(new a.pointGeometry(h?(k+S)/2:G.x,A?(Q+B)/2:G.y)),this.zoom+=this.scaleZoom(Z),this._unmodified=O,void(this._constraining=!1);if(this.latRange){const ae=G.y,ne=D.y/2;ae-ne<B&&(y=B+ne),ae+ne>Q&&(y=Q-ne)}if(this.lngRange){const ae=(S+k)/2,ne=a.wrap(G.x,ae-this.worldSize/2,ae+this.worldSize/2),oe=D.x/2;ne-oe<S&&(p=S+oe),ne+oe>k&&(p=k-oe)}p===void 0&&y===void 0||(this.center=this.unproject(new a.pointGeometry(p!==void 0?p:G.x,y!==void 0?y:G.y)).wrap()),this._unmodified=O,this._constraining=!1}_calcMatrices(){if(!this.height)return;const A=this.centerOffset,h=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let y=a.identity(new Float64Array(16));a.scale(y,y,[this.width/2,-this.height/2,1]),a.translate(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=a.identity(new Float64Array(16)),a.scale(y,y,[1,-1,1]),a.translate(y,y,[-1,-1,0]),a.scale(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const B=Math.PI/2+this._pitch,Q=this._fov*(.5+A.y/this.height),S=Math.sin(Q)*this.cameraToSeaLevelDistance/Math.sin(a.clamp(Math.PI-B-Q,.01,Math.PI-.01)),k=this.getHorizon(),D=2*Math.atan(k/this.cameraToCenterDistance)*(.5+A.y/(2*k)),O=Math.sin(D)*this.cameraToSeaLevelDistance/Math.sin(a.clamp(Math.PI-B-D,.01,Math.PI-.01)),G=Math.cos(Math.PI/2-this._pitch)*S+this.cameraToSeaLevelDistance,Z=Math.cos(Math.PI/2-this._pitch)*O+this.cameraToSeaLevelDistance,ae=1.01*Math.min(G,Z),ne=this.height/50;y=new Float64Array(16),a.perspective(y,this._fov,this.width/this.height,ne,ae),y[8]=2*-A.x/this.width,y[9]=2*A.y/this.height,a.scale(y,y,[1,-1,1]),a.translate(y,y,[0,0,-this.cameraToCenterDistance]),a.rotateX(y,y,this._pitch),a.rotateZ(y,y,this.angle),a.translate(y,y,[-h,-p,0]),this.mercatorMatrix=a.scale([],y,[this.worldSize,this.worldSize,this.worldSize]),a.scale(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,y),a.translate(y,y,[0,0,-this.elevation]),this.projMatrix=y,this.invProjMatrix=a.invert([],y),this.pixelMatrix3D=a.multiply(new Float64Array(16),this.labelPlaneMatrix,y);const oe=this.width%2/2,be=this.height%2/2,Te=Math.cos(this.angle),Le=Math.sin(this.angle),he=h-Math.round(h)+Te*oe+Le*be,Ke=p-Math.round(p)+Te*be+Le*oe,Pe=new Float64Array(y);if(a.translate(Pe,Pe,[he>.5?he-1:he,Ke>.5?Ke-1:Ke,0]),this.alignedProjMatrix=Pe,y=a.invert(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const A=this.pointCoordinate(new a.pointGeometry(0,0)),h=[A.x*this.worldSize,A.y*this.worldSize,0,1];return a.transformMat4(h,h,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const A=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.pointGeometry(0,A))}getCameraQueryGeometry(A){const h=this.getCameraPoint();if(A.length===1)return[A[0],h];{let p=h.x,y=h.y,B=h.x,Q=h.y;for(const S of A)p=Math.min(p,S.x),y=Math.min(y,S.y),B=Math.max(B,S.x),Q=Math.max(Q,S.y);return[new a.pointGeometry(p,y),new a.pointGeometry(B,y),new a.pointGeometry(B,Q),new a.pointGeometry(p,Q),new a.pointGeometry(p,y)]}}}class _u{constructor(A){this._hashName=A&&encodeURIComponent(A),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(h,p){let y=!1,B=null;const Q=()=>{B=null,y&&(h(),B=setTimeout(Q,300),y=!1)};return()=>(y=!0,B||Q(),B)}(this._updateHashUnthrottled.bind(this))}addTo(A){return this._map=A,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(A){const h=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,y=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),B=Math.pow(10,y),Q=Math.round(h.lng*B)/B,S=Math.round(h.lat*B)/B,k=this._map.getBearing(),D=this._map.getPitch();let O="";if(O+=A?`/${Q}/${S}/${p}`:`${p}/${S}/${Q}`,(k||D)&&(O+="/"+Math.round(10*k)/10),D&&(O+=`/${Math.round(D)}`),this._hashName){const G=this._hashName;let Z=!1;const ae=window.location.hash.slice(1).split("&").map(ne=>{const oe=ne.split("=")[0];return oe===G?(Z=!0,`${oe}=${O}`):ne}).filter(ne=>ne);return Z||ae.push(`${G}=${O}`),`#${ae.join("&")}`}return`#${O}`}_getCurrentHash(){const A=window.location.hash.replace("#","");if(this._hashName){let h;return A.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(h=p)}),(h&&h[1]||"").split("/")}return A.split("/")}_onHashChange(){const A=this._getCurrentHash();if(A.length>=3&&!A.some(h=>isNaN(h))){const h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(A[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+A[2],+A[1]],zoom:+A[0],bearing:h,pitch:+(A[4]||0)}),!0}return!1}_updateHashUnthrottled(){const A=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,A)}catch{}}}const No={linearity:.3,easing:a.bezier(0,0,.3,1)},yu=a.extend({deceleration:2500,maxSpeed:1400},No),wu=a.extend({deceleration:20,maxSpeed:1400},No),vu=a.extend({deceleration:1e3,maxSpeed:360},No),Ao=a.extend({deceleration:1e3,maxSpeed:90},No);class Bu{constructor(A){this._map=A,this.clear()}clear(){this._inertiaBuffer=[]}record(A){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.exported.now(),settings:A})}_drainInertiaBuffer(){const A=this._inertiaBuffer,h=a.exported.now();for(;A.length>0&&h-A[0].time>160;)A.shift()}_onMoveEnd(A){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,pan:new a.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:B}of this._inertiaBuffer)h.zoom+=B.zoomDelta||0,h.bearing+=B.bearingDelta||0,h.pitch+=B.pitchDelta||0,B.panDelta&&h.pan._add(B.panDelta),B.around&&(h.around=B.around),B.pinchAround&&(h.pinchAround=B.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(h.pan.mag()){const B=Go(h.pan.mag(),p,a.extend({},yu,A||{}));y.offset=h.pan.mult(B.amount/h.pan.mag()),y.center=this._map.transform.center,Vo(y,B)}if(h.zoom){const B=Go(h.zoom,p,wu);y.zoom=this._map.transform.zoom+B.amount,Vo(y,B)}if(h.bearing){const B=Go(h.bearing,p,vu);y.bearing=this._map.transform.bearing+a.clamp(B.amount,-179,179),Vo(y,B)}if(h.pitch){const B=Go(h.pitch,p,Ao);y.pitch=this._map.transform.pitch+B.amount,Vo(y,B)}if(y.zoom||y.bearing){const B=h.pinchAround===void 0?h.around:h.pinchAround;y.around=B?this._map.unproject(B):this._map.getCenter()}return this.clear(),a.extend(y,{noMoveStart:!0})}}function Vo(m,A){(!m.duration||m.duration<A.duration)&&(m.duration=A.duration,m.easing=A.easing)}function Go(m,A,h){const{maxSpeed:p,linearity:y,deceleration:B}=h,Q=a.clamp(m*y/(A/1e3),-p,p),S=Math.abs(Q)/(B*y);return{easing:h.easing,duration:1e3*S,amount:Q*(S/2)}}class Mn extends a.Event{constructor(A,h,p,y={}){const B=U.mousePos(h.getCanvasContainer(),p),Q=h.unproject(B);super(A,a.extend({point:B,lngLat:Q,originalEvent:p},y)),this._defaultPrevented=!1,this.target=h}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Xo extends a.Event{constructor(A,h,p){const y=A==="touchend"?p.changedTouches:p.touches,B=U.touchPos(h.getCanvasContainer(),y),Q=B.map(k=>h.unproject(k)),S=B.reduce((k,D,O,G)=>k.add(D.div(G.length)),new a.pointGeometry(0,0));super(A,{points:B,point:S,lngLats:Q,lngLat:h.unproject(S),originalEvent:p}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Dn extends a.Event{constructor(A,h,p){super(A,{originalEvent:p}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Xf{constructor(A,h){this._map=A,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(A){return this._firePreventable(new Dn(A.type,this._map,A))}mousedown(A,h){return this._mousedownPos=h,this._firePreventable(new Mn(A.type,this._map,A))}mouseup(A){this._map.fire(new Mn(A.type,this._map,A))}click(A,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new Mn(A.type,this._map,A))}dblclick(A){return this._firePreventable(new Mn(A.type,this._map,A))}mouseover(A){this._map.fire(new Mn(A.type,this._map,A))}mouseout(A){this._map.fire(new Mn(A.type,this._map,A))}touchstart(A){return this._firePreventable(new Xo(A.type,this._map,A))}touchmove(A){this._map.fire(new Xo(A.type,this._map,A))}touchend(A){this._map.fire(new Xo(A.type,this._map,A))}touchcancel(A){this._map.fire(new Xo(A.type,this._map,A))}_firePreventable(A){if(this._map.fire(A),A.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class sA{constructor(A){this._map=A}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(A){this._map.fire(new Mn(A.type,this._map,A))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Mn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(A){this._delayContextMenu?this._contextMenuEvent=A:this._ignoreContextMenu||this._map.fire(new Mn(A.type,this._map,A)),this._map.listens("contextmenu")&&A.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xu{constructor(A,h){this._map=A,this._el=A.getCanvasContainer(),this._container=A.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(A,h){this.isEnabled()&&A.shiftKey&&A.button===0&&(U.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(A,h){if(!this._active)return;const p=h;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=p,this._box||(this._box=U.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",A));const B=Math.min(y.x,p.x),Q=Math.max(y.x,p.x),S=Math.min(y.y,p.y),k=Math.max(y.y,p.y);U.setTransform(this._box,`translate(${B}px,${S}px)`),this._box.style.width=Q-B+"px",this._box.style.height=k-S+"px"}mouseupWindow(A,h){if(!this._active||A.button!==0)return;const p=this._startPos,y=h;if(this.reset(),U.suppressClick(),p.x!==y.x||p.y!==y.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:A})),{cameraAnimation:B=>B.fitScreenCoordinates(p,y,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",A)}keydown(A){this._active&&A.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",A))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(U.remove(this._box),this._box=null),U.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(A,h){return this._map.fire(new a.Event(A,{originalEvent:h}))}}function Ps(m,A){if(m.length!==A.length)throw new Error(`The number of touches and points are not equal - touches ${m.length}, points ${A.length}`);const h={};for(let p=0;p<m.length;p++)h[m[p].identifier]=A[p];return h}class Zo{constructor(A){this.reset(),this.numTouches=A.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(A,h,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=A.timeStamp),p.length===this.numTouches&&(this.centroid=function(y){const B=new a.pointGeometry(0,0);for(const Q of y)B._add(Q);return B.div(y.length)}(h),this.touches=Ps(p,h)))}touchmove(A,h,p){if(this.aborted||!this.centroid)return;const y=Ps(p,h);for(const B in this.touches){const Q=this.touches[B],S=y[B];(!S||S.dist(Q)>30)&&(this.aborted=!0)}}touchend(A,h,p){if((!this.centroid||A.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Ml{constructor(A){this.singleTap=new Zo(A),this.numTaps=A.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(A,h,p){this.singleTap.touchstart(A,h,p)}touchmove(A,h,p){this.singleTap.touchmove(A,h,p)}touchend(A,h,p){const y=this.singleTap.touchend(A,h,p);if(y){const B=A.timeStamp-this.lastTime<500,Q=!this.lastTap||this.lastTap.dist(y)<30;if(B&&Q||this.reset(),this.count++,this.lastTime=A.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Zf{constructor(){this._zoomIn=new Ml({numTouches:1,numTaps:2}),this._zoomOut=new Ml({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(A,h,p){this._zoomIn.touchstart(A,h,p),this._zoomOut.touchstart(A,h,p)}touchmove(A,h,p){this._zoomIn.touchmove(A,h,p),this._zoomOut.touchmove(A,h,p)}touchend(A,h,p){const y=this._zoomIn.touchend(A,h,p),B=this._zoomOut.touchend(A,h,p);return y?(this._active=!0,A.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Q=>Q.easeTo({duration:300,zoom:Q.getZoom()+1,around:Q.unproject(y)},{originalEvent:A})}):B?(this._active=!0,A.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Q=>Q.easeTo({duration:300,zoom:Q.getZoom()-1,around:Q.unproject(B)},{originalEvent:A})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Wf={0:1,2:2};class ka{constructor(A){this.reset(),this._clickTolerance=A.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(A,h){return!1}_move(A,h){return{}}mousedown(A,h){if(this._lastPoint)return;const p=U.mouseButton(A);this._correctButton(A,p)&&(this._lastPoint=h,this._eventButton=p)}mousemoveWindow(A,h){const p=this._lastPoint;if(p){if(A.preventDefault(),function(y,B){const Q=Wf[B];return y.buttons===void 0||(y.buttons&Q)!==Q}(A,this._eventButton))this.reset();else if(this._moved||!(h.dist(p)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(p,h)}}mouseupWindow(A){this._lastPoint&&U.mouseButton(A)===this._eventButton&&(this._moved&&U.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wo extends ka{mousedown(A,h){super.mousedown(A,h),this._lastPoint&&(this._active=!0)}_correctButton(A,h){return h===0&&!A.ctrlKey}_move(A,h){return{around:h,panDelta:h.sub(A)}}}class zs extends ka{_correctButton(A,h){return h===0&&A.ctrlKey||h===2}_move(A,h){const p=.8*(h.x-A.x);if(p)return this._active=!0,{bearingDelta:p}}contextmenu(A){A.preventDefault()}}class zt extends ka{_correctButton(A,h){return h===0&&A.ctrlKey||h===2}_move(A,h){const p=-.5*(h.y-A.y);if(p)return this._active=!0,{pitchDelta:p}}contextmenu(A){A.preventDefault()}}class bu{constructor(A,h){this._minTouches=A.cooperativeGestures?2:1,this._clickTolerance=A.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(A,h,p){return this._calculateTransform(A,h,p)}touchmove(A,h,p){if(this._map._cooperativeGestures&&(this._minTouches===2&&p.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(A,!1,p.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(p.length<this._minTouches))return A.preventDefault(),this._calculateTransform(A,h,p)}touchend(A,h,p){this._calculateTransform(A,h,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(A,h,p){p.length>0&&(this._active=!0);const y=Ps(p,h),B=new a.pointGeometry(0,0),Q=new a.pointGeometry(0,0);let S=0;for(const D in y){const O=y[D],G=this._touches[D];G&&(B._add(O),Q._add(O.sub(G)),S++,y[D]=O)}if(this._touches=y,S<this._minTouches||!Q.mag())return;const k=Q.div(S);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:B.div(S),panDelta:k}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class FA{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(A){}_move(A,h,p){return{}}touchstart(A,h,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([h[0],h[1]]))}touchmove(A,h,p){if(!this._firstTwoTouches)return;A.preventDefault();const[y,B]=this._firstTwoTouches,Q=AA(p,h,y),S=AA(p,h,B);if(!Q||!S)return;const k=this._aroundCenter?null:Q.add(S).div(2);return this._move([Q,S],k,A)}touchend(A,h,p){if(!this._firstTwoTouches)return;const[y,B]=this._firstTwoTouches,Q=AA(p,h,y),S=AA(p,h,B);Q&&S||(this._active&&U.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(A){this._enabled=!0,this._aroundCenter=!!A&&A.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function AA(m,A,h){for(let p=0;p<m.length;p++)if(m[p].identifier===h)return A[p]}function Dl(m,A){return Math.log(m/A)/Math.LN2}class Ut extends FA{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(A){this._startDistance=this._distance=A[0].dist(A[1])}_move(A,h){const p=this._distance;if(this._distance=A[0].dist(A[1]),this._active||!(Math.abs(Dl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Dl(this._distance,p),pinchAround:h}}}function Ma(m,A){return 180*m.angleWith(A)/Math.PI}class qf extends FA{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(A){this._startVector=this._vector=A[0].sub(A[1]),this._minDiameter=A[0].dist(A[1])}_move(A,h){const p=this._vector;if(this._vector=A[0].sub(A[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ma(this._vector,p),pinchAround:h}}_isBelowThreshold(A){this._minDiameter=Math.min(this._minDiameter,A.mag());const h=25/(Math.PI*this._minDiameter)*360,p=Ma(A,this._startVector);return Math.abs(p)<h}}function Ll(m){return Math.abs(m.y)>Math.abs(m.x)}class Hl extends FA{constructor(A){super(),this._map=A}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(A,h,p){super.touchstart(A,h,p),this._currentTouchCount=p.length}_start(A){this._lastPoints=A,Ll(A[0].sub(A[1]))&&(this._valid=!1)}_move(A,h,p){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const y=A[0].sub(this._lastPoints[0]),B=A[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,B,p.timeStamp),this._valid?(this._lastPoints=A,this._active=!0,{pitchDelta:(y.y+B.y)/2*-.5}):void 0}gestureBeginsVertically(A,h,p){if(this._valid!==void 0)return this._valid;const y=A.mag()>=2,B=h.mag()>=2;if(!y&&!B)return;if(!y||!B)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const Q=A.y>0==h.y>0;return Ll(A)&&Ll(h)&&Q}}const Cu={panStep:100,bearingStep:15,pitchStep:10};class Eu{constructor(){const A=Cu;this._panStep=A.panStep,this._bearingStep=A.bearingStep,this._pitchStep=A.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(A){if(A.altKey||A.ctrlKey||A.metaKey)return;let h=0,p=0,y=0,B=0,Q=0;switch(A.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:A.shiftKey?p=-1:(A.preventDefault(),B=-1);break;case 39:A.shiftKey?p=1:(A.preventDefault(),B=1);break;case 38:A.shiftKey?y=1:(A.preventDefault(),Q=-1);break;case 40:A.shiftKey?y=-1:(A.preventDefault(),Q=1);break;default:return}return this._rotationDisabled&&(p=0,y=0),{cameraAnimation:S=>{const k=S.getZoom();S.easeTo({duration:300,easeId:"keyboardHandler",easing:jf,zoom:h?Math.round(k)+h*(A.shiftKey?2:1):k,bearing:S.getBearing()+p*this._bearingStep,pitch:S.getPitch()+y*this._pitchStep,offset:[-B*this._panStep,-Q*this._panStep],center:S.getCenter()},{originalEvent:A})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function jf(m){return m*(2-m)}const Fu=4.000244140625;class Pl{constructor(A,h){this._map=A,this._el=A.getCanvasContainer(),this._handler=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,a.bindAll(["_onTimeout"],this)}setZoomRate(A){this._defaultZoomRate=A}setWheelZoomRate(A){this._wheelZoomRate=A}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(A){this.isEnabled()||(this._enabled=!0,this._aroundCenter=A&&A.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(A){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;A.preventDefault()}let h=A.deltaMode===WheelEvent.DOM_DELTA_LINE?40*A.deltaY:A.deltaY;const p=a.exported.now(),y=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,h!==0&&h%Fu==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,A)):this._type||(this._type=Math.abs(y*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),A.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=A,this._delta-=h,this._active||this._start(A)),A.preventDefault()}_onTimeout(A){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(A)}_start(A){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=U.mousePos(this._el,A);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(h)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const A=this._map.transform;if(this._delta!==0){const S=this._type==="wheel"&&Math.abs(this._delta)>Fu?this._wheelZoomRate:this._defaultZoomRate;let k=2/(1+Math.exp(-Math.abs(this._delta*S)));this._delta<0&&k!==0&&(k=1/k);const D=typeof this._targetZoom=="number"?A.zoomScale(this._targetZoom):A.scale;this._targetZoom=Math.min(A.maxZoom,Math.max(A.minZoom,A.scaleZoom(D*k))),this._type==="wheel"&&(this._startZoom=A.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const h=typeof this._targetZoom=="number"?this._targetZoom:A.zoom,p=this._startZoom,y=this._easing;let B,Q=!1;if(this._type==="wheel"&&p&&y){const S=Math.min((a.exported.now()-this._lastWheelEventTime)/200,1),k=y(S);B=a.number(p,h,k),S<1?this._frameId||(this._frameId=!0):Q=!0}else B=h,Q=!0;return this._active=!0,Q&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Q,zoomDelta:B-A.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(A){let h=a.ease;if(this._prevEase){const p=this._prevEase,y=(a.exported.now()-p.start)/p.duration,B=p.easing(y+.01)-p.easing(y),Q=.27/Math.sqrt(B*B+1e-4)*.01,S=Math.sqrt(.0729-Q*Q);h=a.bezier(Q,S,.25,1)}return this._prevEase={start:a.exported.now(),duration:A,easing:h},h}reset(){this._active=!1}}class zl{constructor(A,h){this._clickZoom=A,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Rl{constructor(){this.reset()}reset(){this._active=!1}dblclick(A,h){return A.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:p.getZoom()+(A.shiftKey?-1:1),around:p.unproject(h)},{originalEvent:A})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ol{constructor(){this._tap=new Ml({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(A,h,p){this._swipePoint||(this._tapTime&&A.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?p.length>0&&(this._swipePoint=h[0],this._swipeTouch=p[0].identifier):this._tap.touchstart(A,h,p))}touchmove(A,h,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const y=h[0],B=y.y-this._swipePoint.y;return this._swipePoint=y,A.preventDefault(),this._active=!0,{zoomDelta:B/128}}}else this._tap.touchmove(A,h,p)}touchend(A,h,p){this._tapTime?this._swipePoint&&p.length===0&&this.reset():this._tap.touchend(A,h,p)&&(this._tapTime=A.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xn{constructor(A,h,p){this._el=A,this._mousePan=h,this._touchPan=p}enable(A){this._inertiaOptions=A||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class oA{constructor(A,h,p){this._pitchWithRotate=A.pitchWithRotate,this._mouseRotate=h,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Uu{constructor(A,h,p,y){this._el=A,this._touchZoom=h,this._touchRotate=p,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(A){this._touchZoom.enable(A),this._rotationDisabled||this._touchRotate.enable(A),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const oo=m=>m.zoom||m.drag||m.pitch||m.rotate;class Kl extends a.Event{}function qo(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class Qu{constructor(A,h){this._map=A,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Bu(A),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h),a.bindAll(["handleEvent","handleWindowEvent"],this);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,B,Q]of this._listeners)U.addEventListener(y,B,y===document?this.handleWindowEvent:this.handleEvent,Q)}destroy(){for(const[A,h,p]of this._listeners)U.removeEventListener(A,h,A===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(A){const h=this._map,p=h.getCanvasContainer();this._add("mapEvent",new Xf(h,A));const y=h.boxZoom=new xu(h,A);this._add("boxZoom",y);const B=new Zf,Q=new Rl;h.doubleClickZoom=new zl(Q,B),this._add("tapZoom",B),this._add("clickZoom",Q);const S=new Ol;this._add("tapDragZoom",S);const k=h.touchPitch=new Hl(h);this._add("touchPitch",k);const D=new zs(A),O=new zt(A);h.dragRotate=new oA(A,D,O),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",O,["mouseRotate"]);const G=new Wo(A),Z=new bu(A,h);h.dragPan=new xn(p,G,Z),this._add("mousePan",G),this._add("touchPan",Z,["touchZoom","touchRotate"]);const ae=new qf,ne=new Ut;h.touchZoomRotate=new Uu(p,ne,ae,S),this._add("touchRotate",ae,["touchPan","touchZoom"]),this._add("touchZoom",ne,["touchPan","touchRotate"]);const oe=h.scrollZoom=new Pl(h,this);this._add("scrollZoom",oe,["mousePan"]);const be=h.keyboard=new Eu;this._add("keyboard",be),this._add("blockableMapEvent",new sA(h));for(const Te of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])A.interactive&&A[Te]&&h[Te].enable(A[Te])}_add(A,h,p){this._handlers.push({handlerName:A,handler:h,allowed:p}),this._handlersById[A]=h}stop(A){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},A),this._changes=[]}}isActive(){for(const{handler:A}of this._handlers)if(A.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!oo(this._eventsInProgress)||this.isZooming()}_blockedByActive(A,h,p){for(const y in A)if(y!==p&&(!h||h.indexOf(y)<0))return!0;return!1}handleWindowEvent(A){this.handleEvent(A,`${A.type}Window`)}_getMapTouches(A){const h=[];for(const p of A)this._el.contains(p.target)&&h.push(p);return h}handleEvent(A,h){if(A.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const p=A.type==="renderFrame"?void 0:A,y={needsRenderFrame:!1},B={},Q={},S=A.touches,k=S?this._getMapTouches(S):void 0,D=k?U.touchPos(this._el,k):U.mousePos(this._el,A);for(const{handlerName:Z,handler:ae,allowed:ne}of this._handlers){if(!ae.isEnabled())continue;let oe;this._blockedByActive(Q,ne,Z)?ae.reset():ae[h||A.type]&&(oe=ae[h||A.type](A,D,k),this.mergeHandlerResult(y,B,oe,Z,p),oe&&oe.needsRenderFrame&&this._triggerRenderFrame()),(oe||ae.isActive())&&(Q[Z]=ae)}const O={};for(const Z in this._previousActiveHandlers)Q[Z]||(O[Z]=p);this._previousActiveHandlers=Q,(Object.keys(O).length||qo(y))&&(this._changes.push([y,B,O]),this._triggerRenderFrame()),(Object.keys(Q).length||qo(y))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:G}=y;G&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],G(this._map))}mergeHandlerResult(A,h,p,y,B){if(!p)return;a.extend(A,p);const Q={handlerName:y,originalEvent:p.originalEvent||B};p.zoomDelta!==void 0&&(h.zoom=Q),p.panDelta!==void 0&&(h.drag=Q),p.pitchDelta!==void 0&&(h.pitch=Q),p.bearingDelta!==void 0&&(h.rotate=Q)}_applyChanges(){const A={},h={},p={};for(const[y,B,Q]of this._changes)y.panDelta&&(A.panDelta=(A.panDelta||new a.pointGeometry(0,0))._add(y.panDelta)),y.zoomDelta&&(A.zoomDelta=(A.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(A.bearingDelta=(A.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(A.pitchDelta=(A.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(A.around=y.around),y.pinchAround!==void 0&&(A.pinchAround=y.pinchAround),y.noInertia&&(A.noInertia=y.noInertia),a.extend(h,B),a.extend(p,Q);this._updateMapTransform(A,h,p),this._changes=[]}_updateMapTransform(A,h,p){const y=this._map,B=y.transform,Q=y.style&&y.style.terrain;if(!(qo(A)||Q&&this._drag))return this._fireEvents(h,p,!0);let{panDelta:S,zoomDelta:k,bearingDelta:D,pitchDelta:O,around:G,pinchAround:Z}=A;Z!==void 0&&(G=Z),y._stop(!0),G=G||y.transform.centerPoint;const ae=B.pointLocation(S?G.sub(S):G);D&&(B.bearing+=D),O&&(B.pitch+=O),k&&(B.zoom+=k),Q?h.drag&&!this._drag?(this._drag={center:B.centerPoint,lngLat:B.pointLocation(G),point:G,handlerName:h.drag.handlerName},y.fire(new a.Event("freezeElevation",{freeze:!0}))):this._drag&&p[this._drag.handlerName]?(y.fire(new a.Event("freezeElevation",{freeze:!1})),this._drag=null):h.drag&&this._drag&&(B.center=B.pointLocation(B.centerPoint.sub(S))):B.setLocationAtPoint(ae,G),this._map._update(),A.noInertia||this._inertia.record(A),this._fireEvents(h,p,!0)}_fireEvents(A,h,p){const y=oo(this._eventsInProgress),B=oo(A),Q={};for(const O in A){const{originalEvent:G}=A[O];this._eventsInProgress[O]||(Q[`${O}start`]=G),this._eventsInProgress[O]=A[O]}!y&&B&&this._fireEvent("movestart",B.originalEvent);for(const O in Q)this._fireEvent(O,Q[O]);B&&this._fireEvent("move",B.originalEvent);for(const O in A){const{originalEvent:G}=A[O];this._fireEvent(O,G)}const S={};let k;for(const O in this._eventsInProgress){const{handlerName:G,originalEvent:Z}=this._eventsInProgress[O];this._handlersById[G].isActive()||(delete this._eventsInProgress[O],k=h[G]||Z,S[`${O}end`]=k)}for(const O in S)this._fireEvent(O,S[O]);const D=oo(this._eventsInProgress);if(p&&(y||B)&&!D){this._updatingCamera=!0;const O=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),G=Z=>Z!==0&&-this._bearingSnap<Z&&Z<this._bearingSnap;O?(G(O.bearing||this._map.getBearing())&&(O.bearing=0),this._map.easeTo(O,{originalEvent:k})):(this._map.fire(new a.Event("moveend",{originalEvent:k})),G(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(A,h){this._map.fire(new a.Event(A,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(A=>{delete this._frameId,this.handleEvent(new Kl("renderFrame",{timeStamp:A})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const qn={extend:(m,...A)=>a.extend(m,...A),run(m){m()},logToElement(m,A=!1,h="log"){const p=window.document.getElementById(h);p&&(A&&(p.innerHTML=""),p.innerHTML+=`<br>${m}`)}};class vi extends a.Evented{constructor(A,h){super(),this._moving=!1,this._zooming=!1,this.transform=A,this._bearingSnap=h.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}getCenter(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(A,h){return this.jumpTo({center:A},h)}panBy(A,h,p){return A=a.pointGeometry.convert(A).mult(-1),this.panTo(this.transform.center,a.extend({offset:A},h),p)}panTo(A,h,p){return this.easeTo(a.extend({center:A},h),p)}getZoom(){return this.transform.zoom}setZoom(A,h){return this.jumpTo({zoom:A},h),this}zoomTo(A,h,p){return this.easeTo(a.extend({zoom:A},h),p)}zoomIn(A,h){return this.zoomTo(this.getZoom()+1,A,h),this}zoomOut(A,h){return this.zoomTo(this.getZoom()-1,A,h),this}getBearing(){return this.transform.bearing}setBearing(A,h){return this.jumpTo({bearing:A},h),this}getPadding(){return this.transform.padding}setPadding(A,h){return this.jumpTo({padding:A},h),this}rotateTo(A,h,p){return this.easeTo(a.extend({bearing:A},h),p)}resetNorth(A,h){return this.rotateTo(0,a.extend({duration:1e3},A),h),this}resetNorthPitch(A,h){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},A),h),this}snapToNorth(A,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(A,h):this}getPitch(){return this.transform.pitch}setPitch(A,h){return this.jumpTo({pitch:A},h),this}cameraForBounds(A,h){A=a.LngLatBounds.convert(A);const p=h&&h.bearing||0;return this._cameraForBoxAndBearing(A.getNorthWest(),A.getSouthEast(),p,h)}_cameraForBoxAndBearing(A,h,p,y){const B={top:0,bottom:0,right:0,left:0};if(typeof(y=a.extend({padding:B,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const Pe=y.padding;y.padding={top:Pe,bottom:Pe,right:Pe,left:Pe}}y.padding=a.extend(B,y.padding);const Q=this.transform,S=Q.padding,k=Q.project(a.LngLat.convert(A)),D=Q.project(a.LngLat.convert(h)),O=k.rotate(-p*Math.PI/180),G=D.rotate(-p*Math.PI/180),Z=new a.pointGeometry(Math.max(O.x,G.x),Math.max(O.y,G.y)),ae=new a.pointGeometry(Math.min(O.x,G.x),Math.min(O.y,G.y)),ne=Z.sub(ae),oe=(Q.width-(S.left+S.right+y.padding.left+y.padding.right))/ne.x,be=(Q.height-(S.top+S.bottom+y.padding.top+y.padding.bottom))/ne.y;if(be<0||oe<0)return void a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Te=Math.min(Q.scaleZoom(Q.scale*Math.min(oe,be)),y.maxZoom),Le=a.pointGeometry.convert(y.offset),he=new a.pointGeometry((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(p*Math.PI/180),Ke=Le.add(he).mult(Q.scale/Q.zoomScale(Te));return{center:Q.unproject(k.add(D).div(2).sub(Ke)),zoom:Te,bearing:p}}fitBounds(A,h,p){return this._fitInternal(this.cameraForBounds(A,h),h,p)}fitScreenCoordinates(A,h,p,y,B){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.pointGeometry.convert(A)),this.transform.pointLocation(a.pointGeometry.convert(h)),p,y),y,B)}_fitInternal(A,h,p){return A?(delete(h=a.extend(A,h)).padding,h.linear?this.easeTo(h,p):this.flyTo(h,p)):this}jumpTo(A,h){this.stop();const p=this.transform;let y=!1,B=!1,Q=!1;return"zoom"in A&&p.zoom!==+A.zoom&&(y=!0,p.zoom=+A.zoom),A.center!==void 0&&(p.center=a.LngLat.convert(A.center)),"bearing"in A&&p.bearing!==+A.bearing&&(B=!0,p.bearing=+A.bearing),"pitch"in A&&p.pitch!==+A.pitch&&(Q=!0,p.pitch=+A.pitch),A.padding==null||p.isPaddingEqual(A.padding)||(p.padding=A.padding),this.fire(new a.Event("movestart",h)).fire(new a.Event("move",h)),y&&this.fire(new a.Event("zoomstart",h)).fire(new a.Event("zoom",h)).fire(new a.Event("zoomend",h)),B&&this.fire(new a.Event("rotatestart",h)).fire(new a.Event("rotate",h)).fire(new a.Event("rotateend",h)),Q&&this.fire(new a.Event("pitchstart",h)).fire(new a.Event("pitch",h)).fire(new a.Event("pitchend",h)),this.fire(new a.Event("moveend",h))}calculateCameraOptionsFromTo(A,h,p,y=0){const B=a.MercatorCoordinate.fromLngLat(A,h),Q=a.MercatorCoordinate.fromLngLat(p,y),S=Q.x-B.x,k=Q.y-B.y,D=Q.z-B.z,O=Math.hypot(S,k,D);if(O===0)throw new Error("Can't calculate camera options with same From and To");const G=Math.hypot(S,k),Z=this.transform.scaleZoom(this.transform.cameraToCenterDistance/O/this.transform.tileSize),ae=180*Math.atan2(S,-k)/Math.PI;let ne=180*Math.acos(G/O)/Math.PI;return ne=D<0?90-ne:90+ne,{center:Q.toLngLat(),zoom:Z,pitch:ne,bearing:ae}}easeTo(A,h){this._stop(!1,A.easeId),((A=a.extend({offset:[0,0],duration:500,easing:a.ease},A)).animate===!1||!A.essential&&a.exported.prefersReducedMotion)&&(A.duration=0);const p=this.transform,y=this.getZoom(),B=this.getBearing(),Q=this.getPitch(),S=this.getPadding(),k="zoom"in A?+A.zoom:y,D="bearing"in A?this._normalizeBearing(A.bearing,B):B,O="pitch"in A?+A.pitch:Q,G="padding"in A?A.padding:p.padding,Z=a.pointGeometry.convert(A.offset);let ae=p.centerPoint.add(Z);const ne=p.pointLocation(ae),oe=a.LngLat.convert(A.center||ne);this._normalizeCenter(oe);const be=p.project(ne),Te=p.project(oe).sub(be),Le=p.zoomScale(k-y);let he,Ke;A.around&&(he=a.LngLat.convert(A.around),Ke=p.locationPoint(he));const Pe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||k!==y,this._rotating=this._rotating||B!==D,this._pitching=this._pitching||O!==Q,this._padding=!p.isPaddingEqual(G),this._easeId=A.easeId,this._prepareEase(h,A.noMoveStart,Pe),this._ease(et=>{if(this._zooming&&(p.zoom=a.number(y,k,et)),this._rotating&&(p.bearing=a.number(B,D,et)),this._pitching&&(p.pitch=a.number(Q,O,et)),this._padding&&(p.interpolatePadding(S,G,et),ae=p.centerPoint.add(Z)),he)p.setLocationAtPoint(he,Ke);else{const rt=p.zoomScale(p.zoom-y),pt=k>y?Math.min(2,Le):Math.max(.5,Le),Ye=Math.pow(pt,1-et),St=p.unproject(be.add(Te.mult(et*Ye)).mult(rt));p.setLocationAtPoint(p.renderWorldCopies?St.wrap():St,ae)}this._fireMoveEvents(h)},et=>{this._afterEase(h,et)},A),this}_prepareEase(A,h,p={}){this._moving=!0,this.fire(new a.Event("freezeElevation",{freeze:!0})),h||p.moving||this.fire(new a.Event("movestart",A)),this._zooming&&!p.zooming&&this.fire(new a.Event("zoomstart",A)),this._rotating&&!p.rotating&&this.fire(new a.Event("rotatestart",A)),this._pitching&&!p.pitching&&this.fire(new a.Event("pitchstart",A))}_fireMoveEvents(A){this.fire(new a.Event("move",A)),this._zooming&&this.fire(new a.Event("zoom",A)),this._rotating&&this.fire(new a.Event("rotate",A)),this._pitching&&this.fire(new a.Event("pitch",A))}_afterEase(A,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId,this.fire(new a.Event("freezeElevation",{freeze:!1}));const p=this._zooming,y=this._rotating,B=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new a.Event("zoomend",A)),y&&this.fire(new a.Event("rotateend",A)),B&&this.fire(new a.Event("pitchend",A)),this.fire(new a.Event("moveend",A))}flyTo(A,h){if(!A.essential&&a.exported.prefersReducedMotion){const Jt=a.pick(A,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Jt,h)}this.stop(),A=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},A);const p=this.transform,y=this.getZoom(),B=this.getBearing(),Q=this.getPitch(),S=this.getPadding(),k="zoom"in A?a.clamp(+A.zoom,p.minZoom,p.maxZoom):y,D="bearing"in A?this._normalizeBearing(A.bearing,B):B,O="pitch"in A?+A.pitch:Q,G="padding"in A?A.padding:p.padding,Z=p.zoomScale(k-y),ae=a.pointGeometry.convert(A.offset);let ne=p.centerPoint.add(ae);const oe=p.pointLocation(ne),be=a.LngLat.convert(A.center||oe);this._normalizeCenter(be);const Te=p.project(oe),Le=p.project(be).sub(Te);let he=A.curve;const Ke=Math.max(p.width,p.height),Pe=Ke/Z,et=Le.mag();if("minZoom"in A){const Jt=a.clamp(Math.min(A.minZoom,y,k),p.minZoom,p.maxZoom),Zr=Ke/p.zoomScale(Jt-y);he=Math.sqrt(Zr/et*2)}const rt=he*he;function pt(Jt){const Zr=(Pe*Pe-Ke*Ke+(Jt?-1:1)*rt*rt*et*et)/(2*(Jt?Pe:Ke)*rt*et);return Math.log(Math.sqrt(Zr*Zr+1)-Zr)}function Ye(Jt){return(Math.exp(Jt)-Math.exp(-Jt))/2}function St(Jt){return(Math.exp(Jt)+Math.exp(-Jt))/2}const Bt=pt(0);let kt=function(Jt){return St(Bt)/St(Bt+he*Jt)},lr=function(Jt){return Ke*((St(Bt)*(Ye(Zr=Bt+he*Jt)/St(Zr))-Ye(Bt))/rt)/et;var Zr},cr=(pt(1)-Bt)/he;if(Math.abs(et)<1e-6||!isFinite(cr)){if(Math.abs(Ke-Pe)<1e-6)return this.easeTo(A,h);const Jt=Pe<Ke?-1:1;cr=Math.abs(Math.log(Pe/Ke))/he,lr=function(){return 0},kt=function(Zr){return Math.exp(Jt*he*Zr)}}return A.duration="duration"in A?+A.duration:1e3*cr/("screenSpeed"in A?+A.screenSpeed/he:+A.speed),A.maxDuration&&A.duration>A.maxDuration&&(A.duration=0),this._zooming=!0,this._rotating=B!==D,this._pitching=O!==Q,this._padding=!p.isPaddingEqual(G),this._prepareEase(h,!1),this._ease(Jt=>{const Zr=Jt*cr,Wr=1/kt(Zr);p.zoom=Jt===1?k:y+p.scaleZoom(Wr),this._rotating&&(p.bearing=a.number(B,D,Jt)),this._pitching&&(p.pitch=a.number(Q,O,Jt)),this._padding&&(p.interpolatePadding(S,G,Jt),ne=p.centerPoint.add(ae));const Br=Jt===1?be:p.unproject(Te.add(Le.mult(lr(Zr))).mult(Wr));p.setLocationAtPoint(p.renderWorldCopies?Br.wrap():Br,ne),this._fireMoveEvents(h)},()=>this._afterEase(h),A),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(A,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,h)}if(!A){const p=this.handlers;p&&p.stop(!1)}return this}_ease(A,h,p){p.animate===!1||p.duration===0?(A(1),h()):(this._easeStart=a.exported.now(),this._easeOptions=p,this._onEaseFrame=A,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const A=Math.min((a.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(A)),A<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(A,h){A=a.wrap(A,-180,180);const p=Math.abs(A-h);return Math.abs(A-360-h)<p&&(A-=360),Math.abs(A+360-h)<p&&(A+=360),A}_normalizeCenter(A){const h=this.transform;if(!h.renderWorldCopies||h.lngRange)return;const p=A.lng-h.center.lng;A.lng+=p>180?-360:p<-180?360:0}}class jo{constructor(A={}){this.options=A,a.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(A){return this._map=A,this._compact=this.options&&this.options.compact,this._container=U.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=U.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=U.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){U.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(A,h){const p=this._map._getUIString(`AttributionControl.${h}`);A.title=p,A.setAttribute("aria-label",p)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(A){!A||A.sourceDataType!=="metadata"&&A.sourceDataType!=="visibility"&&A.dataType!=="style"&&A.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let A=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?A=A.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&A.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const h=this._map.style.sourceCaches;for(const y in h){const B=h[y];if(B.used||B.usedForTerrain){const Q=B.getSource();Q.attribution&&A.indexOf(Q.attribution)<0&&A.push(Q.attribution)}}A=A.filter(y=>String(y).trim()),A.sort((y,B)=>y.length-B.length),A=A.filter((y,B)=>{for(let Q=B+1;Q<A.length;Q++)if(A[Q].indexOf(y)>=0)return!1;return!0});const p=A.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,A.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Da{constructor(A={}){this.options=A,a.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(A){this._map=A,this._compact=this.options&&this.options.compact,this._container=U.create("div","maplibregl-ctrl mapboxgl-ctrl");const h=U.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){U.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const A=this._container.children;if(A.length){const h=A[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&h.classList.add("maplibregl-compact","mapboxgl-compact"):h.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Iu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(A){const h=++this._id;return this._queue.push({callback:A,id:h,cancelled:!1}),h}remove(A){const h=this._currentlyRunning,p=h?this._queue.concat(h):this._queue;for(const y of p)if(y.id===A)return void(y.cancelled=!0)}run(A=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const h=this._currentlyRunning=this._queue;this._queue=[];for(const p of h)if(!p.cancelled&&(p.callback(A),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Tu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Su={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Jf={showCompass:!0,showZoom:!0,visualizePitch:!1};class ms{constructor(A,h,p=!1){this._clickTolerance=10,this.element=h,this.mouseRotate=new zs({clickTolerance:A.dragRotate._mouseRotate._clickTolerance}),this.map=A,p&&(this.mousePitch=new zt({clickTolerance:A.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),U.addEventListener(h,"mousedown",this.mousedown),U.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),U.addEventListener(h,"touchmove",this.touchmove),U.addEventListener(h,"touchend",this.touchend),U.addEventListener(h,"touchcancel",this.reset)}down(A,h){this.mouseRotate.mousedown(A,h),this.mousePitch&&this.mousePitch.mousedown(A,h),U.disableDrag()}move(A,h){const p=this.map,y=this.mouseRotate.mousemoveWindow(A,h);if(y&&y.bearingDelta&&p.setBearing(p.getBearing()+y.bearingDelta),this.mousePitch){const B=this.mousePitch.mousemoveWindow(A,h);B&&B.pitchDelta&&p.setPitch(p.getPitch()+B.pitchDelta)}}off(){const A=this.element;U.removeEventListener(A,"mousedown",this.mousedown),U.removeEventListener(A,"touchstart",this.touchstart,{passive:!1}),U.removeEventListener(A,"touchmove",this.touchmove),U.removeEventListener(A,"touchend",this.touchend),U.removeEventListener(A,"touchcancel",this.reset),this.offTemp()}offTemp(){U.enableDrag(),U.removeEventListener(window,"mousemove",this.mousemove),U.removeEventListener(window,"mouseup",this.mouseup)}mousedown(A){this.down(a.extend({},A,{ctrlKey:!0,preventDefault:()=>A.preventDefault()}),U.mousePos(this.element,A)),U.addEventListener(window,"mousemove",this.mousemove),U.addEventListener(window,"mouseup",this.mouseup)}mousemove(A){this.move(A,U.mousePos(this.element,A))}mouseup(A){this.mouseRotate.mouseupWindow(A),this.mousePitch&&this.mousePitch.mouseupWindow(A),this.offTemp()}touchstart(A){A.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=U.touchPos(this.element,A.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>A.preventDefault()},this._startPos))}touchmove(A){A.targetTouches.length!==1?this.reset():(this._lastPos=U.touchPos(this.element,A.targetTouches)[0],this.move({preventDefault:()=>A.preventDefault()},this._lastPos))}touchend(A){A.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Jo(m,A,h){if(m=new a.LngLat(m.lng,m.lat),A){const p=new a.LngLat(m.lng-360,m.lat),y=new a.LngLat(m.lng+360,m.lat),B=h.locationPoint(m).distSqr(A);h.locationPoint(p).distSqr(A)<B?m=p:h.locationPoint(y).distSqr(A)<B&&(m=y)}for(;Math.abs(m.lng-h.center.lng)>180;){const p=h.locationPoint(m);if(p.x>=0&&p.y>=0&&p.x<=h.width&&p.y<=h.height)break;m.lng>h.center.lng?m.lng-=360:m.lng+=360}return m}const Xt={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ir(m,A,h){const p=m.classList;for(const y in Xt)p.remove(`maplibregl-${h}-anchor-${y}`,`mapboxgl-${h}-anchor-${y}`);p.add(`maplibregl-${h}-anchor-${A}`,`mapboxgl-${h}-anchor-${A}`)}class ao extends a.Evented{constructor(A,h){if(super(),(A instanceof HTMLElement||h)&&(A=a.extend({element:A},h)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=A&&A.anchor||"center",this._color=A&&A.color||"#3FB1CE",this._scale=A&&A.scale||1,this._draggable=A&&A.draggable||!1,this._clickTolerance=A&&A.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=A&&A.rotation||0,this._rotationAlignment=A&&A.rotationAlignment||"auto",this._pitchAlignment=A&&A.pitchAlignment&&A.pitchAlignment!=="auto"?A.pitchAlignment:this._rotationAlignment,A&&A.element)this._element=A.element,this._offset=a.pointGeometry.convert(A&&A.offset||[0,0]);else{this._defaultMarker=!0,this._element=U.create("div"),this._element.setAttribute("aria-label","Map marker");const p=U.createNS("http://www.w3.org/2000/svg","svg"),y=41,B=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${y}px`),p.setAttributeNS(null,"width",`${B}px`),p.setAttributeNS(null,"viewBox",`0 0 ${B} ${y}`);const Q=U.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"stroke","none"),Q.setAttributeNS(null,"stroke-width","1"),Q.setAttributeNS(null,"fill","none"),Q.setAttributeNS(null,"fill-rule","evenodd");const S=U.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const k=U.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");const D=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Le of D){const he=U.createNS("http://www.w3.org/2000/svg","ellipse");he.setAttributeNS(null,"opacity","0.04"),he.setAttributeNS(null,"cx","10.5"),he.setAttributeNS(null,"cy","5.80029008"),he.setAttributeNS(null,"rx",Le.rx),he.setAttributeNS(null,"ry",Le.ry),k.appendChild(he)}const O=U.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill",this._color);const G=U.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),O.appendChild(G);const Z=U.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"opacity","0.25"),Z.setAttributeNS(null,"fill","#000000");const ae=U.createNS("http://www.w3.org/2000/svg","path");ae.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Z.appendChild(ae);const ne=U.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ne.setAttributeNS(null,"fill","#FFFFFF");const oe=U.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const be=U.createNS("http://www.w3.org/2000/svg","circle");be.setAttributeNS(null,"fill","#000000"),be.setAttributeNS(null,"opacity","0.25"),be.setAttributeNS(null,"cx","5.5"),be.setAttributeNS(null,"cy","5.5"),be.setAttributeNS(null,"r","5.4999962");const Te=U.createNS("http://www.w3.org/2000/svg","circle");Te.setAttributeNS(null,"fill","#FFFFFF"),Te.setAttributeNS(null,"cx","5.5"),Te.setAttributeNS(null,"cy","5.5"),Te.setAttributeNS(null,"r","5.4999962"),oe.appendChild(be),oe.appendChild(Te),S.appendChild(k),S.appendChild(O),S.appendChild(Z),S.appendChild(ne),S.appendChild(oe),p.appendChild(S),p.setAttributeNS(null,"height",y*this._scale+"px"),p.setAttributeNS(null,"width",B*this._scale+"px"),this._element.appendChild(p),this._offset=a.pointGeometry.convert(A&&A.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",p=>{p.preventDefault()}),this._element.addEventListener("mousedown",p=>{p.preventDefault()}),ir(this._element,this._anchor,"marker"),this._popup=null}addTo(A){return this.remove(),this._map=A,A.getCanvasContainer().appendChild(this._element),A.on("move",this._update),A.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),U.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(A){return this._lngLat=a.LngLat.convert(A),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(A){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),A){if(!("offset"in A.options)){const y=Math.sqrt(Math.pow(13.5,2)/2);A.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=A,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(A){const h=A.code,p=A.charCode||A.keyCode;h!=="Space"&&h!=="Enter"&&p!==32&&p!==13||this.togglePopup()}_onMapClick(A){const h=A.originalEvent.target,p=this._element;this._popup&&(h===p||p.contains(h))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const A=this._popup;return A?(A.isOpen()?A.remove():A.addTo(this._map),this):this}_update(A){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Jo(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let h="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?h=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(h=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let p="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?p="rotateX(0deg)":this._pitchAlignment==="map"&&(p=`rotateX(${this._map.getPitch()}deg)`),A&&A.type!=="moveend"||(this._pos=this._pos.round()),U.setTransform(this._element,`${Xt[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${p} ${h}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const y=this._map.unproject(this._pos),B=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=y.distanceTo(this._lngLat)>20*B?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(A){return this._offset=a.pointGeometry.convert(A),this._update(),this}_onMove(A){if(!this._isDragging){const h=this._clickTolerance||this._map._clickTolerance;this._isDragging=A.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=A.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"}_addDragHandler(A){this._element.contains(A.originalEvent.target)&&(A.preventDefault(),this._positionDelta=A.point.sub(this._pos).add(this._offset),this._pointerdownPos=A.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(A){return this._draggable=!!A,this._map&&(A?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(A){return this._rotation=A||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(A){return this._rotationAlignment=A||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(A){return this._pitchAlignment=A&&A!=="auto"?A:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Nl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let aA,rn=0,lA=!1;const _s={maxWidth:100,unit:"metric"};function ku(m,A,h){const p=h&&h.maxWidth||100,y=m._container.clientHeight/2,B=m.unproject([0,y]),Q=m.unproject([p,y]),S=B.distanceTo(Q);if(h&&h.unit==="imperial"){const k=3.2808*S;k>5280?cA(A,p,k/5280,m._getUIString("ScaleControl.Miles")):cA(A,p,k,m._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?cA(A,p,S/1852,m._getUIString("ScaleControl.NauticalMiles")):S>=1e3?cA(A,p,S/1e3,m._getUIString("ScaleControl.Kilometers")):cA(A,p,S,m._getUIString("ScaleControl.Meters"))}function cA(m,A,h,p){const y=function(B){const Q=Math.pow(10,`${Math.floor(B)}`.length-1);let S=B/Q;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:S>=1?1:function(k){const D=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*D)/D}(S),Q*S}(h);m.style.width=A*(y/h)+"px",m.innerHTML=`${y}&nbsp;${p}`}const Ii={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Li=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Vl(m){if(m){if(typeof m=="number"){const A=Math.round(Math.sqrt(.5*Math.pow(m,2)));return{center:new a.pointGeometry(0,0),top:new a.pointGeometry(0,m),"top-left":new a.pointGeometry(A,A),"top-right":new a.pointGeometry(-A,A),bottom:new a.pointGeometry(0,-m),"bottom-left":new a.pointGeometry(A,-A),"bottom-right":new a.pointGeometry(-A,-A),left:new a.pointGeometry(m,0),right:new a.pointGeometry(-m,0)}}if(m instanceof a.pointGeometry||Array.isArray(m)){const A=a.pointGeometry.convert(m);return{center:A,top:A,"top-left":A,"top-right":A,bottom:A,"bottom-left":A,"bottom-right":A,left:A,right:A}}return{center:a.pointGeometry.convert(m.center||[0,0]),top:a.pointGeometry.convert(m.top||[0,0]),"top-left":a.pointGeometry.convert(m["top-left"]||[0,0]),"top-right":a.pointGeometry.convert(m["top-right"]||[0,0]),bottom:a.pointGeometry.convert(m.bottom||[0,0]),"bottom-left":a.pointGeometry.convert(m["bottom-left"]||[0,0]),"bottom-right":a.pointGeometry.convert(m["bottom-right"]||[0,0]),left:a.pointGeometry.convert(m.left||[0,0]),right:a.pointGeometry.convert(m.right||[0,0])}}return Vl(new a.pointGeometry(0,0))}const UA={supported:w,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:class extends vi{constructor(m){var A;if(a.PerformanceUtils.mark(a.PerformanceMarkers.create),(m=a.extend({},Su,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ko(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),{bearingSnap:m.bearingSnap}),this._interactive=m.interactive,this._cooperativeGestures=m.cooperativeGestures,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=m.collectResourceTiming,this._renderTaskQueue=new Iu,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Tu,m.locale),this._clickTolerance=m.clickTolerance,this._pixelRatio=(A=m.pixelRatio)!==null&&A!==void 0?A:devicePixelRatio,this._requestManager=new H(m.transformRequest),typeof m.container=="string"){if(this._container=document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Qu(this,m),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=m.hash&&new _u(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,a.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new jo({customAttribution:m.customAttribution})),m.maplibreLogo&&this.addControl(new Da,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",h=>{this._update(h.dataType==="style"),this.fire(new a.Event(`${h.dataType}data`,h))}),this.on("dataloading",h=>{this.fire(new a.Event(`${h.dataType}dataloading`,h))}),this.on("dataabort",h=>{this.fire(new a.Event("sourcedataabort",h))})}_getMapId(){return this._mapId}addControl(m,A){if(A===void 0&&(A=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=m.onAdd(this);this._controls.push(m);const p=this._controlPositions[A];return A.indexOf("bottom")!==-1?p.insertBefore(h,p.firstChild):p.appendChild(h),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const A=this._controls.indexOf(m);return A>-1&&this._controls.splice(A,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}calculateCameraOptionsFromTo(m,A,h,p){return p==null&&this.style.terrain&&(p=this.transform.getElevation(h,this.style.terrain)),super.calculateCameraOptionsFromTo(m,A,h,p)}resize(m){const A=this._containerDimensions(),h=A[0],p=A[1];this._resizeCanvas(h,p,this.getPixelRatio()),this.transform.resize(h,p),this.painter.resize(h,p,this.getPixelRatio());const y=!this._moving;return y&&(this.stop(),this.fire(new a.Event("movestart",m)).fire(new a.Event("move",m))),this.fire(new a.Event("resize",m)),y&&this.fire(new a.Event("moveend",m)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(m){const[A,h]=this._containerDimensions();this._pixelRatio=m,this._resizeCanvas(A,h,m),this.painter.resize(A,h,m)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(m){return this.transform.setMaxBounds(a.LngLatBounds.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this._update()}project(m){return this.transform.locationPoint(a.LngLat.convert(m),this.style&&this.style.terrain)}unproject(m){return this.transform.pointLocation(a.pointGeometry.convert(m),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(m,A,h){if(m==="mouseenter"||m==="mouseover"){let p=!1;return{layer:A,listener:h,delegates:{mousemove:B=>{const Q=this.getLayer(A)?this.queryRenderedFeatures(B.point,{layers:[A]}):[];Q.length?p||(p=!0,h.call(this,new Mn(m,this,B.originalEvent,{features:Q}))):p=!1},mouseout:()=>{p=!1}}}}if(m==="mouseleave"||m==="mouseout"){let p=!1;return{layer:A,listener:h,delegates:{mousemove:Q=>{(this.getLayer(A)?this.queryRenderedFeatures(Q.point,{layers:[A]}):[]).length?p=!0:p&&(p=!1,h.call(this,new Mn(m,this,Q.originalEvent)))},mouseout:Q=>{p&&(p=!1,h.call(this,new Mn(m,this,Q.originalEvent)))}}}}{const p=y=>{const B=this.getLayer(A)?this.queryRenderedFeatures(y.point,{layers:[A]}):[];B.length&&(y.features=B,h.call(this,y),delete y.features)};return{layer:A,listener:h,delegates:{[m]:p}}}}on(m,A,h){if(h===void 0)return super.on(m,A);const p=this._createDelegatedListener(m,A,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(p);for(const y in p.delegates)this.on(y,p.delegates[y]);return this}once(m,A,h){if(h===void 0)return super.once(m,A);const p=this._createDelegatedListener(m,A,h);for(const y in p.delegates)this.once(y,p.delegates[y]);return this}off(m,A,h){return h===void 0?super.off(m,A):(this._delegatedListeners&&this._delegatedListeners[m]&&(p=>{const y=this._delegatedListeners[m];for(let B=0;B<y.length;B++){const Q=y[B];if(Q.layer===A&&Q.listener===h){for(const S in Q.delegates)this.off(S,Q.delegates[S]);return y.splice(B,1),this}}})(),this)}queryRenderedFeatures(m,A){if(!this.style)return[];let h;if(A!==void 0||m===void 0||m instanceof a.pointGeometry||Array.isArray(m)||(A=m,m=void 0),A=A||{},(m=m||[[0,0],[this.transform.width,this.transform.height]])instanceof a.pointGeometry||typeof m[0]=="number")h=[a.pointGeometry.convert(m)];else{const p=a.pointGeometry.convert(m[0]),y=a.pointGeometry.convert(m[1]);h=[p,new a.pointGeometry(y.x,p.y),y,new a.pointGeometry(p.x,y.y),p]}return this.style.queryRenderedFeatures(h,A,this.transform)}querySourceFeatures(m,A){return this.style.querySourceFeatures(m,A)}setStyle(m,A){return(A=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},A)).diff!==!1&&A.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,A),this):(this._localIdeographFontFamily=A.localIdeographFontFamily,this._updateStyle(m,A))}setTransformRequest(m){return this._requestManager.setTransformRequest(m),this}_getUIString(m){const A=this._locale[m];if(A==null)throw new Error(`Missing UI string '${m}'`);return A}_updateStyle(m,A){return this.style&&(this.style.setEventedParent(null),this.style._remove()),m?(this.style=new Ui(this,A||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m):this.style.loadJSON(m),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ui(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,A){if(typeof m=="string"){const h=this._requestManager.transformRequest(m,a.ResourceType.Style);a.getJSON(h,(p,y)=>{p?this.fire(new a.ErrorEvent(p)):y&&this._updateDiff(y,A)})}else typeof m=="object"&&this._updateDiff(m,A)}_updateDiff(m,A){try{this.style.setState(m)&&this._update(!0)}catch(h){a.warnOnce(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(m,A)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")}addSource(m,A){return this._lazyInitEmptyStyle(),this.style.addSource(m,A),this._update(!0)}isSourceLoaded(m){const A=this.style&&this.style.sourceCaches[m];if(A!==void 0)return A.loaded();this.fire(new a.ErrorEvent(new Error(`There is no source with ID '${m}'`)))}setTerrain(m){return this.style.setTerrain(m),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const m=this.style&&this.style.sourceCaches;for(const A in m){const h=m[A]._tiles;for(const p in h){const y=h[p];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}addSourceType(m,A,h){return this._lazyInitEmptyStyle(),this.style.addSourceType(m,A,h)}removeSource(m){return this.style.removeSource(m),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,A,{pixelRatio:h=1,sdf:p=!1,stretchX:y,stretchY:B,content:Q}={}){if(this._lazyInitEmptyStyle(),A instanceof HTMLImageElement||a.isImageBitmap(A)){const{width:S,height:k,data:D}=a.exported.getImageData(A);this.style.addImage(m,{data:new a.RGBAImage({width:S,height:k},D),pixelRatio:h,stretchX:y,stretchY:B,content:Q,sdf:p,version:0})}else{if(A.width===void 0||A.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:S,height:k,data:D}=A,O=A;this.style.addImage(m,{data:new a.RGBAImage({width:S,height:k},new Uint8Array(D)),pixelRatio:h,stretchX:y,stretchY:B,content:Q,sdf:p,version:0,userImage:O}),O.onAdd&&O.onAdd(this,m)}}}updateImage(m,A){const h=this.style.getImage(m);if(!h)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=A instanceof HTMLImageElement||a.isImageBitmap(A)?a.exported.getImageData(A):A,{width:y,height:B,data:Q}=p;if(y===void 0||B===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==h.data.width||B!==h.data.height)return this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const S=!(A instanceof HTMLImageElement||a.isImageBitmap(A));h.data.replace(Q,S),this.style.updateImage(m,h)}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,A){a.getImage(this._requestManager.transformRequest(m,a.ResourceType.Image),A)}listImages(){return this.style.listImages()}addLayer(m,A){return this._lazyInitEmptyStyle(),this.style.addLayer(m,A),this._update(!0)}moveLayer(m,A){return this.style.moveLayer(m,A),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}setLayerZoomRange(m,A,h){return this.style.setLayerZoomRange(m,A,h),this._update(!0)}setFilter(m,A,h={}){return this.style.setFilter(m,A,h),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,A,h,p={}){return this.style.setPaintProperty(m,A,h,p),this._update(!0)}getPaintProperty(m,A){return this.style.getPaintProperty(m,A)}setLayoutProperty(m,A,h,p={}){return this.style.setLayoutProperty(m,A,h,p),this._update(!0)}getLayoutProperty(m,A){return this.style.getLayoutProperty(m,A)}setLight(m,A={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,A),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(m,A){return this.style.setFeatureState(m,A),this._update()}removeFeatureState(m,A){return this.style.removeFeatureState(m,A),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let m=0,A=0;return this._container&&(m=this._container.clientWidth||400,A=this._container.clientHeight||300),[m,A]}_setupContainer(){const m=this._container;m.classList.add("maplibregl-map","mapboxgl-map");const A=this._canvasContainer=U.create("div","maplibregl-canvas-container mapboxgl-canvas-container",m);this._interactive&&A.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=U.create("canvas","maplibregl-canvas mapboxgl-canvas",A),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const h=this._containerDimensions();this._resizeCanvas(h[0],h[1],this.getPixelRatio());const p=this._controlContainer=U.create("div","maplibregl-control-container mapboxgl-control-container",m),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(B=>{y[B]=U.create("div",`maplibregl-ctrl-${B} mapboxgl-ctrl-${B}`,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const m=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=U.create("div","maplibregl-cooperative-gesture-screen",m);let A="Control",h=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(h=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map",A="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${h}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",p=>{p.key===A&&(this._metaPress=!0)}),document.addEventListener("keyup",p=>{p.key===A&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",p=>{this._onCooperativeGesture(p,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(m,A,h){this._canvas.width=h*m,this._canvas.height=h*A,this._canvas.style.width=`${m}px`,this._canvas.style.height=`${A}px`}_setupPainter(){const m=a.extend({},w.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),A=this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);A?(this.painter=new kl(A,this.transform),a.exported$1.testSupport(A)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(m,A,h){return!A&&h<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_render(m){let A,h=0;const p=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(A=p.createQueryEXT(),p.beginQueryEXT(p.TIME_ELAPSED_EXT,A),h=a.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),this._removed)return;let y=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Q=this.transform.zoom,S=a.exported.now();this.style.zoomHistory.update(Q,S);const k=new a.EvaluationParameters(Q,{now:S,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),D=k.crossFadingFactor();D===1&&D===this._crossFadingFactor||(y=!0,this._crossFadingFactor=D),this.style.update(k)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.load),this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||y)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const Q=a.exported.now()-h;p.endQueryEXT(p.TIME_ELAPSED_EXT,A),setTimeout(()=>{const S=p.getQueryObjectEXT(A,p.QUERY_RESULT_EXT)/1e6;p.deleteQueryEXT(A),this.fire(new a.Event("gpu-timing-frame",{cpuTime:Q,gpuTime:S}))},50)}if(this.listens("gpu-timing-layer")){const Q=this.painter.collectGpuTimers();setTimeout(()=>{const S=this.painter.queryGpuTimers(Q);this.fire(new a.Event("gpu-timing-layer",{layerTimes:S}))},50)}const B=this._sourcesDirty||this._styleDirty||this._placementDirty;return B||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||B||(this._fullyLoaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const A of this._controls)A.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),U.remove(this._canvasContainer),U.remove(this._controlContainer),this._cooperativeGestures&&U.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),a.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new a.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.exported.frame(m=>{a.PerformanceUtils.frame(m),this._frame=null,this._render(m)}))}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}_setCacheLimits(m,A){a.setCacheLimits(m,A)}get version(){return"2.4.0"}},NavigationControl:class{constructor(m){this.options=a.extend({},Jf,m),this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",A=>A.preventDefault()),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",A=>this._map.zoomIn({},{originalEvent:A})),U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",A=>this._map.zoomOut({},{originalEvent:A})),U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",A=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:A}):this._map.resetNorth({},{originalEvent:A})}),this._compassIcon=U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map.getZoom(),A=m===this._map.getMaxZoom(),h=m===this._map.getMinZoom();this._zoomInButton.disabled=A,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",A.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())}_rotateCompassArrow(){const m=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=m}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ms(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){U.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(m,A){const h=U.create("button",m,this._container);return h.type="button",h.addEventListener("click",A),h}_setButtonTitle(m,A){const h=this._map._getUIString(`NavigationControl.${A}`);m.title=h,m.setAttribute("aria-label",h)}},GeolocateControl:class extends a.Evented{constructor(m){super(),this.options=a.extend({},Nl,m),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(m){var A;return this._map=m,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),A=this._setupUI,aA!==void 0?A(aA):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(h=>{aA=h.state!=="denied",A(aA)}):(aA=!!window.navigator.geolocation,A(aA)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),U.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,rn=0,lA=!1}_isOutOfMapMaxBounds(m){const A=this._map.getMaxBounds(),h=m.coords;return A&&(h.longitude<A.getWest()||h.longitude>A.getEast()||h.latitude<A.getSouth()||h.latitude>A.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",m)),this._finish()}}_updateCamera(m){const A=new a.LngLat(m.coords.longitude,m.coords.latitude),h=m.coords.accuracy,p=this._map.getBearing(),y=a.extend({bearing:p},this.options.fitBoundsOptions);this._map.fitBounds(A.toBounds(h),y,{geolocateSource:!0})}_updateMarker(m){if(m){const A=new a.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(A).addTo(this._map),this._userLocationDotMarker.setLngLat(A).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map._container.clientHeight/2,A=this._map.unproject([0,m]),h=this._map.unproject([1,m]),p=A.distanceTo(h),y=Math.ceil(2*this._accuracy/p);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const A=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=A,this._geolocateButton.setAttribute("aria-label",A),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&lA)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._container.addEventListener("contextmenu",A=>A.preventDefault()),this._geolocateButton=U.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",m===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const A=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=A,this._geolocateButton.setAttribute("aria-label",A)}else{const A=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=A,this._geolocateButton.setAttribute("aria-label",A)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=U.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new ao(this._dotElement),this._circleElement=U.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ao({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",A=>{A.geolocateSource||this._watchState!=="ACTIVE_LOCK"||A.originalEvent&&A.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new a.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":rn--,lA=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),rn++,rn>1?(m={maximumAge:6e5,timeout:0},lA=!0):(m=this.options.positionOptions,lA=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,m)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:jo,LogoControl:Da,ScaleControl:class{constructor(m){this.options=a.extend({},_s,m),a.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){ku(this._map,this._container,this.options)}onAdd(m){return this._map=m,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){U.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(m){this.options.unit=m,ku(this._map,this._container,this.options)}},FullscreenControl:class{constructor(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=U.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){U.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=U.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.title=m}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(m){this.options=m,a.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(m){return this._map=m,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=U.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){U.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends a.Evented{constructor(m){super(),this.options=a.extend(Object.create(Ii),m),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&U.remove(this._content),this._container&&(U.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(m){return this._lngLat=a.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){const A=document.createDocumentFragment(),h=document.createElement("body");let p;for(h.innerHTML=m;p=h.firstChild,p;)A.appendChild(p);return this.setDOMContent(A)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=U.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(m),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(m){this._container&&this._container.classList.add(m)}removeClassName(m){this._container&&this._container.classList.remove(m)}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){if(this._container)return this._container.classList.toggle(m)}_createCloseButton(){this.options.closeButton&&(this._closeButton=U.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(m){this._update(m.point)}_onMouseMove(m){this._update(m.point)}_onDrag(m){this._update(m.point)}_update(m){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=U.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=U.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(B=>this._container.classList.add(B)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Jo(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!m))return;const A=this._pos=this._trackPointer&&m?m:this._map.project(this._lngLat);let h=this.options.anchor;const p=Vl(this.options.offset);if(!h){const B=this._container.offsetWidth,Q=this._container.offsetHeight;let S;S=A.y+p.bottom.y<Q?["top"]:A.y>this._map.transform.height-Q?["bottom"]:[],A.x<B/2?S.push("left"):A.x>this._map.transform.width-B/2&&S.push("right"),h=S.length===0?"bottom":S.join("-")}const y=A.add(p[h]).round();U.setTransform(this._container,`${Xt[h]} translate(${y.x}px,${y.y}px)`),ir(this._container,h,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(Li);m&&m.focus()}_onClose(){this.remove()}},Marker:ao,Style:Ui,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.pointGeometry,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,AJAXError:a.AJAXError,config:a.config,CanvasSource:tt,GeoJSONSource:at,ImageSource:nt,RasterDEMTileSource:Me,RasterTileSource:ht,VectorTileSource:Re,VideoSource:He,prewarm:function(){nr().acquire(qe)},clearPrewarmedResources:function(){const m=Ge;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(qe),Ge=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return Gt.workerCount},set workerCount(m){Gt.workerCount=m},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){a.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){a.clearTileCache(m)},workerUrl:"",addProtocol(m,A){a.config.REGISTERED_PROTOCOLS[m]=A},removeProtocol(m){delete a.config.REGISTERED_PROTOCOLS[m]}};return qn.extend(UA,{isSafari:a.isSafari,getPerformanceMetrics:a.PerformanceUtils.getPerformanceMetrics}),UA});var f=l;return f})})(y3);const ll=ng;var Vn=(t,e,i)=>new Promise((n,l)=>{var u=w=>{try{a(i.next(w))}catch(C){l(C)}},f=w=>{try{a(i.throw(w))}catch(C){l(C)}},a=w=>w.done?n(w.value):Promise.resolve(w.value).then(u,f);a((i=i.apply(t,e)).next())}),ps=Uint8Array,ha=Uint16Array,dB=Uint32Array,pB=new ps([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),gB=new ps([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),w3=new ps([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mB=function(t,e){for(var i=new ha(31),n=0;n<31;++n)i[n]=e+=1<<t[n-1];for(var l=new dB(i[30]),n=1;n<30;++n)for(var u=i[n];u<i[n+1];++u)l[u]=u-i[n]<<5|n;return[i,l]},_B=mB(pB,2),yB=_B[0],v3=_B[1];yB[28]=258,v3[258]=28;var B3=mB(gB,0),x3=B3[0],sg=new ha(32768);for(ni=0;ni<32768;++ni)OA=(ni&43690)>>>1|(ni&21845)<<1,OA=(OA&52428)>>>2|(OA&13107)<<2,OA=(OA&61680)>>>4|(OA&3855)<<4,sg[ni]=((OA&65280)>>>8|(OA&255)<<8)>>>1;var OA,ni,Pc=function(t,e,i){for(var n=t.length,l=0,u=new ha(e);l<n;++l)t[l]&&++u[t[l]-1];var f=new ha(e);for(l=0;l<e;++l)f[l]=f[l-1]+u[l-1]<<1;var a;if(i){a=new ha(1<<e);var w=15-e;for(l=0;l<n;++l)if(t[l])for(var C=l<<4|t[l],F=e-t[l],E=f[t[l]-1]++<<F,U=E|(1<<F)-1;E<=U;++E)a[sg[E]>>>w]=C}else for(a=new ha(n),l=0;l<n;++l)t[l]&&(a[l]=sg[f[t[l]-1]++]>>>15-t[l]);return a},ou=new ps(288);for(ni=0;ni<144;++ni)ou[ni]=8;var ni;for(ni=144;ni<256;++ni)ou[ni]=9;var ni;for(ni=256;ni<280;++ni)ou[ni]=7;var ni;for(ni=280;ni<288;++ni)ou[ni]=8;var ni,wB=new ps(32);for(ni=0;ni<32;++ni)wB[ni]=5;var ni,b3=Pc(ou,9,1),C3=Pc(wB,5,1),wp=function(t){for(var e=t[0],i=1;i<t.length;++i)t[i]>e&&(e=t[i]);return e},Gs=function(t,e,i){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&i},vp=function(t,e){var i=e/8|0;return(t[i]|t[i+1]<<8|t[i+2]<<16)>>(e&7)},E3=function(t){return(t+7)/8|0},F3=function(t,e,i){(e==null||e<0)&&(e=0),(i==null||i>t.length)&&(i=t.length);var n=new(t.BYTES_PER_ELEMENT==2?ha:t.BYTES_PER_ELEMENT==4?dB:ps)(i-e);return n.set(t.subarray(e,i)),n},U3=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ws=function(t,e,i){var n=new Error(e||U3[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Ws),!i)throw n;return n},Vg=function(t,e,i){var n=t.length;if(!n||i&&i.f&&!i.l)return e||new ps(0);var l=!e||i,u=!i||i.i;i||(i={}),e||(e=new ps(n*3));var f=function(qt){var Tt=e.length;if(qt>Tt){var tr=new ps(Math.max(Tt*2,qt));tr.set(e),e=tr}},a=i.f||0,w=i.p||0,C=i.b||0,F=i.l,E=i.d,U=i.m,H=i.n,P=n*8;do{if(!F){a=Gs(t,w,1);var V=Gs(t,w+1,3);if(w+=3,V)if(V==1)F=b3,E=C3,U=9,H=5;else if(V==2){var ce=Gs(t,w,31)+257,Qe=Gs(t,w+10,15)+4,le=ce+Gs(t,w+5,31)+1;w+=14;for(var re=new ps(le),we=new ps(19),Ae=0;Ae<Qe;++Ae)we[w3[Ae]]=Gs(t,w+Ae*3,7);w+=Qe*3;for(var R=wp(we),ie=(1<<R)-1,se=Pc(we,R,1),Ae=0;Ae<le;){var Be=se[Gs(t,w,ie)];w+=Be&15;var j=Be>>>4;if(j<16)re[Ae++]=j;else{var Re=0,ht=0;for(j==16?(ht=3+Gs(t,w,3),w+=2,Re=re[Ae-1]):j==17?(ht=3+Gs(t,w,7),w+=3):j==18&&(ht=11+Gs(t,w,127),w+=7);ht--;)re[Ae++]=Re}}var _t=re.subarray(0,ce),Me=re.subarray(ce);U=wp(_t),H=wp(Me),F=Pc(_t,U,1),E=Pc(Me,H,1)}else Ws(1);else{var j=E3(w)+4,Y=t[j-4]|t[j-3]<<8,ee=j+Y;if(ee>n){u&&Ws(0);break}l&&f(C+Y),e.set(t.subarray(j,ee),C),i.b=C+=Y,i.p=w=ee*8,i.f=a;continue}if(w>P){u&&Ws(0);break}}l&&f(C+131072);for(var at=(1<<U)-1,wt=(1<<H)-1,nt=w;;nt=w){var Re=F[vp(t,w)&at],He=Re>>>4;if(w+=Re&15,w>P){u&&Ws(0);break}if(Re||Ws(2),He<256)e[C++]=He;else if(He==256){nt=w,F=null;break}else{var tt=He-254;if(He>264){var Ae=He-257,Je=pB[Ae];tt=Gs(t,w,(1<<Je)-1)+yB[Ae],w+=Je}var ut=E[vp(t,w)&wt],At=ut>>>4;ut||Ws(3),w+=ut&15;var Me=x3[At];if(At>3){var Je=gB[At];Me+=vp(t,w)&(1<<Je)-1,w+=Je}if(w>P){u&&Ws(0);break}l&&f(C+131072);for(var Et=C+tt;C<Et;C+=4)e[C]=e[C-Me],e[C+1]=e[C+1-Me],e[C+2]=e[C+2-Me],e[C+3]=e[C+3-Me];C=Et}}i.l=F,i.p=nt,i.b=C,i.f=a,F&&(a=1,i.m=U,i.d=E,i.n=H)}while(!a);return C==e.length?e:F3(e,0,C)},Q3=new ps(0),I3=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&Ws(6,"invalid gzip data");var e=t[3],i=10;e&4&&(i+=t[10]|(t[11]<<8)+2);for(var n=(e>>3&1)+(e>>4&1);n>0;n-=!t[i++]);return i+(e&2)},T3=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},S3=function(t){((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)&&Ws(6,"invalid zlib data"),t[1]&32&&Ws(6,"invalid zlib data: preset dictionaries not supported")};function k3(t,e){return Vg(t,e)}function M3(t,e){return Vg(t.subarray(I3(t),-8),e||new ps(T3(t)))}function D3(t,e){return Vg((S3(t),t.subarray(2,-4)),e)}function Ag(t,e){return t[0]==31&&t[1]==139&&t[2]==8?M3(t,e):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?k3(t,e):D3(t,e)}var L3=typeof TextDecoder<"u"&&new TextDecoder,H3=0;try{L3.decode(Q3,{stream:!0}),H3=1}catch{}var vB=(t,e)=>t*Math.pow(2,e),wc=(t,e)=>Math.floor(t/Math.pow(2,e)),yf=(t,e)=>vB(t.getUint16(e+1,!0),8)+t.getUint8(e),BB=(t,e)=>vB(t.getUint32(e+2,!0),16)+t.getUint16(e,!0),P3=(t,e,i,n,l)=>{if(t!=n.getUint8(l))return t-n.getUint8(l);const u=yf(n,l+1);if(e!=u)return e-u;const f=yf(n,l+4);return i!=f?i-f:0},z3=(t,e,i,n)=>{const l=xB(t,e|128,i,n);return l?{z:e,x:i,y:n,offset:l[0],length:l[1],is_dir:!0}:null},tw=(t,e,i,n)=>{const l=xB(t,e,i,n);return l?{z:e,x:i,y:n,offset:l[0],length:l[1],is_dir:!1}:null},xB=(t,e,i,n)=>{let l=0,u=t.byteLength/17-1;for(;l<=u;){const f=u+l>>1,a=P3(e,i,n,t,f*17);if(a>0)l=f+1;else if(a<0)u=f-1;else return[BB(t,f*17+7),t.getUint32(f*17+13,!0)]}return null},R3=(t,e)=>t.is_dir&&!e.is_dir?1:!t.is_dir&&e.is_dir?-1:t.z!==e.z?t.z-e.z:t.x!==e.x?t.x-e.x:t.y-e.y,bB=(t,e)=>{const i=t.getUint8(e*17);return{z:i&127,x:yf(t,e*17+1),y:yf(t,e*17+4),offset:BB(t,e*17+7),length:t.getUint32(e*17+13,!0),is_dir:i>>7===1}},rw=t=>{const e=[],i=new DataView(t);for(let n=0;n<i.byteLength/17;n++)e.push(bB(i,n));return O3(e)},O3=t=>{t.sort(R3);const e=new ArrayBuffer(17*t.length),i=new Uint8Array(e);for(let n=0;n<t.length;n++){const l=t[n];let u=l.z;l.is_dir&&(u=u|128),i[n*17]=u,i[n*17+1]=l.x&255,i[n*17+2]=l.x>>8&255,i[n*17+3]=l.x>>16&255,i[n*17+4]=l.y&255,i[n*17+5]=l.y>>8&255,i[n*17+6]=l.y>>16&255,i[n*17+7]=l.offset&255,i[n*17+8]=wc(l.offset,8)&255,i[n*17+9]=wc(l.offset,16)&255,i[n*17+10]=wc(l.offset,24)&255,i[n*17+11]=wc(l.offset,32)&255,i[n*17+12]=wc(l.offset,48)&255,i[n*17+13]=l.length&255,i[n*17+14]=l.length>>8&255,i[n*17+15]=l.length>>16&255,i[n*17+16]=l.length>>24&255}return e},K3=(t,e)=>{if(t.byteLength<17)return null;const i=t.byteLength/17,n=bB(t,i-1);if(n.is_dir){const l=n.z,u=e.z-l,f=Math.trunc(e.x/(1<<u)),a=Math.trunc(e.y/(1<<u));return{z:l,x:f,y:a}}return null};function N3(t){return Vn(this,null,function*(){const e=yield t.getBytes(0,512e3),i=new DataView(e.data),n=i.getUint32(4,!0),l=i.getUint16(8,!0),u=new TextDecoder("utf-8"),f=JSON.parse(u.decode(new DataView(e.data,10,n)));let a=0;f.compression==="gzip"&&(a=2);let w=0;"minzoom"in f&&(w=+f.minzoom);let C=0;"maxzoom"in f&&(C=+f.maxzoom);let F=0,E=0,U=0,H=-180,P=-85,V=180,j=85;if(f.bounds){const ee=f.bounds.split(",");H=+ee[0],P=+ee[1],V=+ee[2],j=+ee[3]}if(f.center){const ee=f.center.split(",");F=+ee[0],E=+ee[1],U=+ee[2]}return{specVersion:i.getUint16(2,!0),rootDirectoryOffset:10+n,rootDirectoryLength:l*17,jsonMetadataOffset:10,jsonMetadataLength:n,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:a,tileType:1,minZoom:w,maxZoom:C,minLon:H,minLat:P,maxLon:V,maxLat:j,centerZoom:U,centerLon:F,centerLat:E,etag:e.etag}})}function V3(t,e,i,n,l,u,f){return Vn(this,null,function*(){let a=yield i.getArrayBuffer(e,t.rootDirectoryOffset,t.rootDirectoryLength,t);t.specVersion===1&&(a=rw(a));const w=tw(new DataView(a),n,l,u);if(w){let E=(yield e.getBytes(w.offset,w.length,f)).data;const U=new DataView(E);return U.getUint8(0)==31&&U.getUint8(1)==139&&(E=Ag(new Uint8Array(E))),{data:E}}const C=K3(new DataView(a),{z:n,x:l,y:u});if(C){const F=z3(new DataView(a),C.z,C.x,C.y);if(F){let E=yield i.getArrayBuffer(e,F.offset,F.length,t);t.specVersion===1&&(E=rw(E));const U=tw(new DataView(E),n,l,u);if(U){let P=(yield e.getBytes(U.offset,U.length,f)).data;const V=new DataView(P);return V.getUint8(0)==31&&V.getUint8(1)==139&&(P=Ag(new Uint8Array(P))),{data:P}}}}})}var CB={getHeader:N3,getZxy:V3},G3=class{constructor(){this.tile=(t,e)=>{if(t.type=="json"){const i=t.url.substr(10);let n=this.tiles.get(i);return n||(n=new iw(i),this.tiles.set(i,n)),n.getHeader().then(l=>{const u={tiles:[t.url+"/{z}/{x}/{y}"],minzoom:l.minZoom,maxzoom:l.maxZoom};e(null,u,null,null)}),{cancel:()=>{}}}else{const i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),n=t.url.match(i);if(!n)throw new Error("Invalid PMTiles protocol URL");const l=n[1];let u=this.tiles.get(l);u||(u=new iw(l),this.tiles.set(l,u));const f=n[2],a=n[3],w=n[4],C=new AbortController,F=C.signal;let E=()=>{C.abort()};return u.getHeader().then(U=>{u.getZxy(+f,+a,+w,F).then(H=>{H?e(null,new Uint8Array(H.data),H.cacheControl,H.expires):U.tileType==1?e(null,new Uint8Array,null,null):e(null,null,null,null)}).catch(H=>{if(H.name!=="AbortError")throw H})}),{cancel:E}}},this.tiles=new Map}add(t){this.tiles.set(t.source.getKey(),t)}get(t){return this.tiles.get(t)}};function sl(t,e){return(e>>>0)*4294967296+(t>>>0)}function X3(t,e){const i=e.buf;let n,l;if(l=i[e.pos++],n=(l&112)>>4,l<128||(l=i[e.pos++],n|=(l&127)<<3,l<128)||(l=i[e.pos++],n|=(l&127)<<10,l<128)||(l=i[e.pos++],n|=(l&127)<<17,l<128)||(l=i[e.pos++],n|=(l&127)<<24,l<128)||(l=i[e.pos++],n|=(l&1)<<31,l<128))return sl(t,n);throw new Error("Expected varint not more than 10 bytes")}function vc(t){const e=t.buf;let i,n;return n=e[t.pos++],i=n&127,n<128||(n=e[t.pos++],i|=(n&127)<<7,n<128)||(n=e[t.pos++],i|=(n&127)<<14,n<128)||(n=e[t.pos++],i|=(n&127)<<21,n<128)?i:(n=e[t.pos],i|=(n&15)<<28,X3(i,t))}function Z3(t,e,i,n){if(n==0){i==1&&(e[0]=t-1-e[0],e[1]=t-1-e[1]);const l=e[0];e[0]=e[1],e[1]=l}}var W3=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function q3(t,e,i){if(t>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>Math.pow(2,t)-1||i>Math.pow(2,t)-1)throw Error("tile x/y outside zoom level bounds");const n=W3[t],l=Math.pow(2,t);let u=0,f=0,a=0;const w=[e,i];let C=l/2;for(;C>0;)u=(w[0]&C)>0?1:0,f=(w[1]&C)>0?1:0,a+=C*C*(3*u^f),Z3(C,w,u,f),C=C/2;return n+a}function EB(t,e){return Vn(this,null,function*(){if(e===1||e===0)return t;if(e===2)return Ag(new Uint8Array(t));throw Error("Compression method not supported")})}var j3=127;function J3(t,e){let i=0,n=t.length-1;for(;i<=n;){const l=n+i>>1,u=e-t[l].tileId;if(u>0)i=l+1;else if(u<0)n=l-1;else return t[l]}return n>=0&&(t[n].runLength===0||e-t[n].tileId<t[n].runLength)?t[n]:null}var Y3=class{constructor(t){this.url=t}getKey(){return this.url}getBytes(t,e,i){return Vn(this,null,function*(){let n;i||(n=new AbortController,i=n.signal);let l=yield fetch(this.url,{signal:i,headers:{Range:"bytes="+t+"-"+(t+e-1)}});if(l.status===416&&t===0){const a=l.headers.get("Content-Range");if(!a||!a.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const w=+a.substr(8);l=yield fetch(this.url,{signal:i,headers:{Range:"bytes=0-"+(w-1)}})}if(l.status>=300)throw Error("Bad response code: "+l.status);const u=l.headers.get("Content-Length");if(l.status===200&&(!u||+u>e))throw n&&n.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield l.arrayBuffer(),etag:l.headers.get("ETag")||void 0,cacheControl:l.headers.get("Cache-Control")||void 0,expires:l.headers.get("Expires")||void 0}})}};function Xs(t,e){const i=t.getUint32(e+4,!0),n=t.getUint32(e+0,!0);return i*Math.pow(2,32)+n}function $3(t,e){const i=new DataView(t),n=i.getUint8(7);if(n>3)throw Error(`Archive is spec version ${n} but this library supports up to spec version 3`);return{specVersion:n,rootDirectoryOffset:Xs(i,8),rootDirectoryLength:Xs(i,16),jsonMetadataOffset:Xs(i,24),jsonMetadataLength:Xs(i,32),leafDirectoryOffset:Xs(i,40),leafDirectoryLength:Xs(i,48),tileDataOffset:Xs(i,56),tileDataLength:Xs(i,64),numAddressedTiles:Xs(i,72),numTileEntries:Xs(i,80),numTileContents:Xs(i,88),clustered:i.getUint8(96)===1,internalCompression:i.getUint8(97),tileCompression:i.getUint8(98),tileType:i.getUint8(99),minZoom:i.getUint8(100),maxZoom:i.getUint8(101),minLon:i.getInt32(102,!0)/1e7,minLat:i.getInt32(106,!0)/1e7,maxLon:i.getInt32(110,!0)/1e7,maxLat:i.getInt32(114,!0)/1e7,centerZoom:i.getUint8(118),centerLon:i.getInt32(119,!0)/1e7,centerLat:i.getInt32(123,!0)/1e7,etag:e}}function FB(t){const e={buf:new Uint8Array(t),pos:0},i=vc(e),n=[];let l=0;for(let u=0;u<i;u++){const f=vc(e);n.push({tileId:l+f,offset:0,length:0,runLength:1}),l+=f}for(let u=0;u<i;u++)n[u].runLength=vc(e);for(let u=0;u<i;u++)n[u].length=vc(e);for(let u=0;u<i;u++){const f=vc(e);f===0&&u>0?n[u].offset=n[u-1].offset+n[u-1].length:n[u].offset=f-1}return n}function eM(t){const e=new DataView(t);return e.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):e.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var fl=class extends Error{};function tM(t,e,i,n){return Vn(this,null,function*(){const l=yield t.getBytes(0,16384);if(new DataView(l.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(eM(l.data)<3)return[yield CB.getHeader(t)];const f=l.data.slice(0,j3);let a=l.etag;n&&l.etag!=n&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+t.getKey()),a=void 0);const w=$3(f,a);if(i){const C=l.data.slice(w.rootDirectoryOffset,w.rootDirectoryOffset+w.rootDirectoryLength),F=t.getKey()+"|"+(w.etag||"")+"|"+w.rootDirectoryOffset+"|"+w.rootDirectoryLength,E=FB(yield e(C,w.internalCompression));return[w,[F,E.length,E]]}return[w,void 0]})}function rM(t,e,i,n,l){return Vn(this,null,function*(){const u=yield t.getBytes(i,n);if(l.etag&&l.etag!==u.etag)throw new fl(u.etag);const f=yield e(u.data,l.internalCompression),a=FB(f);if(a.length===0)throw new Error("Empty directory is invalid");return a})}var iM=class{constructor(t=100,e=!0,i=EB){this.cache=new Map,this.maxCacheEntries=t,this.counter=1,this.prefetch=e,this.decompress=i}getHeader(t,e){return Vn(this,null,function*(){const i=t.getKey();if(this.cache.has(i))return this.cache.get(i).lastUsed=this.counter++,yield this.cache.get(i).data;const n=new Promise((l,u)=>{tM(t,this.decompress,this.prefetch,e).then(f=>{f[1]&&this.cache.set(f[1][0],{lastUsed:this.counter++,data:Promise.resolve(f[1][2])}),l(f[0]),this.prune()}).catch(f=>{u(f)})});return this.cache.set(i,{lastUsed:this.counter++,data:n}),n})}getDirectory(t,e,i,n){return Vn(this,null,function*(){const l=t.getKey()+"|"+(n.etag||"")+"|"+e+"|"+i;if(this.cache.has(l))return this.cache.get(l).lastUsed=this.counter++,yield this.cache.get(l).data;const u=new Promise((f,a)=>{rM(t,this.decompress,e,i,n).then(w=>{f(w),this.prune()}).catch(w=>{a(w)})});return this.cache.set(l,{lastUsed:this.counter++,data:u}),u})}getArrayBuffer(t,e,i,n){return Vn(this,null,function*(){const l=t.getKey()+"|"+(n.etag||"")+"|"+e+"|"+i;if(this.cache.has(l))return this.cache.get(l).lastUsed=this.counter++,yield this.cache.get(l).data;const u=new Promise((f,a)=>{t.getBytes(e,i).then(w=>{if(n.etag&&n.etag!==w.etag)throw new fl(w.etag);f(w.data),this.cache.has(l),this.prune()}).catch(w=>{a(w)})});return this.cache.set(l,{lastUsed:this.counter++,data:u}),u})}prune(){if(this.cache.size>=this.maxCacheEntries){let t=1/0,e;this.cache.forEach((i,n)=>{i.lastUsed<t&&(t=i.lastUsed,e=n)}),e&&this.cache.delete(e)}}invalidate(t,e){return Vn(this,null,function*(){this.cache.delete(t.getKey()),yield this.getHeader(t,e)})}},iw=class{constructor(t,e,i){typeof t=="string"?this.source=new Y3(t):this.source=t,i?this.decompress=i:this.decompress=EB,e?this.cache=e:this.cache=new iM}getHeader(){return Vn(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(t,e,i,n){return Vn(this,null,function*(){const l=q3(t,e,i),u=yield this.cache.getHeader(this.source);if(u.specVersion<3)return CB.getZxy(u,this.source,this.cache,t,e,i,n);if(t<u.minZoom||t>u.maxZoom)return;let f=u.rootDirectoryOffset,a=u.rootDirectoryLength;for(let w=0;w<=3;w++){const C=yield this.cache.getDirectory(this.source,f,a,u),F=J3(C,l);if(F)if(F.runLength>0){const E=yield this.source.getBytes(u.tileDataOffset+F.offset,F.length,n);if(u.etag&&u.etag!==E.etag)throw new fl(E.etag);return{data:yield this.decompress(E.data,u.tileCompression),cacheControl:E.cacheControl,expires:E.expires}}else f=u.leafDirectoryOffset+F.offset,a=F.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(t,e,i,n){return Vn(this,null,function*(){try{return yield this.getZxyAttempt(t,e,i,n)}catch(l){if(l instanceof fl)return this.cache.invalidate(this.source,l.message),yield this.getZxyAttempt(t,e,i,n);throw l}})}getMetadataAttempt(){return Vn(this,null,function*(){const t=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(t.jsonMetadataOffset,t.jsonMetadataLength);if(t.etag&&t.etag!==e.etag)throw new fl(e.etag);const i=yield this.decompress(e.data,t.internalCompression),n=new TextDecoder("utf-8");return JSON.parse(n.decode(i))})}getMetadata(){return Vn(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(t){if(t instanceof fl)return this.cache.invalidate(this.source,t.message),yield this.getMetadataAttempt();throw t}})}};const{document:nM}=Mw;function nw(t){let e;const i=t[20].default,n=qr(i,t,t[19],null);return{c(){n&&n.c()},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u&524288)&&Jr(n,i,l,l[19],e?jr(i,l[19],u,null):Yr(l[19]),null)},i(l){e||(Ce(n,l),e=!0)},o(l){De(n,l),e=!1},d(l){n&&n.d(l)}}}function sM(t){let e,i,n,l,u,f=t[3]&&nw(t);return{c(){e=it("link"),n=dt(),l=it("div"),f&&f.c(),ue(e,"rel","stylesheet"),ue(e,"href",i=t[1]?t[1]:"https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css"),ue(l,"id",t[0]),ue(l,"class","map svelte-1tna482")},m(a,w){$e(nM.head,e),Fe(a,n,w),Fe(a,l,w),f&&f.m(l,null),t[21](l),u=!0},p(a,[w]){(!u||w&2&&i!==(i=a[1]?a[1]:"https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css"))&&ue(e,"href",i),a[3]?f?(f.p(a,w),w&8&&Ce(f,1)):(f=nw(a),f.c(),Ce(f,1),f.m(l,null)):f&&(Rr(),De(f,1,1,()=>{f=null}),Or()),(!u||w&1)&&ue(l,"id",a[0])},i(a){u||(Ce(f),u=!0)},o(a){De(f),u=!1},d(a){Ee(e),a&&Ee(n),a&&Ee(l),f&&f.d(),t[21](null)}}}function AM(t=1e3){return new Promise(e=>setTimeout(e,t))}function oM(t,e,i){let{$$slots:n={},$$scope:l}=e;const u=Zc();let{map:f}=e,{id:a="map"}=e,{location:w={lng:15,lat:45,zoom:1}}=e,{style:C={version:8,sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"lightgrey"}}]}}=e,{css:F=null}=e,{pmtiles:E=!1}=e,{options:U={}}=e,{minzoom:H=0}=e,{maxzoom:P=14}=e,{controls:V=!1}=e,{tabbable:j=!1}=e,{zoom:Y=null}=e,{center:ee=null}=e,{pitch:ce=null}=e,{bearing:Qe=null}=e,{interactive:le=!0}=e,{attribution:re=!0}=e,we,Ae={},R=!1;_l("map",{getMap:()=>f}),w.bounds?Ae.bounds=w.bounds:w.lng&&w.lat&&(Ae.center=[+w.lng,+w.lat],w.zoom&&(Ae.zoom=+w.zoom),w.pitch&&(Ae.pitch=+w.pitch),w.bearing&&(Ae.bearing=+w.bearing)),re||(Ae.attributionControl=!1),Ae={...Ae,...U},_a(()=>{if(E){let Be=new G3;ll.addProtocol("pmtiles",Be.tile)}i(4,f=new ll.Map({container:we,style:C,minZoom:H,maxZoom:P,interactive:le,...Ae})),V&&!Array.isArray(V)?f.addControl(new ll.NavigationControl({showCompass:!1})):Array.isArray(V)&&V!=["locate"]&&f.addControl(new ll.NavigationControl({showCompass:V.includes("compass"),visualizePitch:V.includes("pitch")})),Array.isArray(V)&&V.includes("locate")&&f.addControl(new ll.GeolocateControl),f.on("load",Be=>{i(5,Y=f.getZoom()),i(6,ee=f.getCenter()),i(7,ce=f.getPitch()),i(8,Qe=f.getBearing()),i(3,R=!0),!j&&document.querySelector(`#${a} canvas`)&&(document.querySelector(`#${a} canvas`).tabIndex="-1"),u("load",{event:Be})}),f.on("moveend",()=>{i(5,Y=f.getZoom()),i(6,ee=f.getCenter()),i(7,ce=f.getPitch()),i(8,Qe=f.getBearing())})}),wf(async()=>{await AM(250),f&&f.remove(),i(4,f=null)});function ie(Be){f&&f.setStyle(Be),u("style",{style:Be})}function se(Be){zi[Be?"unshift":"push"](()=>{we=Be,i(2,we)})}return t.$$set=Be=>{"map"in Be&&i(4,f=Be.map),"id"in Be&&i(0,a=Be.id),"location"in Be&&i(9,w=Be.location),"style"in Be&&i(10,C=Be.style),"css"in Be&&i(1,F=Be.css),"pmtiles"in Be&&i(11,E=Be.pmtiles),"options"in Be&&i(12,U=Be.options),"minzoom"in Be&&i(13,H=Be.minzoom),"maxzoom"in Be&&i(14,P=Be.maxzoom),"controls"in Be&&i(15,V=Be.controls),"tabbable"in Be&&i(16,j=Be.tabbable),"zoom"in Be&&i(5,Y=Be.zoom),"center"in Be&&i(6,ee=Be.center),"pitch"in Be&&i(7,ce=Be.pitch),"bearing"in Be&&i(8,Qe=Be.bearing),"interactive"in Be&&i(17,le=Be.interactive),"attribution"in Be&&i(18,re=Be.attribution),"$$scope"in Be&&i(19,l=Be.$$scope)},t.$$.update=()=>{t.$$.dirty&1024&&ie(C)},[a,F,we,R,f,Y,ee,ce,Qe,w,C,E,U,H,P,V,j,le,re,l,n,se]}let aM=class extends Nr{constructor(e){super(),Kr(this,e,oM,sM,Lr,{map:4,id:0,location:9,style:10,css:1,pmtiles:11,options:12,minzoom:13,maxzoom:14,controls:15,tabbable:16,zoom:5,center:6,pitch:7,bearing:8,interactive:17,attribution:18})}};function sw(t){let e;const i=t[12].default,n=qr(i,t,t[11],null);return{c(){n&&n.c()},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u&2048)&&Jr(n,i,l,l[11],e?jr(i,l[11],u,null):Yr(l[11]),null)},i(l){e||(Ce(n,l),e=!0)},o(l){De(n,l),e=!1},d(l){n&&n.d(l)}}}function lM(t){let e,i,n=t[0]&&sw(t);return{c(){n&&n.c(),e=hi()},m(l,u){n&&n.m(l,u),Fe(l,e,u),i=!0},p(l,[u]){l[0]?n?(n.p(l,u),u&1&&Ce(n,1)):(n=sw(l),n.c(),Ce(n,1),n.m(e.parentNode,e)):n&&(Rr(),De(n,1,1,()=>{n=null}),Or())},i(l){i||(Ce(n),i=!0)},o(l){De(n),i=!1},d(l){n&&n.d(l),l&&Ee(e)}}}function cM(t=1e3){return new Promise(e=>setTimeout(e,t))}function uM(t,e,i){let{$$slots:n={},$$scope:l}=e,{id:u}=e,{type:f}=e,{url:a=null}=e,{props:w={}}=e,{data:C=null}=e,{layer:F=null}=e,{promoteId:E=null}=e,{minzoom:U=null}=e,{maxzoom:H=null}=e,{tilesize:P=256}=e,V=!1,j=a;const{getMap:Y}=Gi("map"),ee=Y();_l("source",{source:u,layer:F,promoteId:E}),ee.getSource(u)&&ee.removeSource(u);async function ce(){await cM(100),ee.isSourceLoaded(u)?(i(0,V=!0),console.log(u+" map source loaded!")):(console.log("..."),ce())}U&&(w.minzoom=U),H&&(w.maxzoom=H),F&&E?(w.promoteId={},w.promoteId[F]=E):E&&(w.promoteId=E);function Qe(){console.log(u+" map source loading...");let Ae;f=="geojson"?C?Ae={type:f,data:C,...w}:a&&(Ae={type:f,data:a,...w}):f=="vector"?(Ae={type:f,...w},a.slice(0,7)==="pmtiles"?Ae.url=a:Ae.tiles=[a]):f=="raster"?Ae={type:f,tiles:[a],tileSize:P,...w}:f=="raster-dem"&&(Ae={type:f,tiles:[a],tileSize:P,...w}),Ae&&(console.log(Ae),ee.addSource(u,Ae),ce())}function le(Ae){let R=ee.getSource(u);R&&R.setData(Ae)}function re(Ae){if(Ae!==j){let R=ee.getSource(u);R&&(Ae.slice(0,7)==="pmtiles"?R.setUrl(Ae):R.setTiles([Ae])),j=Ae}}function we(Ae){Ae!==j&&(ee.getSource(u).tiles=[Ae],ee.style.sourceCaches[u].clearTiles(),ee.style.sourceCaches[u].update(ee.transform),ee.triggerRepaint(),j=Ae)}return _a(Qe),wf(async()=>{ee&&ee.getSource(u)&&(ee.getStyle().layers.filter(R=>R.source==u).forEach(R=>{ee.removeLayer(R.id)}),ee.removeSource(u))}),t.$$set=Ae=>{"id"in Ae&&i(2,u=Ae.id),"type"in Ae&&i(3,f=Ae.type),"url"in Ae&&i(4,a=Ae.url),"props"in Ae&&i(1,w=Ae.props),"data"in Ae&&i(5,C=Ae.data),"layer"in Ae&&i(6,F=Ae.layer),"promoteId"in Ae&&i(7,E=Ae.promoteId),"minzoom"in Ae&&i(8,U=Ae.minzoom),"maxzoom"in Ae&&i(9,H=Ae.maxzoom),"tilesize"in Ae&&i(10,P=Ae.tilesize),"$$scope"in Ae&&i(11,l=Ae.$$scope)},t.$$.update=()=>{t.$$.dirty&41&&f=="geojson"&&V&&le(C),t.$$.dirty&25&&f=="vector"&&V&&re(a),t.$$.dirty&25&&f=="raster"&&V&&we(a)},[V,w,u,f,a,C,F,E,U,H,P,l,n]}class hM extends Nr{constructor(e){super(),Kr(this,e,uM,lM,Lr,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9,tilesize:10})}}const fM=t=>({hovered:t[0]&1}),Aw=t=>({hovered:t[0]});function dM(t){let e;const i=t[30].default,n=qr(i,t,t[29],Aw);return{c(){n&&n.c()},m(l,u){n&&n.m(l,u),e=!0},p(l,u){n&&n.p&&(!e||u[0]&536870913)&&Jr(n,i,l,l[29],e?jr(i,l[29],u,fM):Yr(l[29]),Aw)},i(l){e||(Ce(n,l),e=!0)},o(l){De(n,l),e=!1},d(l){n&&n.d(l)}}}function pM(t,e,i){let n,{$$slots:l={},$$scope:u}=e;const f=Zc();let{id:a}=e,{type:w}=e,{filter:C=null}=e,{layout:F={}}=e,{paint:E={}}=e,{data:U=null}=e,{colorKey:H="color"}=e,{nameKey:P=null}=e,{valueKey:V=null}=e,{idKey:j=null}=e,{select:Y=!1}=e,{clickIgnore:ee=!1}=e,{clickCenter:ce=!1}=e,{selected:Qe=null}=e,{hover:le=!1}=e,{hovered:re=null}=e,{highlight:we=!1}=e,{highlightKey:Ae="highlighted"}=e,{highlighted:R=[]}=e,{order:ie=null}=e,{maxzoom:se=null}=e,{minzoom:Be=null}=e,{sourceLayer:Re=null}=e,{visible:ht=!0}=e;const{source:_t,layer:Me,promoteId:at}=Gi("source"),{getMap:wt}=Gi("map"),nt=wt();_l("layer",{layer:a});const He=_r({id:null,feature:null,event:null});ct(t,He,ve=>i(32,n=ve)),_l("hover",He),j=j||at,Re=Re||Me;let tt=null,Je=null,ut=[];F.visibility=ht?"visible":"none";let At={id:a,type:w,source:_t,paint:E,layout:F};C&&(At.filter=C),Re&&(At["source-layer"]=Re),se&&(At.maxzoom=se),Be&&(At.minzoom=Be),_a(()=>{nt.getLayer(a)&&nt.removeLayer(a),nt.addLayer(At,ie)});function Et(ve,ft=H){if(console.log("updating colors..."),P||V)for(const Ft of ve)nt.setFeatureState({source:_t,sourceLayer:Re,id:Ft[j]},{color:ft?Ft[ft]:null,name:P?Ft[P]:null,value:V?Ft[V]:null});else for(const Ft of ve)nt.setFeatureState({source:_t,sourceLayer:Re,id:Ft[j]},{color:Ft[ft]})}function qt(ve){nt.getLayer(a)&&nt.setFilter(a,ve)}function Tt(ve){if(nt.getLayer(a))for(const ft in ve)nt.setPaintProperty(a,ft,ve[ft])}function tr(ve){nt.getLayer(a)&&nt.setLayoutProperty(a,"visibility",ve?"visible":"none")}return Y&&nt.on("click",a,ve=>{if(ve.features.length>0&&!ee){let ft=ve.features[0];if(i(2,Qe=ft.id),f("select",{id:Qe,feature:ft,event:ve}),tt&&nt.setFeatureState({source:_t,sourceLayer:Re,id:tt},{selected:!1}),nt.setFeatureState({source:_t,sourceLayer:Re,id:Qe},{selected:!0}),ce){let Ft=centroid(ve.features[0].toJSON().geometry);nt.flyTo({center:Ft.geometry.coordinates})}i(26,tt=Qe)}}),le&&(nt.on("mousemove",a,ve=>{if(ve.features.length>0){re&&nt.setFeatureState({source:_t,sourceLayer:Re,id:re},{hovered:!1});let ft=ve.features[0];i(0,re=i(27,Je=ft.id)),He.set({id:re,feature:ft,event:ve}),f("hover",n),nt.setFeatureState({source:_t,sourceLayer:Re,id:re},{hovered:!0}),nt.getCanvas().style.cursor="pointer"}}),nt.on("mouseleave",a,ve=>{re&&nt.setFeatureState({source:_t,sourceLayer:Re,id:re},{hovered:!1}),i(0,re=i(27,Je=null)),He.set({id:null,feature:null,event:ve}),f("hover",n),nt.getCanvas().style.cursor=""})),wf(async()=>{nt&&nt.getLayer(a)&&nt.removeLayer(a)}),t.$$set=ve=>{"id"in ve&&i(6,a=ve.id),"type"in ve&&i(7,w=ve.type),"filter"in ve&&i(8,C=ve.filter),"layout"in ve&&i(4,F=ve.layout),"paint"in ve&&i(9,E=ve.paint),"data"in ve&&i(10,U=ve.data),"colorKey"in ve&&i(11,H=ve.colorKey),"nameKey"in ve&&i(12,P=ve.nameKey),"valueKey"in ve&&i(13,V=ve.valueKey),"idKey"in ve&&i(5,j=ve.idKey),"select"in ve&&i(14,Y=ve.select),"clickIgnore"in ve&&i(15,ee=ve.clickIgnore),"clickCenter"in ve&&i(16,ce=ve.clickCenter),"selected"in ve&&i(2,Qe=ve.selected),"hover"in ve&&i(17,le=ve.hover),"hovered"in ve&&i(0,re=ve.hovered),"highlight"in ve&&i(18,we=ve.highlight),"highlightKey"in ve&&i(19,Ae=ve.highlightKey),"highlighted"in ve&&i(20,R=ve.highlighted),"order"in ve&&i(21,ie=ve.order),"maxzoom"in ve&&i(22,se=ve.maxzoom),"minzoom"in ve&&i(23,Be=ve.minzoom),"sourceLayer"in ve&&i(3,Re=ve.sourceLayer),"visible"in ve&&i(24,ht=ve.visible),"$$scope"in ve&&i(29,u=ve.$$scope)},t.$$.update=()=>{if(t.$$.dirty[0]&3072&&U&&Et(U,H),t.$$.dirty[0]&256&&qt(C),t.$$.dirty[0]&512&&Tt(E),t.$$.dirty[0]&16777216&&tr(ht),t.$$.dirty[0]&270270472&&we&&R!=ut){if(ut[0])for(const ve of ut){let ft={};ft[Ae]=!1,nt.setFeatureState({source:_t,sourceLayer:Re,id:ve},ft)}if(i(28,ut=R),R[0])for(const ve of R){let ft={};ft[Ae]=!0,nt.setFeatureState({source:_t,sourceLayer:Re,id:ve},ft)}}t.$$.dirty[0]&67125260&&Y&&Qe!=tt&&(tt&&nt.setFeatureState({source:_t,sourceLayer:Re,id:tt},{selected:!1}),Qe&&nt.setFeatureState({source:_t,sourceLayer:Re,id:Qe},{selected:!0}),i(26,tt=Qe)),t.$$.dirty[0]&134348809&&le&&re!=Je&&(Je&&nt.setFeatureState({source:_t,sourceLayer:Re,id:Je},{hovered:!1}),re&&nt.setFeatureState({source:_t,sourceLayer:Re,id:re},{hovered:!0}),i(27,Je=re))},[re,He,Qe,Re,F,j,a,w,C,E,U,H,P,V,Y,ee,ce,le,we,Ae,R,ie,se,Be,ht,Et,tt,Je,ut,u,l]}class ow extends Nr{constructor(e){super(),Kr(this,e,pM,dM,Lr,{id:6,type:7,filter:8,layout:4,paint:9,data:10,colorKey:11,nameKey:12,valueKey:13,idKey:5,select:14,clickIgnore:15,clickCenter:16,selected:2,hover:17,hovered:0,highlight:18,highlightKey:19,highlighted:20,order:21,maxzoom:22,minzoom:23,sourceLayer:3,visible:24,updateColors:25},null,[-1,-1])}get updateColors(){return this.$$.ctx[25]}}function gM(t,e,i){let n,{content:l}=e;const u=new ll.Popup({closeButton:!1,closeOnClick:!1}),{getMap:f}=Gi("map"),a=f(),w=Gi("hover");ct(t,w,F=>i(2,n=F));function C(F,E){F.id?u.setLngLat(F.event.lngLat).setHTML(E||F.code).addTo(a):u.remove()}return wf(()=>u.remove()),t.$$set=F=>{"content"in F&&i(1,l=F.content)},t.$$.update=()=>{t.$$.dirty&6&&C(n,l)},[w,l,n]}class mM extends Nr{constructor(e){super(),Kr(this,e,gM,null,Lr,{content:1})}}function aw(t,e,i){const n=t.slice();return n[35]=e[i],n}function lw(t,e,i){const n=t.slice();return n[38]=e[i],n}function cw(t,e,i){const n=t.slice();return n[35]=e[i],n}function uw(t,e,i){const n=t.slice();return n[3]=e[i],n}function _M(t){let e;return{c(){e=yr("Scroll to begin")},m(i,n){Fe(i,e,n)},d(i){i&&Ee(e)}}}function yM(t){let e,i,n,l,u,f,a,w,C,F,E,U,H;function P(j){t[21](j)}let V={label:"Animation "+(t[4]?"on":"off"),mono:!0};return t[4]!==void 0&&(V.checked=t[4]),w=new v2({props:V}),zi.push(()=>Fo(w,"checked",P)),U=new E2({props:{color:"white",animation:t[4],$$slots:{default:[_M]},$$scope:{ctx:t}}}),{c(){e=it("h1"),e.textContent="Modern web standards with data visualizations",i=dt(),n=it("p"),n.textContent="Using UK population statistics we will see how visualizations can be made interactive and responsive to all screen sizes",l=dt(),u=it("p"),u.textContent="The following uses transition animations, if this upsets you toggle them off",f=dt(),a=it("p"),Rt(w.$$.fragment),F=dt(),E=it("div"),Rt(U.$$.fragment),ue(n,"class","text-big"),bt(n,"margin-top","5px"),bt(u,"margin-top","20px"),bt(E,"margin-top","90px")},m(j,Y){Fe(j,e,Y),Fe(j,i,Y),Fe(j,n,Y),Fe(j,l,Y),Fe(j,u,Y),Fe(j,f,Y),Fe(j,a,Y),Ht(w,a,null),Fe(j,F,Y),Fe(j,E,Y),Ht(U,E,null),H=!0},p(j,Y){const ee={};Y[0]&16&&(ee.label="Animation "+(j[4]?"on":"off")),!C&&Y[0]&16&&(C=!0,ee.checked=j[4],Eo(()=>C=!1)),w.$set(ee);const ce={};Y[0]&16&&(ce.animation=j[4]),Y[1]&16384&&(ce.$$scope={dirty:Y,ctx:j}),U.$set(ce)},i(j){H||(Ce(w.$$.fragment,j),Ce(U.$$.fragment,j),H=!0)},o(j){De(w.$$.fragment,j),De(U.$$.fragment,j),H=!1},d(j){j&&Ee(e),j&&Ee(i),j&&Ee(n),j&&Ee(l),j&&Ee(u),j&&Ee(f),j&&Ee(a),Pt(w),j&&Ee(F),j&&Ee(E),Pt(U)}}}function wM(t){let e;return{c(){e=it("p"),e.textContent="This is a demonstration of how we can utilise the power of modern web standards to enhance data storytelling",ue(e,"class","text-big")},m(i,n){Fe(i,e,n)},p:ar,d(i){i&&Ee(e)}}}function vM(t){let e,i,n,l,u,f,a;return{c(){e=it("h2"),e.textContent="Static visualizations",i=dt(),n=it("p"),n.textContent="Often graphs are static with no interactions. These types of visualizations are best suited for print as it doesn't utilise the power of presenting them in modern web browsers.",l=dt(),u=it("p"),u.textContent="Including these types of visualizations on a website or in a presentation would be to maintain consistency with graphics used in a static report such as a pdf.",f=dt(),a=it("blockquote"),a.textContent='"The greatest value of a picture is when it forces us to notice what we never expected to see."John Tukey',ue(a,"class","text-indent")},m(w,C){Fe(w,e,C),Fe(w,i,C),Fe(w,n,C),Fe(w,l,C),Fe(w,u,C),Fe(w,f,C),Fe(w,a,C)},p:ar,d(w){w&&Ee(e),w&&Ee(i),w&&Ee(n),w&&Ee(l),w&&Ee(u),w&&Ee(f),w&&Ee(a)}}}function BM(t){let e,i,n;return{c(){e=it("h2"),e.textContent="Embedded charts or media",i=dt(),n=it("p"),n.textContent="We use a bar chart to quickly rank the regions of the United Kingdom according to population. This gives us a snapshot of the population distribution for mid-2020."},m(l,u){Fe(l,e,u),Fe(l,i,u),Fe(l,n,u)},p:ar,d(l){l&&Ee(e),l&&Ee(i),l&&Ee(n)}}}function hw(t){let e,i;return e=new og({props:{col:"medium",caption:"Source: ONS mid-year population estimates.",$$slots:{default:[xM]},$$scope:{ctx:t}}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&32|l[1]&16384&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function xM(t){let e,i,n;return i=new Mk({props:{data:[...t[5].region.indicators].sort(bw),xKey:"pop",yKey:"name",snapTicks:!1,xFormatTick:WM,xSuffix:"m",S:!0,height:350,padding:{top:0,bottom:15,left:140,right:0},area:!1,title:"Population by region/nation, 2020"}}),{c(){e=it("div"),Rt(i.$$.fragment),ue(e,"class","chart-sml svelte-14mw5fs")},m(l,u){Fe(l,e,u),Ht(i,e,null),n=!0},p(l,u){const f={};u[0]&32&&(f.data=[...l[5].region.indicators].sort(bw)),i.$set(f)},i(l){n||(Ce(i.$$.fragment,l),n=!0)},o(l){De(i.$$.fragment,l),n=!1},d(l){l&&Ee(e),Pt(i)}}}function bM(t){let e;return{c(){e=it("p"),e.textContent='The chart above is embedded. That is set to the same width as the column, "medium" (680px), but could also be "narrow" (540px), "wide" (980px) or "full" width. All options are responsive to fit the width of narrow screens.'},m(i,n){Fe(i,e,n)},p:ar,d(i){i&&Ee(e)}}}function CM(t){let e,i,n,l,u;return{c(){e=it("h2"),e.textContent="Gridded charts or media",i=dt(),n=it("p"),n.textContent="Below is a grid that contain charts or any other kind of visual media. The grid can fit in a medium, wide or full-width column, and the media width itself can be narrow (min 200px), medium (min 300px), wide (min 500px) or full-width. The grid is responsive, and will re-flow on smaller screens.",l=dt(),u=it("p"),u.textContent="The above information is expanded to show the popluation trend for the last 20 years. These charts are identical except that each one has a different region highlighted. This allows for an easy comparison of population trends across regions"},m(f,a){Fe(f,e,a),Fe(f,i,a),Fe(f,n,a),Fe(f,l,a),Fe(f,u,a)},p:ar,d(f){f&&Ee(e),f&&Ee(i),f&&Ee(n),f&&Ee(l),f&&Ee(u)}}}function fw(t){let e,i;return e=new og({props:{col:"wide",grid:"narrow",gap:20,caption:"Source: ONS mid-year population estimates.",$$slots:{default:[EM]},$$scope:{ctx:t}}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&32|l[1]&16384&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function dw(t){let e,i,n,l;return i=new hB({props:{data:t[5].region.timeseries,xKey:"year",yKey:"value",zKey:"code",color:"lightgrey",lineWidth:1,xTicks:2,snapTicks:!1,yFormatTick:qM,ySuffix:"m",height:200,padding:{top:0,bottom:20,left:30,right:15},selected:t[3].code,area:!1,title:t[3].name}}),{c(){e=it("div"),Rt(i.$$.fragment),n=dt(),ue(e,"class","chart-sml svelte-14mw5fs")},m(u,f){Fe(u,e,f),Ht(i,e,null),$e(e,n),l=!0},p(u,f){const a={};f[0]&32&&(a.data=u[5].region.timeseries),f[0]&32&&(a.selected=u[3].code),f[0]&32&&(a.title=u[3].name),i.$set(a)},i(u){l||(Ce(i.$$.fragment,u),l=!0)},o(u){De(i.$$.fragment,u),l=!1},d(u){u&&Ee(e),Pt(i)}}}function EM(t){let e,i,n=[...t[5].region.indicators].sort(Cw),l=[];for(let f=0;f<n.length;f+=1)l[f]=dw(uw(t,n,f));const u=f=>De(l[f],1,1,()=>{l[f]=null});return{c(){for(let f=0;f<l.length;f+=1)l[f].c();e=hi()},m(f,a){for(let w=0;w<l.length;w+=1)l[w]&&l[w].m(f,a);Fe(f,e,a),i=!0},p(f,a){if(a[0]&32){n=[...f[5].region.indicators].sort(Cw);let w;for(w=0;w<n.length;w+=1){const C=uw(f,n,w);l[w]?(l[w].p(C,a),Ce(l[w],1)):(l[w]=dw(C),l[w].c(),Ce(l[w],1),l[w].m(e.parentNode,e))}for(Rr(),w=n.length;w<l.length;w+=1)u(w);Or()}},i(f){if(!i){for(let a=0;a<n.length;a+=1)Ce(l[a]);i=!0}},o(f){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)De(l[a]);i=!1},d(f){$i(l,f),f&&Ee(e)}}}function FM(t){let e,i,n,l,u,f,a;return{c(){e=it("h2"),e.textContent="This is a full-width chart demo",i=dt(),n=it("p"),n.textContent='Below is an example of a media grid where the column with is set to "full". This allows for full width images and charts.',l=dt(),u=it("p"),u.textContent="We will repeat the above graphs but do it at a district level. The problem with this idea is that there are too many districts to repeat the graph for each in order to highlight the specific district.",f=dt(),a=it("p"),a.textContent="To overcome this obstacle we will use our first form of interaction, hovering. We plot all the districts on one graph and when hovering over a particular district it gets highlighted and the district's name is shown."},m(w,C){Fe(w,e,C),Fe(w,i,C),Fe(w,n,C),Fe(w,l,C),Fe(w,u,C),Fe(w,f,C),Fe(w,a,C)},p:ar,d(w){w&&Ee(e),w&&Ee(i),w&&Ee(n),w&&Ee(l),w&&Ee(u),w&&Ee(f),w&&Ee(a)}}}function pw(t){let e,i;return e=new hB({props:{data:t[5].district.timeseries,padding:{left:50,right:150,top:0,bottom:0},height:"500px",xKey:"year",yKey:"value",zKey:"code",color:"lightgrey",lineWidth:1,yFormatTick:jM,ySuffix:"m",select:!0,selected:t[2],hover:!0,hovered:t[8],highlighted:t[16],colorSelect:"#206095",colorHighlight:"#999",area:!1,title:"Mid-year population by district, 2001 to 2020",labels:!0,labelKey:"name"}}),e.$on("select",t[18]),e.$on("hover",t[19]),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&32&&(u.data=n[5].district.timeseries),l[0]&4&&(u.selected=n[2]),l[0]&256&&(u.hovered=n[8]),l[0]&65536&&(u.highlighted=n[16]),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function UM(t){let e,i,n=t[5].district.timeseries&&pw(t);return{c(){e=it("div"),n&&n.c(),ue(e,"class","chart-full svelte-14mw5fs")},m(l,u){Fe(l,e,u),n&&n.m(e,null),i=!0},p(l,u){l[5].district.timeseries?n?(n.p(l,u),u[0]&32&&Ce(n,1)):(n=pw(l),n.c(),Ce(n,1),n.m(e,null)):n&&(Rr(),De(n,1,1,()=>{n=null}),Or())},i(l){i||(Ce(n),i=!0)},o(l){De(n),i=!1},d(l){l&&Ee(e),n&&n.d()}}}function QM(t){let e;return{c(){e=it("p"),e.textContent="The visualizations above are static in what they're presenting, with only the last plot adding basic hovering interactions. They are however responsive and will resize depending on the screen size viewed on. In the case of the gridded plots, the layout will change  to adapt to the screen size."},m(i,n){Fe(i,e,n)},p:ar,d(i){i&&Ee(e)}}}function IM(t){let e,i,n,l,u;return{c(){e=it("h2"),e.textContent="This is a dynamic chart section",i=dt(),n=it("p"),n.textContent=`The chart below will respond to the captions as you scroll down. The "Scroller" component is
		set to "splitscreen" mode, which means the captions will be on the left side on larger screens. On smaller screen the visualizaions will become the background with the text components scrolling on top.`,l=dt(),u=it("p"),u.textContent="The chart is hoverable as well with a tooltip indicating the district's name."},m(f,a){Fe(f,e,a),Fe(f,i,a),Fe(f,n,a),Fe(f,l,a),Fe(f,u,a)},p:ar,d(f){f&&Ee(e),f&&Ee(i),f&&Ee(n),f&&Ee(l),f&&Ee(u)}}}function gw(t){let e,i,n;return i=new _3({props:{height:"calc(100vh - 150px)",data:t[5].district.indicators.map(t[23]),colors:t[15]?["lightgrey"]:aa.cat,xKey:t[10],yKey:t[11],zKey:t[12],rKey:t[13],idKey:"code",labelKey:"name",r:[3,10],xScale:"log",xTicks:[10,100,1e3,1e4],xFormatTick:JM,xSuffix:" sq.km",yFormatTick:YM,legend:t[12]!=null,labels:!0,select:t[15],selected:t[15]?t[2]:null,hover:!0,hovered:t[8],highlighted:t[15]?t[16]:[],colorSelect:"#206095",colorHighlight:"#999",overlayFill:!0,animation:t[4]}}),i.$on("select",t[18]),i.$on("hover",t[19]),{c(){e=it("div"),Rt(i.$$.fragment),ue(e,"class","chart svelte-14mw5fs")},m(l,u){Fe(l,e,u),Ht(i,e,null),n=!0},p(l,u){const f={};u[0]&34&&(f.data=l[5].district.indicators.map(l[23])),u[0]&32768&&(f.colors=l[15]?["lightgrey"]:aa.cat),u[0]&1024&&(f.xKey=l[10]),u[0]&2048&&(f.yKey=l[11]),u[0]&4096&&(f.zKey=l[12]),u[0]&8192&&(f.rKey=l[13]),u[0]&4096&&(f.legend=l[12]!=null),u[0]&32768&&(f.select=l[15]),u[0]&32772&&(f.selected=l[15]?l[2]:null),u[0]&256&&(f.hovered=l[8]),u[0]&98304&&(f.highlighted=l[15]?l[16]:[]),u[0]&16&&(f.animation=l[4]),i.$set(f)},i(l){n||(Ce(i.$$.fragment,l),n=!0)},o(l){De(i.$$.fragment,l),n=!1},d(l){l&&Ee(e),Pt(i)}}}function TM(t){let e,i,n,l,u=t[5].district.indicators&&t[1].region.lookup&&gw(t);return{c(){e=it("div"),i=it("figure"),n=it("div"),u&&u.c(),ue(n,"class","col-wide height-full"),ue(e,"slot","background")},m(f,a){Fe(f,e,a),$e(e,i),$e(i,n),u&&u.m(n,null),l=!0},p(f,a){f[5].district.indicators&&f[1].region.lookup?u?(u.p(f,a),a[0]&34&&Ce(u,1)):(u=gw(f),u.c(),Ce(u,1),u.m(n,null)):u&&(Rr(),De(u,1,1,()=>{u=null}),Or())},i(f){l||(Ce(u),l=!0)},o(f){De(u),l=!1},d(f){f&&Ee(e),u&&u.d()}}}function mw(t){let e,i,n,l,u,f=t[6].features,a=[];for(let w=0;w<f.length;w+=1)a[w]=_w(cw(t,f,w));return{c(){e=it("p"),i=it("select"),n=it("option"),n.textContent="Select one";for(let w=0;w<a.length;w+=1)a[w].c();n.__value=null,n.value=n.__value,ue(i,"class","svelte-14mw5fs"),t[2]===void 0&&Co(()=>t[22].call(i))},m(w,C){Fe(w,e,C),$e(e,i),$e(i,n);for(let F=0;F<a.length;F+=1)a[F]&&a[F].m(i,null);Zh(i,t[2],!0),l||(u=ki(i,"change",t[22]),l=!0)},p(w,C){if(C[0]&64){f=w[6].features;let F;for(F=0;F<f.length;F+=1){const E=cw(w,f,F);a[F]?a[F].p(E,C):(a[F]=_w(E),a[F].c(),a[F].m(i,null))}for(;F<a.length;F+=1)a[F].d(1);a.length=f.length}C[0]&68&&Zh(i,w[2])},d(w){w&&Ee(e),$i(a,w),l=!1,u()}}}function _w(t){let e,i=t[35].properties.AREANM+"",n,l,u;return{c(){e=it("option"),n=yr(i),l=dt(),e.__value=u=t[35].properties.AREACD,e.value=e.__value},m(f,a){Fe(f,e,a),$e(e,n),$e(e,l)},p(f,a){a[0]&64&&i!==(i=f[35].properties.AREANM+"")&&Xi(n,i),a[0]&64&&u!==(u=f[35].properties.AREACD)&&(e.__value=u,e.value=e.__value)},d(f){f&&Ee(e)}}}function SM(t){let e,i,n,l,u,f,a,w,C,F,E,U,H,P,V,j,Y,ee=t[6]&&mw(t);return{c(){e=it("div"),i=it("section"),i.innerHTML='<div class="col-medium"><p>This chart shows the <strong>area in square kilometres</strong> of each local authority district in the UK. Each circle represents one district. The scale is logarithmic.</p></div>',n=dt(),l=it("section"),l.innerHTML='<div class="col-medium"><p>The radius of each circle shows the <strong>total population</strong> of the district.</p></div>',u=dt(),f=it("section"),f.innerHTML='<div class="col-medium"><p>The vertical axis shows the <strong>density</strong> of the district in people per hectare.</p></div>',a=dt(),w=it("section"),w.innerHTML='<div class="col-medium"><p>The colour of each circle shows the <strong>part of the country</strong> that the district is within.</p></div>',C=dt(),F=it("section"),E=it("div"),U=it("h3"),U.textContent="Select a district",H=dt(),P=it("p"),P.textContent="Use the selection box below or click on the chart to select a district. The chart will also highlight the other districts in the same region.",V=dt(),j=it("p"),j.textContent="The visualization now becomes interactive as which districts get highlighted is chosen by the user.",Y=dt(),ee&&ee.c(),ue(i,"data-id","chart01"),ue(l,"data-id","chart02"),ue(f,"data-id","chart03"),ue(w,"data-id","chart04"),ue(E,"class","col-medium"),ue(F,"data-id","chart05"),ue(e,"slot","foreground")},m(ce,Qe){Fe(ce,e,Qe),$e(e,i),$e(e,n),$e(e,l),$e(e,u),$e(e,f),$e(e,a),$e(e,w),$e(e,C),$e(e,F),$e(F,E),$e(E,U),$e(E,H),$e(E,P),$e(E,V),$e(E,j),$e(E,Y),ee&&ee.m(E,null)},p(ce,Qe){ce[6]?ee?ee.p(ce,Qe):(ee=mw(ce),ee.c(),ee.m(E,null)):ee&&(ee.d(1),ee=null)},d(ce){ce&&Ee(e),ee&&ee.d()}}}function kM(t){let e,i,n,l,u;return{c(){e=it("h2"),e.textContent="This is a dynamic map section",i=dt(),n=it("p"),n.textContent="The map below will respond to the captions as you scroll down. The scroller is not set to splitscreen, so captions are placed over the map on any screen size.",l=dt(),u=it("p"),u.textContent="The map is linked to the scatterplot above. Any district selected in the scatterplot is outlined on the map.",ue(n,"class","mb")},m(f,a){Fe(f,e,a),Fe(f,i,a),Fe(f,n,a),Fe(f,l,a),Fe(f,u,a)},p:ar,d(f){f&&Ee(e),f&&Ee(i),f&&Ee(n),f&&Ee(l),f&&Ee(u)}}}function yw(t){let e,i,n;function l(f){t[29](f)}let u={threshold:UB,$$slots:{foreground:[NM],background:[HM]},$$scope:{ctx:t}};return t[0].map!==void 0&&(u.id=t[0].map),e=new Hw({props:u}),zi.push(()=>Fo(e,"id",l)),{c(){Rt(e.$$.fragment)},m(f,a){Ht(e,f,a),n=!0},p(f,a){const w={};a[0]&50150|a[1]&16384&&(w.$$scope={dirty:a,ctx:f}),!i&&a[0]&1&&(i=!0,w.id=f[0].map,Eo(()=>i=!1)),e.$set(w)},i(f){n||(Ce(e.$$.fragment,f),n=!0)},o(f){De(e.$$.fragment,f),n=!1},d(f){Pt(e,f)}}}function MM(t){let e,i;return e=new mM({props:{content:t[8]?`${t[1].district.lookup[t[8]].name}<br/><strong>${t[5].district.indicators.find(t[27])[t[14]].toLocaleString()} ${_0[t[14]]}</strong>`:""}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&16674&&(u.content=n[8]?`${n[1].district.lookup[n[8]].name}<br/><strong>${n[5].district.indicators.find(n[27])[n[14]].toLocaleString()} ${_0[n[14]]}</strong>`:""),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function DM(t){let e,i,n,l;return e=new ow({props:{id:"lad-fill",idKey:"code",colorKey:t[14]+"_color",data:t[5].district.indicators,type:"fill",select:!0,selected:t[2],clickIgnore:!t[15],hover:!0,hovered:t[8],highlight:!0,highlighted:t[9],paint:{"fill-color":["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"],"fill-opacity":.7},$$slots:{default:[MM]},$$scope:{ctx:t}}}),e.$on("select",t[18]),e.$on("hover",t[19]),n=new ow({props:{id:"lad-line",type:"line",paint:{"line-color":["case",["==",["feature-state","hovered"],!0],"orange",["==",["feature-state","selected"],!0],"black",["==",["feature-state","highlighted"],!0],"black","rgba(255,255,255,0)"],"line-width":2}}}),{c(){Rt(e.$$.fragment),i=dt(),Rt(n.$$.fragment)},m(u,f){Ht(e,u,f),Fe(u,i,f),Ht(n,u,f),l=!0},p(u,f){const a={};f[0]&16384&&(a.colorKey=u[14]+"_color"),f[0]&32&&(a.data=u[5].district.indicators),f[0]&4&&(a.selected=u[2]),f[0]&32768&&(a.clickIgnore=!u[15]),f[0]&256&&(a.hovered=u[8]),f[0]&512&&(a.highlighted=u[9]),f[0]&16674|f[1]&16384&&(a.$$scope={dirty:f,ctx:u}),e.$set(a)},i(u){l||(Ce(e.$$.fragment,u),Ce(n.$$.fragment,u),l=!0)},o(u){De(e.$$.fragment,u),De(n.$$.fragment,u),l=!1},d(u){Pt(e,u),u&&Ee(i),Pt(n,u)}}}function LM(t){let e,i;return e=new hM({props:{id:"lad",type:"geojson",data:t[6],promoteId:"AREACD",maxzoom:13,$$slots:{default:[DM]},$$scope:{ctx:t}}}),{c(){Rt(e.$$.fragment)},m(n,l){Ht(e,n,l),i=!0},p(n,l){const u={};l[0]&64&&(u.data=n[6]),l[0]&49958|l[1]&16384&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){i||(Ce(e.$$.fragment,n),i=!0)},o(n){De(e.$$.fragment,n),i=!1},d(n){Pt(e,n)}}}function HM(t){let e,i,n,l,u,f;function a(C){t[28](C)}let w={style:ZM,interactive:!1,location:{bounds:t[17].uk},$$slots:{default:[LM]},$$scope:{ctx:t}};return t[7]!==void 0&&(w.map=t[7]),l=new aM({props:w}),zi.push(()=>Fo(l,"map",a)),{c(){e=it("div"),i=it("figure"),n=it("div"),Rt(l.$$.fragment),ue(n,"class","col-full height-full"),ue(e,"slot","background")},m(C,F){Fe(C,e,F),$e(e,i),$e(i,n),Ht(l,n,null),f=!0},p(C,F){const E={};F[0]&50022|F[1]&16384&&(E.$$scope={dirty:F,ctx:C}),!u&&F[0]&128&&(u=!0,E.map=C[7],Eo(()=>u=!1)),l.$set(E)},i(C){f||(Ce(l.$$.fragment,C),f=!0)},o(C){De(l.$$.fragment,C),f=!1},d(C){C&&Ee(e),Pt(l)}}}function PM(t){let e;return{c(){e=yr("least dense")},m(i,n){Fe(i,e,n)},d(i){i&&Ee(e)}}}function zM(t){let e;return{c(){e=yr("most dense")},m(i,n){Fe(i,e,n)},d(i){i&&Ee(e)}}}function RM(t){let e;return{c(){e=yr("youngest")},m(i,n){Fe(i,e,n)},d(i){i&&Ee(e)}}}function OM(t){let e;return{c(){e=yr("oldest")},m(i,n){Fe(i,e,n)},d(i){i&&Ee(e)}}}function KM(t){let e=t[38].name+"",i;return{c(){i=yr(e)},m(n,l){Fe(n,i,l)},p(n,l){l[0]&32&&e!==(e=n[38].name+"")&&Xi(i,e)},d(n){n&&Ee(i)}}}function ww(t){let e,i,n,l,u=t[38].age_med+"",f,a,w;return n=new Bc({props:{color:t[38].age_med_color,$$slots:{default:[KM]},$$scope:{ctx:t}}}),{c(){e=it("p"),i=yr("The map is now zoomed on "),Rt(n.$$.fragment),l=yr(", the district with the oldest median age, "),f=yr(u),a=yr(` years.
				`)},m(C,F){Fe(C,e,F),$e(e,i),Ht(n,e,null),$e(e,l),$e(e,f),$e(e,a),w=!0},p(C,F){const E={};F[0]&32&&(E.color=C[38].age_med_color),F[0]&32|F[1]&16384&&(E.$$scope={dirty:F,ctx:C}),n.$set(E),(!w||F[0]&32)&&u!==(u=C[38].age_med+"")&&Xi(f,u)},i(C){w||(Ce(n.$$.fragment,C),w=!0)},o(C){De(n.$$.fragment,C),w=!1},d(C){C&&Ee(e),Pt(n)}}}function vw(t){let e,i,n,l,u,f=t[6].features,a=[];for(let w=0;w<f.length;w+=1)a[w]=Bw(aw(t,f,w));return{c(){e=it("p"),i=it("select"),n=it("option"),n.textContent="Select one";for(let w=0;w<a.length;w+=1)a[w].c();n.__value=null,n.value=n.__value,ue(i,"class","svelte-14mw5fs"),t[2]===void 0&&Co(()=>t[25].call(i))},m(w,C){Fe(w,e,C),$e(e,i),$e(i,n);for(let F=0;F<a.length;F+=1)a[F]&&a[F].m(i,null);Zh(i,t[2],!0),l||(u=[ki(i,"change",t[25]),ki(i,"change",t[26])],l=!0)},p(w,C){if(C[0]&64){f=w[6].features;let F;for(F=0;F<f.length;F+=1){const E=aw(w,f,F);a[F]?a[F].p(E,C):(a[F]=Bw(E),a[F].c(),a[F].m(i,null))}for(;F<a.length;F+=1)a[F].d(1);a.length=f.length}C[0]&68&&Zh(i,w[2])},d(w){w&&Ee(e),$i(a,w),l=!1,yA(u)}}}function Bw(t){let e,i=t[35].properties.AREANM+"",n,l,u;return{c(){e=it("option"),n=yr(i),l=dt(),e.__value=u=t[35].properties.AREACD,e.value=e.__value},m(f,a){Fe(f,e,a),$e(e,n),$e(e,l)},p(f,a){a[0]&64&&i!==(i=f[35].properties.AREANM+"")&&Xi(n,i),a[0]&64&&u!==(u=f[35].properties.AREACD)&&(e.__value=u,e.value=e.__value)},d(f){f&&Ee(e)}}}function NM(t){let e,i,n,l,u,f,a,w,C,F,E,U,H,P,V,j,Y,ee,ce,Qe,le,re,we,Ae,R,ie,se,Be,Re,ht,_t,Me,at;w=new Bc({props:{color:aa.seq[0],$$slots:{default:[PM]},$$scope:{ctx:t}}}),F=new Bc({props:{color:aa.seq[4],$$slots:{default:[zM]},$$scope:{ctx:t}}}),ce=new Bc({props:{color:aa.seq[0],$$slots:{default:[RM]},$$scope:{ctx:t}}}),le=new Bc({props:{color:aa.seq[4],$$slots:{default:[OM]},$$scope:{ctx:t}}});let wt=[[...t[5].district.indicators].sort(Ew)[0]],nt=[];for(let Je=0;Je<1;Je+=1)nt[Je]=ww(lw(t,wt,Je));const He=Je=>De(nt[Je],1,1,()=>{nt[Je]=null});let tt=t[6]&&vw(t);return{c(){e=it("div"),i=it("section"),n=it("div"),l=it("p"),u=yr("This map shows "),f=it("strong"),f.textContent="population density",a=yr(" by district. Districts are coloured from "),Rt(w.$$.fragment),C=yr(" to "),Rt(F.$$.fragment),E=yr(". You can hover to see the district name and density."),U=dt(),H=it("section"),P=it("div"),V=it("p"),j=yr("The map now shows "),Y=it("strong"),Y.textContent="median age",ee=yr(", from "),Rt(ce.$$.fragment),Qe=yr(" to "),Rt(le.$$.fragment),re=yr("."),we=dt(),Ae=it("section"),R=it("div");for(let Je=0;Je<1;Je+=1)nt[Je].c();ie=dt(),se=it("section"),Be=it("div"),Re=it("h3"),Re.textContent="Select a district",ht=dt(),_t=it("p"),_t.textContent="Use the selection box below or click on the map to select and zoom to a district.",Me=dt(),tt&&tt.c(),ue(n,"class","col-medium"),ue(i,"data-id","map01"),ue(P,"class","col-medium"),ue(H,"data-id","map02"),ue(R,"class","col-medium"),ue(Ae,"data-id","map03"),ue(Be,"class","col-medium"),ue(se,"data-id","map04"),ue(e,"slot","foreground")},m(Je,ut){Fe(Je,e,ut),$e(e,i),$e(i,n),$e(n,l),$e(l,u),$e(l,f),$e(l,a),Ht(w,l,null),$e(l,C),Ht(F,l,null),$e(l,E),$e(e,U),$e(e,H),$e(H,P),$e(P,V),$e(V,j),$e(V,Y),$e(V,ee),Ht(ce,V,null),$e(V,Qe),Ht(le,V,null),$e(V,re),$e(e,we),$e(e,Ae),$e(Ae,R);for(let At=0;At<1;At+=1)nt[At]&&nt[At].m(R,null);$e(e,ie),$e(e,se),$e(se,Be),$e(Be,Re),$e(Be,ht),$e(Be,_t),$e(Be,Me),tt&&tt.m(Be,null),at=!0},p(Je,ut){const At={};ut[1]&16384&&(At.$$scope={dirty:ut,ctx:Je}),w.$set(At);const Et={};ut[1]&16384&&(Et.$$scope={dirty:ut,ctx:Je}),F.$set(Et);const qt={};ut[1]&16384&&(qt.$$scope={dirty:ut,ctx:Je}),ce.$set(qt);const Tt={};if(ut[1]&16384&&(Tt.$$scope={dirty:ut,ctx:Je}),le.$set(Tt),ut[0]&32){wt=[[...Je[5].district.indicators].sort(Ew)[0]];let tr;for(tr=0;tr<1;tr+=1){const ve=lw(Je,wt,tr);nt[tr]?(nt[tr].p(ve,ut),Ce(nt[tr],1)):(nt[tr]=ww(ve),nt[tr].c(),Ce(nt[tr],1),nt[tr].m(R,null))}for(Rr(),tr=1;tr<1;tr+=1)He(tr);Or()}Je[6]?tt?tt.p(Je,ut):(tt=vw(Je),tt.c(),tt.m(Be,null)):tt&&(tt.d(1),tt=null)},i(Je){if(!at){Ce(w.$$.fragment,Je),Ce(F.$$.fragment,Je),Ce(ce.$$.fragment,Je),Ce(le.$$.fragment,Je);for(let ut=0;ut<1;ut+=1)Ce(nt[ut]);at=!0}},o(Je){De(w.$$.fragment,Je),De(F.$$.fragment,Je),De(ce.$$.fragment,Je),De(le.$$.fragment,Je),nt=nt.filter(Boolean);for(let ut=0;ut<1;ut+=1)De(nt[ut]);at=!1},d(Je){Je&&Ee(e),Pt(w),Pt(F),Pt(ce),Pt(le),$i(nt,Je),tt&&tt.d()}}}function VM(t){let e;return{c(){e=it("p"),e.textContent="This has been a short example of how we can use modern web protocols to make our data presentations more dynamic"},m(i,n){Fe(i,e,n)},p:ar,d(i){i&&Ee(e)}}}function GM(t){let e,i,n,l,u,f,a,w,C,F,E,U,H,P,V,j,Y,ee,ce,Qe,le,re,we,Ae,R,ie,se,Be,Re,ht,_t,Me,at,wt,nt,He,tt,Je,ut,At,Et,qt,Tt,tr;e=new $b({props:{bgcolor:"#fcaa74",bgfixed:!0,theme:"dark",center:!1,short:!0,$$slots:{default:[yM]},$$scope:{ctx:t}}}),n=new d2({props:{theme:"lightblue",short:!0,wide:!0,center:!1,$$slots:{default:[wM]},$$scope:{ctx:t}}}),u=new PA({props:{$$slots:{default:[vM]},$$scope:{ctx:t}}}),a=new Wa({}),C=new PA({props:{$$slots:{default:[BM]},$$scope:{ctx:t}}});let ve=t[5].region.indicators&&hw(t);U=new PA({props:{$$slots:{default:[bM]},$$scope:{ctx:t}}}),P=new Wa({}),j=new PA({props:{$$slots:{default:[CM]},$$scope:{ctx:t}}});let ft=t[5].region.timeseries&&t[5].region.indicators&&fw(t);ce=new Wa({}),le=new PA({props:{$$slots:{default:[FM]},$$scope:{ctx:t}}}),we=new og({props:{col:"full",height:600,caption:"This is an optional caption for the above chart or media. It can contain HTML code and hyperlinks, and wrap onto multiple lines.",$$slots:{default:[UM]},$$scope:{ctx:t}}}),R=new PA({props:{$$slots:{default:[QM]},$$scope:{ctx:t}}}),se=new Wa({}),Re=new PA({props:{$$slots:{default:[IM]},$$scope:{ctx:t}}});function Ft(xe){t[24](xe)}let qe={threshold:UB,splitscreen:!0,$$slots:{foreground:[SM],background:[TM]},$$scope:{ctx:t}};t[0].chart!==void 0&&(qe.id=t[0].chart),_t=new Hw({props:qe}),zi.push(()=>Fo(_t,"id",Ft)),wt=new Wa({}),He=new PA({props:{$$slots:{default:[kM]},$$scope:{ctx:t}}});let Gt=t[6]&&t[5].district.indicators&&yw(t);return ut=new Wa({}),Et=new PA({props:{$$slots:{default:[VM]},$$scope:{ctx:t}}}),Tt=new jb({}),{c(){Rt(e.$$.fragment),i=dt(),Rt(n.$$.fragment),l=dt(),Rt(u.$$.fragment),f=dt(),Rt(a.$$.fragment),w=dt(),Rt(C.$$.fragment),F=dt(),ve&&ve.c(),E=dt(),Rt(U.$$.fragment),H=dt(),Rt(P.$$.fragment),V=dt(),Rt(j.$$.fragment),Y=dt(),ft&&ft.c(),ee=dt(),Rt(ce.$$.fragment),Qe=dt(),Rt(le.$$.fragment),re=dt(),Rt(we.$$.fragment),Ae=dt(),Rt(R.$$.fragment),ie=dt(),Rt(se.$$.fragment),Be=dt(),Rt(Re.$$.fragment),ht=dt(),Rt(_t.$$.fragment),at=dt(),Rt(wt.$$.fragment),nt=dt(),Rt(He.$$.fragment),tt=dt(),Gt&&Gt.c(),Je=dt(),Rt(ut.$$.fragment),At=dt(),Rt(Et.$$.fragment),qt=dt(),Rt(Tt.$$.fragment)},m(xe,Ge){Ht(e,xe,Ge),Fe(xe,i,Ge),Ht(n,xe,Ge),Fe(xe,l,Ge),Ht(u,xe,Ge),Fe(xe,f,Ge),Ht(a,xe,Ge),Fe(xe,w,Ge),Ht(C,xe,Ge),Fe(xe,F,Ge),ve&&ve.m(xe,Ge),Fe(xe,E,Ge),Ht(U,xe,Ge),Fe(xe,H,Ge),Ht(P,xe,Ge),Fe(xe,V,Ge),Ht(j,xe,Ge),Fe(xe,Y,Ge),ft&&ft.m(xe,Ge),Fe(xe,ee,Ge),Ht(ce,xe,Ge),Fe(xe,Qe,Ge),Ht(le,xe,Ge),Fe(xe,re,Ge),Ht(we,xe,Ge),Fe(xe,Ae,Ge),Ht(R,xe,Ge),Fe(xe,ie,Ge),Ht(se,xe,Ge),Fe(xe,Be,Ge),Ht(Re,xe,Ge),Fe(xe,ht,Ge),Ht(_t,xe,Ge),Fe(xe,at,Ge),Ht(wt,xe,Ge),Fe(xe,nt,Ge),Ht(He,xe,Ge),Fe(xe,tt,Ge),Gt&&Gt.m(xe,Ge),Fe(xe,Je,Ge),Ht(ut,xe,Ge),Fe(xe,At,Ge),Ht(Et,xe,Ge),Fe(xe,qt,Ge),Ht(Tt,xe,Ge),tr=!0},p(xe,Ge){const nr={};Ge[0]&16|Ge[1]&16384&&(nr.$$scope={dirty:Ge,ctx:xe}),e.$set(nr);const mr={};Ge[1]&16384&&(mr.$$scope={dirty:Ge,ctx:xe}),n.$set(mr);const ti={};Ge[1]&16384&&(ti.$$scope={dirty:Ge,ctx:xe}),u.$set(ti);const er={};Ge[1]&16384&&(er.$$scope={dirty:Ge,ctx:xe}),C.$set(er),xe[5].region.indicators?ve?(ve.p(xe,Ge),Ge[0]&32&&Ce(ve,1)):(ve=hw(xe),ve.c(),Ce(ve,1),ve.m(E.parentNode,E)):ve&&(Rr(),De(ve,1,1,()=>{ve=null}),Or());const Vr={};Ge[1]&16384&&(Vr.$$scope={dirty:Ge,ctx:xe}),U.$set(Vr);const bi={};Ge[1]&16384&&(bi.$$scope={dirty:Ge,ctx:xe}),j.$set(bi),xe[5].region.timeseries&&xe[5].region.indicators?ft?(ft.p(xe,Ge),Ge[0]&32&&Ce(ft,1)):(ft=fw(xe),ft.c(),Ce(ft,1),ft.m(ee.parentNode,ee)):ft&&(Rr(),De(ft,1,1,()=>{ft=null}),Or());const Ai={};Ge[1]&16384&&(Ai.$$scope={dirty:Ge,ctx:xe}),le.$set(Ai);const mi={};Ge[0]&65828|Ge[1]&16384&&(mi.$$scope={dirty:Ge,ctx:xe}),we.$set(mi);const oi={};Ge[1]&16384&&(oi.$$scope={dirty:Ge,ctx:xe}),R.$set(oi);const ai={};Ge[1]&16384&&(ai.$$scope={dirty:Ge,ctx:xe}),Re.$set(ai);const fi={};Ge[0]&114038|Ge[1]&16384&&(fi.$$scope={dirty:Ge,ctx:xe}),!Me&&Ge[0]&1&&(Me=!0,fi.id=xe[0].chart,Eo(()=>Me=!1)),_t.$set(fi);const li={};Ge[1]&16384&&(li.$$scope={dirty:Ge,ctx:xe}),He.$set(li),xe[6]&&xe[5].district.indicators?Gt?(Gt.p(xe,Ge),Ge[0]&96&&Ce(Gt,1)):(Gt=yw(xe),Gt.c(),Ce(Gt,1),Gt.m(Je.parentNode,Je)):Gt&&(Rr(),De(Gt,1,1,()=>{Gt=null}),Or());const Ze={};Ge[1]&16384&&(Ze.$$scope={dirty:Ge,ctx:xe}),Et.$set(Ze)},i(xe){tr||(Ce(e.$$.fragment,xe),Ce(n.$$.fragment,xe),Ce(u.$$.fragment,xe),Ce(a.$$.fragment,xe),Ce(C.$$.fragment,xe),Ce(ve),Ce(U.$$.fragment,xe),Ce(P.$$.fragment,xe),Ce(j.$$.fragment,xe),Ce(ft),Ce(ce.$$.fragment,xe),Ce(le.$$.fragment,xe),Ce(we.$$.fragment,xe),Ce(R.$$.fragment,xe),Ce(se.$$.fragment,xe),Ce(Re.$$.fragment,xe),Ce(_t.$$.fragment,xe),Ce(wt.$$.fragment,xe),Ce(He.$$.fragment,xe),Ce(Gt),Ce(ut.$$.fragment,xe),Ce(Et.$$.fragment,xe),Ce(Tt.$$.fragment,xe),tr=!0)},o(xe){De(e.$$.fragment,xe),De(n.$$.fragment,xe),De(u.$$.fragment,xe),De(a.$$.fragment,xe),De(C.$$.fragment,xe),De(ve),De(U.$$.fragment,xe),De(P.$$.fragment,xe),De(j.$$.fragment,xe),De(ft),De(ce.$$.fragment,xe),De(le.$$.fragment,xe),De(we.$$.fragment,xe),De(R.$$.fragment,xe),De(se.$$.fragment,xe),De(Re.$$.fragment,xe),De(_t.$$.fragment,xe),De(wt.$$.fragment,xe),De(He.$$.fragment,xe),De(Gt),De(ut.$$.fragment,xe),De(Et.$$.fragment,xe),De(Tt.$$.fragment,xe),tr=!1},d(xe){Pt(e,xe),xe&&Ee(i),Pt(n,xe),xe&&Ee(l),Pt(u,xe),xe&&Ee(f),Pt(a,xe),xe&&Ee(w),Pt(C,xe),xe&&Ee(F),ve&&ve.d(xe),xe&&Ee(E),Pt(U,xe),xe&&Ee(H),Pt(P,xe),xe&&Ee(V),Pt(j,xe),xe&&Ee(Y),ft&&ft.d(xe),xe&&Ee(ee),Pt(ce,xe),xe&&Ee(Qe),Pt(le,xe),xe&&Ee(re),Pt(we,xe),xe&&Ee(Ae),Pt(R,xe),xe&&Ee(ie),Pt(se,xe),xe&&Ee(Be),Pt(Re,xe),xe&&Ee(ht),Pt(_t,xe),xe&&Ee(at),Pt(wt,xe),xe&&Ee(nt),Pt(He,xe),xe&&Ee(tt),Gt&&Gt.d(xe),xe&&Ee(Je),Pt(ut,xe),xe&&Ee(At),Pt(Et,xe),xe&&Ee(qt),Pt(Tt,xe)}}}let xw="light";const UB=.65,XM="./data/geo_lad2021.json",ZM="https://bothness.github.io/ons-basemaps/data/style-omt.json",bw=(t,e)=>e.pop-t.pop,WM=t=>t/1e6,Cw=(t,e)=>e.pop-t.pop,qM=t=>t/1e6,jM=t=>(t/1e6).toFixed(1),JM=t=>t.toLocaleString(),YM=t=>t.toLocaleString(),Ew=(t,e)=>e.age_med-t.age_med;function $M(t,e,i){let n,l;_l("theme",xw),Kb(xr,xw);let u=Nb(),f={},a={};_a(()=>{a={...f}});const w=["region","district"],C={uk:[[-9,49],[2,61]]};let F={district:{},region:{}},E={district:{},region:{}},U,H=null,P,V,j=[],Y="area",ee=null,ce=null,Qe=null,le="density",re=!1;function we(Je){console.log(Je),i(2,V=Je.detail.id),Je.detail.feature&&ie(V)}function Ae(Je){i(8,P=Je.detail.id)}function R(Je){H&&H.fitBounds(Je,{animate:u,padding:30})}function ie(Je){if(U&&Je){let ut=U.features.find(Et=>Et.properties.AREACD==Je),At=Fp(ut.geometry);R(At)}}const se={map:{map01:()=>{R(C.uk),i(14,le="density"),i(9,j=[]),i(15,re=!1)},map02:()=>{R(C.uk),i(14,le="age_med"),i(9,j=[]),i(15,re=!1)},map03:()=>{let Je=[...F.district.indicators].sort((ut,At)=>At.age_med-ut.age_med)[0];ie(Je.code),i(14,le="age_med"),i(9,j=[Je.code]),i(15,re=!1)},map04:()=>{R(C.uk),i(14,le="age_med"),i(9,j=[]),i(15,re=!0)}},chart:{chart01:()=>{i(10,Y="area"),i(11,ee=null),i(12,ce=null),i(13,Qe=null),i(15,re=!1)},chart02:()=>{i(10,Y="area"),i(11,ee=null),i(12,ce=null),i(13,Qe="pop"),i(15,re=!1)},chart03:()=>{i(10,Y="area"),i(11,ee="density"),i(12,ce=null),i(13,Qe="pop"),i(15,re=!1)},chart04:()=>{i(10,Y="area"),i(11,ee="density"),i(12,ce="parent_name"),i(13,Qe="pop"),i(15,re=!1)},chart05:()=>{i(10,Y="area"),i(11,ee="density"),i(12,ce=null),i(13,Qe="pop"),i(15,re=!0)}}};function Be(Je=[]){Je.forEach(ut=>{f[ut]!=a[ut]&&(se[ut][f[ut]]&&se[ut][f[ut]](),a[ut]=f[ut])})}w.forEach(Je=>{Vb(`./data/data_${Je}.csv`).then(ut=>{let At=ut.map(ve=>({code:ve.code,name:ve.name,parent:ve.parent?ve.parent:null})),Et={};At.forEach(ve=>{Et[ve.code]=ve}),i(1,E[Je].array=At,E),i(1,E[Je].lookup=Et,E);let qt=ut.map((ve,ft)=>({...At[ft],area:ve.area,pop:ve[2020],density:ve.density,age_med:ve.age_med}));Je=="district"&&["density","age_med"].forEach(ve=>{let ft=qt.map(qe=>qe[ve]).sort((qe,Gt)=>qe-Gt),Ft=Zb(ft);qt.forEach((qe,Gt)=>qt[Gt][ve+"_color"]=Xb(qe[ve],Ft,aa.seq))}),i(5,F[Je].indicators=qt,F);let Tt=[2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],tr=[];ut.forEach(ve=>{Tt.forEach(ft=>{tr.push({code:ve.code,name:ve.name,value:ve[ft],year:ft})})}),i(5,F[Je].timeseries=tr,F)})}),Gb(XM,"geog").then(Je=>{Je.features.sort((ut,At)=>ut.properties.AREANM.localeCompare(At.properties.AREANM)),i(6,U=Je)});function Re(Je){u=Je,i(4,u)}function ht(){V=d0(this),i(2,V),i(6,U)}const _t=Je=>({...Je,parent_name:E.region.lookup[Je.parent].name});function Me(Je){t.$$.not_equal(f.chart,Je)&&(f.chart=Je,i(0,f))}function at(){V=d0(this),i(2,V),i(6,U)}const wt=()=>ie(V),nt=Je=>Je.code==P;function He(Je){H=Je,i(7,H)}function tt(Je){t.$$.not_equal(f.map,Je)&&(f.map=Je,i(0,f))}return t.$$.update=()=>{t.$$.dirty[0]&6&&i(3,n=V&&E.district.lookup?E.district.lookup[V].parent:null),t.$$.dirty[0]&10&&i(16,l=E.district.array&&n?E.district.array.filter(Je=>Je.parent==n).map(Je=>Je.code):[]),t.$$.dirty[0]&1&&f&&Be(Object.keys(se))},[f,E,V,n,u,F,U,H,P,j,Y,ee,ce,Qe,le,re,l,C,we,Ae,ie,Re,ht,_t,Me,at,wt,nt,He,tt]}class eD extends Nr{constructor(e){super(),Kr(this,e,$M,GM,Lr,{},null,[-1,-1])}}new eD({target:document.getElementById("app")});
